import{u as Ie,j as e,L as Ne,F as Pe,a as $e,b as De,c as Ce,d as Be,e as Ae,f as Me,g as Re,h as qe,i as Fe,k as Ve,l as Oe,m as Ke,n as We,r as L,o as Ge,R as q,P as Ue,p as Ze,q as He,s as Je,C as Ye,B as Qe,t as Xe,v as es,w as ss,x as ts,y as ne,z as ns}from"./vendor-react-C8dg5fqf.js";import{a as as}from"./vendor-state-zustand-lXLvUOLR.js";import{E as is}from"./vendor-pdf-core-y6jAHrlL.js";import{a as rs}from"./vendor-api-axios-CCb-kr4I.js";import{d as Se}from"./vendor-flow-dagre-BsdAo9gI.js";import{O as Le}from"./vendor-api-openai-zykkslVf.js";import{z as _}from"./vendor-utils-zod-DXqQCM1T.js";import"./@remix-run-CrqJK5sb.js";import"./vendor-d3-R2EO_qSP.js";import"./classcat-RvS1aOr8.js";import"./scheduler-CzFDRTuY.js";import"./vendor-monaco-CEmnK_WH.js";import"./state-local-BBNhjlcY.js";import"./lodash-Bbz3qfAa.js";import"./use-sync-external-store-B_at4Jwv.js";import"./@babel-BsCcpEdk.js";import"./vendor-compression-EnPhvkmS.js";import"./vendor-graph-AX3sTKNp.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const f of r.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function i(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(a){if(a.ep)return;a.ep=!0;const r=i(a);fetch(a.href,r)}})();const ls=[{path:"/",label:"Start",icon:Pe},{path:"/general-settings",label:"Allgemeines",icon:$e},{path:"/pattern-elements",label:"Didaktik",icon:De},{path:"/actors",label:"Akteure",icon:Ce},{path:"/environments",label:"Lernumgebungen",icon:Be},{path:"/shopping-cart",label:"Warenkorb",icon:Ae},{path:"/course-flow",label:"Unterrichtsablauf",icon:Me},{path:"/preview",label:"Vorschau",icon:Re},{path:"/ai-flow-agent",label:"KI Ablauf",icon:qe}];function cs(){const s=Ie();return e.jsx("nav",{className:"bg-white shadow-md",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"flex space-x-4 overflow-x-auto",children:ls.map(({path:t,label:i,icon:l})=>e.jsxs(Ne,{to:t,className:`px-4 py-3 text-sm font-medium whitespace-nowrap flex items-center gap-2 ${s.pathname===t?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-blue-600"}`,children:[e.jsx(l,{className:"w-4 h-4"}),i]},t))})})})}const os={metadata:{title:"",description:"",keywords:[],author:"",version:"1.0"},problem:{problem_description:"",learning_goals:[],didactic_keywords:[]},context:{target_group:"",subject:"",educational_level:"",prerequisites:"",time_frame:""},influence_factors:[],solution:{solution_description:"",didactic_approach:"",didactic_template:{learning_sequences:[]}},consequences:{advantages:[],disadvantages:[]},implementation_notes:[],related_patterns:[],feedback:{comments:[]},sources:[],actors:[],environments:[]},Y=as(s=>({...os,setMetadata:t=>s({metadata:t}),setProblem:t=>s({problem:t}),setContext:t=>s({context:t}),setInfluenceFactors:t=>s({influence_factors:t}),setSolution:t=>s({solution:t}),setConsequences:t=>s({consequences:t}),setImplementationNotes:t=>s({implementation_notes:t}),setRelatedPatterns:t=>s({related_patterns:t}),setFeedback:t=>s({feedback:t}),setSources:t=>s({sources:t}),addActor:t=>s(i=>({actors:[...i.actors,t]})),updateActor:(t,i)=>s(l=>({actors:l.actors.map(a=>a.id===t?{...a,...i}:a)})),removeActor:t=>s(i=>({actors:i.actors.filter(l=>l.id!==t)})),setActors:t=>s({actors:t}),addEnvironment:t=>s(i=>({environments:[...i.environments,t]})),updateEnvironment:(t,i)=>s(l=>({environments:l.environments.map(a=>a.id===t?{...a,...i}:a)})),removeEnvironment:t=>s(i=>({environments:i.environments.filter(l=>l.id!==t)})),setEnvironments:t=>s({environments:t})})),ds=[{id:"A1",name:"Lehrender",type:"Einzelperson",demographic_data:{age:35,gender:"männlich",ethnic_background:"deutsch"},education:{education_level:"Master of Education",class_level:"Sekundarstufe I",subject_focus:"Mathematik, Informatik"},competencies:{subject_competencies:["Mathematik","Informatik"],cognitive_competencies:["Analytisches Denken","Problemlösung"],methodical_competencies:["Differenzierte Unterrichtsgestaltung","Digitale Mediennutzung"],affective_competencies:["Empathie","Geduld"],digital_competencies:["Lernplattformen","Digitale Werkzeuge"],language_skills:{languages:["Deutsch","Englisch"],proficiency_levels:{Deutsch:"C2",Englisch:"B2"}}},social_form:"Lehrkraft",learning_requirements:{learning_preferences:["Praxisorientiert","Digital"],special_needs:[],technical_requirements:["Computer","Präsentationssystem"]},interests_and_goals:{interests:["Digitale Bildung","Inklusive Pädagogik"],goals:["Förderung individueller Lernwege","Integration digitaler Medien"],motivation:{type:"intrinsic",level:"high"}},social_structure:{group_size:1,heterogeneity:"n/a"}},{id:"A2",name:"Hauptlerngruppe",type:"Gruppe",demographic_data:{age_range:"14-15",gender_distribution:"gemischt",ethnic_background:"diverse"},education:{education_level:"Sekundarstufe I",class_level:"9. Klasse",subject_focus:"Mathematik"},competencies:{subject_competencies:["Grundrechenarten","Algebra Grundlagen"],cognitive_competencies:["Logisches Denken","Abstraktion"],methodical_competencies:["Gruppenarbeit","Selbstorganisation"],affective_competencies:["Teamfähigkeit"],digital_competencies:["Grundlegende PC-Kenntnisse"],language_skills:{languages:["Deutsch"],proficiency_levels:{Deutsch:"C1"}}},social_form:"Klassenverband",learning_requirements:{learning_preferences:["Praktische Übungen","Visuelle Darstellungen"],special_needs:[],technical_requirements:["Taschenrechner"]},interests_and_goals:{interests:["Mathematik","Digitale Medien"],goals:["Verständnis der Addition","Problemlösekompetenz"],motivation:{type:"mixed",level:"medium"}},social_structure:{group_size:20,heterogeneity:"mittel"}},{id:"A3",name:"Sprachfördergruppe",type:"Gruppe",demographic_data:{age_range:"14-15",gender_distribution:"gemischt",ethnic_background:"diverse"},education:{education_level:"Sekundarstufe I",class_level:"9. Klasse",subject_focus:"Mathematik"},competencies:{subject_competencies:["Grundrechenarten"],cognitive_competencies:["Logisches Denken"],methodical_competencies:["Visualisierung"],affective_competencies:["Teamfähigkeit"],digital_competencies:["Grundlegende PC-Kenntnisse"],language_skills:{languages:["Deutsch"],proficiency_levels:{Deutsch:"B1"}}},social_form:"Fördergruppe",learning_requirements:{learning_preferences:["Visuelle Unterstützung","Sprachliche Hilfen"],special_needs:["Sprachförderung"],technical_requirements:["Taschenrechner"]},interests_and_goals:{interests:["Mathematik"],goals:["Sprachkompetenz","Mathematisches Verständnis"],motivation:{type:"mixed",level:"medium"}},social_structure:{group_size:8,heterogeneity:"hoch"}}],ms=[{id:"ENV1",name:"Mathematik-Klassenraum",description:"Klassenraum mit digitaler und analoger Ausstattung für Mathematikunterricht",materials:[{id:"ENV1-M1",name:"Arbeitsblätter Addition",material_type:"Arbeitsblatt",source:"manual",access_link:"materials/addition_standard.pdf"},{id:"ENV1-M2",name:"Visualisierungskarten",material_type:"Bildkarten",source:"manual",access_link:"materials/visual_cards.pdf"},{id:"ENV1-M3",name:"Mehrsprachiges Mathe-Glossar",material_type:"Glossar",source:"manual",access_link:"materials/math_glossary.pdf"},{id:"ENV1-M4",name:"Interaktive Übungen",material_type:"Digitales Lernmaterial",source:"manual",access_link:"https://example.com/math-exercises"}],tools:[{id:"ENV1-T1",name:"Dokumentenkamera",tool_type:"Hardware",source:"manual",access_link:""},{id:"ENV1-T2",name:"Taschenrechner",tool_type:"Hardware",source:"manual",access_link:""},{id:"ENV1-T3",name:"Mathematik-App",tool_type:"Software",source:"manual",access_link:"apps/math_trainer"},{id:"ENV1-T4",name:"Digitales Whiteboard",tool_type:"Hardware",source:"manual",access_link:""}],services:[{id:"ENV1-S1",name:"Sprachunterstützung",service_type:"Förderung",source:"manual",access_link:""},{id:"ENV1-S2",name:"Mathematische Förderung",service_type:"Förderung",source:"manual",access_link:""},{id:"ENV1-S3",name:"Online-Lernplattform",service_type:"Digital",source:"manual",access_link:"https://example.com/platform"}]}],J={metadata:{title:"Addition für alle – inklusive Mathematik",description:"Ein inklusives Lernobjekt zur Förderung der Additionsfähigkeiten und Sprachkompetenzen bei Schülern der 9. Klasse",keywords:["Addition","Mathematik","Inklusion","Sprachförderung","Differenzierung"],author:"Jan Schachtschabel",version:"1.0"},problem:{problem_description:"Schüler mit unterschiedlichen sprachlichen Voraussetzungen sollen die Bedeutung und Anwendung der Addition verstehen und ihre mathematischen sowie sprachlichen Kompetenzen entwickeln.",learning_goals:["Verständnis der Grundlagen der Addition","Anwendung der Addition in verschiedenen Kontexten","Förderung der sprachlichen Kompetenzen","Entwicklung von Problemlösefähigkeiten"],didactic_keywords:["Differenzierung","Inklusion","Sprachsensibler Fachunterricht","Digitale Medien"]},context:{target_group:"Schüler der 9. Klasse mit heterogenen Sprachkenntnissen",subject:"Mathematik",educational_level:"Sekundarstufe I",prerequisites:"Grundlegende Deutschkenntnisse, Zahlenverständnis",time_frame:"45 Minuten"},influence_factors:[{factor:"Sprachliche Heterogenität",description:"Unterschiedliche Deutschkenntnisse erfordern differenzierte sprachliche Unterstützung"},{factor:"Digitale Kompetenzen",description:"Verschiedene Erfahrungsniveaus mit digitalen Werkzeugen"},{factor:"Lernmotivation",description:"Unterschiedliche Motivationslagen und Interessensbereiche"}],solution:{solution_description:"Implementierung eines differenzierten, sprachsensiblen Mathematikunterrichts mit digitaler Unterstützung",didactic_approach:"Handlungsorientiertes und entdeckendes Lernen mit digitaler und sprachlicher Unterstützung",didactic_template:{learning_sequences:[{sequence_id:"LS1",sequence_name:"Einführung in die Addition",time_frame:"45 Minuten",learning_goal:"Grundlegendes Verständnis der Addition und ihrer sprachlichen Darstellung",phases:[{phase_id:"LS1-P1",phase_name:"Aktivierung",time_frame:"10 Minuten",learning_goal:"Vorwissen aktivieren und Interesse wecken",activities:[{activity_id:"LS1-P1-A1",name:"Zahlenspiel",description:"Spielerische Einführung mit visuellen Elementen",duration:10,goal:"Spielerisches Aufwärmen und Aktivierung des Vorwissens",prerequisite_activity:null,transition_type:"sequential",condition_description:null,next_activity:["LS1-P2-A1"],assessment:{type:"formative",methods:["Beobachtung"],criteria:["Aktive Teilnahme","Grundverständnis"]},roles:[{role_id:"LS1-P1-A1-R1",role_name:"Moderator",actor_id:"A1",task_description:"Leitet das Zahlenspiel und stellt gezielte Fragen",learning_environment:{environment_id:"ENV1",selected_materials:["ENV1-M2"],selected_tools:["ENV1-T1","ENV1-T4"],selected_services:[]}},{role_id:"LS1-P1-A1-R2",role_name:"Teilnehmer Hauptgruppe",actor_id:"A2",task_description:"Aktive Teilnahme am Zahlenspiel",learning_environment:{environment_id:"ENV1",selected_materials:["ENV1-M2"],selected_tools:[],selected_services:[]}},{role_id:"LS1-P1-A1-R3",role_name:"Teilnehmer Sprachförderung",actor_id:"A3",task_description:"Teilnahme am Zahlenspiel mit sprachlicher Unterstützung",learning_environment:{environment_id:"ENV1",selected_materials:["ENV1-M2","ENV1-M3"],selected_tools:[],selected_services:["ENV1-S1"]}}]}],prerequisite_phase:null,transition_type:"sequential",condition_description:null,next_phase:"LS1-P2"},{phase_id:"LS1-P2",phase_name:"Erarbeitung",time_frame:"20 Minuten",learning_goal:"Selbstständige Erarbeitung der Additionsregeln",activities:[{activity_id:"LS1-P2-A1",name:"Regelentdeckung",description:"Entdeckung der Additionsregeln anhand von Beispielen",duration:10,goal:"Selbstständige Erarbeitung der Additionsregeln",prerequisite_activity:"LS1-P1-A1",transition_type:"parallel",condition_description:null,next_activity:["LS1-P2-A2"],assessment:{type:"formative",methods:["Peer-Feedback","Selbstreflexion"],criteria:["Regelverständnis","Zusammenarbeit"]},roles:[{role_id:"LS1-P2-A1-R1",role_name:"Lernbegleiter",actor_id:"A1",task_description:"Unterstützt den Entdeckungsprozess und gibt Hilfestellung",learning_environment:{environment_id:"ENV1",selected_materials:["ENV1-M1","ENV1-M2","ENV1-M3"],selected_tools:["ENV1-T1","ENV1-T4"],selected_services:["ENV1-S1","ENV1-S2"]}},{role_id:"LS1-P2-A1-R2",role_name:"Entdecker Hauptgruppe",actor_id:"A2",task_description:"Erarbeitet die Regeln in Partnerarbeit",learning_environment:{environment_id:"ENV1",selected_materials:["ENV1-M1","ENV1-M4"],selected_tools:["ENV1-T2","ENV1-T3"],selected_services:["ENV1-S3"]}},{role_id:"LS1-P2-A1-R3",role_name:"Entdecker Sprachförderung",actor_id:"A3",task_description:"Erarbeitet die Regeln mit sprachlicher Unterstützung",learning_environment:{environment_id:"ENV1",selected_materials:["ENV1-M1","ENV1-M3","ENV1-M4"],selected_tools:["ENV1-T2","ENV1-T3"],selected_services:["ENV1-S1","ENV1-S2","ENV1-S3"]}}]},{activity_id:"LS1-P2-A2",name:"Übungsphase",description:"Anwendung der entdeckten Regeln",duration:10,goal:"Festigung der Additionsregeln durch Übung",prerequisite_activity:"LS1-P2-A1",transition_type:"branching",condition_description:"Basierend auf Lernerfolg: Zusatzaufgaben oder Wiederholung",next_activity:["LS1-P3-A1"],is_optional:!1,repeat_until:"80% der Aufgaben korrekt gelöst",assessment:{type:"formative",methods:["Selbstkontrolle","Automatische Auswertung"],criteria:["Korrektheit","Lösungsweg"]},roles:[{role_id:"LS1-P2-A2-R1",role_name:"Lernbegleiter",actor_id:"A1",task_description:"Beobachtet und unterstützt bei Bedarf",learning_environment:{environment_id:"ENV1",selected_materials:["ENV1-M1"],selected_tools:["ENV1-T4"],selected_services:["ENV1-S2"]}},{role_id:"LS1-P2-A2-R2",role_name:"Übende Hauptgruppe",actor_id:"A2",task_description:"Bearbeitet Übungsaufgaben selbstständig",learning_environment:{environment_id:"ENV1",selected_materials:["ENV1-M1","ENV1-M4"],selected_tools:["ENV1-T2","ENV1-T3"],selected_services:["ENV1-S3"]}},{role_id:"LS1-P2-A2-R3",role_name:"Übende Sprachförderung",actor_id:"A3",task_description:"Bearbeitet sprachsensible Übungsaufgaben",learning_environment:{environment_id:"ENV1",selected_materials:["ENV1-M1","ENV1-M3","ENV1-M4"],selected_tools:["ENV1-T2","ENV1-T3"],selected_services:["ENV1-S1","ENV1-S2","ENV1-S3"]}}]}],prerequisite_phase:"LS1-P1",transition_type:"sequential",condition_description:null,next_phase:"LS1-P3"},{phase_id:"LS1-P3",phase_name:"Sicherung",time_frame:"15 Minuten",learning_goal:"Gemeinsame Reflexion und Sicherung der Erkenntnisse",activities:[{activity_id:"LS1-P3-A1",name:"Präsentation und Diskussion",description:"Vorstellen der Erkenntnisse und gemeinsame Diskussion",duration:15,goal:"Gemeinsames Verständnis der Additionsregeln",prerequisite_activity:"LS1-P2-A2",transition_type:"feedback_loops",condition_description:"Bei Bedarf Rückkehr zu einzelnen Konzepten",next_activity:[],assessment:{type:"summative",methods:["Präsentation","Diskussionsbeteiligung"],criteria:["Verständnis","Kommunikationsfähigkeit"]},roles:[{role_id:"LS1-P3-A1-R1",role_name:"Moderator",actor_id:"A1",task_description:"Moderiert die Diskussion und fasst Ergebnisse zusammen",learning_environment:{environment_id:"ENV1",selected_materials:["ENV1-M2"],selected_tools:["ENV1-T1","ENV1-T4"],selected_services:[]}},{role_id:"LS1-P3-A1-R2",role_name:"Präsentierende Hauptgruppe",actor_id:"A2",task_description:"Stellt Erkenntnisse vor und beteiligt sich an Diskussion",learning_environment:{environment_id:"ENV1",selected_materials:["ENV1-M1","ENV1-M2"],selected_tools:["ENV1-T4"],selected_services:[]}},{role_id:"LS1-P3-A1-R3",role_name:"Präsentierende Sprachförderung",actor_id:"A3",task_description:"Stellt Erkenntnisse mit Visualisierungen vor",learning_environment:{environment_id:"ENV1",selected_materials:["ENV1-M2","ENV1-M3"],selected_tools:["ENV1-T4"],selected_services:["ENV1-S1"]}}]}],prerequisite_phase:"LS1-P2",transition_type:"sequential",condition_description:null,next_phase:null}],prerequisite_learningsequences:[],transition_type:"sequential",condition_description:null,next_learningsequence:[]}]}},consequences:{advantages:["Individuelle Förderung durch differenzierte Materialien","Integration von Sprach- und Fachlernen","Aktive Beteiligung aller Schüler","Flexible Anpassung an verschiedene Lerngeschwindigkeiten"],disadvantages:["Hoher Vorbereitungsaufwand","Komplexe Materialerstellung","Herausforderung bei der Koordination verschiedener Gruppen"]},implementation_notes:[{note_id:"Note1",description:"Materialien vorab mehrsprachig aufbereiten"},{note_id:"Note2",description:"Technische Ausstattung vor Unterrichtsbeginn prüfen"},{note_id:"Note3",description:"Klare Signale für Phasenwechsel vereinbaren"}],related_patterns:["Sprachsensibler Fachunterricht","Digitale Lernbegleitung","Kooperatives Lernen","Individualisiertes Lernen"],feedback:{comments:[{date:"2024-03-14",name:"Dr. Schmidt",comment:"Sehr gut strukturiertes Konzept mit durchdachter Differenzierung"},{date:"2024-03-15",name:"Prof. Meyer",comment:"Gelungene Integration von Sprach- und Fachlernen"}]},sources:[{source_id:"S1",title:"Sprachsensibler Fachunterricht",author:"Josef Leisen",year:2019,publisher:"Klett-Kallmeyer",url:"https://example.com/sprachsensibler-fachunterricht"},{source_id:"S2",title:"Digitale Medien im inklusiven Mathematikunterricht",author:"Maria Weber",year:2023,publisher:"Bildungsverlag",url:"https://example.com/digitale-medien-mathe"}],actors:ds,environments:ms};async function us(s){var o,c,b,m,p,n,u,w,S,T,F,B;const t=new is;let i=20;const l=x=>{i>t.internal.pageSize.height-30&&(t.addPage(),i=20),t.setFontSize(16),t.setFont("helvetica","bold"),t.text(x,20,i),i+=10,t.setFontSize(12),t.setFont("helvetica","normal")},a=(x,C=0)=>{if(!x)return;const I=t.splitTextToSize(x,170-C);i+I.length*7>t.internal.pageSize.height-20&&(t.addPage(),i=20),t.text(I,20+C,i),i+=I.length*7},r=(x,C=0,I)=>{if(!x)return;const O=C*5;i>t.internal.pageSize.height-20&&(t.addPage(),i=20);const z=C===0?"•":"-";if(t.text(z,20+O,i),I)t.getTextWidth(x),t.setTextColor(0,0,255),t.textWithLink(x,25+O,i,{url:I}),t.setTextColor(0,0,0);else{const W=t.splitTextToSize(x,165-O);t.text(W,25+O,i)}i+=7};t.setFontSize(24),t.setFont("helvetica","bold"),t.text(s.metadata.title||"Didaktisches Template",20,40,{maxWidth:170}),t.setFontSize(14),t.setFont("helvetica","normal"),t.text(`Autor: ${s.metadata.author||"Unbekannt"}`,20,60),t.text(`Version: ${s.metadata.version||"1.0"}`,20,70),t.setFontSize(12);const f=t.splitTextToSize(s.metadata.description||"",170);t.text(f,20,90),((o=s.metadata.keywords)==null?void 0:o.length)>0&&(i=110,a("Schlüsselwörter: "+s.metadata.keywords.join(", "))),t.addPage(),i=20,l("Didaktische Grundlagen"),a("Problem:",0),a(s.problem.problem_description,5),((c=s.problem.learning_goals)==null?void 0:c.length)>0&&(i+=5,a("Lernziele:",5),s.problem.learning_goals.forEach(x=>r(x,2))),((b=s.problem.didactic_keywords)==null?void 0:b.length)>0&&(i+=5,a("Didaktische Schlüsselwörter:",5),a(s.problem.didactic_keywords.join(", "),10)),i+=10,a("Kontext:",0),a(`Zielgruppe: ${s.context.target_group}`,5),a(`Fach: ${s.context.subject}`,5),a(`Bildungsstufe: ${s.context.educational_level}`,5),a(`Voraussetzungen: ${s.context.prerequisites}`,5),a(`Zeitrahmen: ${s.context.time_frame}`,5),i+=10,((m=s.influence_factors)==null?void 0:m.length)>0&&(a("Einflussfaktoren:",0),s.influence_factors.forEach(x=>{a(`${x.factor}:`,5),a(x.description,10)}),i+=10),a("Lösung:",0),a(s.solution.solution_description,5),a(`Didaktischer Ansatz: ${s.solution.didactic_approach}`,5),i+=10,a("Konsequenzen:",0),((p=s.consequences.advantages)==null?void 0:p.length)>0&&(a("Vorteile:",5),s.consequences.advantages.forEach(x=>r(x,2))),((n=s.consequences.disadvantages)==null?void 0:n.length)>0&&(a("Nachteile:",5),s.consequences.disadvantages.forEach(x=>r(x,2))),((u=s.implementation_notes)==null?void 0:u.length)>0&&(i+=10,a("Umsetzungshinweise:",0),s.implementation_notes.forEach(x=>r(x.description,1))),((w=s.related_patterns)==null?void 0:w.length)>0&&(i+=10,a("Verwandte Muster:",0),a(s.related_patterns.join(", "),5)),t.addPage(),i=20,l("Akteure"),((S=s.actors)==null?void 0:S.length)>0&&s.actors.forEach(x=>{a(`${x.name} (${x.type})`),x.type==="Gruppe"?(a("Demografische Daten:",5),a(`Altersbereich: ${x.demographic_data.age_range||"Nicht angegeben"}`,10),a(`Geschlechterverteilung: ${x.demographic_data.gender_distribution||"Nicht angegeben"}`,10)):(a("Demografische Daten:",5),a(`Alter: ${x.demographic_data.age||"Nicht angegeben"}`,10),a(`Geschlecht: ${x.demographic_data.gender||"Nicht angegeben"}`,10)),a(`Ethnischer Hintergrund: ${x.demographic_data.ethnic_background}`,10),a("Bildung:",5),a(`Bildung: ${x.education.education_level}`,5),a(`Klassenstufe: ${x.education.class_level}`,5),a(`Fachlicher Fokus: ${x.education.subject_focus}`,5),a("Kompetenzen:",5),x.competencies.subject_competencies.length>0&&(a("Fachkompetenzen:",10),x.competencies.subject_competencies.forEach(C=>r(C,3))),x.competencies.cognitive_competencies.length>0&&(a("Kognitive Kompetenzen:",10),x.competencies.cognitive_competencies.forEach(C=>r(C,3))),x.competencies.methodical_competencies.length>0&&(a("Methodische Kompetenzen:",10),x.competencies.methodical_competencies.forEach(C=>r(C,3))),x.competencies.affective_competencies.length>0&&(a("Affektive Kompetenzen:",10),x.competencies.affective_competencies.forEach(C=>r(C,3))),x.competencies.digital_competencies.length>0&&(a("Digitale Kompetenzen:",10),x.competencies.digital_competencies.forEach(C=>r(C,3))),x.competencies.language_skills.languages.length>0&&(a("Sprachkenntnisse:",5),x.competencies.language_skills.languages.forEach(C=>{const I=x.competencies.language_skills.proficiency_levels[C];a(`${C}: ${I}`,10)})),a("Lernanforderungen:",5),x.learning_requirements.learning_preferences.length>0&&(a("Lernpräferenzen:",5),a(x.learning_requirements.learning_preferences.join(", "),10)),x.learning_requirements.special_needs.length>0&&(a("Besondere Bedürfnisse:",10),x.learning_requirements.special_needs.forEach(C=>r(C,3))),x.learning_requirements.technical_requirements.length>0&&(a("Technische Anforderungen:",10),x.learning_requirements.technical_requirements.forEach(C=>r(C,3))),a("Interessen und Ziele:",5),x.interests_and_goals.interests.length>0&&(a("Interessen:",10),x.interests_and_goals.interests.forEach(C=>r(C,3))),x.interests_and_goals.goals.length>0&&(a("Ziele:",10),x.interests_and_goals.goals.forEach(C=>r(C,3))),a("Motivation:",10),a(`Typ: ${x.interests_and_goals.motivation.type}`,12),a(`Level: ${x.interests_and_goals.motivation.level}`,12),a("Sozialstruktur:",5),a(`Gruppengröße: ${x.social_structure.group_size}`,10),a(`Heterogenität: ${x.social_structure.heterogeneity}`,10),i+=10}),t.addPage(),i=20,l("Lernumgebungen"),((T=s.environments)==null?void 0:T.length)>0&&s.environments.forEach(x=>{var C,I,O;a(x.name),x.description&&a(x.description,5),((C=x.materials)==null?void 0:C.length)>0&&(a("Lernressourcen:",5),x.materials.forEach(z=>{var W,$;r(`${z.name} (${z.material_type})`,2,z.access_link),Array.isArray(z.wlo_metadata)?(a("WLO Ressourcen:",8),z.wlo_metadata.forEach(V=>{V.title&&V.wwwUrl&&r(V.title,3,V.wwwUrl)})):(W=z.wlo_metadata)!=null&&W.title&&(($=z.wlo_metadata)!=null&&$.wwwUrl)&&(a("WLO Ressourcen:",8),r(z.wlo_metadata.title,3,z.wlo_metadata.wwwUrl))})),((I=x.tools)==null?void 0:I.length)>0&&(a("Werkzeuge:",5),x.tools.forEach(z=>{var W,$;r(`${z.name} (${z.tool_type})`,2,z.access_link),Array.isArray(z.wlo_metadata)?(a("WLO Ressourcen:",8),z.wlo_metadata.forEach(V=>{V.title&&V.wwwUrl&&r(V.title,3,V.wwwUrl)})):(W=z.wlo_metadata)!=null&&W.title&&(($=z.wlo_metadata)!=null&&$.wwwUrl)&&(a("WLO Ressourcen:",8),r(z.wlo_metadata.title,3,z.wlo_metadata.wwwUrl))})),((O=x.services)==null?void 0:O.length)>0&&(a("Dienste:",5),x.services.forEach(z=>{var W,$;r(`${z.name} (${z.service_type})`,2,z.access_link),Array.isArray(z.wlo_metadata)?(a("WLO Ressourcen:",8),z.wlo_metadata.forEach(V=>{V.title&&V.wwwUrl&&r(V.title,3,V.wwwUrl)})):(W=z.wlo_metadata)!=null&&W.title&&(($=z.wlo_metadata)!=null&&$.wwwUrl)&&(a("WLO Ressourcen:",8),r(z.wlo_metadata.title,3,z.wlo_metadata.wwwUrl))})),i+=15}),t.addPage(),i=20,l("Unterrichtsablauf");const v=((B=(F=s.solution)==null?void 0:F.didactic_template)==null?void 0:B.learning_sequences)||[];if(!v.length){a("Keine Lernsequenzen verfügbar."),t.save(`${s.metadata.title||"didaktisches-template"}.pdf`);return}const d=["Aktivitätsdetails",...s.actors.map(x=>x.name||"Unbenannter Akteur")],g=(t.internal.pageSize.width-40)/d.length,j=[];v.forEach(x=>{var C;j.push([{content:`${x.sequence_name||x.sequence_id}
Zeit: ${x.time_frame}`,colSpan:d.length,styles:{fillColor:[240,247,255]}}]),(C=x.phases)==null||C.forEach(I=>{var O;j.push([{content:`${I.phase_name||I.phase_id}
Zeit: ${I.time_frame}`,colSpan:d.length,styles:{fillColor:[240,250,245]}}]),(O=I.activities)==null||O.forEach(z=>{const W=[`${z.name||z.activity_id}
${z.description}
Dauer: ${z.duration} min`],$=s.actors.map(V=>{var k;const h=((k=z.roles)==null?void 0:k.filter(y=>y.actor_id===V.id))||[];return h.length===0?"":h.map(y=>{var Z,Q,se;let E=`${y.role_name||"Unbenannte Rolle"}
${y.task_description||""}`;if(y.learning_environment){const H=s.environments.find(A=>{var R;return A.id===((R=y.learning_environment)==null?void 0:R.environment_id)});if(H){E+=`

Lernumgebung: ${H.name}`;const A=(Z=y.learning_environment.selected_materials)==null?void 0:Z.map(P=>H.materials.find(K=>K.id===P)).filter(P=>P&&P.source==="manual");A!=null&&A.length&&(E+=`

Materialien:`,A.forEach(P=>{P&&(E+=`
• ${P.name}`)}));const R=(Q=y.learning_environment.selected_tools)==null?void 0:Q.map(P=>H.tools.find(K=>K.id===P)).filter(P=>P&&P.source==="manual");R!=null&&R.length&&(E+=`

Werkzeuge:`,R.forEach(P=>{P&&(E+=`
• ${P.name}`)}));const X=(se=y.learning_environment.selected_services)==null?void 0:se.map(P=>H.services.find(K=>K.id===P)).filter(P=>P&&P.source==="manual");X!=null&&X.length&&(E+=`

Dienste:`,X.forEach(P=>{P&&(E+=`
• ${P.name}`)}))}}return E}).join(`

`)});j.push([...W,...$])})})}),t.autoTable({head:[d],body:j,startY:i+10,styles:{fontSize:10,cellPadding:5,overflow:"linebreak",lineColor:[200,200,200]},columnStyles:{0:{cellWidth:g},...Object.fromEntries(Array(s.actors.length).fill(0).map((x,C)=>[C+1,{cellWidth:g,minCellWidth:g}]))},didDrawPage:x=>{x.pageCount>1&&(t.setFontSize(10),t.text("Unterrichtsablauf (Fortsetzung)",20,20)),i=x.cursor.y+10}}),t.save(`${s.metadata.title||"didaktisches-template"}.pdf`)}function ae(){const s=Y(),t=()=>{const f={metadata:s.metadata,problem:s.problem,context:s.context,influence_factors:s.influence_factors,solution:s.solution,consequences:s.consequences,implementation_notes:s.implementation_notes,related_patterns:s.related_patterns,feedback:s.feedback,sources:s.sources,actors:s.actors,environments:s.environments},v=new Blob([JSON.stringify(f,null,2)],{type:"application/json"}),d=URL.createObjectURL(v),N=document.createElement("a");N.href=d,N.download=`${f.metadata.title||"template"}.json`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(d)},i=f=>{var N;const v=(N=f.target.files)==null?void 0:N[0];if(!v)return;const d=new FileReader;d.onload=g=>{var j;try{const o=(j=g.target)==null?void 0:j.result,c=JSON.parse(o);c.metadata&&s.setMetadata(c.metadata),c.problem&&s.setProblem(c.problem),c.context&&s.setContext(c.context),c.influence_factors&&s.setInfluenceFactors(c.influence_factors),c.solution&&s.setSolution(c.solution),c.consequences&&s.setConsequences(c.consequences),c.implementation_notes&&s.setImplementationNotes(c.implementation_notes),c.related_patterns&&s.setRelatedPatterns(c.related_patterns),c.feedback&&s.setFeedback(c.feedback),c.sources&&s.setSources(c.sources),c.actors&&s.setActors(c.actors),c.environments&&s.setEnvironments(c.environments)}catch(o){console.error("Error loading template:",o),alert("Fehler beim Laden der Vorlage")}},d.readAsText(v)},l=()=>{confirm("Möchten Sie das Beispiel-Template laden? Aktuelle Änderungen gehen verloren.")&&(s.setMetadata(J.metadata),s.setProblem(J.problem),s.setContext(J.context),s.setInfluenceFactors(J.influence_factors),s.setSolution(J.solution),s.setConsequences(J.consequences),s.setImplementationNotes(J.implementation_notes),s.setRelatedPatterns(J.related_patterns),s.setFeedback(J.feedback),s.setSources(J.sources),s.setActors(J.actors),s.setEnvironments(J.environments))},a=()=>{confirm("Möchten Sie wirklich alle Daten löschen?")&&(s.setMetadata({title:"",description:"",keywords:[],author:"",version:"1.0"}),s.setProblem({problem_description:"",learning_goals:[],didactic_keywords:[]}),s.setContext({target_group:"",subject:"",educational_level:"",prerequisites:"",time_frame:""}),s.setInfluenceFactors([]),s.setSolution({solution_description:"",didactic_approach:"",didactic_template:{learning_sequences:[]}}),s.setConsequences({advantages:[],disadvantages:[]}),s.setImplementationNotes([]),s.setRelatedPatterns([]),s.setFeedback({comments:[]}),s.setSources([]),s.setActors([]),s.setEnvironments([]))},r=async()=>{try{await us(s)}catch(f){console.error("Error generating PDF:",f),alert("Fehler bei der PDF-Generierung. Bitte versuchen Sie es erneut.")}};return e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("label",{className:"px-3 py-2 bg-green-500 text-white rounded hover:bg-green-600 cursor-pointer flex items-center gap-1 text-sm",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Template laden",e.jsx("input",{type:"file",accept:".json",onChange:i,className:"hidden"})]}),e.jsxs("button",{onClick:t,className:"px-3 py-2 bg-green-500 text-white rounded hover:bg-green-600 flex items-center gap-1 text-sm",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Template speichern"]}),e.jsxs("button",{onClick:r,className:"px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 flex items-center gap-1 text-sm",children:[e.jsx(Oe,{className:"w-4 h-4"}),"PDF generieren"]}),e.jsxs("button",{onClick:l,className:"px-3 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 flex items-center gap-1 text-sm",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Beispiel laden"]}),e.jsxs(Ne,{to:"/community",className:"px-3 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 flex items-center gap-1 text-sm",children:[e.jsx(Ce,{className:"w-4 h-4"}),"Community"]}),e.jsxs("button",{onClick:a,className:"px-3 py-2 bg-red-500 text-white rounded hover:bg-red-600 flex items-center gap-1 text-sm",children:[e.jsx(We,{className:"w-4 h-4"}),"Einträge löschen"]})]})}function hs(){return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"mb-6 bg-gradient-to-r from-blue-50 to-indigo-50 p-8 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-blue-900",children:"Unterrichtsabläufe"}),e.jsx(ae,{})]}),e.jsx("p",{className:"text-lg text-blue-800",children:"Erstellen Sie professionelle didaktische Templates mit KI-Unterstützung und direkter Integration von Bildungsressourcen aus der WLO-Datenbank."})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-purple-900",children:"Was ist der KI Assistent für Unterrichtsabläufe?"}),e.jsx("p",{className:"text-purple-800",children:"Ein intelligentes Werkzeug zur Erstellung strukturierter Unterrichtsabläufe. Kombinieren Sie didaktische Entwurfsmuster mit passenden Bildungsressourcen und erstellen Sie wiederverwendbare Templates für Ihren Unterricht. Laden Sie praxiserprobte Vorlagen aus der Community, um diese für Ihre Zwecke anzupassen."})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-green-900",children:"Ihre Vorteile"}),e.jsxs("ul",{className:"space-y-2 text-green-800",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"text-emerald-500 mr-2",children:"✓"}),"Strukturierte Unterrichtsplanung"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"text-emerald-500 mr-2",children:"✓"}),"KI-gestützte Optimierung"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"text-emerald-500 mr-2",children:"✓"}),"Integration von WLO-Ressourcen"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"text-emerald-500 mr-2",children:"✓"}),"Flexible Anpassungsmöglichkeiten"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-amber-900",children:"Empfohlener Workflow"}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-lg font-medium text-amber-700",children:"1. Grundlagen definieren"}),e.jsx("p",{className:"text-amber-800",children:"Beginnen Sie mit der Beschreibung und Didaktik. Definieren Sie Probleme, Ziele und Kontext."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-lg font-medium text-amber-700",children:"2. Struktur aufbauen"}),e.jsx("p",{className:"text-amber-800",children:"Legen Sie Akteure, Lernumgebungen und Ressourcen fest. Gestalten Sie den Unterrichtsablauf."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-lg font-medium text-amber-700",children:"3. Optimieren & Erweitern"}),e.jsx("p",{className:"text-amber-800",children:"Nutzen Sie die KI-Funktionen und WLO-Integration für optimale Ergebnisse."})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-cyan-50 to-teal-50 p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-cyan-900",children:"Hilfreiche Tipps"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2 text-cyan-800",children:"Bearbeiten Sie die Tabs von links nach rechts:"}),e.jsxs("ul",{className:"space-y-2 text-cyan-700 list-disc list-inside",children:[e.jsx("li",{children:"Allgemeines - Grundlegende Informationen"}),e.jsx("li",{children:"Didaktik - Didaktische Struktur"}),e.jsx("li",{children:"Akteure - Beteiligte Personen/Gruppen"}),e.jsx("li",{children:"Lernumgebungen - Ressourcen & Werkzeuge"}),e.jsx("li",{children:"Unterrichtsablauf - Detaillierte Planung"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-2 text-cyan-800",children:"Zusätzliche Funktionen:"}),e.jsxs("ul",{className:"space-y-2 text-cyan-700 list-disc list-inside",children:[e.jsx("li",{children:"Vorschau - Visualisierung des Templates"}),e.jsx("li",{children:"KI Ablauf - Automatische Optimierung"}),e.jsx("li",{children:"KI Filter - Intelligente Ressourcensuche"}),e.jsx("li",{children:"WLO Inhalte - Integration von Bildungsressourcen"})]})]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Ne,{to:"/general-settings",className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 font-medium text-lg shadow-lg transform transition hover:scale-105",children:"Jetzt starten"})})]})}const gs={title:"",description:"",keywords:[],author:"",version:"1.0"};function ps(){const{metadata:s=gs,setMetadata:t}=Y(),i=l=>{t({...s,keywords:l.target.value.split(",").map(a=>a.trim())})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Allgemeines"}),e.jsx(ae,{})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg shadow-sm mb-8",children:e.jsx("p",{className:"text-blue-800",children:"Hier können Sie die allgemeinen Informationen Ihres didaktischen Templates festlegen. Diese Metadaten helfen bei der Organisation und dem Auffinden des Templates."})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Titel"}),e.jsx("input",{type:"text",value:s.title,onChange:l=>t({...s,title:l.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Geben Sie einen aussagekräftigen Titel ein"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Beschreibung"}),e.jsx("textarea",{value:s.description,onChange:l=>t({...s,description:l.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Beschreiben Sie das Template und seine Ziele"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Schlüsselwörter (durch Komma getrennt)"}),e.jsx("input",{type:"text",value:s.keywords.join(", "),onChange:i,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"z.B. Mathematik, Inklusion, Differenzierung"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Autor"}),e.jsx("input",{type:"text",value:s.author,onChange:l=>t({...s,author:l.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Name oder Institution"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Version"}),e.jsx("input",{type:"text",value:s.version,onChange:l=>t({...s,version:l.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"z.B. 1.0"})]})]})})]})}const bs={problem_description:"",learning_goals:[],didactic_keywords:[]},xs={target_group:"",subject:"",educational_level:"",prerequisites:"",time_frame:""},fs={solution_description:"",didactic_approach:"",didactic_template:{learning_sequences:[]}},vs={advantages:[],disadvantages:[]},js={comments:[]};function _s(){const{problem:s=bs,setProblem:t,influence_factors:i=[],setInfluenceFactors:l,context:a=xs,setContext:r,solution:f=fs,setSolution:v,consequences:d=vs,setConsequences:N,implementation_notes:g=[],setImplementationNotes:j,related_patterns:o=[],setRelatedPatterns:c,feedback:b=js,setFeedback:m,sources:p=[],setSources:n}=Y(),u=h=>{t({...s,learning_goals:h.target.value.split(`
`)})},w=h=>{t({...s,didactic_keywords:h.target.value.split(",").map(k=>k.trim())})},S=h=>{N({...d,advantages:h.target.value.split(`
`)})},T=h=>{N({...d,disadvantages:h.target.value.split(`
`)})},F=h=>{c(h.target.value.split(`
`))},B=()=>{const k=`Note${g.length+1}`;j([...g,{note_id:k,description:""}])},x=(h,k)=>{const y=[...g];y[h]={...y[h],description:k},j(y)},C=h=>{j(g.filter((k,y)=>y!==h))},I=()=>{const k=`S${p.length+1}`;n([...p,{source_id:k,title:"",author:"",year:new Date().getFullYear(),publisher:"",url:""}])},O=(h,k)=>{const y=[...p];y[h]={...y[h],...k},n(y)},z=h=>{n(p.filter((k,y)=>y!==h))},W=()=>{const h={date:new Date().toISOString().split("T")[0],name:"",comment:""};m({comments:[...b.comments,h]})},$=(h,k)=>{const y=[...b.comments];y[h]={...y[h],...k},m({comments:y})},V=h=>{m({comments:b.comments.filter((k,y)=>y!==h)})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Didaktische Grundlagen"}),e.jsx(ae,{})]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 p-6 rounded-lg shadow-sm mb-8",children:e.jsx("p",{className:"text-purple-900",children:"Die didaktischen Grundlagen bilden das Fundament Ihres Unterrichtsentwurfs. Hier definieren Sie das pädagogische Problem, den Kontext und die angestrebte Lösung. Beschreiben Sie die Herausforderungen, die Sie addressieren möchten, die konkreten Lernziele und wie diese durch Ihren didaktischen Ansatz erreicht werden sollen. Diese Grundlagen helfen dabei, ein kohärentes und zielgerichtetes Lehr-Lern-Szenario zu entwickeln."})}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Problem"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Problembeschreibung"}),e.jsx("textarea",{value:s.problem_description,onChange:h=>t({...s,problem_description:h.target.value}),rows:3,placeholder:"Beschreiben Sie das pädagogische Problem oder die Herausforderung, die mit diesem Template gelöst werden soll...",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Lernziele (eines pro Zeile)"}),e.jsx("textarea",{value:s.learning_goals.join(`
`),onChange:u,rows:3,placeholder:`Geben Sie die konkreten Lernziele ein, z.B.:
- Verständnis der Grundkonzepte
- Anwendung in der Praxis
- Entwicklung von Problemlösefähigkeiten`,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Didaktische Schlüsselwörter (kommagetrennt)"}),e.jsx("input",{type:"text",value:s.didactic_keywords.join(", "),onChange:w,placeholder:"z.B. Problembasiertes Lernen, Gruppenarbeit, Differenzierung",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Kontext"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Zielgruppe"}),e.jsx("input",{type:"text",value:a.target_group,onChange:h=>r({...a,target_group:h.target.value}),placeholder:"z.B. Schüler der 8. Klasse mit heterogenen Sprachkenntnissen",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fach"}),e.jsx("input",{type:"text",value:a.subject,onChange:h=>r({...a,subject:h.target.value}),placeholder:"z.B. Mathematik, Deutsch, Biologie",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bildungsstufe"}),e.jsx("input",{type:"text",value:a.educational_level,onChange:h=>r({...a,educational_level:h.target.value}),placeholder:"z.B. Sekundarstufe I, Primarstufe, Berufliche Bildung",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Voraussetzungen"}),e.jsx("input",{type:"text",value:a.prerequisites,onChange:h=>r({...a,prerequisites:h.target.value}),placeholder:"z.B. Grundkenntnisse in Algebra, Basiskenntnisse am Computer",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Zeitrahmen"}),e.jsx("input",{type:"text",value:a.time_frame,onChange:h=>r({...a,time_frame:h.target.value}),placeholder:"z.B. 90 Minuten, 2 Unterrichtsstunden",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Einflussfaktoren"}),e.jsxs("div",{className:"space-y-4",children:[i.map((h,k)=>e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",value:h.factor,onChange:y=>{const E=[...i];E[k]={...h,factor:y.target.value},l(E)},placeholder:"z.B. Sprachliche Heterogenität, Technische Ausstattung",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),e.jsx("textarea",{value:h.description,onChange:y=>{const E=[...i];E[k]={...h,description:y.target.value},l(E)},placeholder:"Beschreiben Sie, wie dieser Faktor das Lernen beeinflusst...",rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsx("button",{onClick:()=>{const y=i.filter((E,Z)=>Z!==k);l(y)},className:"mt-1 p-2 text-red-600 hover:text-red-800",children:"Entfernen"})]},k)),e.jsx("button",{onClick:()=>l([...i,{factor:"",description:""}]),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Faktor hinzufügen"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Lösung"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Lösungsbeschreibung"}),e.jsx("textarea",{value:f.solution_description,onChange:h=>v({...f,solution_description:h.target.value}),rows:4,placeholder:"Beschreiben Sie die didaktische Lösung und wie sie das Problem addressiert...",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Didaktischer Ansatz"}),e.jsx("textarea",{value:f.didactic_approach,onChange:h=>v({...f,didactic_approach:h.target.value}),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"z.B. Problemorientiertes Lernen, Entdeckendes Lernen, etc."})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Konsequenzen"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Vorteile (einer pro Zeile)"}),e.jsx("textarea",{value:d.advantages.join(`
`),onChange:S,rows:4,placeholder:`z.B.:
- Fördert selbstständiges Lernen
- Ermöglicht individuelle Lernwege
- Stärkt soziale Kompetenzen`,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nachteile (einer pro Zeile)"}),e.jsx("textarea",{value:d.disadvantages.join(`
`),onChange:T,rows:4,placeholder:`z.B.:
- Höherer Vorbereitungsaufwand
- Technische Abhängigkeiten
- Komplexere Koordination`,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Umsetzungshinweise"}),e.jsxs("div",{className:"space-y-4",children:[g.map((h,k)=>e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsx("div",{className:"flex-1",children:e.jsx("textarea",{value:h.description,onChange:y=>x(k,y.target.value),rows:2,placeholder:"z.B. Technische Ausstattung vorab prüfen, Materialien vorbereiten...",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})}),e.jsx("button",{onClick:()=>C(k),className:"mt-1 p-2 text-red-600 hover:text-red-800",children:"Entfernen"})]},h.note_id)),e.jsx("button",{onClick:B,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Hinweis hinzufügen"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Verwandte Muster"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Verwandte Muster (eines pro Zeile)"}),e.jsx("textarea",{value:o.join(`
`),onChange:F,rows:4,placeholder:`z.B.:
Kooperatives Lernen
Projektbasierter Unterricht
Differenzierte Instruktion`,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Feedback"}),e.jsxs("div",{className:"space-y-4",children:[b.comments.map((h,k)=>e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Datum"}),e.jsx("input",{type:"date",value:h.date,onChange:y=>$(k,{date:y.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",value:h.name,onChange:y=>$(k,{name:y.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Kommentar"}),e.jsx("textarea",{value:h.comment,onChange:y=>$(k,{comment:y.target.value}),rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsx("button",{onClick:()=>V(k),className:"mt-2 text-red-600 hover:text-red-800",children:"Entfernen"})]},k)),e.jsx("button",{onClick:W,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Feedback hinzufügen"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quellen"}),e.jsxs("div",{className:"space-y-4",children:[p.map((h,k)=>e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Titel"}),e.jsx("input",{type:"text",value:h.title,onChange:y=>O(k,{title:y.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Autor"}),e.jsx("input",{type:"text",value:h.author,onChange:y=>O(k,{author:y.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Jahr"}),e.jsx("input",{type:"number",value:h.year,onChange:y=>O(k,{year:parseInt(y.target.value)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Verlag"}),e.jsx("input",{type:"text",value:h.publisher,onChange:y=>O(k,{publisher:y.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"URL"}),e.jsx("input",{type:"url",value:h.url,onChange:y=>O(k,{url:y.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsx("button",{onClick:()=>z(k),className:"mt-2 text-red-600 hover:text-red-800",children:"Entfernen"})]},h.source_id)),e.jsx("button",{onClick:I,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Quelle hinzufügen"})]})]})]})}function Ns({actor:s,onUpdate:t,onCancel:i,onSave:l}){const[a,r]=L.useState({}),[f,v]=L.useState(""),[d,N]=L.useState("A1"),g=["A1","A2","B1","B2","C1","C2"],j=(n,u)=>{switch(n){case"name":return u?"":"Name ist erforderlich";case"age":return u&&(isNaN(u)||u<0)?"Alter muss eine positive Zahl sein":"";default:return""}},o=(n,u,w)=>{const S=n.target.value.split(",").map(T=>T.trim());t(w?{[w]:{...s[w],[u]:S}}:{[u]:S})},c=(n,u,w)=>{const{value:S}=n.target,T=j(u,S);r(F=>({...F,[u]:T})),t(w?{[w]:{...s[w],[u]:S}}:{[u]:S})},b=()=>{if(!f)return;const n=[...s.competencies.language_skills.languages],u={...s.competencies.language_skills.proficiency_levels};n.includes(f)||(n.push(f),u[f]=d,t({competencies:{...s.competencies,language_skills:{languages:n,proficiency_levels:u}}})),v(""),N("A1")},m=n=>{const u=s.competencies.language_skills.languages.filter(S=>S!==n),w={...s.competencies.language_skills.proficiency_levels};delete w[n],t({competencies:{...s.competencies,language_skills:{languages:u,proficiency_levels:w}}})},p=(n,u)=>{t({competencies:{...s.competencies,language_skills:{...s.competencies.language_skills,proficiency_levels:{...s.competencies.language_skills.proficiency_levels,[n]:u}}}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:s.name,onChange:n=>c(n,"name"),placeholder:"z.B. Frau Schmidt oder Hauptlerngruppe",className:`w-full p-2 border rounded ${a.name?"border-red-500":""}`}),a.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Typ"}),e.jsxs("select",{value:s.type,onChange:n=>t({type:n.target.value}),className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"Einzelperson",children:"Einzelperson"}),e.jsx("option",{value:"Gruppe",children:"Gruppe"}),e.jsx("option",{value:"KI",children:"KI"})]})]})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Demografische Daten"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.type==="Gruppe"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Altersbereich"}),e.jsx("input",{type:"text",value:s.demographic_data.age_range||"",onChange:n=>c(n,"age_range","demographic_data"),className:"w-full p-2 border rounded",placeholder:"z.B. 14-16"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Geschlechterverteilung"}),e.jsx("input",{type:"text",value:s.demographic_data.gender_distribution||"",onChange:n=>c(n,"gender_distribution","demographic_data"),placeholder:"z.B. gemischt",className:"w-full p-2 border rounded"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alter"}),e.jsx("input",{type:"number",value:s.demographic_data.age||"",onChange:n=>c(n,"age","demographic_data"),placeholder:"z.B. 35",className:`w-full p-2 border rounded ${a.age?"border-red-500":""}`}),a.age&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.age})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Geschlecht"}),e.jsx("input",{type:"text",value:s.demographic_data.gender||"",onChange:n=>c(n,"gender","demographic_data"),placeholder:"z.B. weiblich, männlich, divers",className:"w-full p-2 border rounded"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Ethnischer Hintergrund"}),e.jsx("input",{type:"text",value:s.demographic_data.ethnic_background,onChange:n=>c(n,"ethnic_background","demographic_data"),placeholder:"z.B. deutsch, diverse",className:"w-full p-2 border rounded"})]})]})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Bildung"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bildungsniveau"}),e.jsx("input",{type:"text",value:s.education.education_level,onChange:n=>c(n,"education_level","education"),placeholder:"z.B. Master of Education, Sekundarstufe I",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Klassenstufe"}),e.jsx("input",{type:"text",value:s.education.class_level,onChange:n=>c(n,"class_level","education"),placeholder:"z.B. 9. Klasse, Oberstufe",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fachlicher Schwerpunkt"}),e.jsx("input",{type:"text",value:s.education.subject_focus,onChange:n=>c(n,"subject_focus","education"),placeholder:"z.B. Mathematik, Informatik, Naturwissenschaften",className:"w-full p-2 border rounded"})]})]})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Kompetenzen"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Fachkompetenzen (kommagetrennt)"}),e.jsx("input",{type:"text",value:s.competencies.subject_competencies.join(", "),onChange:n=>o(n,"subject_competencies","competencies"),placeholder:"z.B. Mathematik, Programmierung, Didaktik",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Kognitive Kompetenzen (kommagetrennt)"}),e.jsx("input",{type:"text",value:s.competencies.cognitive_competencies.join(", "),onChange:n=>o(n,"cognitive_competencies","competencies"),placeholder:"z.B. Analytisches Denken, Problemlösung, Kreativität",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Methodische Kompetenzen (kommagetrennt)"}),e.jsx("input",{type:"text",value:s.competencies.methodical_competencies.join(", "),onChange:n=>o(n,"methodical_competencies","competencies"),placeholder:"z.B. Projektmanagement, Zeitmanagement, Präsentation",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Affektive Kompetenzen (kommagetrennt)"}),e.jsx("input",{type:"text",value:s.competencies.affective_competencies.join(", "),onChange:n=>o(n,"affective_competencies","competencies"),placeholder:"z.B. Empathie, Teamfähigkeit, Motivation",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Digitale Kompetenzen (kommagetrennt)"}),e.jsx("input",{type:"text",value:s.competencies.digital_competencies.join(", "),onChange:n=>o(n,"digital_competencies","competencies"),placeholder:"z.B. Office-Programme, Lernplattformen, Mediengestaltung",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Sprachkenntnisse"}),e.jsxs("div",{className:"space-y-2",children:[s.competencies.language_skills.languages.map(n=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"min-w-[120px]",children:n}),e.jsx("select",{value:s.competencies.language_skills.proficiency_levels[n]||"A1",onChange:u=>p(n,u.target.value),className:"w-24 p-2 border rounded",children:g.map(u=>e.jsx("option",{value:u,children:u},u))}),e.jsx("button",{onClick:()=>m(n),className:"text-red-500 hover:text-red-700",children:"×"})]},n)),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("input",{type:"text",value:f,onChange:n=>v(n.target.value),placeholder:"z.B. Deutsch, Englisch, Französisch",className:"flex-1 p-2 border rounded"}),e.jsx("select",{value:d,onChange:n=>N(n.target.value),className:"w-24 p-2 border rounded",children:g.map(n=>e.jsx("option",{value:n,children:n},n))}),e.jsx("button",{onClick:b,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Hinzufügen"})]})]})]})]})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Lernanforderungen"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Lernpräferenzen (kommagetrennt)"}),e.jsx("input",{type:"text",value:s.learning_requirements.learning_preferences.join(", "),onChange:n=>o(n,"learning_preferences","learning_requirements"),placeholder:"z.B. Visuell, Auditiv, Praktisch, Digital",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Besondere Bedürfnisse (kommagetrennt)"}),e.jsx("input",{type:"text",value:s.learning_requirements.special_needs.join(", "),onChange:n=>o(n,"special_needs","learning_requirements"),placeholder:"z.B. Sprachförderung, Barrierefreiheit, Lernunterstützung",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Technische Anforderungen (kommagetrennt)"}),e.jsx("input",{type:"text",value:s.learning_requirements.technical_requirements.join(", "),onChange:n=>o(n,"technical_requirements","learning_requirements"),placeholder:"z.B. Computer, Tablet, Internetzugang",className:"w-full p-2 border rounded"})]})]})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Interessen und Ziele"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Interessen (kommagetrennt)"}),e.jsx("input",{type:"text",value:s.interests_and_goals.interests.join(", "),onChange:n=>o(n,"interests","interests_and_goals"),placeholder:"z.B. Digitale Medien, MINT-Fächer, Projektarbeit",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Ziele (kommagetrennt)"}),e.jsx("input",{type:"text",value:s.interests_and_goals.goals.join(", "),onChange:n=>o(n,"goals","interests_and_goals"),placeholder:"z.B. Digitale Kompetenz fördern, Inklusion verbessern",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Motivationstyp"}),e.jsxs("select",{value:s.interests_and_goals.motivation.type,onChange:n=>t({interests_and_goals:{...s.interests_and_goals,motivation:{...s.interests_and_goals.motivation,type:n.target.value}}}),className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"intrinsic",children:"Intrinsisch"}),e.jsx("option",{value:"extrinsic",children:"Extrinsisch"}),e.jsx("option",{value:"mixed",children:"Gemischt"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Motivationsniveau"}),e.jsxs("select",{value:s.interests_and_goals.motivation.level,onChange:n=>t({interests_and_goals:{...s.interests_and_goals,motivation:{...s.interests_and_goals.motivation,level:n.target.value}}}),className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"low",children:"Niedrig"}),e.jsx("option",{value:"medium",children:"Mittel"}),e.jsx("option",{value:"high",children:"Hoch"})]})]})]})]})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Sozialstruktur"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gruppengröße"}),e.jsx("input",{type:s.type==="Gruppe"?"text":"number",value:s.social_structure.group_size,onChange:n=>t({social_structure:{...s.social_structure,group_size:s.type==="Gruppe"?n.target.value:parseInt(n.target.value)}}),className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Heterogenität"}),e.jsx("input",{type:"text",value:s.social_structure.heterogeneity,onChange:n=>t({social_structure:{...s.social_structure,heterogeneity:n.target.value}}),placeholder:"z.B. hoch, mittel, niedrig",className:"w-full p-2 border rounded"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200",children:"Abbrechen"}),e.jsx("button",{onClick:l,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",disabled:Object.keys(a).some(n=>a[n]),children:"Speichern"})]})]})}const ws={education_level:"",class_level:"",subject_focus:""},ys={languages:[],proficiency_levels:{}},ks={subject_competencies:[],cognitive_competencies:[],methodical_competencies:[],affective_competencies:[],digital_competencies:[],language_skills:ys};function Ss({actor:s,onEdit:t,onDelete:i}){const l=s.education||ws,a=s.competencies||ks;return e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:s.name||"Unbenannter Akteur"}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:s.type}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Bildung:"})," ",l.education_level]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Sprachen:"})," ",a.language_skills.languages.join(", ")||"Keine angegeben"]})]})]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:t,className:"px-3 py-1 text-sm bg-blue-100 rounded hover:bg-blue-200",children:"Bearbeiten"}),e.jsx("button",{onClick:i,className:"px-3 py-1 text-sm bg-red-100 rounded hover:bg-red-200",children:"Löschen"})]})]})})}const Es={id:"",name:"",type:"Einzelperson",demographic_data:{ethnic_background:""},education:{education_level:"",class_level:"",subject_focus:""},competencies:{subject_competencies:[],cognitive_competencies:[],methodical_competencies:[],affective_competencies:[],digital_competencies:[],language_skills:{languages:[],proficiency_levels:{}}},social_form:"",learning_requirements:{learning_preferences:[],special_needs:[],technical_requirements:[]},interests_and_goals:{interests:[],goals:[],motivation:{type:"intrinsic",level:"medium"}},social_structure:{group_size:1,heterogeneity:"n/a"}};function Cs(){const{actors:s=[],addActor:t,updateActor:i,removeActor:l}=Y(),[a,r]=L.useState(null),f=()=>{const d=`actor-${s.length+1}`,N={...Es,id:d};t(N),r(d)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Akteure"}),e.jsx(ae,{})]}),e.jsx("div",{className:"bg-gradient-to-r from-teal-50 to-emerald-50 p-6 rounded-lg shadow-sm mb-8",children:e.jsx("p",{className:"text-teal-900",children:"Definieren Sie hier die verschiedenen Akteure Ihres Unterrichtsszenarios. Dies können Einzelpersonen (z.B. Lehrkräfte), Gruppen (z.B. Lernende) oder auch KI-Systeme sein. Für jeden Akteur können Sie detaillierte Profile mit Lernvoraussetzungen, Kompetenzen und spezifischen Bedürfnissen erstellen. Diese Informationen ermöglichen es, personalisierte und inklusive Unterrichtsabläufe zu gestalten, die optimal auf die Beteiligten abgestimmt sind. Definieren Sie sowohl die lehrenden als auch die lernenden Akteure - von der einzelnen Lehrkraft bis hin zu verschiedenen Lerngruppen mit unterschiedlichen Voraussetzungen."})}),e.jsx("div",{className:"space-y-6",children:s.map(v=>e.jsx("div",{children:a===v.id?e.jsx(Ns,{actor:v,onUpdate:d=>i(v.id,d),onCancel:()=>r(null),onSave:()=>r(null)}):e.jsx(Ss,{actor:v,onEdit:()=>r(v.id),onDelete:()=>l(v.id)})},v.id))}),e.jsx("button",{onClick:f,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Akteur hinzufügen"})]})}function we({filter:s,onChange:t}){const[i,l]=L.useState(""),[a,r]=L.useState(""),f=()=>{i&&a&&(t({...s,[i]:a}),l(""),r(""))},v=d=>{const{[d]:N,...g}=s;t(g)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",value:i,onChange:d=>l(d.target.value),placeholder:"Eigenschaft",className:"p-2 border rounded"}),e.jsx("input",{type:"text",value:a,onChange:d=>r(d.target.value),placeholder:"Wert",className:"p-2 border rounded"})]}),e.jsx("button",{onClick:f,className:"w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Kriterium hinzufügen"}),e.jsx("div",{className:"space-y-2",children:Object.entries(s).map(([d])=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:[d,":"]})," ",s[d]]}),e.jsx("button",{onClick:()=>v(d),className:"text-red-500 hover:text-red-600",children:"×"})]},d))})]})}function As({material:s,onUpdate:t,onDelete:i,isNew:l=!1,contentTypes:a}){var v;const[r,f]=L.useState(l);return r?e.jsxs("div",{className:"border rounded-lg p-4 mb-4 bg-white space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:s.name,onChange:d=>t({name:d.target.value}),placeholder:"z.B. Arbeitsblatt Addition, Lernvideo Photosynthese",className:"w-full p-2 border rounded",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Ressourcentyp"}),e.jsxs("select",{value:s.material_type,onChange:d=>t({material_type:d.target.value}),className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"",children:"Bitte wählen..."}),a.map(d=>e.jsx("option",{value:d,children:d},d))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Zugangslink"}),e.jsx("input",{type:"text",value:s.access_link,onChange:d=>t({access_link:d.target.value}),placeholder:"z.B. https://example.com/material.pdf",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quelle"}),e.jsxs("select",{value:s.source,onChange:d=>t({source:d.target.value}),className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"manual",children:"Manuell"}),e.jsx("option",{value:"database",children:"Datenbank"}),e.jsx("option",{value:"filter",children:"Filter"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Datenbank-ID"}),e.jsx("input",{type:"text",value:s.database_id||"",onChange:d=>t({database_id:d.target.value}),className:"w-full p-2 border rounded",disabled:s.source!=="database"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Filterkriterien"}),e.jsx(we,{filter:s.filter_criteria||{},onChange:d=>t({filter_criteria:d})})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{l?i():f(!1)},className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200",children:"Abbrechen"}),e.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Speichern"})]})]}):e.jsx("div",{className:"border rounded-lg p-4 mb-4 bg-white",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:s.name||"Unbenannte Lernressource"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.material_type}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Quelle: ",s.source]}),s.access_link&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Link: ",s.access_link]}),s.source==="database"&&s.database_id&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Datenbank-ID: ",s.database_id]})]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>f(!0),className:"px-3 py-1 text-sm bg-blue-100 rounded hover:bg-blue-200",children:"Bearbeiten"}),e.jsx("button",{onClick:i,className:"px-3 py-1 text-sm bg-red-100 rounded hover:bg-red-200",children:"Löschen"})]})]}),s.wlo_metadata&&e.jsxs("div",{className:"mt-4 border-t pt-4",children:[e.jsx("h5",{className:"font-medium text-sm text-gray-700 mb-2",children:"WLO Metadaten"}),Array.isArray(s.wlo_metadata)?s.wlo_metadata.map((d,N)=>{var g;return e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg relative",children:[e.jsx("button",{onClick:()=>{const j=s.wlo_metadata.filter((o,c)=>c!==N);t({wlo_metadata:j.length>0?j:void 0,source:j.length>0?"database":"filter"})},className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center text-red-500 hover:text-red-700 bg-white rounded-full shadow-sm",title:"WLO Metadaten entfernen",children:"×"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Titel:"})," ",d.title]}),d.description&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Beschreibung:"})," ",d.description]}),d.subject&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Fach:"})," ",d.subject]}),((g=d.educationalContext)==null?void 0:g.length)>0&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Bildungskontext:"})," ",d.educationalContext.join(", ")]}),d.wwwUrl&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"URL:"})," ",e.jsx("a",{href:d.wwwUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:d.wwwUrl})]})]})]},N)}):e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg relative",children:[e.jsx("button",{onClick:()=>t({wlo_metadata:void 0,source:"filter"}),className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center text-red-500 hover:text-red-700 bg-white rounded-full shadow-sm",title:"WLO Metadaten entfernen",children:"×"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Titel:"})," ",s.wlo_metadata.title]}),s.wlo_metadata.description&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Beschreibung:"})," ",s.wlo_metadata.description]}),s.wlo_metadata.subject&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Fach:"})," ",s.wlo_metadata.subject]}),((v=s.wlo_metadata.educationalContext)==null?void 0:v.length)>0&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Bildungskontext:"})," ",s.wlo_metadata.educationalContext.join(", ")]}),s.wlo_metadata.wwwUrl&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"URL:"})," ",e.jsx("a",{href:s.wlo_metadata.wwwUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:s.wlo_metadata.wwwUrl})]})]})]})]})]})})})}function Ls({tool:s,onUpdate:t,onDelete:i,isNew:l=!1}){const[a,r]=L.useState(l);return a?e.jsxs("div",{className:"border rounded-lg p-4 mb-4 bg-white space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:s.name,onChange:f=>t({name:f.target.value}),placeholder:"z.B. Dokumentenkamera, Digitales Whiteboard",className:"w-full p-2 border rounded",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Typ"}),e.jsx("input",{type:"text",value:s.tool_type,onChange:f=>t({tool_type:f.target.value}),className:"w-full p-2 border rounded",placeholder:"z.B. Hardware, Software, Online-Tool"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Zugangslink"}),e.jsx("input",{type:"text",value:s.access_link,onChange:f=>t({access_link:f.target.value}),placeholder:"z.B. https://example.com/tool",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quelle"}),e.jsxs("select",{value:s.source,onChange:f=>t({source:f.target.value}),className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"manual",children:"Manuell"}),e.jsx("option",{value:"database",children:"Datenbank"}),e.jsx("option",{value:"filter",children:"Filter"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Datenbank-ID"}),e.jsx("input",{type:"text",value:s.database_id||"",onChange:f=>t({database_id:f.target.value}),className:"w-full p-2 border rounded",disabled:s.source!=="database"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Filterkriterien"}),e.jsx(we,{filter:s.filter_criteria||{},onChange:f=>t({filter_criteria:f})})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{l?i():r(!1)},className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200",children:"Abbrechen"}),e.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Speichern"})]})]}):e.jsx("div",{className:"border rounded-lg p-4 mb-4 bg-white",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:s.name||"Unbenanntes Werkzeug"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.tool_type}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Quelle: ",s.source]}),s.access_link&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Link: ",s.access_link]}),s.source==="database"&&s.database_id&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Datenbank-ID: ",s.database_id]})]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>r(!0),className:"px-3 py-1 text-sm bg-blue-100 rounded hover:bg-blue-200",children:"Bearbeiten"}),e.jsx("button",{onClick:i,className:"px-3 py-1 text-sm bg-red-100 rounded hover:bg-red-200",children:"Löschen"})]})]})})}function zs({service:s,onUpdate:t,onDelete:i,isNew:l=!1}){var f;const[a,r]=L.useState(l);return a?e.jsxs("div",{className:"border rounded-lg p-4 mb-4 bg-white space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:s.name,onChange:v=>t({name:v.target.value}),placeholder:"z.B. Sprachunterstützung, Online-Lernplattform",className:"w-full p-2 border rounded",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Typ"}),e.jsx("input",{type:"text",value:s.service_type,onChange:v=>t({service_type:v.target.value}),className:"w-full p-2 border rounded",placeholder:"z.B. Förderung, Beratung, Cloud-Dienst"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Zugangslink"}),e.jsx("input",{type:"text",value:s.access_link,onChange:v=>t({access_link:v.target.value}),placeholder:"z.B. https://example.com/service",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quelle"}),e.jsxs("select",{value:s.source,onChange:v=>t({source:v.target.value}),className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"manual",children:"Manuell"}),e.jsx("option",{value:"database",children:"Datenbank"}),e.jsx("option",{value:"filter",children:"Filter"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Datenbank-ID"}),e.jsx("input",{type:"text",value:s.database_id||"",onChange:v=>t({database_id:v.target.value}),className:"w-full p-2 border rounded",disabled:s.source!=="database"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Filterkriterien"}),e.jsx(we,{filter:s.filter_criteria||{},onChange:v=>t({filter_criteria:v})})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>{l?i():r(!1)},className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200",children:"Abbrechen"}),e.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Speichern"})]})]}):e.jsx("div",{className:"border rounded-lg p-4 mb-4 bg-white",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:s.name||"Unbenannter Dienst"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.service_type}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Quelle: ",s.source]}),s.access_link&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Link: ",s.access_link]}),s.source==="database"&&s.database_id&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Datenbank-ID: ",s.database_id]}),s.wlo_metadata&&e.jsxs("div",{className:"mt-4 border-t pt-4",children:[e.jsx("h5",{className:"font-medium text-sm text-gray-700 mb-2",children:"WLO Metadaten"}),Array.isArray(s.wlo_metadata)?s.wlo_metadata.map((v,d)=>{var N;return e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg relative",children:[e.jsx("button",{onClick:()=>{const g=s.wlo_metadata.filter((j,o)=>o!==d);t({wlo_metadata:g.length>0?g:void 0,source:g.length>0?"database":"filter"})},className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center text-red-500 hover:text-red-700 bg-white rounded-full shadow-sm",title:"WLO Metadaten entfernen",children:"×"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Titel:"})," ",v.title]}),v.description&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Beschreibung:"})," ",v.description]}),v.subject&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Fach:"})," ",v.subject]}),((N=v.educationalContext)==null?void 0:N.length)>0&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Bildungskontext:"})," ",v.educationalContext.join(", ")]}),v.wwwUrl&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"URL:"})," ",e.jsx("a",{href:v.wwwUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:v.wwwUrl})]})]})]},d)}):e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg relative",children:[e.jsx("button",{onClick:()=>t({wlo_metadata:void 0,source:"filter"}),className:"absolute top-2 right-2 w-6 h-6 flex items-center justify-center text-red-500 hover:text-red-700 bg-white rounded-full shadow-sm",title:"WLO Metadaten entfernen",children:"×"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Titel:"})," ",s.wlo_metadata.title]}),s.wlo_metadata.description&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Beschreibung:"})," ",s.wlo_metadata.description]}),s.wlo_metadata.subject&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Fach:"})," ",s.wlo_metadata.subject]}),((f=s.wlo_metadata.educationalContext)==null?void 0:f.length)>0&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Bildungskontext:"})," ",s.wlo_metadata.educationalContext.join(", ")]}),s.wlo_metadata.wwwUrl&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"URL:"})," ",e.jsx("a",{href:s.wlo_metadata.wwwUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:s.wlo_metadata.wwwUrl})]})]})]})]})]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:()=>r(!0),className:"px-3 py-1 text-sm bg-blue-100 rounded hover:bg-blue-200",children:"Bearbeiten"}),e.jsx("button",{onClick:i,className:"px-3 py-1 text-sm bg-red-100 rounded hover:bg-red-200",children:"Löschen"})]})]})})}const Ts={Elementarbereich:"http://w3id.org/openeduhub/vocabs/educationalContext/elementarbereich",Primarstufe:"http://w3id.org/openeduhub/vocabs/educationalContext/grundschule","Sekundarstufe I":"http://w3id.org/openeduhub/vocabs/educationalContext/sekundarstufe_1","Sekundarstufe II":"http://w3id.org/openeduhub/vocabs/educationalContext/sekundarstufe_2",Hochschule:"http://w3id.org/openeduhub/vocabs/educationalContext/hochschule","Berufliche Bildung":"http://w3id.org/openeduhub/vocabs/educationalContext/berufliche_bildung",Fortbildung:"http://w3id.org/openeduhub/vocabs/educationalContext/fortbildung",Erwachsenenbildung:"http://w3id.org/openeduhub/vocabs/educationalContext/erwachsenenbildung",Förderschule:"http://w3id.org/openeduhub/vocabs/educationalContext/foerderschule",Fernunterricht:"http://w3id.org/openeduhub/vocabs/educationalContext/fernunterricht"},oe={Allgemein:"http://w3id.org/openeduhub/vocabs/discipline/720","Alt-Griechisch":"http://w3id.org/openeduhub/vocabs/discipline/20003",Agrarwirtschaft:"http://w3id.org/openeduhub/vocabs/discipline/04001","Arbeit, Ernährung, Soziales":"http://w3id.org/openeduhub/vocabs/discipline/oeh01",Arbeitslehre:"http://w3id.org/openeduhub/vocabs/discipline/020",Arbeitssicherheit:"http://w3id.org/openeduhub/vocabs/discipline/04014",Astronomie:"http://w3id.org/openeduhub/vocabs/discipline/46014",Bautechnik:"http://w3id.org/openeduhub/vocabs/discipline/04002","Berufliche Bildung":"http://w3id.org/openeduhub/vocabs/discipline/040",Biologie:"http://w3id.org/openeduhub/vocabs/discipline/080",Chemie:"http://w3id.org/openeduhub/vocabs/discipline/100",Chinesisch:"http://w3id.org/openeduhub/vocabs/discipline/20041","Darstellendes Spiel":"http://w3id.org/openeduhub/vocabs/discipline/12002",Deutsch:"http://w3id.org/openeduhub/vocabs/discipline/120","Deutsch als Zweitsprache":"http://w3id.org/openeduhub/vocabs/discipline/28002",Elektrotechnik:"http://w3id.org/openeduhub/vocabs/discipline/04005","Ernährung und Hauswirtschaft":"http://w3id.org/openeduhub/vocabs/discipline/04006",Englisch:"http://w3id.org/openeduhub/vocabs/discipline/20001",Pädagogik:"http://w3id.org/openeduhub/vocabs/discipline/440",Esperanto:"http://w3id.org/openeduhub/vocabs/discipline/20090",Ethik:"http://w3id.org/openeduhub/vocabs/discipline/160","Farbtechnik und Raumgestaltung":"http://w3id.org/openeduhub/vocabs/discipline/04007",Französisch:"http://w3id.org/openeduhub/vocabs/discipline/20002",Geografie:"http://w3id.org/openeduhub/vocabs/discipline/220",Geschichte:"http://w3id.org/openeduhub/vocabs/discipline/240",Gesellschaftskunde:"http://w3id.org/openeduhub/vocabs/discipline/48005",Gesundheit:"http://w3id.org/openeduhub/vocabs/discipline/260",Hauswirtschaft:"http://w3id.org/openeduhub/vocabs/discipline/50001",Holztechnik:"http://w3id.org/openeduhub/vocabs/discipline/04009",Informatik:"http://w3id.org/openeduhub/vocabs/discipline/320","Interkulturelle Bildung":"http://w3id.org/openeduhub/vocabs/discipline/340",Italienisch:"http://w3id.org/openeduhub/vocabs/discipline/20004",Kunst:"http://w3id.org/openeduhub/vocabs/discipline/060",Körperpflege:"http://w3id.org/openeduhub/vocabs/discipline/04010",Latein:"http://w3id.org/openeduhub/vocabs/discipline/20005",Mathematik:"http://w3id.org/openeduhub/vocabs/discipline/380",Mechatronik:"http://w3id.org/openeduhub/vocabs/discipline/oeh04010",Medienbildung:"http://w3id.org/openeduhub/vocabs/discipline/900",Mediendidaktik:"http://w3id.org/openeduhub/vocabs/discipline/400",Metalltechnik:"http://w3id.org/openeduhub/vocabs/discipline/04011",MINT:"http://w3id.org/openeduhub/vocabs/discipline/04003",Musik:"http://w3id.org/openeduhub/vocabs/discipline/420",Nachhaltigkeit:"http://w3id.org/openeduhub/vocabs/discipline/64018",Niederdeutsch:"http://w3id.org/openeduhub/vocabs/discipline/niederdeutsch","Open Educational Resources":"http://w3id.org/openeduhub/vocabs/discipline/44099",Philosophie:"http://w3id.org/openeduhub/vocabs/discipline/450",Physik:"http://w3id.org/openeduhub/vocabs/discipline/460",Politik:"http://w3id.org/openeduhub/vocabs/discipline/480",Psychologie:"http://w3id.org/openeduhub/vocabs/discipline/510",Religion:"http://w3id.org/openeduhub/vocabs/discipline/520",Russisch:"http://w3id.org/openeduhub/vocabs/discipline/20006",Sachunterricht:"http://w3id.org/openeduhub/vocabs/discipline/28010",Sexualerziehung:"http://w3id.org/openeduhub/vocabs/discipline/560",Sonderpädagogik:"http://w3id.org/openeduhub/vocabs/discipline/44006",Sorbisch:"http://w3id.org/openeduhub/vocabs/discipline/20009",Sozialpädagogik:"http://w3id.org/openeduhub/vocabs/discipline/44007",Spanisch:"http://w3id.org/openeduhub/vocabs/discipline/20007",Sport:"http://w3id.org/openeduhub/vocabs/discipline/600","Textiltechnik und Bekleidung":"http://w3id.org/openeduhub/vocabs/discipline/04012",Türkisch:"http://w3id.org/openeduhub/vocabs/discipline/20008","Wirtschaft und Verwaltung":"http://w3id.org/openeduhub/vocabs/discipline/04013",Wirtschaftskunde:"http://w3id.org/openeduhub/vocabs/discipline/700","Umweltgefährdung, Umweltschutz":"http://w3id.org/openeduhub/vocabs/discipline/640",Verkehrserziehung:"http://w3id.org/openeduhub/vocabs/discipline/660",Weiterbildung:"http://w3id.org/openeduhub/vocabs/discipline/680",Werken:"http://w3id.org/openeduhub/vocabs/discipline/50005","Zeitgemäße Bildung":"http://w3id.org/openeduhub/vocabs/discipline/72001",Sonstiges:"http://w3id.org/openeduhub/vocabs/discipline/999"},de={Bild:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/b8fb5fb2-d8bf-4bbe-ab68-358b65a26bed",Video:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/38774279-af36-4ec2-8e70-811d5a51a6a1",Audio:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/39197d6f-dfb1-4e82-92e5-79f906e9d2a9","Interaktives Medium":"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/05aa0f49-7e1b-498b-a7d5-c5fc8e73b2e2",Unterrichtsidee:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/11f438d7-cb11-49c2-8e67-2dd7df677092",Unterrichtsplan:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/8526273b-2b21-46f2-ac8d-bbf362c8a690","Unterrichtsbaustein/-reihe":"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/f1341358-3f91-449b-b6eb-f58636f756a0",Methoden:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/101c0c66-5202-4eba-9ebf-79f4903752b9","Tests / Fragebögen":"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/02bfd0fe-96ab-4dd6-a306-ec362ec25ea0",Kurs:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/e10e9add-700e-4b57-a9c5-8f1088bb0545","Lernobjekt / -pfad":"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/3469a5e7-86d1-4376-bd3d-1f2b183ed94a",Präsentation:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/1e300ea3-a687-45a3-b215-9c240c1666dc",Lernspiel:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/ded96854-280a-45ac-ad3a-f5b9b8dd0a03",Arbeitsblatt:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/c8e52242-361b-4a2a-b95d-25e516b28b45",Übungsmaterial:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/0b2d7dec-8eb1-4a28-9cf2-4f3a4f5a511b","Recherche, Lernauftrag":"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/90a082d8-ee5f-4b33-bd5c-f1738262c47d",Experiment:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/ffe4d8e8-3cfd-4e9a-b025-83f129eb5c9d","Projekt-Material":"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/71c71f72-fc8d-4263-902f-abf1366a73ca","Kreative, offene Aktivität":"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/57bfc743-4c94-4bdd-bdfa-c638a062d151","Entdeckendes Lernen":"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/ec402e87-c623-47e2-8d2e-1c4ea6923409",Rollenspiel:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/d0c115e4-848d-4aea-8e31-23869e9add3e",Fallstudie:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/41eaccae-899b-4209-8a54-c793a3cdf538",Artikel:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/c77df53a-2611-4029-9712-f9c0eeb032a3","(Lehr-)Buch":"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/3927fdb6-0477-422c-9f5a-6285948aeaf4",Handout:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/9abf6ace-85bc-44e2-af4f-93a6bd255a21",Schülerarbeit:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/fece0442-c686-4496-b97e-06d87782009b",Noten:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/854e5bcf-d898-43ca-bc70-caf2a7e33673",Checkliste:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/99f3bb30-22c0-4b46-871c-43ab4b6baf6f","Regularien, Handbuch":"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/ac925aae-1f3c-4817-a9dd-b9b24c336b0d",Webseite:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/55761ec6-0cd4-4677-86ee-6f395934dae7",Webblog:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/ac4987d7-5d09-4a21-82c6-268ed6cdc7eb",Wiki:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/6f669beb-273a-4153-bdb6-4c6d59b2366d","Wort-/Vokabelliste":"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/9337a93e-777d-4d76-99a5-51f5e9935e63",Nachschlagewerk:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/cf8929a7-d521-4f17-bbe3-96748c862486",Primärmaterial:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/1c610f61-9bf0-4d77-8536-b713a3733510",Textbausteine:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/2c151a4e-556e-42db-9e44-3a581deb5834",Persönlichkeit:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/b1e25325-d403-44f0-814a-ff2f5d866931",Daten:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/620a3fee-ac87-40e6-8408-20b48b430eca",Formel:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/c2fc554c-a7ae-4af7-a785-d727c5a8d0db","Modell / 3D":"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/25957b6b-338e-4379-ba4f-67fc7654ef34",Tabellen:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/a0b83e5a-eaa4-4df8-9eec-3678abd60c25",News:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/9bbb50a2-10c5-4a8b-9e0e-6a5fc86c40fe",Quelle:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/2e678af3-1026-4171-b88e-3b3a915d1673",Tool:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/37a3ad9c-727f-4b74-bbab-27d59015c695",Bildungsangebot:"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/6b6786df-9ce9-44bf-8a04-caebd4456fcf","Event, Wettbewerb":"http://w3id.org/openeduhub/vocabs/new_lrt_aggregated/b06c5816-60c7-4f1b-bcd7-95d70aaa4740"},pe={TITLE:"cclom:title",CONTENT_TYPE:"ccm:oeh_lrt_aggregated",EDUCATIONAL_CONTEXT:"ccm:educationalcontext",DISCIPLINE:"ccm:taxonid"},Is={id:"",name:"",description:"",materials:[],tools:[],services:[]};function Ps(){const{environments:s=[],addEnvironment:t,updateEnvironment:i,removeEnvironment:l}=Y(),a=Object.keys(de),r=()=>{const p=`ENV${s.length+1}`;t({...Is,id:p})},f=m=>{const p=s.find(n=>n.id===m);if(p){const n=(p.materials||[]).length+1,w={id:`${m}-M${n}`,name:"",material_type:"",source:"manual",access_link:""};i(m,{materials:[...p.materials||[],w]})}},v=m=>{const p=s.find(n=>n.id===m);if(p){const n=(p.tools||[]).length+1,w={id:`${m}-T${n}`,name:"",tool_type:"",source:"manual",access_link:""};i(m,{tools:[...p.tools||[],w]})}},d=m=>{const p=s.find(n=>n.id===m);if(p){const n=(p.services||[]).length+1,w={id:`${m}-S${n}`,name:"",service_type:"",source:"manual",access_link:""};i(m,{services:[...p.services||[],w]})}},N=(m,p,n)=>{const u=s.find(w=>w.id===m);if(u){const w=(u.materials||[]).map(S=>S.id===p?{...S,...n}:S);i(m,{materials:w})}},g=(m,p,n)=>{const u=s.find(w=>w.id===m);if(u){const w=(u.tools||[]).map(S=>S.id===p?{...S,...n}:S);i(m,{tools:w})}},j=(m,p,n)=>{const u=s.find(w=>w.id===m);if(u){const w=(u.services||[]).map(S=>S.id===p?{...S,...n}:S);i(m,{services:w})}},o=(m,p)=>{const n=s.find(u=>u.id===m);n&&i(m,{materials:(n.materials||[]).filter(u=>u.id!==p)})},c=(m,p)=>{const n=s.find(u=>u.id===m);n&&i(m,{tools:(n.tools||[]).filter(u=>u.id!==p)})},b=(m,p)=>{const n=s.find(u=>u.id===m);n&&i(m,{services:(n.services||[]).filter(u=>u.id!==p)})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Lernumgebungen"}),e.jsx(ae,{})]}),e.jsxs("div",{className:"bg-gradient-to-r from-cyan-50 to-teal-50 p-6 rounded-lg shadow-sm mb-8",children:[e.jsx("p",{className:"text-teal-900",children:"Lernumgebungen sind die Räume und Kontexte, in denen das Lernen stattfindet. Sie können eine oder mehrere Lernumgebungen definieren und diese mit den benötigten Ressourcen ausstatten. Jede Lernumgebung kann folgende Elemente enthalten:"}),e.jsxs("ul",{className:"mt-4 space-y-2 text-teal-800 list-disc list-inside",children:[e.jsx("li",{children:"Lernressourcen (z.B. Arbeitsblätter, Videos, Übungen)"}),e.jsx("li",{children:"Werkzeuge (z.B. Hardware, Software, Geräte)"}),e.jsx("li",{children:"Dienste (z.B. Unterstützungsangebote, Online-Plattformen)"})]}),e.jsx("p",{className:"mt-4 text-teal-900",children:"Wichtig: Alle Lernressourcen, Werkzeuge und Dienste, die Sie später im Unterrichtsablauf verwenden möchten, müssen hier einer passenden Lernumgebung zugeordnet werden."})]}),s.map(m=>e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",value:m.name,onChange:p=>i(m.id,{name:p.target.value}),placeholder:"z.B. Mathematik-Klassenraum, Digitales Labor",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Beschreibung"}),e.jsx("textarea",{value:m.description,onChange:p=>i(m.id,{description:p.target.value}),rows:3,placeholder:"Beschreiben Sie die Lernumgebung und ihre Ausstattung...",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),e.jsx("button",{onClick:()=>l(m.id),className:"ml-4 text-red-600 hover:text-red-800",children:"Entfernen"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Lernressourcen"}),e.jsx("button",{onClick:()=>f(m.id),className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Lernressource hinzufügen"})]}),(m.materials||[]).map(p=>e.jsx(As,{material:p,onUpdate:n=>N(m.id,p.id,n),onDelete:()=>o(m.id,p.id),isNew:p.name==="",contentTypes:a},p.id))]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Werkzeuge"}),e.jsx("button",{onClick:()=>v(m.id),className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Werkzeug hinzufügen"})]}),(m.tools||[]).map(p=>e.jsx(Ls,{tool:p,onUpdate:n=>g(m.id,p.id,n),onDelete:()=>c(m.id,p.id),isNew:p.name===""},p.id))]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Dienste"}),e.jsx("button",{onClick:()=>d(m.id),className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Dienst hinzufügen"})]}),(m.services||[]).map(p=>e.jsx(zs,{service:p,onUpdate:n=>j(m.id,p.id,n),onDelete:()=>b(m.id,p.id),isNew:p.name===""},p.id))]})]},m.id)),e.jsx("button",{onClick:r,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Lernumgebung hinzufügen"})]})}function ue({resource:s}){const t=s.wlo_metadata?Array.isArray(s.wlo_metadata)?s.wlo_metadata:[s.wlo_metadata]:[];return e.jsx(e.Fragment,{children:t.map((i,l)=>{var a;return e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200 hover:shadow-md transition-shadow",style:{height:"336px"},children:e.jsxs("div",{className:"h-full flex flex-col",children:[i.previewUrl&&e.jsx("div",{className:"h-40 mb-2 relative",children:e.jsx("img",{src:i.previewUrl,alt:i.title||s.name,className:"absolute inset-0 w-full h-full object-cover rounded",loading:"lazy"})}),e.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[e.jsx("h4",{className:"font-medium text-base mb-2",children:i.wwwUrl||s.access_link?e.jsx("a",{href:i.wwwUrl||s.access_link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:i.title||s.name}):i.title||s.name}),i.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:i.description}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-auto",children:[i.subject&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:i.subject}),(a=i.educationalContext)==null?void 0:a.map((r,f)=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:r},f))]})]})]})},l)})})}function $s(){return"http://localhost:3001/proxy"}async function ze({properties:s,values:t,maxItems:i=5,skipCount:l=0,propertyFilter:a="-all-",endpoint:r,combineMode:f="AND",signal:v}){try{const d=[];s.includes("cclom:title")&&t[0]&&d.push({property:"ngsearchword",values:[t[0]]});const N={"ccm:oeh_lrt_aggregated":"ccm:oeh_lrt_aggregated","ccm:taxonid":"virtual:taxonid","ccm:educationalcontext":"ccm:educationalcontext"};for(let b=0;b<s.length;b++)s[b]!=="cclom:title"&&t[b]&&d.push({property:N[s[b]]||s[b],values:[t[b]]});const g=new URLSearchParams({contentType:"FILES",maxItems:i.toString(),skipCount:l.toString(),propertyFilter:a}),j=`${r}/search/v1/queries/-home-/mds_oeh/ngsearch?${g.toString()}`,o=`${$s()}?url=${encodeURIComponent(j)}`;return(await rs.post(o,{criteria:d},{headers:{Accept:"application/json","Content-Type":"application/json"},signal:v})).data}catch(d){throw console.error("Error searching WLO:",d),d}}const Ds={PRODUCTION:"https://redaktion.openeduhub.net/edu-sharing/rest",STAGING:"https://repository.staging.openeduhub.net/edu-sharing/rest"};function Bs(){const s=Y(),[t,i]=L.useState(""),[l,a]=L.useState(""),[r,f]=L.useState(""),[v,d]=L.useState(""),[N,g]=L.useState([]),[j,o]=L.useState([]),[c,b]=L.useState(""),[m,p]=L.useState("material"),[n,u]=L.useState(!1),[w,S]=L.useState(null),[T,F]=L.useState(!1),[B,x]=L.useState(""),[C,I]=L.useState(""),O=async()=>{u(!0),S(null);try{const h=[];if(t&&h.push({property:"cclom:title",value:t}),l&&h.push({property:"ccm:educationalcontext",value:l}),r&&h.push({property:"ccm:taxonid",value:r}),v&&h.push({property:"ccm:oeh_lrt_aggregated",value:v}),h.length===0){S("Bitte geben Sie mindestens ein Suchkriterium ein"),u(!1);return}const k=await ze({properties:h.map(E=>E.property),values:h.map(E=>E.value),maxItems:10,endpoint:Ds.PRODUCTION,combineMode:"AND"});if(!k.nodes){g([]);return}const y=k.nodes.map(E=>{var Z,Q,se,H,A,R;return{name:((Z=E.properties["cclom:title"])==null?void 0:Z[0])||"Ohne Titel",wlo_metadata:{title:((Q=E.properties["cclom:title"])==null?void 0:Q[0])||"Ohne Titel",description:((se=E.properties["cclom:general_description"])==null?void 0:se[0])||"",subject:((H=E.properties["ccm:taxonid_DISPLAYNAME"])==null?void 0:H[0])||"",educationalContext:E.properties["ccm:educationalcontext_DISPLAYNAME"]||[],wwwUrl:((A=E.properties["ccm:wwwurl"])==null?void 0:A[0])||null,previewUrl:((R=E.preview)==null?void 0:R.url)||null}}});g(y)}catch(h){S(h instanceof Error?h.message:"Ein Fehler ist aufgetreten")}finally{u(!1)}},z=h=>{o(k=>[...k,h]),g(k=>k.filter(y=>y!==h))},W=h=>{o(k=>k.filter(y=>y!==h)),g(k=>[...k,h])},$=()=>{if(!B.trim()){S("Bitte geben Sie einen Namen für die Lernumgebung ein");return}const k=`ENV${s.environments.length+1}`;s.addEnvironment({id:k,name:B.trim(),description:C.trim(),materials:[],tools:[],services:[]}),b(k),F(!1),x(""),I("")},V=()=>{if(!c||!m){S("Bitte wählen Sie eine Lernumgebung und einen Ressourcentyp aus");return}const h=s.environments.find(y=>y.id===c);if(!h)return;const k=j.map((y,E)=>{const Z={id:`${c}-${m.charAt(0).toUpperCase()}${h[`${m}s`].length+E+1}`,name:y.name,source:"database",access_link:y.wlo_metadata.wwwUrl||"",wlo_metadata:y.wlo_metadata};switch(m){case"material":return{...Z,material_type:y.wlo_metadata.subject||"Allgemein"};case"tool":return{...Z,tool_type:"Software"};case"service":return{...Z,service_type:"Digital"}}});s.updateEnvironment(c,{[`${m}s`]:[...h[`${m}s`],...k]}),o([]),S("Ressourcen wurden erfolgreich zur Lernumgebung hinzugefügt")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"WLO Warenkorb"}),e.jsx(ae,{})]}),e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 p-6 rounded-lg shadow-sm mb-8",children:e.jsx("p",{className:"text-amber-900",children:"Hier können Sie nach WLO-Bildungsinhalten suchen und diese für Ihre Lernumgebungen vormerken. Wählen Sie die gewünschten Inhalte aus und fügen Sie sie Ihrer Vormerkliste hinzu. Anschließend können Sie die Inhalte einer Lernumgebung zuordnen und als Material, Werkzeug oder Dienst speichern."})}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"col-span-2 space-y-4",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",value:t,onChange:h=>i(h.target.value),placeholder:"Suchbegriff eingeben...",className:"w-full p-3 border rounded-lg"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("select",{value:l,onChange:h=>a(h.target.value),className:"p-2 border rounded-lg",children:[e.jsx("option",{value:"",children:"Bildungskontext wählen..."}),Object.entries(Ts).map(([h,k])=>e.jsx("option",{value:k,children:h},k))]}),e.jsxs("select",{value:r,onChange:h=>f(h.target.value),className:"p-2 border rounded-lg",children:[e.jsx("option",{value:"",children:"Fach wählen..."}),Object.entries(oe).map(([h,k])=>e.jsx("option",{value:k,children:h},k))]}),e.jsxs("select",{value:v,onChange:h=>d(h.target.value),className:"p-2 border rounded-lg",children:[e.jsx("option",{value:"",children:"Inhaltstyp wählen..."}),Object.entries(de).map(([h,k])=>e.jsx("option",{value:k,children:h},k))]})]}),e.jsx("button",{onClick:O,disabled:n,className:"w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-blue-300",children:n?"Suche läuft...":"Suchen"})]})}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Suchergebnisse"}),w&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 text-red-700 rounded-lg",children:w}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:N.map((h,k)=>e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>z(h),className:"absolute top-2 right-2 p-1 bg-green-500 text-white rounded-full hover:bg-green-600 z-10",title:"Zum Warenkorb hinzufügen",children:e.jsx(Ae,{className:"w-4 h-4"})}),e.jsx(ue,{resource:h})]},k))}),N.length===0&&!n&&e.jsx("p",{className:"text-gray-500 text-center",children:"Keine Suchergebnisse gefunden"})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow sticky top-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Vorgemerkte Inhalte"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("select",{value:c,onChange:h=>{h.target.value==="new"?F(!0):b(h.target.value)},className:"w-full p-2 border rounded-lg",children:[e.jsx("option",{value:"",children:"Lernumgebung wählen..."}),s.environments.map(h=>e.jsx("option",{value:h.id,children:h.name},h.id)),e.jsx("option",{value:"new",children:"+ Neue Lernumgebung erstellen"})]}),e.jsxs("select",{value:m,onChange:h=>p(h.target.value),className:"w-full p-2 border rounded-lg",children:[e.jsx("option",{value:"material",children:"Als Lernressource"}),e.jsx("option",{value:"tool",children:"Als Werkzeug"}),e.jsx("option",{value:"service",children:"Als Dienst"})]}),e.jsxs("button",{onClick:V,disabled:j.length===0||!c,className:"w-full px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-green-300",children:["Speichern (",j.length," Inhalte)"]})]}),e.jsxs("div",{className:"space-y-4 max-h-[600px] overflow-y-auto",children:[j.map((h,k)=>e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>W(h),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 z-10",title:"Aus Warenkorb entfernen",children:e.jsx(Ge,{className:"w-4 h-4"})}),e.jsx(ue,{resource:h})]},k)),j.length===0&&e.jsx("p",{className:"text-gray-500 text-center",children:"Keine Inhalte vorgemerkt"})]})]})}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Neue Lernumgebung erstellen"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:B,onChange:h=>x(h.target.value),placeholder:"z.B. Mathematik-Klassenraum",className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Beschreibung"}),e.jsx("textarea",{value:C,onChange:h=>I(h.target.value),placeholder:"Beschreiben Sie die Lernumgebung...",rows:3,className:"w-full p-2 border rounded"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>F(!1),className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200",children:"Abbrechen"}),e.jsx("button",{onClick:$,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Erstellen"})]})]})]})})]})]})}function Ms({role:s,actors:t,environments:i,onUpdate:l,onDelete:a,activityId:r}){var j;const[f,v]=L.useState(!0),d=i.find(o=>{var c;return o.id===((c=s.learning_environment)==null?void 0:c.environment_id)}),N=o=>{l({learning_environment:{environment_id:o,selected_materials:[],selected_tools:[],selected_services:[]}})},g=(o,c)=>{s.learning_environment&&l({learning_environment:{...s.learning_environment,[`selected_${o}`]:c}})};return e.jsx("div",{className:"border-l-2 border-orange-500 pl-4 mb-4",children:e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("button",{onClick:()=>v(!f),className:"flex items-center text-lg font-semibold",children:[e.jsx("span",{className:`transform transition-transform ${f?"rotate-90":""}`,children:"▶"}),s.role_name||"Unnamed Role"]}),e.jsx("button",{onClick:a,className:"text-red-500 hover:text-red-700",children:"Remove"})]}),f&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role Name"}),e.jsx("input",{type:"text",value:s.role_name,onChange:o=>l({role_name:o.target.value}),placeholder:"z.B. Moderator, Gruppenleiter, Beobachter",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Actor"}),e.jsxs("select",{value:s.actor_id,onChange:o=>l({actor_id:o.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select an actor..."}),t.map(o=>e.jsxs("option",{value:o.id,children:[o.name," (",o.type,")"]},o.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Task Description"}),e.jsx("textarea",{value:s.task_description,onChange:o=>l({task_description:o.target.value}),rows:3,placeholder:"Beschreiben Sie die Aufgaben und Verantwortlichkeiten dieser Rolle...",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Learning Environment"}),e.jsxs("select",{value:((j=s.learning_environment)==null?void 0:j.environment_id)||"",onChange:o=>N(o.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select an environment..."}),i.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})]}),d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Materials (hold Ctrl/Cmd to select multiple)"}),e.jsx("div",{className:"border rounded-md p-2 max-h-40 overflow-y-auto",children:d.materials.map(o=>{var c,b;return e.jsxs("label",{className:"flex items-center p-1 hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:((b=(c=s.learning_environment)==null?void 0:c.selected_materials)==null?void 0:b.includes(o.id))||!1,onChange:m=>{var u;const p=((u=s.learning_environment)==null?void 0:u.selected_materials)||[],n=m.target.checked?[...p,o.id]:p.filter(w=>w!==o.id);g("materials",n)},className:"mr-2"}),o.name]},o.id)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tools (hold Ctrl/Cmd to select multiple)"}),e.jsx("div",{className:"border rounded-md p-2 max-h-40 overflow-y-auto",children:d.tools.map(o=>{var c,b;return e.jsxs("label",{className:"flex items-center p-1 hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:((b=(c=s.learning_environment)==null?void 0:c.selected_tools)==null?void 0:b.includes(o.id))||!1,onChange:m=>{var u;const p=((u=s.learning_environment)==null?void 0:u.selected_tools)||[],n=m.target.checked?[...p,o.id]:p.filter(w=>w!==o.id);g("tools",n)},className:"mr-2"}),o.name]},o.id)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Services (hold Ctrl/Cmd to select multiple)"}),e.jsx("div",{className:"border rounded-md p-2 max-h-40 overflow-y-auto",children:d.services.map(o=>{var c,b;return e.jsxs("label",{className:"flex items-center p-1 hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:((b=(c=s.learning_environment)==null?void 0:c.selected_services)==null?void 0:b.includes(o.id))||!1,onChange:m=>{var u;const p=((u=s.learning_environment)==null?void 0:u.selected_services)||[],n=m.target.checked?[...p,o.id]:p.filter(w=>w!==o.id);g("services",n)},className:"mr-2"}),o.name]},o.id)})})]})]})]})]})})}const Ee={type:"formative",methods:[],criteria:[]};function Rs({activity:s,actors:t=[],environments:i=[],onUpdate:l,onDelete:a,availableActivities:r,phaseId:f}){var p;const[v,d]=L.useState(!0),N=()=>{var S;const n=(((S=s.roles)==null?void 0:S.length)||0)+1,w={role_id:`${s.activity_id}-R${n}`,role_name:"",actor_id:"",task_description:"",learning_environment:{environment_id:"",selected_materials:[],selected_tools:[],selected_services:[]}};l({roles:[...s.roles||[],w]})},g=(n,u)=>{const w=[...s.roles||[]];w[n]={...w[n],...u},l({roles:w})},j=n=>{const u=[...s.roles||[]];u.splice(n,1),l({roles:u})},o=n=>{l({assessment:{...s.assessment||Ee,...n}})},c=s.assessment||Ee,m=(()=>{const n={materials:[],tools:[],services:[]};return(s.roles||[]).forEach(u=>{var S,T,F;const w=i.find(B=>{var x;return B.id===((x=u.learning_environment)==null?void 0:x.environment_id)});w&&((((S=u.learning_environment)==null?void 0:S.selected_materials)||[]).forEach(B=>{const x=(w.materials||[]).find(C=>C.id===B);x&&n.materials.push({name:x.name,env:w.name})}),(((T=u.learning_environment)==null?void 0:T.selected_tools)||[]).forEach(B=>{const x=(w.tools||[]).find(C=>C.id===B);x&&n.tools.push({name:x.name,env:w.name})}),(((F=u.learning_environment)==null?void 0:F.selected_services)||[]).forEach(B=>{const x=(w.services||[]).find(C=>C.id===B);x&&n.services.push({name:x.name,env:w.name})}))}),n})();return e.jsx("div",{className:"border-l-2 border-yellow-500 pl-4 mb-4",children:e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("button",{onClick:()=>d(!v),className:"flex items-center text-lg font-semibold",children:[e.jsx("span",{className:`transform transition-transform ${v?"rotate-90":""}`,children:"▶"}),s.name||"Unbenannte Aktivität"]}),e.jsx("button",{onClick:a,className:"text-red-500 hover:text-red-700",children:"Entfernen"})]}),v&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name der Aktivität"}),e.jsx("input",{type:"text",value:s.name,onChange:n=>l({name:n.target.value}),placeholder:"z.B. Brainstorming, Gruppenarbeit, Präsentation",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dauer (Minuten)"}),e.jsx("input",{type:"number",value:s.duration,onChange:n=>l({duration:parseInt(n.target.value)}),placeholder:"Dauer in Minuten",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Beschreibung"}),e.jsx("textarea",{value:s.description,onChange:n=>l({description:n.target.value}),rows:2,placeholder:"Beschreiben Sie die Aktivität und ihren Ablauf...",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ziel"}),e.jsx("textarea",{value:s.goal,onChange:n=>l({goal:n.target.value}),rows:2,placeholder:"z.B. Verständnis der Grundkonzepte festigen",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Voraussetzende Aktivität"}),e.jsxs("select",{value:s.prerequisite_activity||"",onChange:n=>l({prerequisite_activity:n.target.value||null}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Keine"}),r.map(n=>e.jsx("option",{value:n.activity_id,children:n.name||n.activity_id},n.activity_id))]})]}),((p=s.next_activity)==null?void 0:p.length)>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nächste Aktivitäten"}),e.jsx("div",{className:"mt-1 text-sm text-gray-500",children:s.next_activity.map(n=>{const u=r.find(w=>w.activity_id===n);return u?u.name||u.activity_id:n}).join(", ")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Übergangstyp"}),e.jsxs("select",{value:s.transition_type,onChange:n=>l({transition_type:n.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"sequential",children:"Sequenziell"}),e.jsx("option",{value:"parallel",children:"Parallel"}),e.jsx("option",{value:"conditional",children:"Bedingt"}),e.jsx("option",{value:"branching",children:"Verzweigung"}),e.jsx("option",{value:"looping",children:"Wiederholung"}),e.jsx("option",{value:"optional",children:"Optional"}),e.jsx("option",{value:"feedback_loops",children:"Feedback-Schleife"})]})]}),(s.transition_type==="conditional"||s.transition_type==="branching"||s.transition_type==="looping"||s.transition_type==="feedback_loops")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bedingungsbeschreibung"}),e.jsx("textarea",{value:s.condition_description||"",onChange:n=>l({condition_description:n.target.value||null}),rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:s.transition_type==="conditional"?"Beschreiben Sie die Bedingung für den Übergang...":s.transition_type==="branching"?"Beschreiben Sie die Verzweigungskriterien...":s.transition_type==="looping"?"Beschreiben Sie die Wiederholungsbedingung...":"Beschreiben Sie die Feedback-Bedingung..."})]}),s.transition_type==="looping"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Wiederholungsbedingung"}),e.jsx("input",{type:"text",value:s.repeat_until||"",onChange:n=>l({repeat_until:n.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"z.B. Mindestens 80% korrekte Antworten"})]}),s.transition_type==="optional"&&e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("input",{type:"checkbox",checked:s.is_optional||!1,onChange:n=>l({is_optional:n.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Diese Aktivität ist optional"})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-lg font-medium mb-4",children:"Ausgewählte Ressourcen"}),m.materials.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Lernressourcen:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 ml-2",children:m.materials.map((n,u)=>e.jsxs("li",{children:[n.name," (",n.env,")"]},u))})]}),m.tools.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Werkzeuge:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 ml-2",children:m.tools.map((n,u)=>e.jsxs("li",{children:[n.name," (",n.env,")"]},u))})]}),m.services.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Dienste:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 ml-2",children:m.services.map((n,u)=>e.jsxs("li",{children:[n.name," (",n.env,")"]},u))})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-lg font-medium mb-4",children:"Bewertung"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Typ"}),e.jsxs("select",{value:c.type,onChange:n=>o({type:n.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"formative",children:"Formativ"}),e.jsx("option",{value:"summative",children:"Summativ"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Methoden (kommagetrennt)"}),e.jsx("input",{type:"text",value:c.methods.join(", "),onChange:n=>o({methods:n.target.value.split(",").map(u=>u.trim()).filter(Boolean)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Kriterien (kommagetrennt)"}),e.jsx("input",{type:"text",value:c.criteria.join(", "),onChange:n=>o({criteria:n.target.value.split(",").map(u=>u.trim()).filter(Boolean)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-lg font-medium",children:"Rollen"}),e.jsx("button",{onClick:N,className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Rolle hinzufügen"})]}),e.jsx("div",{className:"space-y-4",children:(s.roles||[]).map((n,u)=>e.jsx(Ms,{role:n,actors:t,environments:i,onUpdate:w=>g(u,w),onDelete:()=>j(u),activityId:s.activity_id},n.role_id))})]})]})]})})}function qs({phase:s,actors:t,environments:i,availablePhases:l,onUpdate:a,onDelete:r,sequenceId:f}){var o,c;const[v,d]=L.useState(!0),N=()=>{var n;const b=(((n=s.activities)==null?void 0:n.length)||0)+1,p={activity_id:`${s.phase_id}-A${b}`,name:"",description:"",duration:0,roles:[],goal:"",prerequisite_activity:null,transition_type:"sequential",condition_description:null,next_activity:[],assessment:{type:"formative",methods:[],criteria:[]}};a({activities:[...s.activities||[],p]})},g=(b,m)=>{const p=[...s.activities||[]],n=p[b];if("prerequisite_activity"in m){const u=n.prerequisite_activity,w=m.prerequisite_activity;if(u){const S=p.find(T=>T.activity_id===u);S&&(S.next_activity=S.next_activity.filter(T=>T!==n.activity_id))}if(w){const S=p.find(T=>T.activity_id===w);S&&!S.next_activity.includes(n.activity_id)&&S.next_activity.push(n.activity_id)}}Object.assign(n,m),a({activities:p})},j=b=>{const m=[...s.activities||[]],p=m[b];if(p.prerequisite_activity){const n=m.find(u=>u.activity_id===p.prerequisite_activity);n&&(n.next_activity=n.next_activity.filter(u=>u!==p.activity_id))}m.splice(b,1),a({activities:m})};return e.jsx("div",{className:"border-l-2 border-blue-500 pl-4 mb-4",children:e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("button",{onClick:()=>d(!v),className:"flex items-center text-lg font-semibold",children:[e.jsx("span",{className:`transform transition-transform ${v?"rotate-90":""}`,children:"▶"}),s.phase_name||"Unbenannte Phase"]}),e.jsx("button",{onClick:r,className:"text-red-500 hover:text-red-700",children:"Entfernen"})]}),v&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name der Phase"}),e.jsx("input",{type:"text",value:s.phase_name,onChange:b=>a({phase_name:b.target.value}),placeholder:"z.B. Aktivierung, Erarbeitung, Sicherung",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Zeitrahmen"}),e.jsx("input",{type:"text",value:s.time_frame,onChange:b=>a({time_frame:b.target.value}),placeholder:"z.B. 15 Minuten",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Lernziel"}),e.jsx("textarea",{value:s.learning_goal,onChange:b=>a({learning_goal:b.target.value}),rows:2,placeholder:"z.B. Vorwissen aktivieren und Interesse wecken",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Voraussetzende Phase"}),e.jsxs("select",{value:s.prerequisite_phase||"",onChange:b=>a({prerequisite_phase:b.target.value||null}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Keine"}),l.map(b=>e.jsx("option",{value:b.phase_id,children:b.phase_name||b.phase_id},b.phase_id))]})]}),s.next_phase&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nächste Phase"}),e.jsx("div",{className:"mt-1 text-sm text-gray-500",children:((o=l.find(b=>b.phase_id===s.next_phase))==null?void 0:o.phase_name)||s.next_phase})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-lg font-medium",children:"Aktivitäten"}),e.jsx("button",{onClick:N,className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Aktivität hinzufügen"})]}),e.jsx("div",{className:"space-y-4",children:(c=s.activities)==null?void 0:c.map((b,m)=>e.jsx(Rs,{activity:b,actors:t,environments:i,availableActivities:s.activities.filter((p,n)=>n!==m),onUpdate:p=>g(m,p),onDelete:()=>j(m),phaseId:s.phase_id},b.activity_id))})]})]})]})})}function Fs({sequence:s,sequenceIndex:t,availableSequences:i,actors:l,environments:a,onUpdate:r,onAddPhase:f,onUpdatePhase:v,onDeletePhase:d}){var N,g;return e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name der Sequenz"}),e.jsx("input",{type:"text",value:s.sequence_name,onChange:j=>r({sequence_name:j.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Zeitrahmen"}),e.jsx("input",{type:"text",value:s.time_frame,onChange:j=>r({time_frame:j.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Lernziel"}),e.jsx("textarea",{value:s.learning_goal,onChange:j=>r({learning_goal:j.target.value}),rows:2,placeholder:"z.B. Die Schüler verstehen die Grundlagen der Addition und können sie anwenden",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Voraussetzende Sequenzen"}),e.jsx("select",{multiple:!0,value:s.prerequisite_learningsequences,onChange:j=>{const o=Array.from(j.target.selectedOptions,c=>c.value);r({prerequisite_learningsequences:o})},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",size:3,children:i.map(j=>e.jsx("option",{value:j.sequence_id,children:j.sequence_name||j.sequence_id},j.sequence_id))}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Strg/Cmd gedrückt halten für Mehrfachauswahl"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Übergangstyp"}),e.jsxs("select",{value:s.transition_type,onChange:j=>r({transition_type:j.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"sequential",children:"Sequenziell"}),e.jsx("option",{value:"parallel",children:"Parallel"}),e.jsx("option",{value:"conditional",children:"Bedingt"}),e.jsx("option",{value:"all_completed",children:"Alle abgeschlossen"}),e.jsx("option",{value:"one_of",children:"Eine von"})]})]}),s.transition_type==="conditional"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bedingungsbeschreibung"}),e.jsx("textarea",{value:s.condition_description||"",onChange:j=>r({condition_description:j.target.value||null}),rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),((N=s.next_learningsequence)==null?void 0:N.length)>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nächste Sequenzen"}),e.jsx("div",{className:"mt-1 text-sm text-gray-500",children:s.next_learningsequence.map(j=>{const o=i.find(c=>c.sequence_id===j);return o?o.sequence_name||o.sequence_id:j}).join(", ")})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Phasen"}),e.jsx("button",{onClick:f,className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Phase hinzufügen"})]}),e.jsx("div",{className:"space-y-4",children:(g=s.phases)==null?void 0:g.map((j,o)=>e.jsx(qs,{phase:j,actors:l,environments:a,onUpdate:c=>v(o,c),onDelete:()=>d(o),availablePhases:s.phases.filter((c,b)=>b!==o),sequenceId:s.sequence_id},j.phase_id))})]})]})})}function Vs(){var N,g;const{solution:s,setSolution:t,actors:i,environments:l}=Y(),a=()=>{const j=s.didactic_template.learning_sequences||[],b={sequence_id:`LS${j.length+1}`,sequence_name:"",time_frame:"",learning_goal:"",phases:[],prerequisite_learningsequences:[],transition_type:"sequential",condition_description:null,next_learningsequence:[]};t({...s,didactic_template:{...s.didactic_template,learning_sequences:[...j,b]}})},r=(j,o)=>{const c={...s},b=c.didactic_template.learning_sequences,m=b[j];if("prerequisite_learningsequences"in o){const p=m.prerequisite_learningsequences,n=o.prerequisite_learningsequences||[];p.forEach(u=>{const w=b.find(S=>S.sequence_id===u);w&&(w.next_learningsequence=w.next_learningsequence.filter(S=>S!==m.sequence_id))}),n.forEach(u=>{const w=b.find(S=>S.sequence_id===u);w&&!w.next_learningsequence.includes(m.sequence_id)&&w.next_learningsequence.push(m.sequence_id)})}Object.assign(m,o),t(c)},f=j=>{const o={...s},c=o.didactic_template.learning_sequences[j],b=c.phases.length+1,p={phase_id:`${c.sequence_id}-P${b}`,phase_name:"",time_frame:"",learning_goal:"",activities:[],prerequisite_phase:null,transition_type:"sequential",condition_description:null,next_phase:null};c.phases=[...c.phases,p],t(o)},v=(j,o,c)=>{const b={...s},p=b.didactic_template.learning_sequences[j].phases,n=p[o];if("prerequisite_phase"in c){const u=n.prerequisite_phase,w=c.prerequisite_phase;if(u){const S=p.find(T=>T.phase_id===u);S&&(S.next_phase=null)}if(w){const S=p.find(T=>T.phase_id===w);S&&(S.next_phase=n.phase_id)}}Object.assign(n,c),t(b)},d=(j,o)=>{const c={...s},b=c.didactic_template.learning_sequences[j],m=b.phases[o];if(m.prerequisite_phase){const p=b.phases.find(n=>n.phase_id===m.prerequisite_phase);p&&(p.next_phase=m.next_phase)}b.phases.splice(o,1),t(c)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Unterrichtsablauf"}),e.jsx(ae,{})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Elemente des Lernablaufs"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Lernsequenzen"}),e.jsx("p",{className:"text-blue-700",children:"Übergeordnete methodische Einheiten, die meist eine gesamte Lerneinheit umfassen. Sie können flexibel verknüpft werden für Methodenwechsel oder parallele Lernpfade."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Phasen"}),e.jsx("p",{className:"text-blue-700",children:"Einzelne Abschnitte innerhalb einer Sequenz. Sie laufen immer nacheinander ab und müssen abgeschlossen sein, bevor die nächste Phase beginnt."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Aktivitäten"}),e.jsx("p",{className:"text-blue-700",children:"Die kleinsten Einheiten im Prozessablauf. Sie können frei kombiniert werden und enthalten die konkreten Lernhandlungen."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Rollen"}),e.jsx("p",{className:"text-blue-700",children:"Beschreiben die Aufgaben der Akteure in den Aktivitäten und sind mit Lernumgebungen und Ressourcen verknüpft."})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Ablaufoptionen"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-blue-700 font-medium",children:"Für Lernsequenzen:"}),e.jsxs("ul",{className:"list-disc list-inside text-blue-600 ml-2",children:[e.jsx("li",{children:"Sequenziell (nacheinander)"}),e.jsx("li",{children:"Parallel (gleichzeitig)"}),e.jsx("li",{children:"Bedingt (mit Bedingung)"})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-blue-700 font-medium",children:"Für Phasen:"}),e.jsx("ul",{className:"list-disc list-inside text-blue-600 ml-2",children:e.jsx("li",{children:"Sequenziell (nacheinander)"})})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-blue-700 font-medium",children:"Für Aktivitäten:"}),e.jsxs("ul",{className:"list-disc list-inside text-blue-600 ml-2",children:[e.jsx("li",{children:"Sequenziell"}),e.jsx("li",{children:"Parallel"}),e.jsx("li",{children:"Bedingt"}),e.jsx("li",{children:"Verzweigung"}),e.jsx("li",{children:"Wiederholung"}),e.jsx("li",{children:"Optional"}),e.jsx("li",{children:"Feedback-Schleife"})]})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 p-6 rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-emerald-900 mb-4",children:"Beispiel: Galeriemethode"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white bg-opacity-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-emerald-800",children:"Phase 1: Gruppenbildung"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsx("p",{className:"text-emerald-700 font-medium",children:"Aktivität: Teams bilden"}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-emerald-700",children:[e.jsx("p",{className:"font-medium",children:"Rolle: Lehrkraft"}),e.jsxs("ul",{className:"list-disc list-inside ml-2 text-sm",children:[e.jsx("li",{children:"Akteur: Frau Schmidt"}),e.jsx("li",{children:"Lernumgebung: Klassenzimmer"}),e.jsx("li",{children:"Ressourcen: Gruppeneinteilungskarten"})]})]}),e.jsxs("div",{className:"mt-2 text-emerald-700",children:[e.jsx("p",{className:"font-medium",children:"Rolle: Lernende"}),e.jsxs("ul",{className:"list-disc list-inside ml-2 text-sm",children:[e.jsx("li",{children:"Akteur: Hauptlerngruppe"}),e.jsx("li",{children:"Lernumgebung: Klassenzimmer"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-white bg-opacity-30 p-2 rounded",children:e.jsx("p",{className:"text-emerald-800",children:"Phase 2: Input"})}),e.jsx("div",{className:"bg-white bg-opacity-30 p-2 rounded",children:e.jsx("p",{className:"text-emerald-800",children:"Phase 3: Aufgabenstellung"})}),e.jsx("div",{className:"bg-white bg-opacity-30 p-2 rounded",children:e.jsx("p",{className:"text-emerald-800",children:"Phase 4: Gruppenarbeit & Ausstellung"})}),e.jsx("div",{className:"bg-white bg-opacity-30 p-2 rounded",children:e.jsx("p",{className:"text-emerald-800",children:"Phase 5: Auswertung"})})]})]})]})]}),e.jsx("div",{className:"space-y-6",children:(g=(N=s.didactic_template)==null?void 0:N.learning_sequences)==null?void 0:g.map((j,o)=>e.jsx(Fs,{sequence:j,sequenceIndex:o,availableSequences:s.didactic_template.learning_sequences.filter((c,b)=>b!==o),actors:i,environments:l,onUpdate:c=>r(o,c),onAddPhase:()=>f(o),onUpdatePhase:(c,b)=>v(o,c,b),onDeletePhase:c=>d(o,c)},j.sequence_id))}),e.jsx("button",{onClick:a,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Lernsequenz hinzufügen"})]})}const le=300,ce=150,Os=300,Ks=200;function me(s){return q.createElement("div",{className:"p-2"},s)}function be(s){var f,v,d,N;const t=[],i=[],l=new Se.graphlib.Graph;if(l.setDefaultEdgeLabel(()=>({})),l.setGraph({rankdir:"TB",ranksep:Os,nodesep:Ks,rankAlignment:"UL"}),(f=s.solution)!=null&&f.solution_description){const g="solution";t.push({id:g,data:{label:me([q.createElement("div",{className:"font-bold",key:"title"},"Lösung"),q.createElement("div",{className:"text-sm",key:"desc"},s.solution.solution_description)])},position:{x:0,y:0},className:"bg-gray-100 border-2 border-gray-500 rounded-md"}),l.setNode(g,{width:le,height:ce,rank:0})}if((v=s.solution)!=null&&v.didactic_approach){const g="didactic_approach";t.push({id:g,data:{label:me([q.createElement("div",{className:"font-bold",key:"title"},"Didaktischer Ansatz"),q.createElement("div",{className:"text-sm",key:"desc"},s.solution.didactic_approach)])},position:{x:0,y:0},className:"bg-gray-100 border-2 border-gray-500 rounded-md"}),l.setNode(g,{width:le,height:ce,rank:0})}return(((N=(d=s.solution)==null?void 0:d.didactic_template)==null?void 0:N.learning_sequences)||[]).forEach((g,j)=>{var b,m,p;const o=g.sequence_id;t.push({id:o,data:{label:me([q.createElement("div",{className:"font-bold",key:"title"},g.sequence_name||g.sequence_id),q.createElement("div",{className:"text-sm",key:"time"},`Zeit: ${g.time_frame}`),q.createElement("div",{className:"text-sm",key:"goal"},`Ziel: ${g.learning_goal}`),q.createElement("div",{className:"text-sm",key:"transition"},`Übergang: ${g.transition_type}`)])},position:{x:0,y:0},className:"bg-blue-100 border-2 border-blue-500 rounded-md"}),l.setNode(o,{width:le,height:ce,rank:1}),(b=s.solution)!=null&&b.solution_description&&i.push({id:`edge-solution-${o}`,source:"solution",target:o,style:{strokeDasharray:"5,5"},label:"enthält"}),(m=s.solution)!=null&&m.didactic_approach&&i.push({id:`edge-approach-${o}`,source:"didactic_approach",target:o,style:{strokeDasharray:"5,5"},label:"implementiert"}),((p=g.prerequisite_learningsequences)==null?void 0:p.length)>0&&g.prerequisite_learningsequences.forEach(n=>{i.push({id:`prereq-${n}-${o}`,source:n,target:o,animated:!0,style:{stroke:g.transition_type==="parallel"?"#9333ea":"#FF8C00"},label:g.transition_type==="parallel"?"parallel":g.transition_type==="all_completed"?"alle abgeschlossen":g.transition_type==="one_of"?"eine von":g.transition_type==="conditional"?"bedingt":"sequenziell",labelStyle:{fill:g.transition_type==="parallel"?"#9333ea":"#FF8C00",fontWeight:"bold"}})}),(g.phases||[]).forEach((n,u)=>{const w=n.phase_id;t.push({id:w,data:{label:me([q.createElement("div",{className:"font-bold",key:"title"},n.phase_name||n.phase_id),q.createElement("div",{className:"text-sm",key:"time"},`Zeit: ${n.time_frame}`),q.createElement("div",{className:"text-sm",key:"goal"},`Ziel: ${n.learning_goal}`)])},position:{x:0,y:0},className:"bg-green-100 border-2 border-green-500 rounded-md"}),l.setNode(w,{width:le,height:ce,rank:2,column:j}),i.push({id:`edge-${o}-${w}`,source:o,target:w,style:{strokeDasharray:"5,5"},label:"enthält"}),n.prerequisite_phase&&i.push({id:`flow-${n.prerequisite_phase}-${w}`,source:n.prerequisite_phase,target:w,animated:!0,style:{stroke:"#FF8C00"},label:`Phase ${u+1}`,labelStyle:{fill:"#FF8C00",fontWeight:"bold"}}),(n.activities||[]).forEach((T,F)=>{var C;const B=T.activity_id;if(t.push({id:B,data:{label:me([q.createElement("div",{className:"font-bold",key:"title"},T.name||T.activity_id),q.createElement("div",{className:"text-sm",key:"duration"},`Dauer: ${T.duration} min`),q.createElement("div",{className:"text-sm",key:"desc"},T.description),q.createElement("div",{className:"text-sm",key:"goal"},`Ziel: ${T.goal}`),q.createElement("div",{className:"text-sm",key:"assessment"},`Bewertung: ${((C=T.assessment)==null?void 0:C.type)==="formative"?"Formativ":"Summativ"}`)])},position:{x:0,y:0},className:"bg-yellow-100 border-2 border-yellow-500 rounded-md"}),l.setNode(B,{width:le,height:ce,rank:3,column:j*2+u}),i.push({id:`edge-${w}-${B}`,source:w,target:B,style:{strokeDasharray:"5,5"},label:"enthält"}),T.prerequisite_activity){const I=T.transition_type==="parallel"?"#9333ea":"#FF8C00";i.push({id:`flow-${T.prerequisite_activity}-${B}`,source:T.prerequisite_activity,target:B,animated:!0,style:{stroke:I},label:T.transition_type,labelStyle:{fill:I,fontWeight:"bold"}})}const x=T.roles||[];x.forEach((I,O)=>{var E,Z,Q,se,H,A,R,X;const z=I.role_id,W=(E=s.actors)==null?void 0:E.find(P=>P.id===I.actor_id),$=(Z=s.environments)==null?void 0:Z.find(P=>{var K;return P.id===((K=I.learning_environment)==null?void 0:K.environment_id)}),V=((se=(Q=I.learning_environment)==null?void 0:Q.selected_materials)==null?void 0:se.map(P=>{var ee;const K=(ee=$==null?void 0:$.materials)==null?void 0:ee.find(ie=>ie.id===P);return K==null?void 0:K.name}).filter(Boolean))||[],h=((A=(H=I.learning_environment)==null?void 0:H.selected_tools)==null?void 0:A.map(P=>{var ee;const K=(ee=$==null?void 0:$.tools)==null?void 0:ee.find(ie=>ie.id===P);return K==null?void 0:K.name}).filter(Boolean))||[],k=((X=(R=I.learning_environment)==null?void 0:R.selected_services)==null?void 0:X.map(P=>{var ee;const K=(ee=$==null?void 0:$.services)==null?void 0:ee.find(ie=>ie.id===P);return K==null?void 0:K.name}).filter(Boolean))||[],y=[q.createElement("div",{className:"font-bold",key:"title"},`${(W==null?void 0:W.name)||"Unbekannter Akteur"} (als ${I.role_name})`)];if(I.task_description&&y.push(q.createElement("div",{className:"text-sm",key:"task"},`Aufgabe: ${I.task_description}`)),$&&y.push(q.createElement("div",{className:"text-sm",key:"env"},`Lernumgebung: ${$.name}`)),V.length>0&&y.push(q.createElement("div",{className:"text-sm",key:"materials"},`Lernressourcen: ${V.join(", ")}`)),h.length>0&&y.push(q.createElement("div",{className:"text-sm",key:"tools"},`Werkzeuge: ${h.join(", ")}`)),k.length>0&&y.push(q.createElement("div",{className:"text-sm",key:"services"},`Dienste: ${k.join(", ")}`)),t.push({id:z,data:{label:me(y)},position:{x:0,y:0},className:"bg-orange-100 border-2 border-orange-500 rounded-md"}),l.setNode(z,{width:le,height:ce*1.5,rank:4,column:O}),i.push({id:`edge-${B}-${z}`,source:B,target:z,style:{strokeDasharray:"5,5"},label:"führt aus"}),O>0){const P=x[O-1].role_id;i.push({id:`parallel-${P}-${z}`,source:P,target:z,animated:!0,style:{stroke:"#9333ea"},label:"parallel",labelStyle:{fill:"#9333ea",fontWeight:"bold"}})}})})})}),t.forEach(g=>{l.setNode(g.id,{width:le,height:ce})}),i.forEach(g=>{l.setEdge(g.source,g.target)}),Se.layout(l),{nodes:t.map(g=>{const j=l.node(g.id);return{...g,position:{x:j.x-le/2,y:j.y-ce/2}}}),edges:i}}const Ws=()=>e.jsx(Ue,{position:"top-left",className:"bg-white p-2 rounded shadow",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-100 border-2 border-gray-500"}),e.jsx("span",{children:"Lösung"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-100 border-2 border-blue-500"}),e.jsx("span",{children:"Lernsequenzen"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-100 border-2 border-green-500"}),e.jsx("span",{children:"Phasen"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-100 border-2 border-yellow-500"}),e.jsx("span",{children:"Aktivitäten"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-orange-100 border-2 border-orange-500"}),e.jsx("span",{children:"Rollen"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-pink-100 border-2 border-pink-500"}),e.jsx("span",{children:"Akteure"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-purple-100 border-2 border-purple-500"}),e.jsx("span",{children:"Lernumgebungen"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-100 border-2 border-red-500"}),e.jsx("span",{children:"Lernressourcen"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-indigo-100 border-2 border-indigo-500"}),e.jsx("span",{children:"Werkzeuge"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-teal-100 border-2 border-teal-500"}),e.jsx("span",{children:"Dienste"})]}),e.jsxs("div",{className:"mt-4 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-0 border-t-2 border-solid"}),e.jsx("span",{children:"Enthält/Implementiert"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-0 border-t-2 border-dashed"}),e.jsx("span",{children:"Referenziert"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-0 border-t-2 border-orange-500"}),e.jsx("span",{children:"Sequenzieller Ablauf"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-0 border-t-2 border-purple-500"}),e.jsx("span",{children:"Parallele Ausführung"})]})]})]})}),Gs=()=>{var g,j,o;const s=Y(),{nodes:t,edges:i}=be(s),[l,a,r]=Ze(t),[f,v,d]=He(i);L.useEffect(()=>{const{nodes:c,edges:b}=be(s);a(c),v(b)},[s,a,v]);const N=L.useCallback(()=>{const{nodes:c,edges:b}=be(s);a(c),v(b)},[s,a,v]);return(o=(j=(g=s.solution)==null?void 0:g.didactic_template)==null?void 0:j.learning_sequences)!=null&&o.length?e.jsx("div",{className:"h-[800px] border rounded-lg overflow-hidden bg-white",children:e.jsxs(Je,{nodes:l,edges:f,onNodesChange:r,onEdgesChange:d,onInit:N,connectionMode:Ye.Loose,minZoom:.1,maxZoom:1.5,fitView:!0,children:[e.jsx(Qe,{}),e.jsx(Xe,{}),e.jsx(Ws,{})]})}):e.jsx("div",{className:"h-[800px] border rounded-lg bg-white flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500",children:"Keine Lernsequenzen verfügbar."})})};function Us({resource:s,onClick:t}){const i=s.wlo_metadata?Array.isArray(s.wlo_metadata)?s.wlo_metadata[0]:s.wlo_metadata:null,l=!!i,a=s.name;return l?e.jsx("button",{onClick:t,className:"text-blue-600 hover:underline cursor-pointer",title:(i==null?void 0:i.description)||"",children:a}):e.jsx("span",{className:"text-gray-700",title:(i==null?void 0:i.description)||"",children:a})}function xe({resources:s,type:t,onResourceClick:i}){const l=s.filter(r=>r.wlo_metadata);s.filter(r=>!r.wlo_metadata);const a=l.length>0;return e.jsx("div",{className:"relative",children:e.jsxs("div",{className:`text-sm ${a?"cursor-pointer":""}`,children:[e.jsxs("span",{className:"text-gray-600",children:[t,":"]})," ",s.map((r,f)=>e.jsxs("span",{children:[f>0&&", ",e.jsx(Us,{resource:r,onClick:()=>r.wlo_metadata&&i([r])})]},`${r.id}-${f}`))]})})}function Zs({roleInfo:s,onResourceClick:t}){return e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"font-medium",children:s.role.role_name||"Unbenannte Rolle"}),e.jsx("div",{className:"text-sm text-gray-500",children:s.role.task_description}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Lernumgebung: ",s.environmentName]}),s.materials.length>0&&e.jsx(xe,{resources:s.materials,type:"Lernressourcen",onResourceClick:t}),s.tools.length>0&&e.jsx(xe,{resources:s.tools,type:"Werkzeuge",onResourceClick:t}),s.services.length>0&&e.jsx(xe,{resources:s.services,type:"Dienste",onResourceClick:t})]})]})}function Hs(){const s=Y(),i=(()=>{var r;const a={materials:[],tools:[],services:[]};return(r=s.environments)==null||r.forEach(f=>{var v,d,N;(v=f.materials)==null||v.forEach(g=>{g.wlo_metadata&&a.materials.push(g)}),(d=f.tools)==null||d.forEach(g=>{g.wlo_metadata&&a.tools.push(g)}),(N=f.services)==null||N.forEach(g=>{g.wlo_metadata&&a.services.push(g)})}),a})();return Object.values(i).some(a=>a.length>0)?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:"WLO Ressourcen"}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Lernressourcen"}),e.jsx("div",{className:"space-y-4",children:i.materials.map((a,r)=>e.jsx(ue,{resource:a},r))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Werkzeuge"}),e.jsx("div",{className:"space-y-4",children:i.tools.map((a,r)=>e.jsx(ue,{resource:a},r))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Dienste"}),e.jsx("div",{className:"space-y-4",children:i.services.map((a,r)=>e.jsx(ue,{resource:a},r))})]})]})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"WLO Ressourcen"}),e.jsx("p",{className:"text-gray-500",children:"Keine WLO Ressourcen verfügbar."})]})}function Js(){var v,d;const s=Y(),t=((d=(v=s.solution)==null?void 0:v.didactic_template)==null?void 0:d.learning_sequences)||[],i=s.actors||[],l=s.environments||[],[a,r]=L.useState([]),f=L.useCallback(N=>{r(N)},[]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"flex-1 bg-white p-6 rounded-lg shadow overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aktivitätsdetails"}),i.map(N=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:N.name||"Unbenannter Akteur"},N.id))]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(N=>{var g;return e.jsxs(q.Fragment,{children:[e.jsx("tr",{className:"bg-blue-50",children:e.jsxs("td",{colSpan:i.length+1,className:"px-6 py-4",children:[e.jsx("div",{className:"font-medium",children:N.sequence_name||N.sequence_id}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Zeit: ",N.time_frame]})]})}),(g=N.phases)==null?void 0:g.map(j=>{var o;return e.jsxs(q.Fragment,{children:[e.jsx("tr",{className:"bg-green-50",children:e.jsxs("td",{colSpan:i.length+1,className:"px-6 py-4 pl-8",children:[e.jsx("div",{className:"font-medium",children:j.phase_name||j.phase_id}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Zeit: ",j.time_frame]})]})}),(o=j.activities)==null?void 0:o.map(c=>{var m;const b={};return(m=c.roles)==null||m.forEach(p=>{var u,w,S,T,F,B;b[p.actor_id]||(b[p.actor_id]=[]);const n=l.find(x=>{var C;return x.id===((C=p.learning_environment)==null?void 0:C.environment_id)});n&&b[p.actor_id].push({role:p,environmentName:n.name,materials:((w=(u=p.learning_environment)==null?void 0:u.selected_materials)==null?void 0:w.map(x=>n.materials.find(C=>C.id===x)).filter(Boolean))||[],tools:((T=(S=p.learning_environment)==null?void 0:S.selected_tools)==null?void 0:T.map(x=>n.tools.find(C=>C.id===x)).filter(Boolean))||[],services:((B=(F=p.learning_environment)==null?void 0:F.selected_services)==null?void 0:B.map(x=>n.services.find(C=>C.id===x)).filter(Boolean))||[]})}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 pl-12",children:[e.jsx("div",{className:"font-medium",children:c.name||c.activity_id}),e.jsx("div",{className:"text-sm text-gray-500",children:c.description}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Dauer: ",c.duration," min"]})]}),i.map(p=>{var n;return e.jsx("td",{className:"px-6 py-4",children:(n=b[p.id])==null?void 0:n.map((u,w)=>e.jsx(Zs,{roleInfo:u,onResourceClick:f},`${u.role.role_name}-${w}`))},p.id)})]},c.activity_id)})]},j.phase_id)})]},N.sequence_id)})})]})}),e.jsxs("div",{className:"w-[300px] bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"WLO Inhalte"}),e.jsx("div",{className:"space-y-3",children:a.length>0?a.map((N,g)=>e.jsx(ue,{resource:N},g)):e.jsx("p",{className:"text-gray-500",children:"Klicken Sie auf einen WLO-Inhalt in der Tabelle, um Details anzuzeigen."})})]})]}),e.jsx(Hs,{})]})}function Ys({value:s,onChange:t,readOnly:i=!1}){const l=L.useRef(null);L.useEffect(()=>()=>{var r,f;l.current&&((f=(r=l.current).dispose)==null||f.call(r))},[]);const a=r=>{l.current=r};return e.jsx(es,{height:"100%",language:"json",theme:"vs-dark",value:s,onChange:r=>t(r||""),options:{minimap:{enabled:!1},readOnly:i,scrollBeyondLastLine:!1,fontSize:14,wordWrap:"on",automaticLayout:!0,formatOnPaste:!0,formatOnType:!0},onMount:a,loading:e.jsx("div",{className:"p-4 text-gray-500",children:"Loading editor..."})})}function Qs(){const s=Y(),t={metadata:s.metadata,problem:s.problem,context:s.context,influence_factors:s.influence_factors,solution:s.solution,consequences:s.consequences,implementation_notes:s.implementation_notes,related_patterns:s.related_patterns,feedback:s.feedback,sources:s.sources,actors:s.actors,environments:s.environments};return e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsx("div",{className:"h-[500px] border rounded-lg overflow-hidden",children:e.jsx(Ys,{value:JSON.stringify(t,null,2),onChange:()=>{},readOnly:!0})})})}function Xs(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Vorschau"}),e.jsx(ae,{})]}),e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-lg shadow-sm mb-8",children:[e.jsx("p",{className:"text-indigo-900",children:"Hier sehen Sie Ihr didaktisches Template in verschiedenen Ansichten:"}),e.jsxs("ul",{className:"mt-4 space-y-2 text-indigo-800 list-disc list-inside",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Tabellenansicht:"})," Detaillierte Übersicht aller Aktivitäten und Rollen, einschließlich der empfohlenen WLO-Bildungsressourcen nach erfolgtem Inhalte-Abruf"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Graphansicht:"})," Visualisierung der Beziehungen und Abläufe zwischen allen Komponenten des Templates"]}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Rohdaten:"})," Technische JSON-Struktur für Export/Import und Weiterverarbeitung"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Tabellenansicht"}),e.jsx(Js,{})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Graphansicht"}),e.jsx(Gs,{})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Rohdaten"}),e.jsx(Qs,{})]})]})}const et=_.object({id:_.string(),name:_.string(),material_type:_.string(),source:_.enum(["manual","database","filter"]),access_link:_.string(),database_id:_.string().optional(),filter_criteria:_.record(_.string()).optional()}),st=_.object({id:_.string(),name:_.string(),tool_type:_.string(),source:_.enum(["manual","database","filter"]),access_link:_.string(),database_id:_.string().optional(),filter_criteria:_.record(_.string()).optional()}),tt=_.object({id:_.string(),name:_.string(),service_type:_.string(),source:_.enum(["manual","database","filter"]),access_link:_.string(),database_id:_.string().optional(),filter_criteria:_.record(_.string()).optional()}),Te=_.object({id:_.string(),name:_.string().min(1,"Name ist erforderlich"),description:_.string(),materials:_.array(et).min(1,"Mindestens eine Lernressource ist erforderlich"),tools:_.array(st).min(1,"Mindestens ein Werkzeug ist erforderlich"),services:_.array(tt).min(1,"Mindestens ein Dienst ist erforderlich")}),nt=_.object({metadata:_.object({title:_.string(),description:_.string(),keywords:_.array(_.string()),author:_.string(),version:_.string()}),problem:_.object({problem_description:_.string(),learning_goals:_.array(_.string()),didactic_keywords:_.array(_.string())}),context:_.object({target_group:_.string(),subject:_.string(),educational_level:_.string(),prerequisites:_.string(),time_frame:_.string()}),influence_factors:_.array(_.object({factor:_.string(),description:_.string()})),solution:_.object({solution_description:_.string(),didactic_approach:_.string(),didactic_template:_.object({learning_sequences:_.array(_.any())})}),consequences:_.object({advantages:_.array(_.string()),disadvantages:_.array(_.string())}),implementation_notes:_.array(_.object({note_id:_.string(),description:_.string()})),related_patterns:_.array(_.string()),feedback:_.object({comments:_.array(_.any())}),sources:_.array(_.object({source_id:_.string(),title:_.string(),author:_.string(),year:_.number(),publisher:_.string(),url:_.string()})),actors:_.array(_.any()),environments:_.array(Te)});function at(s){try{return Array.isArray(s.environments)&&s.environments.forEach((t,i)=>{try{Te.parse(t)}catch(l){throw new Error(`Template Strukturfehler in Lernumgebung ${i+1}: ${l instanceof Error?l.message:"Unbekannter Fehler"}`)}}),nt.parse(s)}catch(t){throw new Error(`Template Strukturfehler: ${t instanceof Error?t.message:"Unbekannter Fehler"}`)}}async function it(s){var t,i,l,a,r,f,v,d,N;try{const j=await(await fetch("/community-templates/index.json")).json(),o=((i=(t=s.context)==null?void 0:t.subject)==null?void 0:i.toLowerCase())||"",c=((a=(l=s.metadata)==null?void 0:l.keywords)==null?void 0:a.map(m=>m.toLowerCase()))||[],b=[];for(const m of j.templates){const n=await(await fetch(`/community-templates/${m.file}`)).json(),u=((f=(r=n.context)==null?void 0:r.subject)==null?void 0:f.toLowerCase())||"",w=u&&o&&(u.includes(o)||o.includes(u)),S=((d=(v=n.metadata)==null?void 0:v.keywords)==null?void 0:d.map(F=>F.toLowerCase()))||[],T=c.some(F=>S.includes(F));if((w||T)&&b.push({name:m.name,subject:((N=n.context)==null?void 0:N.subject)||"Unbekannt",template:n}),b.length>=3)break}return b}catch(g){return console.error("Error loading community templates:",g),[]}}const fe=_.object({id:_.string(),name:_.string(),type:_.string(),source:_.enum(["manual","database","filter"]),access_link:_.string()});_.object({id:_.string(),name:_.string(),description:_.string(),materials:_.array(fe),tools:_.array(fe),services:_.array(fe)});async function rt(s,t,i,l,a,r){const f=new Le({apiKey:l,dangerouslyAllowBrowser:!0});r("🔧 Erstelle KI-Prompt mit aktuellem Template und Beispiel...");let v="";if(a){r(`
🔍 Suche nach passenden Community-Templates...`);const N=await it(s);N.length>0?(r(`
✅ ${N.length} passende Templates gefunden:`),N.forEach(g=>{r(`- ${g.name} (${g.subject})`)}),v=`
Relevante Community-Templates als zusätzliche Referenz:
${JSON.stringify(N.map(g=>g.template),null,2)}

Berücksichtigen Sie die guten Aspekte dieser Templates, insbesondere:
- Didaktische Strukturen
- Aktivitätsabläufe
- Ressourcenverwendung
- Rollenverteilung
`):r(`
ℹ️ Keine passenden Community-Templates gefunden`)}const d=`
Als didaktischer Assistent helfen Sie bei der Vervollständigung oder Anpassung dieses Templates.
Bitte erzeugen Sie ein vollständiges Template im exakt gleichen Format wie das Beispiel.

WICHTIG: Folgen Sie EXAKT dieser Struktur für Lernumgebungen:

{
  "id": "ENV1",
  "name": "Name der Umgebung",
  "description": "Beschreibung der Umgebung",
  "materials": [
    {
      "id": "ENV1-M1",
      "name": "Name des Materials",
      "material_type": "Typ des Materials",
      "source": "manual",
      "access_link": "Link zum Material"
    }
  ],
  "tools": [
    {
      "id": "ENV1-T1", 
      "name": "Name des Werkzeugs",
      "tool_type": "Typ des Werkzeugs",
      "source": "manual",
      "access_link": "Link zum Werkzeug"
    }
  ],
  "services": [
    {
      "id": "ENV1-S1",
      "name": "Name des Dienstes", 
      "service_type": "Typ des Dienstes",
      "source": "manual",
      "access_link": "Link zum Dienst"
    }
  ]
}

Aktuelles Template:
${JSON.stringify(s,null,2)}

Beispielvorlage als Referenz:
${JSON.stringify(J,null,2)}

${v}

Anweisungen des Nutzers:
${t}

Bitte generieren Sie ein vollständiges Template mit allen erforderlichen Elementen, insbesondere:
1. Mindestens eine Lernumgebung mit der exakten Struktur wie oben gezeigt
2. Mindestens 3 Materialien pro Umgebung
3. Mindestens 2 Werkzeuge pro Umgebung
4. Mindestens 1 Dienst pro Umgebung
5. Korrekte IDs und Referenzen zwischen Elementen

Geben Sie das Template als vollständiges JSON-Objekt zurück.`;r("🚀 Sende Anfrage an KI-Modell...");try{const N=await f.chat.completions.create({model:i,messages:[{role:"system",content:"Sie sind ein erfahrener didaktischer Assistent, der Templates mit allen erforderlichen Details erstellt."},{role:"user",content:d}],temperature:.7,max_tokens:12e3});if(r("✅ KI-Antwort erhalten"),r("🔍 Extrahiere und parse JSON..."),!N.choices[0].message.content)throw new Error("Keine Antwort vom KI-Modell erhalten");const g=N.choices[0].message.content.match(/\{[\s\S]*\}/);if(!g)throw new Error("Kein gültiges JSON in der KI-Antwort gefunden");r("🔍 Parse JSON...");const j=JSON.parse(g[0]);r(`
Generierte Lernumgebungen vor Validierung:`),j.environments&&j.environments.forEach((c,b)=>{var m,p,n;r(`
Umgebung ${b+1}: ${c.name}`),r(`- ${((m=c.materials)==null?void 0:m.length)||0} Materialien`),r(`- ${((p=c.tools)==null?void 0:p.length)||0} Werkzeuge`),r(`- ${((n=c.services)==null?void 0:n.length)||0} Dienste`)}),r(`
🔍 Validiere Template-Struktur...`);const o=at(j);return r(`
Validierte Elemente:`),r(`- ${o.actors.length} Akteure`),r(`- ${o.environments.length} Lernumgebungen`),o.environments.forEach((c,b)=>{r(`  • Umgebung ${b+1}: ${c.materials.length} Materialien, ${c.tools.length} Werkzeuge, ${c.services.length} Dienste`)}),o}catch(N){const g=N instanceof Error?N.message:"Unbekannter Fehler";throw r(`
❌ Fehler bei der Template-Generierung: ${g}`),N}}async function ve(s,t,i,l){const a=new Le({apiKey:t,dangerouslyAllowBrowser:!0}),r={};for(const f of i)switch(l(`Processing filter type: ${f}`),f){case pe.TITLE:const v=await lt(a,s);r[f]=v,l(`Generated search term: "${v}"`);break;case pe.CONTENT_TYPE:const d=await ct(a,s,l);d&&(r[f]=d.uri,l(`Selected content type: ${d.germanLabel} -> ${d.uri}`));break;case pe.DISCIPLINE:const N=await ot(a,s,l);N&&(r[f]=N.uri,l(`Selected discipline: ${N.germanLabel} -> ${N.uri}`));break}return r}async function lt(s,t){var a;const i=`
Generate a SINGLE, CONCISE search term that represents ONLY the core topic or concept, without including any metadata like:
- Resource type (e.g. "Arbeitsblatt", "Video", "Tool")
- Subject area (e.g. "Mathematik", "Physik")
- Educational level (e.g. "Grundschule", "Sekundarstufe")

Context:
Item: ${t.itemName} (${t.itemType})
Subject: ${t.subject}
Educational Level: ${t.educationalLevel}

IMPORTANT:
- Return ONLY the core topic/concept
- Use ONLY 1-2 words maximum
- EXCLUDE any metadata terms
- Focus on what is being taught/learned
- Do NOT include resource types or context information

Examples:
Input -> Output
"Arbeitsblatt Addition" -> "Addition"
"Mathematik Video Bruchrechnen" -> "Bruchrechnen"
"Physik Simulator Pendel" -> "Pendel"
"Vokabeltrainer Englisch" -> "Vokabeln"
"Chemie Experiment Säuren" -> "Säuren"

Return ONLY the search term without any explanation.`;return((a=(await s.chat.completions.create({model:"gpt-4o-mini",messages:[{role:"system",content:"You are a precise search term generator that returns only single concepts."},{role:"user",content:i}],temperature:.3,max_tokens:12e3})).choices[0].message.content)==null?void 0:a.trim())||t.itemName}async function ct(s,t,i){var v;i("Analyzing context to select content type...");const l={Spielmaterial:"Lernspiel",Karten:"Arbeitsblatt",Hardware:"Tool",Software:"Tool",Förderung:"Bildungsangebot"};if(t.itemType==="material"&&l[t.material_type]){const d=l[t.material_type];if(Object.keys(de).includes(d))return i(`Direct mapping found: ${t.material_type} -> ${d}`),{germanLabel:d,uri:de[d]}}const a=`
Based on the following context, select the most appropriate content type from the given options.

Context:
Item: ${t.itemName}
Type: ${t.itemType}
Subject: ${t.subject}
Educational Level: ${t.educationalLevel}

Available options:
${Object.keys(de).join(`
`)}

Return only the exact name of the most appropriate option from the list.`,f=(v=(await s.chat.completions.create({model:"gpt-4o-mini",messages:[{role:"system",content:"You are a helpful assistant that selects appropriate educational metadata values."},{role:"user",content:a}],temperature:.7,max_tokens:12e3})).choices[0].message.content)==null?void 0:v.trim();return!f||!Object.keys(de).includes(f)?(i("Could not determine appropriate content type"),null):{germanLabel:f,uri:de[f]}}async function ot(s,t,i){var f;if(i("Analyzing context to select discipline..."),Object.keys(oe).includes(t.subject))return i(`Direct mapping found for subject: ${t.subject}`),{germanLabel:t.subject,uri:oe[t.subject]};const l=`
Based on the following context, select the most appropriate discipline from the given options.

Context:
Item: ${t.itemName}
Type: ${t.itemType}
Subject: ${t.subject}
Educational Level: ${t.educationalLevel}

Available options:
${Object.keys(oe).join(`
`)}

Return only the exact name of the most appropriate option from the list.`,r=(f=(await s.chat.completions.create({model:"gpt-4o-mini",messages:[{role:"system",content:"You are a helpful assistant that selects appropriate educational metadata values."},{role:"user",content:l}],temperature:.7,max_tokens:12e3})).choices[0].message.content)==null?void 0:f.trim();return!r||!Object.keys(oe).includes(r)?(i("Could not determine appropriate discipline"),null):{germanLabel:r,uri:oe[r]}}function dt(s){var i,l,a,r,f;const t=s.properties||{};return{title:((i=t["cclom:title"])==null?void 0:i[0])||"",keywords:t["cclom:general_keyword"]||[],description:((l=t["cclom:general_description"])==null?void 0:l[0])||"",subject:((a=t["ccm:taxonid_DISPLAYNAME"])==null?void 0:a[0])||"",educationalContext:t["ccm:educationalcontext_DISPLAYNAME"]||[],wwwUrl:((r=t["ccm:wwwurl"])==null?void 0:r[0])||null,previewUrl:((f=s.preview)==null?void 0:f.url)||null}}async function mt(s,t,i,l,a){var v;if(!s.filter_criteria||Object.keys(s.filter_criteria).length===0)return l(`⚠️ Keine Filterkriterien definiert für ${t} "${s.name}"`),s;const r=Object.keys(s.filter_criteria),f=Object.values(s.filter_criteria);l(`🔍 Suche mit Kriterien: ${r.map((d,N)=>`${d}=${f[N]}`).join(", ")}`);try{if((v=a.signal)!=null&&v.aborted)throw new DOMException("Aborted","AbortError");l("🚀 Sende WLO-Anfrage...");const d=await ze({properties:r,values:f,maxItems:a.maxItems,endpoint:a.endpoint,combineMode:a.combineMode,signal:a.signal});if(!d.nodes||d.nodes.length===0)return l(`ℹ️ Keine WLO-Ergebnisse gefunden für ${t} "${s.name}"`),s;const N=d.nodes.map(j=>{var o;return(o=j.properties["sys:node-uuid"])==null?void 0:o[0]}).filter(Boolean).join(","),g=d.nodes.map(j=>dt(j));return l(`✅ ${d.nodes.length} WLO-Ergebnisse gefunden:`),d.nodes.forEach((j,o)=>{var c,b,m,p;l(`   ${o+1}. ${((c=j.properties["cclom:title"])==null?void 0:c[0])||"Ohne Titel"}`),(b=j.properties["cclom:general_description"])!=null&&b[0]&&l(`      ${j.properties["cclom:general_description"][0].substring(0,100)}...`),(m=j.properties["ccm:wwwurl"])!=null&&m[0]&&l(`      URL: ${j.properties["ccm:wwwurl"][0]}`),(p=j.properties["sys:node-uuid"])!=null&&p[0]&&l(`      ID: ${j.properties["sys:node-uuid"][0]}`)}),{...s,source:"database",database_id:N,wlo_metadata:g}}catch(d){if(d instanceof DOMException&&d.name==="AbortError")throw d;return console.error("Error processing resource:",d),l(`❌ Fehler bei der WLO-Verarbeitung: ${d instanceof Error?d.message:"Unbekannter Fehler"}`),s}}async function je(s,t,i,l,a,r){if(!s||s.length===0)return a(`⚠️ Keine ${t} zum Verarbeiten gefunden`),[];a(`📊 Verarbeite ${s.length} ${t}...`);const f=[];for(const v of s)if(v.source==="filter"){a(`
🔄 Verarbeite ${t} "${v.name}" mit WLO...`);const d=await mt(v,t,l,a,r);f.push(d)}else f.push(v);return f}const ut=[{id:"gpt-4o-mini",name:"GPT-4O Mini"},{id:"gpt-4o",name:"GPT-4O"}],_e={PRODUCTION:"https://redaktion.openeduhub.net/edu-sharing/rest",STAGING:"https://repository.staging.openeduhub.net/edu-sharing/rest"},ht=[{id:"cclom:title",label:"Titel"},{id:"ccm:oeh_lrt_aggregated",label:"Inhaltstyp"},{id:"ccm:taxonid",label:"Fach"},{id:"ccm:educationalcontext",label:"Bildungskontext"}],gt=()=>{const s=Y(),[t,i]=L.useState(""),[l,a]=L.useState("gpt-4o-mini"),[r,f]=L.useState(""),[v,d]=L.useState(!1),[N,g]=L.useState(null),[j,o]=L.useState(!1),[c,b]=L.useState([]),[m,p]=L.useState(!1),n=L.useRef(null),[u,w]=L.useState(!0),[S,T]=L.useState(!1),[F,B]=L.useState(!1),[x,C]=L.useState({materials:!0,tools:!1,services:!1}),[I,O]=L.useState(["cclom:title","ccm:oeh_lrt_aggregated","ccm:taxonid"]),[z,W]=L.useState("PRODUCTION"),[$,V]=L.useState(5),[h,k]=L.useState("AND"),y={metadata:s.metadata,problem:s.problem,context:s.context,influence_factors:s.influence_factors,solution:s.solution,consequences:s.consequences,implementation_notes:s.implementation_notes,related_patterns:s.related_patterns,feedback:s.feedback,sources:s.sources,actors:s.actors,environments:s.environments},E=A=>{b(R=>[...R,A])},Z=A=>{O(R=>R.includes(A)?R.filter(X=>X!==A):[...R,A])},Q=A=>{C(R=>({...R,[A]:!R[A]}))},se=()=>{n.current&&(n.current.abort(),g("Verarbeitung wurde abgebrochen"),E(`
❌ Verarbeitung wurde abgebrochen`),d(!1))},H=async()=>{var A,R,X,P,K,ee,ie,ye,ke;if(!t){g("Bitte geben Sie Ihren OpenAI API-Schlüssel ein");return}if(!r&&u){g("Bitte geben Sie Ihre Anweisungen ein");return}d(!0),g(null),o(!1),b([]),n.current=new AbortController;try{let G=y;if(u){E("🤖 Starte KI Ablauf Verarbeitung...");const M=await rt(y,r,l,t,m,E);G=M,s.setMetadata(M.metadata),s.setProblem(M.problem),s.setContext(M.context),s.setInfluenceFactors(M.influence_factors),s.setSolution(M.solution),s.setConsequences(M.consequences),s.setImplementationNotes(M.implementation_notes),s.setRelatedPatterns(M.related_patterns),s.setFeedback(M.feedback),s.setSources(M.sources),s.setActors(M.actors),s.setEnvironments(M.environments),E("✅ KI Ablauf Verarbeitung erfolgreich abgeschlossen")}if(S){E(`
🔍 Starte KI Filter Verarbeitung...`);let M=[...G.environments||[]];for(let te=0;te<M.length;te++){const D=M[te];if(E(`
📂 Verarbeite Lernumgebung: ${D.name}`),x.materials&&((A=D.materials)==null?void 0:A.length)>0){E(`
🔄 Verarbeite Materialien...`),E(`📊 Verarbeite ${D.materials.length} material...`);for(let U=0;U<D.materials.length;U++){const re=D.materials[U],he={itemName:re.name,itemType:"material",educationalLevel:G.context.educational_level,subject:G.context.subject,activityName:"",roleName:"",taskDescription:"",template:G},ge=await ve(he,t,I,E);M[te].materials[U]={...re,filter_criteria:ge,source:"filter"}}}if(x.tools&&((R=D.tools)==null?void 0:R.length)>0){E(`
🔄 Verarbeite Werkzeuge...`);for(let U=0;U<D.tools.length;U++){const re=D.tools[U],he={itemName:re.name,itemType:"tool",educationalLevel:G.context.educational_level,subject:G.context.subject,activityName:"",roleName:"",taskDescription:"",template:G},ge=await ve(he,t,I,E);M[te].tools[U]={...re,filter_criteria:ge,source:"filter"}}}if(x.services&&((X=D.services)==null?void 0:X.length)>0){E(`
🔄 Verarbeite Dienste...`);for(let U=0;U<D.services.length;U++){const re=D.services[U],he={itemName:re.name,itemType:"service",educationalLevel:G.context.educational_level,subject:G.context.subject,activityName:"",roleName:"",taskDescription:"",template:G},ge=await ve(he,t,I,E);M[te].services[U]={...re,filter_criteria:ge,source:"filter"}}}}G.environments=M,s.setEnvironments(M),E(`
✅ KI Filter Verarbeitung abgeschlossen!`)}if(F){if(E(`
🌐 Starte WLO Inhalte Verarbeitung...`),!G.environments||G.environments.length===0){E("⚠️ Keine Lernumgebungen im Template gefunden");return}E(`📊 Gefundene Lernumgebungen: ${G.environments.length}`);let M=[...G.environments];for(let te=0;te<M.length;te++){const D=M[te];E(`
📂 Verarbeite Lernumgebung: ${D.name}`),E("📊 Ressourcen in Umgebung:"),E(`- Materialien: ${((P=D.materials)==null?void 0:P.length)||0}`),E(`- Werkzeuge: ${((K=D.tools)==null?void 0:K.length)||0}`),E(`- Dienste: ${((ee=D.services)==null?void 0:ee.length)||0}`),x.materials&&((ie=D.materials)==null?void 0:ie.length)>0&&(E(`
🔄 Verarbeite Materialien...`),D.materials=await je(D.materials,"material",D.materials.map(U=>U.id),D.name,E,{endpoint:_e[z],maxItems:$,combineMode:h,signal:n.current.signal})),x.tools&&((ye=D.tools)==null?void 0:ye.length)>0&&(E(`
🔄 Verarbeite Werkzeuge...`),D.tools=await je(D.tools,"tool",D.tools.map(U=>U.id),D.name,E,{endpoint:_e[z],maxItems:$,combineMode:h,signal:n.current.signal})),x.services&&((ke=D.services)==null?void 0:ke.length)>0&&(E(`
🔄 Verarbeite Dienste...`),D.services=await je(D.services,"service",D.services.map(U=>U.id),D.name,E,{endpoint:_e[z],maxItems:$,combineMode:h,signal:n.current.signal}))}s.setEnvironments(M),E(`
✅ WLO Inhalte Verarbeitung erfolgreich abgeschlossen`)}o(!0),f(""),E(`
🎉 Gesamtverarbeitung erfolgreich abgeschlossen!`)}catch(G){if(G instanceof Error&&G.name==="AbortError")g("Verarbeitung wurde abgebrochen"),E(`
❌ Verarbeitung wurde abgebrochen`);else{const M=G instanceof Error?G.message:"Ein unbekannter Fehler ist aufgetreten";g(M),E(`
❌ Fehler bei der Verarbeitung: ${M}`)}}finally{d(!1),n.current=null}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"KI Ablauf"}),e.jsx(ae,{})]}),e.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-lg shadow-sm mb-8",children:e.jsx("p",{className:"text-indigo-900",children:"Die KI unterstützt Sie bei der Erstellung und Optimierung Ihres didaktischen Templates. Sie können den kompletten Unterrichtsablauf generieren lassen oder bestehende Strukturen optimieren. Zusätzlich hilft die KI bei der Suche nach passenden Bildungsressourcen in der WLO-Datenbank."})}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"API-Konfiguration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"OpenAI API-Schlüssel"}),e.jsx("input",{type:"password",value:t,onChange:A=>i(A.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"sk-..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"KI-Modell"}),e.jsx("select",{value:l,onChange:A=>a(A.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:ut.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Prozessauswahl"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"KI-Optionen"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:u,onChange:A=>w(A.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{children:"KI Ablauf"})]}),u&&e.jsx("div",{className:"pl-8",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:A=>p(A.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:"Aus Community-Templates lernen"})]})}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:S,onChange:A=>T(A.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{children:"KI Filter"})]}),S&&e.jsxs("div",{className:"pl-8 space-y-2",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Zu verarbeitende Ressourcen:"}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:x.materials,onChange:()=>Q("materials"),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:"Bildungsinhalte"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:x.tools,onChange:()=>Q("tools"),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:"Werkzeuge"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:x.services,onChange:()=>Q("services"),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:"Dienste"})]}),e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Metadaten für Filter:"}),ht.map(A=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:I.includes(A.id),onChange:()=>Z(A.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm",children:A.label})]},A.id))]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:F,onChange:A=>B(A.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{children:"WLO Inhalte (erfordert KI Filter)"})]}),F&&e.jsxs("div",{className:"pl-8 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"API-Endpunkt"}),e.jsxs("select",{value:z,onChange:A=>W(A.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"PRODUCTION",children:"Produktion"}),e.jsx("option",{value:"STAGING",children:"Staging"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Maximale Ergebnisse"}),e.jsx("input",{type:"number",value:$,onChange:A=>V(Math.max(1,parseInt(A.target.value)||1)),min:"1",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Verknüpfungsmodus"}),e.jsxs("select",{value:h,onChange:A=>k(A.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"AND",children:"UND"}),e.jsx("option",{value:"OR",children:"ODER"})]})]})]})]})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Anweisungen für KI"}),e.jsx("textarea",{value:r,onChange:A=>f(A.target.value),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Geben Sie Ihre Anweisungen für die Anpassung des Templates ein..."})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Verarbeitungsstatus"}),e.jsx("div",{className:"h-[20vh] border rounded-lg overflow-y-auto bg-gray-50 p-4 font-mono text-sm whitespace-pre-wrap",children:c.map((A,R)=>e.jsx("div",{children:A},R))})]}),N&&e.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-3 rounded relative",children:e.jsx("span",{className:"block sm:inline",children:N})}),j&&e.jsx("div",{className:"bg-green-50 border border-green-400 text-green-700 px-4 py-3 rounded relative",children:e.jsx("span",{className:"block sm:inline",children:"Template wurde erfolgreich aktualisiert!"})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[v&&e.jsx("button",{onClick:se,className:"px-4 py-2 rounded text-white bg-red-500 hover:bg-red-600",children:"Abbrechen"}),e.jsx("button",{onClick:H,disabled:v,className:`px-4 py-2 rounded text-white ${v?"bg-blue-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"}`,children:v?"Verarbeite...":"Verarbeitung starten"})]})]})};function pt(){const[s,t]=L.useState([]),[i,l]=L.useState([]),[a,r]=L.useState(""),[f,v]=L.useState(!0),[d,N]=L.useState(null),g=Y();L.useEffect(()=>{l(a?s.filter(c=>{var b,m;return((m=(b=c.template.context)==null?void 0:b.subject)==null?void 0:m.toLowerCase())===a.toLowerCase()}):s)},[a,s]),L.useEffect(()=>{j()},[]);const j=async()=>{try{const c=await fetch("/community-templates/index.json");if(!c.ok)throw new Error("Failed to load templates");const b=await c.json(),m=await Promise.all(b.templates.map(async p=>{const n=await fetch(`/community-templates/${p.file}`);if(!n.ok)throw new Error(`Failed to load template ${p.name}`);const u=await n.json();return{...p,template:u}}));t(m),v(!1)}catch(c){N(c instanceof Error?c.message:"Failed to load templates"),v(!1)}},o=async c=>{if(confirm("Möchten Sie dieses Template laden? Aktuelle Änderungen gehen verloren.")){const{template:b}=c;g.setMetadata(b.metadata),g.setProblem(b.problem),g.setContext(b.context),g.setInfluenceFactors(b.influence_factors),g.setSolution(b.solution),g.setConsequences(b.consequences),g.setImplementationNotes(b.implementation_notes),g.setRelatedPatterns(b.related_patterns),g.setFeedback(b.feedback),g.setSources(b.sources),g.setActors(b.actors),g.setEnvironments(b.environments)}};return f?e.jsx("div",{className:"flex justify-center items-center h-[40vh]",children:e.jsx("div",{className:"text-lg text-gray-600",children:"Lade Community Templates..."})}):d?e.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-3 rounded",children:e.jsx("p",{children:d})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-2xl font-bold",children:"Community Templates"})}),e.jsx(ae,{})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-lg shadow-sm mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-purple-900 mb-2",children:"So funktioniert's:"}),e.jsxs("ul",{className:"space-y-2 text-purple-800",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-purple-500",children:"1."}),"Durchsuchen Sie die verfügbaren Templates nach Themen und Fächern"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-purple-500",children:"2."}),'Klicken Sie auf "Template laden" um es in den Editor zu übernehmen']}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-purple-500",children:"3."}),"Passen Sie das geladene Template an Ihre Bedürfnisse an"]})]})]}),e.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[e.jsxs("select",{value:a,onChange:c=>r(c.target.value),className:"p-2 border rounded-lg shadow-sm",children:[e.jsx("option",{value:"",children:"Alle Fächer"}),Object.keys(oe).map(c=>e.jsx("option",{value:c,children:c},c))]}),e.jsx("div",{className:"text-sm text-gray-500",children:a?`${i.length} Template${i.length===1?"":"s"} für ${a}`:`${s.length} Template${s.length===1?"":"s"} insgesamt`})]}),s.length===0&&!d&&!f&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 p-6 rounded-lg text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-yellow-800 mb-2",children:"Keine Templates verfügbar"}),e.jsx("p",{className:"text-yellow-700",children:"Aktuell sind keine Community-Templates im System hinterlegt. Bitte versuchen Sie es später erneut oder nutzen Sie das Beispiel-Template."})]}),e.jsx("div",{className:"grid gap-6",children:i.map(c=>{var b,m;return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:c.name}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Von ",c.author," • ",new Date(c.date).toLocaleDateString()]})]}),e.jsx("button",{onClick:()=>o(c),className:"px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 transition-colors",children:"Template laden"})]}),e.jsx("p",{className:"mt-4 text-gray-600",children:c.description}),((m=(b=c.template.metadata)==null?void 0:b.keywords)==null?void 0:m.length)>0&&e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:c.template.metadata.keywords.map((p,n)=>e.jsx("span",{className:"px-2 py-1 bg-purple-50 text-purple-700 rounded-full text-sm",children:p},n))})]},c.id)})})]})}function bt(){return e.jsx(ss,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(cs,{}),e.jsx("div",{className:"container mx-auto py-6 px-4",children:e.jsxs(ts,{children:[e.jsx(ne,{path:"/",element:e.jsx(hs,{})}),e.jsx(ne,{path:"/general-settings",element:e.jsx(ps,{})}),e.jsx(ne,{path:"/pattern-elements",element:e.jsx(_s,{})}),e.jsx(ne,{path:"/actors",element:e.jsx(Cs,{})}),e.jsx(ne,{path:"/environments",element:e.jsx(Ps,{})}),e.jsx(ne,{path:"/shopping-cart",element:e.jsx(Bs,{})}),e.jsx(ne,{path:"/course-flow",element:e.jsx(Vs,{})}),e.jsx(ne,{path:"/preview",element:e.jsx(Xs,{})}),e.jsx(ne,{path:"/ai-flow-agent",element:e.jsx(gt,{})}),e.jsx(ne,{path:"/community",element:e.jsx(pt,{})})]})})]})})}ns.createRoot(document.getElementById("root")).render(e.jsx(q.StrictMode,{children:e.jsx(bt,{})}));
