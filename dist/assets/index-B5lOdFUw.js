function zP(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var _o=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Av(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var CN={exports:{}},pu={},kN={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qa=Symbol.for("react.element"),BP=Symbol.for("react.portal"),UP=Symbol.for("react.fragment"),HP=Symbol.for("react.strict_mode"),VP=Symbol.for("react.profiler"),GP=Symbol.for("react.provider"),WP=Symbol.for("react.context"),KP=Symbol.for("react.forward_ref"),XP=Symbol.for("react.suspense"),YP=Symbol.for("react.memo"),QP=Symbol.for("react.lazy"),z0=Symbol.iterator;function JP(e){return e===null||typeof e!="object"?null:(e=z0&&e[z0]||e["@@iterator"],typeof e=="function"?e:null)}var RN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jN=Object.assign,AN={};function gs(e,t,n){this.props=e,this.context=t,this.refs=AN,this.updater=n||RN}gs.prototype.isReactComponent={};gs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function PN(){}PN.prototype=gs.prototype;function Pv(e,t,n){this.props=e,this.context=t,this.refs=AN,this.updater=n||RN}var Tv=Pv.prototype=new PN;Tv.constructor=Pv;jN(Tv,gs.prototype);Tv.isPureReactComponent=!0;var B0=Array.isArray,TN=Object.prototype.hasOwnProperty,Iv={current:null},IN={key:!0,ref:!0,__self:!0,__source:!0};function MN(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)TN.call(t,r)&&!IN.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Qa,type:e,key:s,ref:a,props:i,_owner:Iv.current}}function ZP(e,t){return{$$typeof:Qa,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Mv(e){return typeof e=="object"&&e!==null&&e.$$typeof===Qa}function eT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var U0=/\/+/g;function dc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?eT(""+e.key):t.toString(36)}function tl(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Qa:case BP:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+dc(a,0):r,B0(i)?(n="",e!=null&&(n=e.replace(U0,"$&/")+"/"),tl(i,t,n,"",function(u){return u})):i!=null&&(Mv(i)&&(i=ZP(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(U0,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",B0(e))for(var o=0;o<e.length;o++){s=e[o];var l=r+dc(s,o);a+=tl(s,t,n,l,i)}else if(l=JP(e),typeof l=="function")for(e=l.call(e),o=0;!(s=e.next()).done;)s=s.value,l=r+dc(s,o++),a+=tl(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function wo(e,t,n){if(e==null)return e;var r=[],i=0;return tl(e,r,"","",function(s){return t.call(n,s,i++)}),r}function tT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var it={current:null},nl={transition:null},nT={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:nl,ReactCurrentOwner:Iv};function ON(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:wo,forEach:function(e,t,n){wo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return wo(e,function(){t++}),t},toArray:function(e){return wo(e,function(t){return t})||[]},only:function(e){if(!Mv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};re.Component=gs;re.Fragment=UP;re.Profiler=VP;re.PureComponent=Pv;re.StrictMode=HP;re.Suspense=XP;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nT;re.act=ON;re.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=jN({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=Iv.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)TN.call(t,l)&&!IN.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Qa,type:e.type,key:i,ref:s,props:r,_owner:a}};re.createContext=function(e){return e={$$typeof:WP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:GP,_context:e},e.Consumer=e};re.createElement=MN;re.createFactory=function(e){var t=MN.bind(null,e);return t.type=e,t};re.createRef=function(){return{current:null}};re.forwardRef=function(e){return{$$typeof:KP,render:e}};re.isValidElement=Mv;re.lazy=function(e){return{$$typeof:QP,_payload:{_status:-1,_result:e},_init:tT}};re.memo=function(e,t){return{$$typeof:YP,type:e,compare:t===void 0?null:t}};re.startTransition=function(e){var t=nl.transition;nl.transition={};try{e()}finally{nl.transition=t}};re.unstable_act=ON;re.useCallback=function(e,t){return it.current.useCallback(e,t)};re.useContext=function(e){return it.current.useContext(e)};re.useDebugValue=function(){};re.useDeferredValue=function(e){return it.current.useDeferredValue(e)};re.useEffect=function(e,t){return it.current.useEffect(e,t)};re.useId=function(){return it.current.useId()};re.useImperativeHandle=function(e,t,n){return it.current.useImperativeHandle(e,t,n)};re.useInsertionEffect=function(e,t){return it.current.useInsertionEffect(e,t)};re.useLayoutEffect=function(e,t){return it.current.useLayoutEffect(e,t)};re.useMemo=function(e,t){return it.current.useMemo(e,t)};re.useReducer=function(e,t,n){return it.current.useReducer(e,t,n)};re.useRef=function(e){return it.current.useRef(e)};re.useState=function(e){return it.current.useState(e)};re.useSyncExternalStore=function(e,t,n){return it.current.useSyncExternalStore(e,t,n)};re.useTransition=function(){return it.current.useTransition()};re.version="18.3.1";kN.exports=re;var C=kN.exports;const O=Av(C),rT=zP({__proto__:null,default:O},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iT=C,sT=Symbol.for("react.element"),aT=Symbol.for("react.fragment"),oT=Object.prototype.hasOwnProperty,lT=iT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uT={key:!0,ref:!0,__self:!0,__source:!0};function $N(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)oT.call(t,r)&&!uT.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:sT,type:e,key:s,ref:a,props:i,_owner:lT.current}}pu.Fragment=aT;pu.jsx=$N;pu.jsxs=$N;CN.exports=pu;var p=CN.exports,ng={},qN={exports:{}},It={},LN={exports:{}},FN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,R){var $=M.length;M.push(R);e:for(;0<$;){var q=$-1>>>1,L=M[q];if(0<i(L,R))M[q]=R,M[$]=L,$=q;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var R=M[0],$=M.pop();if($!==R){M[0]=$;e:for(var q=0,L=M.length,H=L>>>1;q<H;){var U=2*(q+1)-1,V=M[U],Q=U+1,te=M[Q];if(0>i(V,$))Q<L&&0>i(te,V)?(M[q]=te,M[Q]=$,q=Q):(M[q]=V,M[U]=$,q=U);else if(Q<L&&0>i(te,$))M[q]=te,M[Q]=$,q=Q;else break e}}return R}function i(M,R){var $=M.sortIndex-R.sortIndex;return $!==0?$:M.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,d=null,f=3,h=!1,g=!1,m=!1,_=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(M){for(var R=n(u);R!==null;){if(R.callback===null)r(u);else if(R.startTime<=M)r(u),R.sortIndex=R.expirationTime,t(l,R);else break;R=n(u)}}function x(M){if(m=!1,w(M),!g)if(n(l)!==null)g=!0,T(E);else{var R=n(u);R!==null&&F(x,R.startTime-M)}}function E(M,R){g=!1,m&&(m=!1,y(A),A=-1),h=!0;var $=f;try{for(w(R),d=n(l);d!==null&&(!(d.expirationTime>R)||M&&!I());){var q=d.callback;if(typeof q=="function"){d.callback=null,f=d.priorityLevel;var L=q(d.expirationTime<=R);R=e.unstable_now(),typeof L=="function"?d.callback=L:d===n(l)&&r(l),w(R)}else r(l);d=n(l)}if(d!==null)var H=!0;else{var U=n(u);U!==null&&F(x,U.startTime-R),H=!1}return H}finally{d=null,f=$,h=!1}}var S=!1,N=null,A=-1,k=5,j=-1;function I(){return!(e.unstable_now()-j<k)}function z(){if(N!==null){var M=e.unstable_now();j=M;var R=!0;try{R=N(!0,M)}finally{R?D():(S=!1,N=null)}}else S=!1}var D;if(typeof v=="function")D=function(){v(z)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,P=b.port2;b.port1.onmessage=z,D=function(){P.postMessage(null)}}else D=function(){_(z,0)};function T(M){N=M,S||(S=!0,D())}function F(M,R){A=_(function(){M(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){g||h||(g=!0,T(E))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(M){switch(f){case 1:case 2:case 3:var R=3;break;default:R=f}var $=f;f=R;try{return M()}finally{f=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,R){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var $=f;f=M;try{return R()}finally{f=$}},e.unstable_scheduleCallback=function(M,R,$){var q=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?q+$:q):$=q,M){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=$+L,M={id:c++,callback:R,priorityLevel:M,startTime:$,expirationTime:L,sortIndex:-1},$>q?(M.sortIndex=$,t(u,M),n(l)===null&&M===n(u)&&(m?(y(A),A=-1):m=!0,F(x,$-q))):(M.sortIndex=L,t(l,M),g||h||(g=!0,T(E))),M},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(M){var R=f;return function(){var $=f;f=R;try{return M.apply(this,arguments)}finally{f=$}}}})(FN);LN.exports=FN;var cT=LN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dT=C,Pt=cT;function B(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DN=new Set,xa={};function ui(e,t){is(e,t),is(e+"Capture",t)}function is(e,t){for(xa[e]=t,e=0;e<t.length;e++)DN.add(t[e])}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rg=Object.prototype.hasOwnProperty,fT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,H0={},V0={};function hT(e){return rg.call(V0,e)?!0:rg.call(H0,e)?!1:fT.test(e)?V0[e]=!0:(H0[e]=!0,!1)}function pT(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function mT(e,t,n,r){if(t===null||typeof t>"u"||pT(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function st(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var He={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){He[e]=new st(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];He[t]=new st(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){He[e]=new st(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){He[e]=new st(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){He[e]=new st(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){He[e]=new st(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){He[e]=new st(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){He[e]=new st(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){He[e]=new st(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ov=/[\-:]([a-z])/g;function $v(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ov,$v);He[t]=new st(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ov,$v);He[t]=new st(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ov,$v);He[t]=new st(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){He[e]=new st(e,1,!1,e.toLowerCase(),null,!1,!1)});He.xlinkHref=new st("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){He[e]=new st(e,1,!1,e.toLowerCase(),null,!0,!0)});function qv(e,t,n,r){var i=He.hasOwnProperty(t)?He[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(mT(t,n,i,r)&&(n=null),r||i===null?hT(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Qn=dT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xo=Symbol.for("react.element"),ji=Symbol.for("react.portal"),Ai=Symbol.for("react.fragment"),Lv=Symbol.for("react.strict_mode"),ig=Symbol.for("react.profiler"),zN=Symbol.for("react.provider"),BN=Symbol.for("react.context"),Fv=Symbol.for("react.forward_ref"),sg=Symbol.for("react.suspense"),ag=Symbol.for("react.suspense_list"),Dv=Symbol.for("react.memo"),lr=Symbol.for("react.lazy"),UN=Symbol.for("react.offscreen"),G0=Symbol.iterator;function As(e){return e===null||typeof e!="object"?null:(e=G0&&e[G0]||e["@@iterator"],typeof e=="function"?e:null)}var be=Object.assign,fc;function Us(e){if(fc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);fc=t&&t[1]||""}return`
`+fc+e}var hc=!1;function pc(e,t){if(!e||hc)return"";hc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=o);break}}}finally{hc=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Us(e):""}function gT(e){switch(e.tag){case 5:return Us(e.type);case 16:return Us("Lazy");case 13:return Us("Suspense");case 19:return Us("SuspenseList");case 0:case 2:case 15:return e=pc(e.type,!1),e;case 11:return e=pc(e.type.render,!1),e;case 1:return e=pc(e.type,!0),e;default:return""}}function og(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ai:return"Fragment";case ji:return"Portal";case ig:return"Profiler";case Lv:return"StrictMode";case sg:return"Suspense";case ag:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case BN:return(e.displayName||"Context")+".Consumer";case zN:return(e._context.displayName||"Context")+".Provider";case Fv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Dv:return t=e.displayName||null,t!==null?t:og(e.type)||"Memo";case lr:t=e._payload,e=e._init;try{return og(e(t))}catch{}}return null}function vT(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return og(t);case 8:return t===Lv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Tr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function HN(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yT(e){var t=HN(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bo(e){e._valueTracker||(e._valueTracker=yT(e))}function VN(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=HN(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Sl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function lg(e,t){var n=t.checked;return be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function W0(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Tr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function GN(e,t){t=t.checked,t!=null&&qv(e,"checked",t,!1)}function ug(e,t){GN(e,t);var n=Tr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?cg(e,t.type,n):t.hasOwnProperty("defaultValue")&&cg(e,t.type,Tr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function K0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function cg(e,t,n){(t!=="number"||Sl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Hs=Array.isArray;function Hi(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Tr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function dg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function X0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(B(92));if(Hs(n)){if(1<n.length)throw Error(B(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Tr(n)}}function WN(e,t){var n=Tr(t.value),r=Tr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Y0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function KN(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?KN(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var So,XN=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(So=So||document.createElement("div"),So.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=So.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ba(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ua={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_T=["Webkit","ms","Moz","O"];Object.keys(ua).forEach(function(e){_T.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ua[t]=ua[e]})});function YN(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ua.hasOwnProperty(e)&&ua[e]?(""+t).trim():t+"px"}function QN(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=YN(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var wT=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hg(e,t){if(t){if(wT[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function pg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mg=null;function zv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gg=null,Vi=null,Gi=null;function Q0(e){if(e=eo(e)){if(typeof gg!="function")throw Error(B(280));var t=e.stateNode;t&&(t=_u(t),gg(e.stateNode,e.type,t))}}function JN(e){Vi?Gi?Gi.push(e):Gi=[e]:Vi=e}function ZN(){if(Vi){var e=Vi,t=Gi;if(Gi=Vi=null,Q0(e),t)for(e=0;e<t.length;e++)Q0(t[e])}}function eC(e,t){return e(t)}function tC(){}var mc=!1;function nC(e,t,n){if(mc)return e(t,n);mc=!0;try{return eC(e,t,n)}finally{mc=!1,(Vi!==null||Gi!==null)&&(tC(),ZN())}}function Sa(e,t){var n=e.stateNode;if(n===null)return null;var r=_u(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(B(231,t,typeof n));return n}var vg=!1;if(Hn)try{var Ps={};Object.defineProperty(Ps,"passive",{get:function(){vg=!0}}),window.addEventListener("test",Ps,Ps),window.removeEventListener("test",Ps,Ps)}catch{vg=!1}function xT(e,t,n,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var ca=!1,El=null,Nl=!1,yg=null,bT={onError:function(e){ca=!0,El=e}};function ST(e,t,n,r,i,s,a,o,l){ca=!1,El=null,xT.apply(bT,arguments)}function ET(e,t,n,r,i,s,a,o,l){if(ST.apply(this,arguments),ca){if(ca){var u=El;ca=!1,El=null}else throw Error(B(198));Nl||(Nl=!0,yg=u)}}function ci(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function rC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function J0(e){if(ci(e)!==e)throw Error(B(188))}function NT(e){var t=e.alternate;if(!t){if(t=ci(e),t===null)throw Error(B(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return J0(i),e;if(s===r)return J0(i),t;s=s.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?e:t}function iC(e){return e=NT(e),e!==null?sC(e):null}function sC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=sC(e);if(t!==null)return t;e=e.sibling}return null}var aC=Pt.unstable_scheduleCallback,Z0=Pt.unstable_cancelCallback,CT=Pt.unstable_shouldYield,kT=Pt.unstable_requestPaint,ke=Pt.unstable_now,RT=Pt.unstable_getCurrentPriorityLevel,Bv=Pt.unstable_ImmediatePriority,oC=Pt.unstable_UserBlockingPriority,Cl=Pt.unstable_NormalPriority,jT=Pt.unstable_LowPriority,lC=Pt.unstable_IdlePriority,mu=null,bn=null;function AT(e){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(mu,e,void 0,(e.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:IT,PT=Math.log,TT=Math.LN2;function IT(e){return e>>>=0,e===0?32:31-(PT(e)/TT|0)|0}var Eo=64,No=4194304;function Vs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function kl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Vs(o):(s&=a,s!==0&&(r=Vs(s)))}else a=n&~i,a!==0?r=Vs(a):s!==0&&(r=Vs(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-tn(t),i=1<<n,r|=e[n],t&=~i;return r}function MT(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OT(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-tn(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=MT(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}function _g(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function uC(){var e=Eo;return Eo<<=1,!(Eo&4194240)&&(Eo=64),e}function gc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ja(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tn(t),e[t]=n}function $T(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-tn(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Uv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-tn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ue=0;function cC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var dC,Hv,fC,hC,pC,wg=!1,Co=[],_r=null,wr=null,xr=null,Ea=new Map,Na=new Map,fr=[],qT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function e_(e,t){switch(e){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":Ea.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Na.delete(t.pointerId)}}function Ts(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=eo(t),t!==null&&Hv(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function LT(e,t,n,r,i){switch(t){case"focusin":return _r=Ts(_r,e,t,n,r,i),!0;case"dragenter":return wr=Ts(wr,e,t,n,r,i),!0;case"mouseover":return xr=Ts(xr,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ea.set(s,Ts(Ea.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Na.set(s,Ts(Na.get(s)||null,e,t,n,r,i)),!0}return!1}function mC(e){var t=Gr(e.target);if(t!==null){var n=ci(t);if(n!==null){if(t=n.tag,t===13){if(t=rC(n),t!==null){e.blockedOn=t,pC(e.priority,function(){fC(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function rl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=xg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);mg=r,n.target.dispatchEvent(r),mg=null}else return t=eo(n),t!==null&&Hv(t),e.blockedOn=n,!1;t.shift()}return!0}function t_(e,t,n){rl(e)&&n.delete(t)}function FT(){wg=!1,_r!==null&&rl(_r)&&(_r=null),wr!==null&&rl(wr)&&(wr=null),xr!==null&&rl(xr)&&(xr=null),Ea.forEach(t_),Na.forEach(t_)}function Is(e,t){e.blockedOn===t&&(e.blockedOn=null,wg||(wg=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,FT)))}function Ca(e){function t(i){return Is(i,e)}if(0<Co.length){Is(Co[0],e);for(var n=1;n<Co.length;n++){var r=Co[n];r.blockedOn===e&&(r.blockedOn=null)}}for(_r!==null&&Is(_r,e),wr!==null&&Is(wr,e),xr!==null&&Is(xr,e),Ea.forEach(t),Na.forEach(t),n=0;n<fr.length;n++)r=fr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<fr.length&&(n=fr[0],n.blockedOn===null);)mC(n),n.blockedOn===null&&fr.shift()}var Wi=Qn.ReactCurrentBatchConfig,Rl=!0;function DT(e,t,n,r){var i=ue,s=Wi.transition;Wi.transition=null;try{ue=1,Vv(e,t,n,r)}finally{ue=i,Wi.transition=s}}function zT(e,t,n,r){var i=ue,s=Wi.transition;Wi.transition=null;try{ue=4,Vv(e,t,n,r)}finally{ue=i,Wi.transition=s}}function Vv(e,t,n,r){if(Rl){var i=xg(e,t,n,r);if(i===null)Cc(e,t,r,jl,n),e_(e,r);else if(LT(i,e,t,n,r))r.stopPropagation();else if(e_(e,r),t&4&&-1<qT.indexOf(e)){for(;i!==null;){var s=eo(i);if(s!==null&&dC(s),s=xg(e,t,n,r),s===null&&Cc(e,t,r,jl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Cc(e,t,r,null,n)}}var jl=null;function xg(e,t,n,r){if(jl=null,e=zv(r),e=Gr(e),e!==null)if(t=ci(e),t===null)e=null;else if(n=t.tag,n===13){if(e=rC(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return jl=e,null}function gC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RT()){case Bv:return 1;case oC:return 4;case Cl:case jT:return 16;case lC:return 536870912;default:return 16}default:return 16}}var gr=null,Gv=null,il=null;function vC(){if(il)return il;var e,t=Gv,n=t.length,r,i="value"in gr?gr.value:gr.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return il=i.slice(e,1<r?1-r:void 0)}function sl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ko(){return!0}function n_(){return!1}function Mt(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ko:n_,this.isPropagationStopped=n_,this}return be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ko)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ko)},persist:function(){},isPersistent:ko}),t}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wv=Mt(vs),Za=be({},vs,{view:0,detail:0}),BT=Mt(Za),vc,yc,Ms,gu=be({},Za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ms&&(Ms&&e.type==="mousemove"?(vc=e.screenX-Ms.screenX,yc=e.screenY-Ms.screenY):yc=vc=0,Ms=e),vc)},movementY:function(e){return"movementY"in e?e.movementY:yc}}),r_=Mt(gu),UT=be({},gu,{dataTransfer:0}),HT=Mt(UT),VT=be({},Za,{relatedTarget:0}),_c=Mt(VT),GT=be({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),WT=Mt(GT),KT=be({},vs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),XT=Mt(KT),YT=be({},vs,{data:0}),i_=Mt(YT),QT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eI(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ZT[e])?!!t[e]:!1}function Kv(){return eI}var tI=be({},Za,{key:function(e){if(e.key){var t=QT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=sl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?JT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kv,charCode:function(e){return e.type==="keypress"?sl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?sl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),nI=Mt(tI),rI=be({},gu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),s_=Mt(rI),iI=be({},Za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kv}),sI=Mt(iI),aI=be({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),oI=Mt(aI),lI=be({},gu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),uI=Mt(lI),cI=[9,13,27,32],Xv=Hn&&"CompositionEvent"in window,da=null;Hn&&"documentMode"in document&&(da=document.documentMode);var dI=Hn&&"TextEvent"in window&&!da,yC=Hn&&(!Xv||da&&8<da&&11>=da),a_=" ",o_=!1;function _C(e,t){switch(e){case"keyup":return cI.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pi=!1;function fI(e,t){switch(e){case"compositionend":return wC(t);case"keypress":return t.which!==32?null:(o_=!0,a_);case"textInput":return e=t.data,e===a_&&o_?null:e;default:return null}}function hI(e,t){if(Pi)return e==="compositionend"||!Xv&&_C(e,t)?(e=vC(),il=Gv=gr=null,Pi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yC&&t.locale!=="ko"?null:t.data;default:return null}}var pI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pI[e.type]:t==="textarea"}function xC(e,t,n,r){JN(r),t=Al(t,"onChange"),0<t.length&&(n=new Wv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var fa=null,ka=null;function mI(e){TC(e,0)}function vu(e){var t=Mi(e);if(VN(t))return e}function gI(e,t){if(e==="change")return t}var bC=!1;if(Hn){var wc;if(Hn){var xc="oninput"in document;if(!xc){var u_=document.createElement("div");u_.setAttribute("oninput","return;"),xc=typeof u_.oninput=="function"}wc=xc}else wc=!1;bC=wc&&(!document.documentMode||9<document.documentMode)}function c_(){fa&&(fa.detachEvent("onpropertychange",SC),ka=fa=null)}function SC(e){if(e.propertyName==="value"&&vu(ka)){var t=[];xC(t,ka,e,zv(e)),nC(mI,t)}}function vI(e,t,n){e==="focusin"?(c_(),fa=t,ka=n,fa.attachEvent("onpropertychange",SC)):e==="focusout"&&c_()}function yI(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vu(ka)}function _I(e,t){if(e==="click")return vu(t)}function wI(e,t){if(e==="input"||e==="change")return vu(t)}function xI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sn=typeof Object.is=="function"?Object.is:xI;function Ra(e,t){if(sn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rg.call(t,i)||!sn(e[i],t[i]))return!1}return!0}function d_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function f_(e,t){var n=d_(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=d_(n)}}function EC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?EC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function NC(){for(var e=window,t=Sl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Sl(e.document)}return t}function Yv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function bI(e){var t=NC(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&EC(n.ownerDocument.documentElement,n)){if(r!==null&&Yv(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=f_(n,s);var a=f_(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var SI=Hn&&"documentMode"in document&&11>=document.documentMode,Ti=null,bg=null,ha=null,Sg=!1;function h_(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sg||Ti==null||Ti!==Sl(r)||(r=Ti,"selectionStart"in r&&Yv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ha&&Ra(ha,r)||(ha=r,r=Al(bg,"onSelect"),0<r.length&&(t=new Wv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ti)))}function Ro(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ii={animationend:Ro("Animation","AnimationEnd"),animationiteration:Ro("Animation","AnimationIteration"),animationstart:Ro("Animation","AnimationStart"),transitionend:Ro("Transition","TransitionEnd")},bc={},CC={};Hn&&(CC=document.createElement("div").style,"AnimationEvent"in window||(delete Ii.animationend.animation,delete Ii.animationiteration.animation,delete Ii.animationstart.animation),"TransitionEvent"in window||delete Ii.transitionend.transition);function yu(e){if(bc[e])return bc[e];if(!Ii[e])return e;var t=Ii[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in CC)return bc[e]=t[n];return e}var kC=yu("animationend"),RC=yu("animationiteration"),jC=yu("animationstart"),AC=yu("transitionend"),PC=new Map,p_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $r(e,t){PC.set(e,t),ui(t,[e])}for(var Sc=0;Sc<p_.length;Sc++){var Ec=p_[Sc],EI=Ec.toLowerCase(),NI=Ec[0].toUpperCase()+Ec.slice(1);$r(EI,"on"+NI)}$r(kC,"onAnimationEnd");$r(RC,"onAnimationIteration");$r(jC,"onAnimationStart");$r("dblclick","onDoubleClick");$r("focusin","onFocus");$r("focusout","onBlur");$r(AC,"onTransitionEnd");is("onMouseEnter",["mouseout","mouseover"]);is("onMouseLeave",["mouseout","mouseover"]);is("onPointerEnter",["pointerout","pointerover"]);is("onPointerLeave",["pointerout","pointerover"]);ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ui("onBeforeInput",["compositionend","keypress","textInput","paste"]);ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gs));function m_(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,ET(r,t,void 0,e),e.currentTarget=null}function TC(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;m_(i,o,u),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;m_(i,o,u),s=l}}}if(Nl)throw e=yg,Nl=!1,yg=null,e}function pe(e,t){var n=t[Rg];n===void 0&&(n=t[Rg]=new Set);var r=e+"__bubble";n.has(r)||(IC(t,e,2,!1),n.add(r))}function Nc(e,t,n){var r=0;t&&(r|=4),IC(n,e,r,t)}var jo="_reactListening"+Math.random().toString(36).slice(2);function ja(e){if(!e[jo]){e[jo]=!0,DN.forEach(function(n){n!=="selectionchange"&&(CI.has(n)||Nc(n,!1,e),Nc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[jo]||(t[jo]=!0,Nc("selectionchange",!1,t))}}function IC(e,t,n,r){switch(gC(t)){case 1:var i=DT;break;case 4:i=zT;break;default:i=Vv}n=i.bind(null,t,n,e),i=void 0,!vg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Cc(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Gr(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}nC(function(){var u=s,c=zv(n),d=[];e:{var f=PC.get(e);if(f!==void 0){var h=Wv,g=e;switch(e){case"keypress":if(sl(n)===0)break e;case"keydown":case"keyup":h=nI;break;case"focusin":g="focus",h=_c;break;case"focusout":g="blur",h=_c;break;case"beforeblur":case"afterblur":h=_c;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=r_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=HT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=sI;break;case kC:case RC:case jC:h=WT;break;case AC:h=oI;break;case"scroll":h=BT;break;case"wheel":h=uI;break;case"copy":case"cut":case"paste":h=XT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=s_}var m=(t&4)!==0,_=!m&&e==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var v=u,w;v!==null;){w=v;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,y!==null&&(x=Sa(v,y),x!=null&&m.push(Aa(v,x,w)))),_)break;v=v.return}0<m.length&&(f=new h(f,g,null,n,c),d.push({event:f,listeners:m}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==mg&&(g=n.relatedTarget||n.fromElement)&&(Gr(g)||g[Vn]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(g=n.relatedTarget||n.toElement,h=u,g=g?Gr(g):null,g!==null&&(_=ci(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(h=null,g=u),h!==g)){if(m=r_,x="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=s_,x="onPointerLeave",y="onPointerEnter",v="pointer"),_=h==null?f:Mi(h),w=g==null?f:Mi(g),f=new m(x,v+"leave",h,n,c),f.target=_,f.relatedTarget=w,x=null,Gr(c)===u&&(m=new m(y,v+"enter",g,n,c),m.target=w,m.relatedTarget=_,x=m),_=x,h&&g)t:{for(m=h,y=g,v=0,w=m;w;w=_i(w))v++;for(w=0,x=y;x;x=_i(x))w++;for(;0<v-w;)m=_i(m),v--;for(;0<w-v;)y=_i(y),w--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=_i(m),y=_i(y)}m=null}else m=null;h!==null&&g_(d,f,h,m,!1),g!==null&&_!==null&&g_(d,_,g,m,!0)}}e:{if(f=u?Mi(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var E=gI;else if(l_(f))if(bC)E=wI;else{E=yI;var S=vI}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=_I);if(E&&(E=E(e,u))){xC(d,E,n,c);break e}S&&S(e,f,u),e==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&cg(f,"number",f.value)}switch(S=u?Mi(u):window,e){case"focusin":(l_(S)||S.contentEditable==="true")&&(Ti=S,bg=u,ha=null);break;case"focusout":ha=bg=Ti=null;break;case"mousedown":Sg=!0;break;case"contextmenu":case"mouseup":case"dragend":Sg=!1,h_(d,n,c);break;case"selectionchange":if(SI)break;case"keydown":case"keyup":h_(d,n,c)}var N;if(Xv)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Pi?_C(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(yC&&n.locale!=="ko"&&(Pi||A!=="onCompositionStart"?A==="onCompositionEnd"&&Pi&&(N=vC()):(gr=c,Gv="value"in gr?gr.value:gr.textContent,Pi=!0)),S=Al(u,A),0<S.length&&(A=new i_(A,e,null,n,c),d.push({event:A,listeners:S}),N?A.data=N:(N=wC(n),N!==null&&(A.data=N)))),(N=dI?fI(e,n):hI(e,n))&&(u=Al(u,"onBeforeInput"),0<u.length&&(c=new i_("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=N))}TC(d,t)})}function Aa(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Al(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Sa(e,n),s!=null&&r.unshift(Aa(e,s,i)),s=Sa(e,t),s!=null&&r.push(Aa(e,s,i))),e=e.return}return r}function _i(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function g_(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=Sa(n,s),l!=null&&a.unshift(Aa(n,l,o))):i||(l=Sa(n,s),l!=null&&a.push(Aa(n,l,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var kI=/\r\n?/g,RI=/\u0000|\uFFFD/g;function v_(e){return(typeof e=="string"?e:""+e).replace(kI,`
`).replace(RI,"")}function Ao(e,t,n){if(t=v_(t),v_(e)!==t&&n)throw Error(B(425))}function Pl(){}var Eg=null,Ng=null;function Cg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var kg=typeof setTimeout=="function"?setTimeout:void 0,jI=typeof clearTimeout=="function"?clearTimeout:void 0,y_=typeof Promise=="function"?Promise:void 0,AI=typeof queueMicrotask=="function"?queueMicrotask:typeof y_<"u"?function(e){return y_.resolve(null).then(e).catch(PI)}:kg;function PI(e){setTimeout(function(){throw e})}function kc(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Ca(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ca(t)}function br(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function __(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ys=Math.random().toString(36).slice(2),_n="__reactFiber$"+ys,Pa="__reactProps$"+ys,Vn="__reactContainer$"+ys,Rg="__reactEvents$"+ys,TI="__reactListeners$"+ys,II="__reactHandles$"+ys;function Gr(e){var t=e[_n];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Vn]||n[_n]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=__(e);e!==null;){if(n=e[_n])return n;e=__(e)}return t}e=n,n=e.parentNode}return null}function eo(e){return e=e[_n]||e[Vn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(B(33))}function _u(e){return e[Pa]||null}var jg=[],Oi=-1;function qr(e){return{current:e}}function me(e){0>Oi||(e.current=jg[Oi],jg[Oi]=null,Oi--)}function he(e,t){Oi++,jg[Oi]=e.current,e.current=t}var Ir={},Qe=qr(Ir),mt=qr(!1),ni=Ir;function ss(e,t){var n=e.type.contextTypes;if(!n)return Ir;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function gt(e){return e=e.childContextTypes,e!=null}function Tl(){me(mt),me(Qe)}function w_(e,t,n){if(Qe.current!==Ir)throw Error(B(168));he(Qe,t),he(mt,n)}function MC(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(B(108,vT(e)||"Unknown",i));return be({},n,r)}function Il(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ir,ni=Qe.current,he(Qe,e),he(mt,mt.current),!0}function x_(e,t,n){var r=e.stateNode;if(!r)throw Error(B(169));n?(e=MC(e,t,ni),r.__reactInternalMemoizedMergedChildContext=e,me(mt),me(Qe),he(Qe,e)):me(mt),he(mt,n)}var qn=null,wu=!1,Rc=!1;function OC(e){qn===null?qn=[e]:qn.push(e)}function MI(e){wu=!0,OC(e)}function Lr(){if(!Rc&&qn!==null){Rc=!0;var e=0,t=ue;try{var n=qn;for(ue=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}qn=null,wu=!1}catch(i){throw qn!==null&&(qn=qn.slice(e+1)),aC(Bv,Lr),i}finally{ue=t,Rc=!1}}return null}var $i=[],qi=0,Ml=null,Ol=0,Ot=[],$t=0,ri=null,Ln=1,Fn="";function Br(e,t){$i[qi++]=Ol,$i[qi++]=Ml,Ml=e,Ol=t}function $C(e,t,n){Ot[$t++]=Ln,Ot[$t++]=Fn,Ot[$t++]=ri,ri=e;var r=Ln;e=Fn;var i=32-tn(r)-1;r&=~(1<<i),n+=1;var s=32-tn(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ln=1<<32-tn(t)+i|n<<i|r,Fn=s+e}else Ln=1<<s|n<<i|r,Fn=e}function Qv(e){e.return!==null&&(Br(e,1),$C(e,1,0))}function Jv(e){for(;e===Ml;)Ml=$i[--qi],$i[qi]=null,Ol=$i[--qi],$i[qi]=null;for(;e===ri;)ri=Ot[--$t],Ot[$t]=null,Fn=Ot[--$t],Ot[$t]=null,Ln=Ot[--$t],Ot[$t]=null}var At=null,jt=null,ve=!1,Yt=null;function qC(e,t){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function b_(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,At=e,jt=br(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,At=e,jt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ri!==null?{id:Ln,overflow:Fn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,At=e,jt=null,!0):!1;default:return!1}}function Ag(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Pg(e){if(ve){var t=jt;if(t){var n=t;if(!b_(e,t)){if(Ag(e))throw Error(B(418));t=br(n.nextSibling);var r=At;t&&b_(e,t)?qC(r,n):(e.flags=e.flags&-4097|2,ve=!1,At=e)}}else{if(Ag(e))throw Error(B(418));e.flags=e.flags&-4097|2,ve=!1,At=e}}}function S_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;At=e}function Po(e){if(e!==At)return!1;if(!ve)return S_(e),ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Cg(e.type,e.memoizedProps)),t&&(t=jt)){if(Ag(e))throw LC(),Error(B(418));for(;t;)qC(e,t),t=br(t.nextSibling)}if(S_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(B(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){jt=br(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}jt=null}}else jt=At?br(e.stateNode.nextSibling):null;return!0}function LC(){for(var e=jt;e;)e=br(e.nextSibling)}function as(){jt=At=null,ve=!1}function Zv(e){Yt===null?Yt=[e]:Yt.push(e)}var OI=Qn.ReactCurrentBatchConfig;function Os(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,e))}return e}function To(e,t){throw e=Object.prototype.toString.call(t),Error(B(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function E_(e){var t=e._init;return t(e._payload)}function FC(e){function t(y,v){if(e){var w=y.deletions;w===null?(y.deletions=[v],y.flags|=16):w.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Cr(y,v),y.index=0,y.sibling=null,y}function s(y,v,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<v?(y.flags|=2,v):w):(y.flags|=2,v)):(y.flags|=1048576,v)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function o(y,v,w,x){return v===null||v.tag!==6?(v=Oc(w,y.mode,x),v.return=y,v):(v=i(v,w),v.return=y,v)}function l(y,v,w,x){var E=w.type;return E===Ai?c(y,v,w.props.children,x,w.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===lr&&E_(E)===v.type)?(x=i(v,w.props),x.ref=Os(y,v,w),x.return=y,x):(x=fl(w.type,w.key,w.props,null,y.mode,x),x.ref=Os(y,v,w),x.return=y,x)}function u(y,v,w,x){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=$c(w,y.mode,x),v.return=y,v):(v=i(v,w.children||[]),v.return=y,v)}function c(y,v,w,x,E){return v===null||v.tag!==7?(v=ei(w,y.mode,x,E),v.return=y,v):(v=i(v,w),v.return=y,v)}function d(y,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Oc(""+v,y.mode,w),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case xo:return w=fl(v.type,v.key,v.props,null,y.mode,w),w.ref=Os(y,null,v),w.return=y,w;case ji:return v=$c(v,y.mode,w),v.return=y,v;case lr:var x=v._init;return d(y,x(v._payload),w)}if(Hs(v)||As(v))return v=ei(v,y.mode,w,null),v.return=y,v;To(y,v)}return null}function f(y,v,w,x){var E=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return E!==null?null:o(y,v,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case xo:return w.key===E?l(y,v,w,x):null;case ji:return w.key===E?u(y,v,w,x):null;case lr:return E=w._init,f(y,v,E(w._payload),x)}if(Hs(w)||As(w))return E!==null?null:c(y,v,w,x,null);To(y,w)}return null}function h(y,v,w,x,E){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(w)||null,o(v,y,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case xo:return y=y.get(x.key===null?w:x.key)||null,l(v,y,x,E);case ji:return y=y.get(x.key===null?w:x.key)||null,u(v,y,x,E);case lr:var S=x._init;return h(y,v,w,S(x._payload),E)}if(Hs(x)||As(x))return y=y.get(w)||null,c(v,y,x,E,null);To(v,x)}return null}function g(y,v,w,x){for(var E=null,S=null,N=v,A=v=0,k=null;N!==null&&A<w.length;A++){N.index>A?(k=N,N=null):k=N.sibling;var j=f(y,N,w[A],x);if(j===null){N===null&&(N=k);break}e&&N&&j.alternate===null&&t(y,N),v=s(j,v,A),S===null?E=j:S.sibling=j,S=j,N=k}if(A===w.length)return n(y,N),ve&&Br(y,A),E;if(N===null){for(;A<w.length;A++)N=d(y,w[A],x),N!==null&&(v=s(N,v,A),S===null?E=N:S.sibling=N,S=N);return ve&&Br(y,A),E}for(N=r(y,N);A<w.length;A++)k=h(N,y,A,w[A],x),k!==null&&(e&&k.alternate!==null&&N.delete(k.key===null?A:k.key),v=s(k,v,A),S===null?E=k:S.sibling=k,S=k);return e&&N.forEach(function(I){return t(y,I)}),ve&&Br(y,A),E}function m(y,v,w,x){var E=As(w);if(typeof E!="function")throw Error(B(150));if(w=E.call(w),w==null)throw Error(B(151));for(var S=E=null,N=v,A=v=0,k=null,j=w.next();N!==null&&!j.done;A++,j=w.next()){N.index>A?(k=N,N=null):k=N.sibling;var I=f(y,N,j.value,x);if(I===null){N===null&&(N=k);break}e&&N&&I.alternate===null&&t(y,N),v=s(I,v,A),S===null?E=I:S.sibling=I,S=I,N=k}if(j.done)return n(y,N),ve&&Br(y,A),E;if(N===null){for(;!j.done;A++,j=w.next())j=d(y,j.value,x),j!==null&&(v=s(j,v,A),S===null?E=j:S.sibling=j,S=j);return ve&&Br(y,A),E}for(N=r(y,N);!j.done;A++,j=w.next())j=h(N,y,A,j.value,x),j!==null&&(e&&j.alternate!==null&&N.delete(j.key===null?A:j.key),v=s(j,v,A),S===null?E=j:S.sibling=j,S=j);return e&&N.forEach(function(z){return t(y,z)}),ve&&Br(y,A),E}function _(y,v,w,x){if(typeof w=="object"&&w!==null&&w.type===Ai&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case xo:e:{for(var E=w.key,S=v;S!==null;){if(S.key===E){if(E=w.type,E===Ai){if(S.tag===7){n(y,S.sibling),v=i(S,w.props.children),v.return=y,y=v;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===lr&&E_(E)===S.type){n(y,S.sibling),v=i(S,w.props),v.ref=Os(y,S,w),v.return=y,y=v;break e}n(y,S);break}else t(y,S);S=S.sibling}w.type===Ai?(v=ei(w.props.children,y.mode,x,w.key),v.return=y,y=v):(x=fl(w.type,w.key,w.props,null,y.mode,x),x.ref=Os(y,v,w),x.return=y,y=x)}return a(y);case ji:e:{for(S=w.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(y,v.sibling),v=i(v,w.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=$c(w,y.mode,x),v.return=y,y=v}return a(y);case lr:return S=w._init,_(y,v,S(w._payload),x)}if(Hs(w))return g(y,v,w,x);if(As(w))return m(y,v,w,x);To(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,w),v.return=y,y=v):(n(y,v),v=Oc(w,y.mode,x),v.return=y,y=v),a(y)):n(y,v)}return _}var os=FC(!0),DC=FC(!1),$l=qr(null),ql=null,Li=null,ey=null;function ty(){ey=Li=ql=null}function ny(e){var t=$l.current;me($l),e._currentValue=t}function Tg(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ki(e,t){ql=e,ey=Li=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ht=!0),e.firstContext=null)}function Dt(e){var t=e._currentValue;if(ey!==e)if(e={context:e,memoizedValue:t,next:null},Li===null){if(ql===null)throw Error(B(308));Li=e,ql.dependencies={lanes:0,firstContext:e}}else Li=Li.next=e;return t}var Wr=null;function ry(e){Wr===null?Wr=[e]:Wr.push(e)}function zC(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,ry(t)):(n.next=i.next,i.next=n),t.interleaved=n,Gn(e,r)}function Gn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ur=!1;function iy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Un(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Sr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Gn(e,n)}return i=r.interleaved,i===null?(t.next=t,ry(r)):(t.next=i.next,i.next=t),r.interleaved=t,Gn(e,n)}function al(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Uv(e,n)}}function N_(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ll(e,t,n,r){var i=e.updateQueue;ur=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var c=e.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;a=0,c=u=l=null,o=s;do{var f=o.lane,h=o.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,m=o;switch(f=t,h=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){d=g.call(h,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,f=typeof g=="function"?g.call(h,d,f):g,f==null)break e;d=be({},d,f);break e;case 2:ur=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else h={eventTime:h,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=h,l=d):c=c.next=h,a|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);si|=a,e.lanes=a,e.memoizedState=d}}function C_(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var to={},Sn=qr(to),Ta=qr(to),Ia=qr(to);function Kr(e){if(e===to)throw Error(B(174));return e}function sy(e,t){switch(he(Ia,t),he(Ta,e),he(Sn,to),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fg(t,e)}me(Sn),he(Sn,t)}function ls(){me(Sn),me(Ta),me(Ia)}function UC(e){Kr(Ia.current);var t=Kr(Sn.current),n=fg(t,e.type);t!==n&&(he(Ta,e),he(Sn,n))}function ay(e){Ta.current===e&&(me(Sn),me(Ta))}var we=qr(0);function Fl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jc=[];function oy(){for(var e=0;e<jc.length;e++)jc[e]._workInProgressVersionPrimary=null;jc.length=0}var ol=Qn.ReactCurrentDispatcher,Ac=Qn.ReactCurrentBatchConfig,ii=0,xe=null,Me=null,Le=null,Dl=!1,pa=!1,Ma=0,$I=0;function We(){throw Error(B(321))}function ly(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sn(e[n],t[n]))return!1;return!0}function uy(e,t,n,r,i,s){if(ii=s,xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ol.current=e===null||e.memoizedState===null?DI:zI,e=n(r,i),pa){s=0;do{if(pa=!1,Ma=0,25<=s)throw Error(B(301));s+=1,Le=Me=null,t.updateQueue=null,ol.current=BI,e=n(r,i)}while(pa)}if(ol.current=zl,t=Me!==null&&Me.next!==null,ii=0,Le=Me=xe=null,Dl=!1,t)throw Error(B(300));return e}function cy(){var e=Ma!==0;return Ma=0,e}function mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?xe.memoizedState=Le=e:Le=Le.next=e,Le}function zt(){if(Me===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=Me.next;var t=Le===null?xe.memoizedState:Le.next;if(t!==null)Le=t,Me=e;else{if(e===null)throw Error(B(310));Me=e,e={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},Le===null?xe.memoizedState=Le=e:Le=Le.next=e}return Le}function Oa(e,t){return typeof t=="function"?t(e):t}function Pc(e){var t=zt(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=Me,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,u=s;do{var c=u.lane;if((ii&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=d,a=r):l=l.next=d,xe.lanes|=c,si|=c}u=u.next}while(u!==null&&u!==s);l===null?a=r:l.next=o,sn(r,t.memoizedState)||(ht=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,xe.lanes|=s,si|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Tc(e){var t=zt(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);sn(s,t.memoizedState)||(ht=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function HC(){}function VC(e,t){var n=xe,r=zt(),i=t(),s=!sn(r.memoizedState,i);if(s&&(r.memoizedState=i,ht=!0),r=r.queue,dy(KC.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Le!==null&&Le.memoizedState.tag&1){if(n.flags|=2048,$a(9,WC.bind(null,n,r,i,t),void 0,null),Fe===null)throw Error(B(349));ii&30||GC(n,t,i)}return i}function GC(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function WC(e,t,n,r){t.value=n,t.getSnapshot=r,XC(t)&&YC(e)}function KC(e,t,n){return n(function(){XC(t)&&YC(e)})}function XC(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sn(e,n)}catch{return!0}}function YC(e){var t=Gn(e,1);t!==null&&nn(t,e,1,-1)}function k_(e){var t=mn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:e},t.queue=e,e=e.dispatch=FI.bind(null,xe,e),[t.memoizedState,e]}function $a(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function QC(){return zt().memoizedState}function ll(e,t,n,r){var i=mn();xe.flags|=e,i.memoizedState=$a(1|t,n,void 0,r===void 0?null:r)}function xu(e,t,n,r){var i=zt();r=r===void 0?null:r;var s=void 0;if(Me!==null){var a=Me.memoizedState;if(s=a.destroy,r!==null&&ly(r,a.deps)){i.memoizedState=$a(t,n,s,r);return}}xe.flags|=e,i.memoizedState=$a(1|t,n,s,r)}function R_(e,t){return ll(8390656,8,e,t)}function dy(e,t){return xu(2048,8,e,t)}function JC(e,t){return xu(4,2,e,t)}function ZC(e,t){return xu(4,4,e,t)}function ek(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tk(e,t,n){return n=n!=null?n.concat([e]):null,xu(4,4,ek.bind(null,t,e),n)}function fy(){}function nk(e,t){var n=zt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ly(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function rk(e,t){var n=zt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ly(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ik(e,t,n){return ii&21?(sn(n,t)||(n=uC(),xe.lanes|=n,si|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=n)}function qI(e,t){var n=ue;ue=n!==0&&4>n?n:4,e(!0);var r=Ac.transition;Ac.transition={};try{e(!1),t()}finally{ue=n,Ac.transition=r}}function sk(){return zt().memoizedState}function LI(e,t,n){var r=Nr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ak(e))ok(t,n);else if(n=zC(e,t,n,r),n!==null){var i=rt();nn(n,e,r,i),lk(n,t,r)}}function FI(e,t,n){var r=Nr(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ak(e))ok(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,sn(o,a)){var l=t.interleaved;l===null?(i.next=i,ry(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=zC(e,t,i,r),n!==null&&(i=rt(),nn(n,e,r,i),lk(n,t,r))}}function ak(e){var t=e.alternate;return e===xe||t!==null&&t===xe}function ok(e,t){pa=Dl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function lk(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Uv(e,n)}}var zl={readContext:Dt,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useInsertionEffect:We,useLayoutEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useMutableSource:We,useSyncExternalStore:We,useId:We,unstable_isNewReconciler:!1},DI={readContext:Dt,useCallback:function(e,t){return mn().memoizedState=[e,t===void 0?null:t],e},useContext:Dt,useEffect:R_,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ll(4194308,4,ek.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ll(4194308,4,e,t)},useInsertionEffect:function(e,t){return ll(4,2,e,t)},useMemo:function(e,t){var n=mn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=mn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=LI.bind(null,xe,e),[r.memoizedState,e]},useRef:function(e){var t=mn();return e={current:e},t.memoizedState=e},useState:k_,useDebugValue:fy,useDeferredValue:function(e){return mn().memoizedState=e},useTransition:function(){var e=k_(!1),t=e[0];return e=qI.bind(null,e[1]),mn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=xe,i=mn();if(ve){if(n===void 0)throw Error(B(407));n=n()}else{if(n=t(),Fe===null)throw Error(B(349));ii&30||GC(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,R_(KC.bind(null,r,s,e),[e]),r.flags|=2048,$a(9,WC.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=mn(),t=Fe.identifierPrefix;if(ve){var n=Fn,r=Ln;n=(r&~(1<<32-tn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ma++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=$I++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},zI={readContext:Dt,useCallback:nk,useContext:Dt,useEffect:dy,useImperativeHandle:tk,useInsertionEffect:JC,useLayoutEffect:ZC,useMemo:rk,useReducer:Pc,useRef:QC,useState:function(){return Pc(Oa)},useDebugValue:fy,useDeferredValue:function(e){var t=zt();return ik(t,Me.memoizedState,e)},useTransition:function(){var e=Pc(Oa)[0],t=zt().memoizedState;return[e,t]},useMutableSource:HC,useSyncExternalStore:VC,useId:sk,unstable_isNewReconciler:!1},BI={readContext:Dt,useCallback:nk,useContext:Dt,useEffect:dy,useImperativeHandle:tk,useInsertionEffect:JC,useLayoutEffect:ZC,useMemo:rk,useReducer:Tc,useRef:QC,useState:function(){return Tc(Oa)},useDebugValue:fy,useDeferredValue:function(e){var t=zt();return Me===null?t.memoizedState=e:ik(t,Me.memoizedState,e)},useTransition:function(){var e=Tc(Oa)[0],t=zt().memoizedState;return[e,t]},useMutableSource:HC,useSyncExternalStore:VC,useId:sk,unstable_isNewReconciler:!1};function Wt(e,t){if(e&&e.defaultProps){t=be({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ig(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:be({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var bu={isMounted:function(e){return(e=e._reactInternals)?ci(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=rt(),i=Nr(e),s=Un(r,i);s.payload=t,n!=null&&(s.callback=n),t=Sr(e,s,i),t!==null&&(nn(t,e,i,r),al(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=rt(),i=Nr(e),s=Un(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Sr(e,s,i),t!==null&&(nn(t,e,i,r),al(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=rt(),r=Nr(e),i=Un(n,r);i.tag=2,t!=null&&(i.callback=t),t=Sr(e,i,r),t!==null&&(nn(t,e,r,n),al(t,e,r))}};function j_(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!Ra(n,r)||!Ra(i,s):!0}function uk(e,t,n){var r=!1,i=Ir,s=t.contextType;return typeof s=="object"&&s!==null?s=Dt(s):(i=gt(t)?ni:Qe.current,r=t.contextTypes,s=(r=r!=null)?ss(e,i):Ir),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=bu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function A_(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&bu.enqueueReplaceState(t,t.state,null)}function Mg(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},iy(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Dt(s):(s=gt(t)?ni:Qe.current,i.context=ss(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Ig(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&bu.enqueueReplaceState(i,i.state,null),Ll(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function us(e,t){try{var n="",r=t;do n+=gT(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Ic(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Og(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var UI=typeof WeakMap=="function"?WeakMap:Map;function ck(e,t,n){n=Un(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ul||(Ul=!0,Vg=r),Og(e,t)},n}function dk(e,t,n){n=Un(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Og(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Og(e,t),typeof r!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function P_(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new UI;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=rM.bind(null,e,t,n),t.then(e,e))}function T_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function I_(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Un(-1,1),t.tag=2,Sr(n,t,1))),n.lanes|=1),e)}var HI=Qn.ReactCurrentOwner,ht=!1;function nt(e,t,n,r){t.child=e===null?DC(t,null,n,r):os(t,e.child,n,r)}function M_(e,t,n,r,i){n=n.render;var s=t.ref;return Ki(t,i),r=uy(e,t,n,r,s,i),n=cy(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wn(e,t,i)):(ve&&n&&Qv(t),t.flags|=1,nt(e,t,r,i),t.child)}function O_(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!wy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,fk(e,t,s,r,i)):(e=fl(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ra,n(a,r)&&e.ref===t.ref)return Wn(e,t,i)}return t.flags|=1,e=Cr(s,r),e.ref=t.ref,e.return=t,t.child=e}function fk(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Ra(s,r)&&e.ref===t.ref)if(ht=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(ht=!0);else return t.lanes=e.lanes,Wn(e,t,i)}return $g(e,t,n,r,i)}function hk(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(Di,Ct),Ct|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,he(Di,Ct),Ct|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,he(Di,Ct),Ct|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,he(Di,Ct),Ct|=r;return nt(e,t,i,n),t.child}function pk(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function $g(e,t,n,r,i){var s=gt(n)?ni:Qe.current;return s=ss(t,s),Ki(t,i),n=uy(e,t,n,r,s,i),r=cy(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wn(e,t,i)):(ve&&r&&Qv(t),t.flags|=1,nt(e,t,n,i),t.child)}function $_(e,t,n,r,i){if(gt(n)){var s=!0;Il(t)}else s=!1;if(Ki(t,i),t.stateNode===null)ul(e,t),uk(t,n,r),Mg(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Dt(u):(u=gt(n)?ni:Qe.current,u=ss(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&A_(t,a,r,u),ur=!1;var f=t.memoizedState;a.state=f,Ll(t,r,a,i),l=t.memoizedState,o!==r||f!==l||mt.current||ur?(typeof c=="function"&&(Ig(t,n,c,r),l=t.memoizedState),(o=ur||j_(t,n,o,r,f,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,BC(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Wt(t.type,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Dt(l):(l=gt(n)?ni:Qe.current,l=ss(t,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||f!==l)&&A_(t,a,r,l),ur=!1,f=t.memoizedState,a.state=f,Ll(t,r,a,i);var g=t.memoizedState;o!==d||f!==g||mt.current||ur?(typeof h=="function"&&(Ig(t,n,h,r),g=t.memoizedState),(u=ur||j_(t,n,u,r,f,g,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return qg(e,t,n,r,s,i)}function qg(e,t,n,r,i,s){pk(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&x_(t,n,!1),Wn(e,t,s);r=t.stateNode,HI.current=t;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=os(t,e.child,null,s),t.child=os(t,null,o,s)):nt(e,t,o,s),t.memoizedState=r.state,i&&x_(t,n,!0),t.child}function mk(e){var t=e.stateNode;t.pendingContext?w_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&w_(e,t.context,!1),sy(e,t.containerInfo)}function q_(e,t,n,r,i){return as(),Zv(i),t.flags|=256,nt(e,t,n,r),t.child}var Lg={dehydrated:null,treeContext:null,retryLane:0};function Fg(e){return{baseLanes:e,cachePool:null,transitions:null}}function gk(e,t,n){var r=t.pendingProps,i=we.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),he(we,i&1),e===null)return Pg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Nu(a,r,0,null),e=ei(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fg(n),t.memoizedState=Lg,e):hy(t,a));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return VI(e,t,a,r,o,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Cr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Cr(o,s):(s=ei(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?Fg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=Lg,r}return s=e.child,e=s.sibling,r=Cr(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function hy(e,t){return t=Nu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Io(e,t,n,r){return r!==null&&Zv(r),os(t,e.child,null,n),e=hy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function VI(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=Ic(Error(B(422))),Io(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Nu({mode:"visible",children:r.children},i,0,null),s=ei(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&os(t,e.child,null,a),t.child.memoizedState=Fg(a),t.memoizedState=Lg,s);if(!(t.mode&1))return Io(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(B(419)),r=Ic(s,r,void 0),Io(e,t,a,r)}if(o=(a&e.childLanes)!==0,ht||o){if(r=Fe,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Gn(e,i),nn(r,e,i,-1))}return _y(),r=Ic(Error(B(421))),Io(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=iM.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,jt=br(i.nextSibling),At=t,ve=!0,Yt=null,e!==null&&(Ot[$t++]=Ln,Ot[$t++]=Fn,Ot[$t++]=ri,Ln=e.id,Fn=e.overflow,ri=t),t=hy(t,r.children),t.flags|=4096,t)}function L_(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Tg(e.return,t,n)}function Mc(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function vk(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(nt(e,t,r.children,n),r=we.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&L_(e,n,t);else if(e.tag===19)L_(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(he(we,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Fl(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Mc(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Fl(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Mc(t,!0,n,null,s);break;case"together":Mc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ul(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),si|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(B(153));if(t.child!==null){for(e=t.child,n=Cr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Cr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function GI(e,t,n){switch(t.tag){case 3:mk(t),as();break;case 5:UC(t);break;case 1:gt(t.type)&&Il(t);break;case 4:sy(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;he($l,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(he(we,we.current&1),t.flags|=128,null):n&t.child.childLanes?gk(e,t,n):(he(we,we.current&1),e=Wn(e,t,n),e!==null?e.sibling:null);he(we,we.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return vk(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),he(we,we.current),r)break;return null;case 22:case 23:return t.lanes=0,hk(e,t,n)}return Wn(e,t,n)}var yk,Dg,_k,wk;yk=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dg=function(){};_k=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Kr(Sn.current);var s=null;switch(n){case"input":i=lg(e,i),r=lg(e,r),s=[];break;case"select":i=be({},i,{value:void 0}),r=be({},r,{value:void 0}),s=[];break;case"textarea":i=dg(e,i),r=dg(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Pl)}hg(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(xa.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(xa.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&pe("scroll",e),s||o===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};wk=function(e,t,n,r){n!==r&&(t.flags|=4)};function $s(e,t){if(!ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ke(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function WI(e,t,n){var r=t.pendingProps;switch(Jv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(t),null;case 1:return gt(t.type)&&Tl(),Ke(t),null;case 3:return r=t.stateNode,ls(),me(mt),me(Qe),oy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Po(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Yt!==null&&(Kg(Yt),Yt=null))),Dg(e,t),Ke(t),null;case 5:ay(t);var i=Kr(Ia.current);if(n=t.type,e!==null&&t.stateNode!=null)_k(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(B(166));return Ke(t),null}if(e=Kr(Sn.current),Po(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[_n]=t,r[Pa]=s,e=(t.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(i=0;i<Gs.length;i++)pe(Gs[i],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":W0(r,s),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},pe("invalid",r);break;case"textarea":X0(r,s),pe("invalid",r)}hg(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&Ao(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Ao(r.textContent,o,e),i=["children",""+o]):xa.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&pe("scroll",r)}switch(n){case"input":bo(r),K0(r,s,!0);break;case"textarea":bo(r),Y0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Pl)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=KN(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[_n]=t,e[Pa]=r,yk(e,t,!1,!1),t.stateNode=e;e:{switch(a=pg(n,r),n){case"dialog":pe("cancel",e),pe("close",e),i=r;break;case"iframe":case"object":case"embed":pe("load",e),i=r;break;case"video":case"audio":for(i=0;i<Gs.length;i++)pe(Gs[i],e);i=r;break;case"source":pe("error",e),i=r;break;case"img":case"image":case"link":pe("error",e),pe("load",e),i=r;break;case"details":pe("toggle",e),i=r;break;case"input":W0(e,r),i=lg(e,r),pe("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=be({},r,{value:void 0}),pe("invalid",e);break;case"textarea":X0(e,r),i=dg(e,r),pe("invalid",e);break;default:i=r}hg(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?QN(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&XN(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ba(e,l):typeof l=="number"&&ba(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(xa.hasOwnProperty(s)?l!=null&&s==="onScroll"&&pe("scroll",e):l!=null&&qv(e,s,l,a))}switch(n){case"input":bo(e),K0(e,r,!1);break;case"textarea":bo(e),Y0(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Tr(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Hi(e,!!r.multiple,s,!1):r.defaultValue!=null&&Hi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Pl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ke(t),null;case 6:if(e&&t.stateNode!=null)wk(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(B(166));if(n=Kr(Ia.current),Kr(Sn.current),Po(t)){if(r=t.stateNode,n=t.memoizedProps,r[_n]=t,(s=r.nodeValue!==n)&&(e=At,e!==null))switch(e.tag){case 3:Ao(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ao(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_n]=t,t.stateNode=r}return Ke(t),null;case 13:if(me(we),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ve&&jt!==null&&t.mode&1&&!(t.flags&128))LC(),as(),t.flags|=98560,s=!1;else if(s=Po(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(B(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[_n]=t}else as(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ke(t),s=!1}else Yt!==null&&(Kg(Yt),Yt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||we.current&1?Oe===0&&(Oe=3):_y())),t.updateQueue!==null&&(t.flags|=4),Ke(t),null);case 4:return ls(),Dg(e,t),e===null&&ja(t.stateNode.containerInfo),Ke(t),null;case 10:return ny(t.type._context),Ke(t),null;case 17:return gt(t.type)&&Tl(),Ke(t),null;case 19:if(me(we),s=t.memoizedState,s===null)return Ke(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)$s(s,!1);else{if(Oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Fl(e),a!==null){for(t.flags|=128,$s(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return he(we,we.current&1|2),t.child}e=e.sibling}s.tail!==null&&ke()>cs&&(t.flags|=128,r=!0,$s(s,!1),t.lanes=4194304)}else{if(!r)if(e=Fl(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),$s(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!ve)return Ke(t),null}else 2*ke()-s.renderingStartTime>cs&&n!==1073741824&&(t.flags|=128,r=!0,$s(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ke(),t.sibling=null,n=we.current,he(we,r?n&1|2:n&1),t):(Ke(t),null);case 22:case 23:return yy(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ct&1073741824&&(Ke(t),t.subtreeFlags&6&&(t.flags|=8192)):Ke(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function KI(e,t){switch(Jv(t),t.tag){case 1:return gt(t.type)&&Tl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ls(),me(mt),me(Qe),oy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ay(t),null;case 13:if(me(we),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(B(340));as()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return me(we),null;case 4:return ls(),null;case 10:return ny(t.type._context),null;case 22:case 23:return yy(),null;case 24:return null;default:return null}}var Mo=!1,Ye=!1,XI=typeof WeakSet=="function"?WeakSet:Set,G=null;function Fi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ee(e,t,r)}else n.current=null}function zg(e,t,n){try{n()}catch(r){Ee(e,t,r)}}var F_=!1;function YI(e,t){if(Eg=Rl,e=NC(),Yv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,c=0,d=e,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(o=a+i),d!==s||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===n&&++u===i&&(o=a),f===s&&++c===r&&(l=a),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ng={focusedElem:e,selectionRange:n},Rl=!1,G=t;G!==null;)if(t=G,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,G=e;else for(;G!==null;){t=G;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,_=g.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Wt(t.type,m),_);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(x){Ee(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,G=e;break}G=t.return}return g=F_,F_=!1,g}function ma(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&zg(t,n,s)}i=i.next}while(i!==r)}}function Su(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Bg(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function xk(e){var t=e.alternate;t!==null&&(e.alternate=null,xk(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_n],delete t[Pa],delete t[Rg],delete t[TI],delete t[II])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bk(e){return e.tag===5||e.tag===3||e.tag===4}function D_(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bk(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ug(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Pl));else if(r!==4&&(e=e.child,e!==null))for(Ug(e,t,n),e=e.sibling;e!==null;)Ug(e,t,n),e=e.sibling}function Hg(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Hg(e,t,n),e=e.sibling;e!==null;)Hg(e,t,n),e=e.sibling}var ze=null,Xt=!1;function tr(e,t,n){for(n=n.child;n!==null;)Sk(e,t,n),n=n.sibling}function Sk(e,t,n){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(mu,n)}catch{}switch(n.tag){case 5:Ye||Fi(n,t);case 6:var r=ze,i=Xt;ze=null,tr(e,t,n),ze=r,Xt=i,ze!==null&&(Xt?(e=ze,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ze.removeChild(n.stateNode));break;case 18:ze!==null&&(Xt?(e=ze,n=n.stateNode,e.nodeType===8?kc(e.parentNode,n):e.nodeType===1&&kc(e,n),Ca(e)):kc(ze,n.stateNode));break;case 4:r=ze,i=Xt,ze=n.stateNode.containerInfo,Xt=!0,tr(e,t,n),ze=r,Xt=i;break;case 0:case 11:case 14:case 15:if(!Ye&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&zg(n,t,a),i=i.next}while(i!==r)}tr(e,t,n);break;case 1:if(!Ye&&(Fi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ee(n,t,o)}tr(e,t,n);break;case 21:tr(e,t,n);break;case 22:n.mode&1?(Ye=(r=Ye)||n.memoizedState!==null,tr(e,t,n),Ye=r):tr(e,t,n);break;default:tr(e,t,n)}}function z_(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new XI),t.forEach(function(r){var i=sM.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Vt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:ze=o.stateNode,Xt=!1;break e;case 3:ze=o.stateNode.containerInfo,Xt=!0;break e;case 4:ze=o.stateNode.containerInfo,Xt=!0;break e}o=o.return}if(ze===null)throw Error(B(160));Sk(s,a,i),ze=null,Xt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ee(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ek(t,e),t=t.sibling}function Ek(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vt(t,e),hn(e),r&4){try{ma(3,e,e.return),Su(3,e)}catch(m){Ee(e,e.return,m)}try{ma(5,e,e.return)}catch(m){Ee(e,e.return,m)}}break;case 1:Vt(t,e),hn(e),r&512&&n!==null&&Fi(n,n.return);break;case 5:if(Vt(t,e),hn(e),r&512&&n!==null&&Fi(n,n.return),e.flags&32){var i=e.stateNode;try{ba(i,"")}catch(m){Ee(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&GN(i,s),pg(o,a);var u=pg(o,s);for(a=0;a<l.length;a+=2){var c=l[a],d=l[a+1];c==="style"?QN(i,d):c==="dangerouslySetInnerHTML"?XN(i,d):c==="children"?ba(i,d):qv(i,c,d,u)}switch(o){case"input":ug(i,s);break;case"textarea":WN(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Hi(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Hi(i,!!s.multiple,s.defaultValue,!0):Hi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Pa]=s}catch(m){Ee(e,e.return,m)}}break;case 6:if(Vt(t,e),hn(e),r&4){if(e.stateNode===null)throw Error(B(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Ee(e,e.return,m)}}break;case 3:if(Vt(t,e),hn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ca(t.containerInfo)}catch(m){Ee(e,e.return,m)}break;case 4:Vt(t,e),hn(e);break;case 13:Vt(t,e),hn(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(gy=ke())),r&4&&z_(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Ye=(u=Ye)||c,Vt(t,e),Ye=u):Vt(t,e),hn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(G=e,c=e.child;c!==null;){for(d=G=c;G!==null;){switch(f=G,h=f.child,f.tag){case 0:case 11:case 14:case 15:ma(4,f,f.return);break;case 1:Fi(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Ee(r,n,m)}}break;case 5:Fi(f,f.return);break;case 22:if(f.memoizedState!==null){U_(d);continue}}h!==null?(h.return=f,G=h):U_(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=YN("display",a))}catch(m){Ee(e,e.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Ee(e,e.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Vt(t,e),hn(e),r&4&&z_(e);break;case 21:break;default:Vt(t,e),hn(e)}}function hn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(bk(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ba(i,""),r.flags&=-33);var s=D_(e);Hg(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=D_(e);Ug(e,o,a);break;default:throw Error(B(161))}}catch(l){Ee(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function QI(e,t,n){G=e,Nk(e)}function Nk(e,t,n){for(var r=(e.mode&1)!==0;G!==null;){var i=G,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Mo;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Ye;o=Mo;var u=Ye;if(Mo=a,(Ye=l)&&!u)for(G=i;G!==null;)a=G,l=a.child,a.tag===22&&a.memoizedState!==null?H_(i):l!==null?(l.return=a,G=l):H_(i);for(;s!==null;)G=s,Nk(s),s=s.sibling;G=i,Mo=o,Ye=u}B_(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,G=s):B_(e)}}function B_(e){for(;G!==null;){var t=G;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ye||Su(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ye)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Wt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&C_(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}C_(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Ca(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Ye||t.flags&512&&Bg(t)}catch(f){Ee(t,t.return,f)}}if(t===e){G=null;break}if(n=t.sibling,n!==null){n.return=t.return,G=n;break}G=t.return}}function U_(e){for(;G!==null;){var t=G;if(t===e){G=null;break}var n=t.sibling;if(n!==null){n.return=t.return,G=n;break}G=t.return}}function H_(e){for(;G!==null;){var t=G;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Su(4,t)}catch(l){Ee(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Ee(t,i,l)}}var s=t.return;try{Bg(t)}catch(l){Ee(t,s,l)}break;case 5:var a=t.return;try{Bg(t)}catch(l){Ee(t,a,l)}}}catch(l){Ee(t,t.return,l)}if(t===e){G=null;break}var o=t.sibling;if(o!==null){o.return=t.return,G=o;break}G=t.return}}var JI=Math.ceil,Bl=Qn.ReactCurrentDispatcher,py=Qn.ReactCurrentOwner,Ft=Qn.ReactCurrentBatchConfig,ae=0,Fe=null,je=null,Ue=0,Ct=0,Di=qr(0),Oe=0,qa=null,si=0,Eu=0,my=0,ga=null,ft=null,gy=0,cs=1/0,$n=null,Ul=!1,Vg=null,Er=null,Oo=!1,vr=null,Hl=0,va=0,Gg=null,cl=-1,dl=0;function rt(){return ae&6?ke():cl!==-1?cl:cl=ke()}function Nr(e){return e.mode&1?ae&2&&Ue!==0?Ue&-Ue:OI.transition!==null?(dl===0&&(dl=uC()),dl):(e=ue,e!==0||(e=window.event,e=e===void 0?16:gC(e.type)),e):1}function nn(e,t,n,r){if(50<va)throw va=0,Gg=null,Error(B(185));Ja(e,n,r),(!(ae&2)||e!==Fe)&&(e===Fe&&(!(ae&2)&&(Eu|=n),Oe===4&&hr(e,Ue)),vt(e,r),n===1&&ae===0&&!(t.mode&1)&&(cs=ke()+500,wu&&Lr()))}function vt(e,t){var n=e.callbackNode;OT(e,t);var r=kl(e,e===Fe?Ue:0);if(r===0)n!==null&&Z0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Z0(n),t===1)e.tag===0?MI(V_.bind(null,e)):OC(V_.bind(null,e)),AI(function(){!(ae&6)&&Lr()}),n=null;else{switch(cC(r)){case 1:n=Bv;break;case 4:n=oC;break;case 16:n=Cl;break;case 536870912:n=lC;break;default:n=Cl}n=Ik(n,Ck.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ck(e,t){if(cl=-1,dl=0,ae&6)throw Error(B(327));var n=e.callbackNode;if(Xi()&&e.callbackNode!==n)return null;var r=kl(e,e===Fe?Ue:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Vl(e,r);else{t=r;var i=ae;ae|=2;var s=Rk();(Fe!==e||Ue!==t)&&($n=null,cs=ke()+500,Zr(e,t));do try{tM();break}catch(o){kk(e,o)}while(!0);ty(),Bl.current=s,ae=i,je!==null?t=0:(Fe=null,Ue=0,t=Oe)}if(t!==0){if(t===2&&(i=_g(e),i!==0&&(r=i,t=Wg(e,i))),t===1)throw n=qa,Zr(e,0),hr(e,r),vt(e,ke()),n;if(t===6)hr(e,r);else{if(i=e.current.alternate,!(r&30)&&!ZI(i)&&(t=Vl(e,r),t===2&&(s=_g(e),s!==0&&(r=s,t=Wg(e,s))),t===1))throw n=qa,Zr(e,0),hr(e,r),vt(e,ke()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(B(345));case 2:Ur(e,ft,$n);break;case 3:if(hr(e,r),(r&130023424)===r&&(t=gy+500-ke(),10<t)){if(kl(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){rt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=kg(Ur.bind(null,e,ft,$n),t);break}Ur(e,ft,$n);break;case 4:if(hr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-tn(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*JI(r/1960))-r,10<r){e.timeoutHandle=kg(Ur.bind(null,e,ft,$n),r);break}Ur(e,ft,$n);break;case 5:Ur(e,ft,$n);break;default:throw Error(B(329))}}}return vt(e,ke()),e.callbackNode===n?Ck.bind(null,e):null}function Wg(e,t){var n=ga;return e.current.memoizedState.isDehydrated&&(Zr(e,t).flags|=256),e=Vl(e,t),e!==2&&(t=ft,ft=n,t!==null&&Kg(t)),e}function Kg(e){ft===null?ft=e:ft.push.apply(ft,e)}function ZI(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!sn(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hr(e,t){for(t&=~my,t&=~Eu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-tn(t),r=1<<n;e[n]=-1,t&=~r}}function V_(e){if(ae&6)throw Error(B(327));Xi();var t=kl(e,0);if(!(t&1))return vt(e,ke()),null;var n=Vl(e,t);if(e.tag!==0&&n===2){var r=_g(e);r!==0&&(t=r,n=Wg(e,r))}if(n===1)throw n=qa,Zr(e,0),hr(e,t),vt(e,ke()),n;if(n===6)throw Error(B(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ur(e,ft,$n),vt(e,ke()),null}function vy(e,t){var n=ae;ae|=1;try{return e(t)}finally{ae=n,ae===0&&(cs=ke()+500,wu&&Lr())}}function ai(e){vr!==null&&vr.tag===0&&!(ae&6)&&Xi();var t=ae;ae|=1;var n=Ft.transition,r=ue;try{if(Ft.transition=null,ue=1,e)return e()}finally{ue=r,Ft.transition=n,ae=t,!(ae&6)&&Lr()}}function yy(){Ct=Di.current,me(Di)}function Zr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,jI(n)),je!==null)for(n=je.return;n!==null;){var r=n;switch(Jv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Tl();break;case 3:ls(),me(mt),me(Qe),oy();break;case 5:ay(r);break;case 4:ls();break;case 13:me(we);break;case 19:me(we);break;case 10:ny(r.type._context);break;case 22:case 23:yy()}n=n.return}if(Fe=e,je=e=Cr(e.current,null),Ue=Ct=t,Oe=0,qa=null,my=Eu=si=0,ft=ga=null,Wr!==null){for(t=0;t<Wr.length;t++)if(n=Wr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Wr=null}return e}function kk(e,t){do{var n=je;try{if(ty(),ol.current=zl,Dl){for(var r=xe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Dl=!1}if(ii=0,Le=Me=xe=null,pa=!1,Ma=0,py.current=null,n===null||n.return===null){Oe=1,qa=t,je=null;break}e:{var s=e,a=n.return,o=n,l=t;if(t=Ue,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=T_(a);if(h!==null){h.flags&=-257,I_(h,a,o,s,t),h.mode&1&&P_(s,u,t),t=h,l=u;var g=t.updateQueue;if(g===null){var m=new Set;m.add(l),t.updateQueue=m}else g.add(l);break e}else{if(!(t&1)){P_(s,u,t),_y();break e}l=Error(B(426))}}else if(ve&&o.mode&1){var _=T_(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),I_(_,a,o,s,t),Zv(us(l,o));break e}}s=l=us(l,o),Oe!==4&&(Oe=2),ga===null?ga=[s]:ga.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=ck(s,l,t);N_(s,y);break e;case 1:o=l;var v=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Er===null||!Er.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t;var x=dk(s,o,t);N_(s,x);break e}}s=s.return}while(s!==null)}Ak(n)}catch(E){t=E,je===n&&n!==null&&(je=n=n.return);continue}break}while(!0)}function Rk(){var e=Bl.current;return Bl.current=zl,e===null?zl:e}function _y(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),Fe===null||!(si&268435455)&&!(Eu&268435455)||hr(Fe,Ue)}function Vl(e,t){var n=ae;ae|=2;var r=Rk();(Fe!==e||Ue!==t)&&($n=null,Zr(e,t));do try{eM();break}catch(i){kk(e,i)}while(!0);if(ty(),ae=n,Bl.current=r,je!==null)throw Error(B(261));return Fe=null,Ue=0,Oe}function eM(){for(;je!==null;)jk(je)}function tM(){for(;je!==null&&!CT();)jk(je)}function jk(e){var t=Tk(e.alternate,e,Ct);e.memoizedProps=e.pendingProps,t===null?Ak(e):je=t,py.current=null}function Ak(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=KI(n,t),n!==null){n.flags&=32767,je=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oe=6,je=null;return}}else if(n=WI(n,t,Ct),n!==null){je=n;return}if(t=t.sibling,t!==null){je=t;return}je=t=e}while(t!==null);Oe===0&&(Oe=5)}function Ur(e,t,n){var r=ue,i=Ft.transition;try{Ft.transition=null,ue=1,nM(e,t,n,r)}finally{Ft.transition=i,ue=r}return null}function nM(e,t,n,r){do Xi();while(vr!==null);if(ae&6)throw Error(B(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(B(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if($T(e,s),e===Fe&&(je=Fe=null,Ue=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Oo||(Oo=!0,Ik(Cl,function(){return Xi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ft.transition,Ft.transition=null;var a=ue;ue=1;var o=ae;ae|=4,py.current=null,YI(e,n),Ek(n,e),bI(Ng),Rl=!!Eg,Ng=Eg=null,e.current=n,QI(n),kT(),ae=o,ue=a,Ft.transition=s}else e.current=n;if(Oo&&(Oo=!1,vr=e,Hl=i),s=e.pendingLanes,s===0&&(Er=null),AT(n.stateNode),vt(e,ke()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ul)throw Ul=!1,e=Vg,Vg=null,e;return Hl&1&&e.tag!==0&&Xi(),s=e.pendingLanes,s&1?e===Gg?va++:(va=0,Gg=e):va=0,Lr(),null}function Xi(){if(vr!==null){var e=cC(Hl),t=Ft.transition,n=ue;try{if(Ft.transition=null,ue=16>e?16:e,vr===null)var r=!1;else{if(e=vr,vr=null,Hl=0,ae&6)throw Error(B(331));var i=ae;for(ae|=4,G=e.current;G!==null;){var s=G,a=s.child;if(G.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(G=u;G!==null;){var c=G;switch(c.tag){case 0:case 11:case 15:ma(8,c,s)}var d=c.child;if(d!==null)d.return=c,G=d;else for(;G!==null;){c=G;var f=c.sibling,h=c.return;if(xk(c),c===u){G=null;break}if(f!==null){f.return=h,G=f;break}G=h}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var _=m.sibling;m.sibling=null,m=_}while(m!==null)}}G=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,G=a;else e:for(;G!==null;){if(s=G,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ma(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,G=y;break e}G=s.return}}var v=e.current;for(G=v;G!==null;){a=G;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,G=w;else e:for(a=v;G!==null;){if(o=G,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Su(9,o)}}catch(E){Ee(o,o.return,E)}if(o===a){G=null;break e}var x=o.sibling;if(x!==null){x.return=o.return,G=x;break e}G=o.return}}if(ae=i,Lr(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(mu,e)}catch{}r=!0}return r}finally{ue=n,Ft.transition=t}}return!1}function G_(e,t,n){t=us(n,t),t=ck(e,t,1),e=Sr(e,t,1),t=rt(),e!==null&&(Ja(e,1,t),vt(e,t))}function Ee(e,t,n){if(e.tag===3)G_(e,e,n);else for(;t!==null;){if(t.tag===3){G_(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Er===null||!Er.has(r))){e=us(n,e),e=dk(t,e,1),t=Sr(t,e,1),e=rt(),t!==null&&(Ja(t,1,e),vt(t,e));break}}t=t.return}}function rM(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=rt(),e.pingedLanes|=e.suspendedLanes&n,Fe===e&&(Ue&n)===n&&(Oe===4||Oe===3&&(Ue&130023424)===Ue&&500>ke()-gy?Zr(e,0):my|=n),vt(e,t)}function Pk(e,t){t===0&&(e.mode&1?(t=No,No<<=1,!(No&130023424)&&(No=4194304)):t=1);var n=rt();e=Gn(e,t),e!==null&&(Ja(e,t,n),vt(e,n))}function iM(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Pk(e,n)}function sM(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(t),Pk(e,n)}var Tk;Tk=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||mt.current)ht=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ht=!1,GI(e,t,n);ht=!!(e.flags&131072)}else ht=!1,ve&&t.flags&1048576&&$C(t,Ol,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ul(e,t),e=t.pendingProps;var i=ss(t,Qe.current);Ki(t,n),i=uy(null,t,r,e,i,n);var s=cy();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gt(r)?(s=!0,Il(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,iy(t),i.updater=bu,t.stateNode=i,i._reactInternals=t,Mg(t,r,e,n),t=qg(null,t,r,!0,s,n)):(t.tag=0,ve&&s&&Qv(t),nt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ul(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=oM(r),e=Wt(r,e),i){case 0:t=$g(null,t,r,e,n);break e;case 1:t=$_(null,t,r,e,n);break e;case 11:t=M_(null,t,r,e,n);break e;case 14:t=O_(null,t,r,Wt(r.type,e),n);break e}throw Error(B(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wt(r,i),$g(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wt(r,i),$_(e,t,r,i,n);case 3:e:{if(mk(t),e===null)throw Error(B(387));r=t.pendingProps,s=t.memoizedState,i=s.element,BC(e,t),Ll(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=us(Error(B(423)),t),t=q_(e,t,r,n,i);break e}else if(r!==i){i=us(Error(B(424)),t),t=q_(e,t,r,n,i);break e}else for(jt=br(t.stateNode.containerInfo.firstChild),At=t,ve=!0,Yt=null,n=DC(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(as(),r===i){t=Wn(e,t,n);break e}nt(e,t,r,n)}t=t.child}return t;case 5:return UC(t),e===null&&Pg(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,Cg(r,i)?a=null:s!==null&&Cg(r,s)&&(t.flags|=32),pk(e,t),nt(e,t,a,n),t.child;case 6:return e===null&&Pg(t),null;case 13:return gk(e,t,n);case 4:return sy(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=os(t,null,r,n):nt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wt(r,i),M_(e,t,r,i,n);case 7:return nt(e,t,t.pendingProps,n),t.child;case 8:return nt(e,t,t.pendingProps.children,n),t.child;case 12:return nt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,he($l,r._currentValue),r._currentValue=a,s!==null)if(sn(s.value,a)){if(s.children===i.children&&!mt.current){t=Wn(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Un(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Tg(s.return,n,t),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(B(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),Tg(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}nt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ki(t,n),i=Dt(i),r=r(i),t.flags|=1,nt(e,t,r,n),t.child;case 14:return r=t.type,i=Wt(r,t.pendingProps),i=Wt(r.type,i),O_(e,t,r,i,n);case 15:return fk(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wt(r,i),ul(e,t),t.tag=1,gt(r)?(e=!0,Il(t)):e=!1,Ki(t,n),uk(t,r,i),Mg(t,r,i,n),qg(null,t,r,!0,e,n);case 19:return vk(e,t,n);case 22:return hk(e,t,n)}throw Error(B(156,t.tag))};function Ik(e,t){return aC(e,t)}function aM(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(e,t,n,r){return new aM(e,t,n,r)}function wy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function oM(e){if(typeof e=="function")return wy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Fv)return 11;if(e===Dv)return 14}return 2}function Cr(e,t){var n=e.alternate;return n===null?(n=qt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fl(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")wy(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ai:return ei(n.children,i,s,t);case Lv:a=8,i|=8;break;case ig:return e=qt(12,n,t,i|2),e.elementType=ig,e.lanes=s,e;case sg:return e=qt(13,n,t,i),e.elementType=sg,e.lanes=s,e;case ag:return e=qt(19,n,t,i),e.elementType=ag,e.lanes=s,e;case UN:return Nu(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case zN:a=10;break e;case BN:a=9;break e;case Fv:a=11;break e;case Dv:a=14;break e;case lr:a=16,r=null;break e}throw Error(B(130,e==null?e:typeof e,""))}return t=qt(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function ei(e,t,n,r){return e=qt(7,e,r,t),e.lanes=n,e}function Nu(e,t,n,r){return e=qt(22,e,r,t),e.elementType=UN,e.lanes=n,e.stateNode={isHidden:!1},e}function Oc(e,t,n){return e=qt(6,e,null,t),e.lanes=n,e}function $c(e,t,n){return t=qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function lM(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gc(0),this.expirationTimes=gc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function xy(e,t,n,r,i,s,a,o,l){return e=new lM(e,t,n,o,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=qt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},iy(s),e}function uM(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ji,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Mk(e){if(!e)return Ir;e=e._reactInternals;e:{if(ci(e)!==e||e.tag!==1)throw Error(B(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(B(171))}if(e.tag===1){var n=e.type;if(gt(n))return MC(e,n,t)}return t}function Ok(e,t,n,r,i,s,a,o,l){return e=xy(n,r,!0,e,i,s,a,o,l),e.context=Mk(null),n=e.current,r=rt(),i=Nr(n),s=Un(r,i),s.callback=t??null,Sr(n,s,i),e.current.lanes=i,Ja(e,i,r),vt(e,r),e}function Cu(e,t,n,r){var i=t.current,s=rt(),a=Nr(i);return n=Mk(n),t.context===null?t.context=n:t.pendingContext=n,t=Un(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Sr(i,t,a),e!==null&&(nn(e,i,a,s),al(e,i,a)),a}function Gl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function W_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function by(e,t){W_(e,t),(e=e.alternate)&&W_(e,t)}function cM(){return null}var $k=typeof reportError=="function"?reportError:function(e){console.error(e)};function Sy(e){this._internalRoot=e}ku.prototype.render=Sy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(B(409));Cu(e,t,null,null)};ku.prototype.unmount=Sy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ai(function(){Cu(null,e,null,null)}),t[Vn]=null}};function ku(e){this._internalRoot=e}ku.prototype.unstable_scheduleHydration=function(e){if(e){var t=hC();e={blockedOn:null,target:e,priority:t};for(var n=0;n<fr.length&&t!==0&&t<fr[n].priority;n++);fr.splice(n,0,e),n===0&&mC(e)}};function Ey(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ru(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function K_(){}function dM(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Gl(a);s.call(u)}}var a=Ok(t,r,e,0,null,!1,!1,"",K_);return e._reactRootContainer=a,e[Vn]=a.current,ja(e.nodeType===8?e.parentNode:e),ai(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Gl(l);o.call(u)}}var l=xy(e,0,!1,null,null,!1,!1,"",K_);return e._reactRootContainer=l,e[Vn]=l.current,ja(e.nodeType===8?e.parentNode:e),ai(function(){Cu(t,l,n,r)}),l}function ju(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=Gl(a);o.call(l)}}Cu(t,a,e,i)}else a=dM(n,t,e,i,r);return Gl(a)}dC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Vs(t.pendingLanes);n!==0&&(Uv(t,n|1),vt(t,ke()),!(ae&6)&&(cs=ke()+500,Lr()))}break;case 13:ai(function(){var r=Gn(e,1);if(r!==null){var i=rt();nn(r,e,1,i)}}),by(e,1)}};Hv=function(e){if(e.tag===13){var t=Gn(e,134217728);if(t!==null){var n=rt();nn(t,e,134217728,n)}by(e,134217728)}};fC=function(e){if(e.tag===13){var t=Nr(e),n=Gn(e,t);if(n!==null){var r=rt();nn(n,e,t,r)}by(e,t)}};hC=function(){return ue};pC=function(e,t){var n=ue;try{return ue=e,t()}finally{ue=n}};gg=function(e,t,n){switch(t){case"input":if(ug(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_u(r);if(!i)throw Error(B(90));VN(r),ug(r,i)}}}break;case"textarea":WN(e,n);break;case"select":t=n.value,t!=null&&Hi(e,!!n.multiple,t,!1)}};eC=vy;tC=ai;var fM={usingClientEntryPoint:!1,Events:[eo,Mi,_u,JN,ZN,vy]},qs={findFiberByHostInstance:Gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hM={bundleType:qs.bundleType,version:qs.version,rendererPackageName:qs.rendererPackageName,rendererConfig:qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=iC(e),e===null?null:e.stateNode},findFiberByHostInstance:qs.findFiberByHostInstance||cM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$o.isDisabled&&$o.supportsFiber)try{mu=$o.inject(hM),bn=$o}catch{}}It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fM;It.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ey(t))throw Error(B(200));return uM(e,t,null,n)};It.createRoot=function(e,t){if(!Ey(e))throw Error(B(299));var n=!1,r="",i=$k;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=xy(e,1,!1,null,null,n,!1,r,i),e[Vn]=t.current,ja(e.nodeType===8?e.parentNode:e),new Sy(t)};It.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(B(188)):(e=Object.keys(e).join(","),Error(B(268,e)));return e=iC(t),e=e===null?null:e.stateNode,e};It.flushSync=function(e){return ai(e)};It.hydrate=function(e,t,n){if(!Ru(t))throw Error(B(200));return ju(null,e,t,!0,n)};It.hydrateRoot=function(e,t,n){if(!Ey(e))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=$k;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Ok(t,null,e,1,n??null,i,!1,s,a),e[Vn]=t.current,ja(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new ku(t)};It.render=function(e,t,n){if(!Ru(t))throw Error(B(200));return ju(null,e,t,!1,n)};It.unmountComponentAtNode=function(e){if(!Ru(e))throw Error(B(40));return e._reactRootContainer?(ai(function(){ju(null,null,e,!1,function(){e._reactRootContainer=null,e[Vn]=null})}),!0):!1};It.unstable_batchedUpdates=vy;It.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ru(n))throw Error(B(200));if(e==null||e._reactInternals===void 0)throw Error(B(38));return ju(e,t,n,!1,r)};It.version="18.3.1-next-f1338f8080-20240426";function qk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qk)}catch(e){console.error(e)}}qk(),qN.exports=It;var pM=qN.exports,X_=pM;ng.createRoot=X_.createRoot,ng.hydrateRoot=X_.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function La(){return La=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},La.apply(this,arguments)}var yr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(yr||(yr={}));const Y_="popstate";function mM(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:a,hash:o}=r.location;return Xg("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Wl(i)}return vM(t,n,null,e)}function Ae(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Lk(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function gM(){return Math.random().toString(36).substr(2,8)}function Q_(e,t){return{usr:e.state,key:e.key,idx:t}}function Xg(e,t,n,r){return n===void 0&&(n=null),La({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?_s(t):t,{state:n,key:t&&t.key||r||gM()})}function Wl(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function _s(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function vM(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=yr.Pop,l=null,u=c();u==null&&(u=0,a.replaceState(La({},a.state,{idx:u}),""));function c(){return(a.state||{idx:null}).idx}function d(){o=yr.Pop;let _=c(),y=_==null?null:_-u;u=_,l&&l({action:o,location:m.location,delta:y})}function f(_,y){o=yr.Push;let v=Xg(m.location,_,y);u=c()+1;let w=Q_(v,u),x=m.createHref(v);try{a.pushState(w,"",x)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(x)}s&&l&&l({action:o,location:m.location,delta:1})}function h(_,y){o=yr.Replace;let v=Xg(m.location,_,y);u=c();let w=Q_(v,u),x=m.createHref(v);a.replaceState(w,"",x),s&&l&&l({action:o,location:m.location,delta:0})}function g(_){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof _=="string"?_:Wl(_);return v=v.replace(/ $/,"%20"),Ae(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return o},get location(){return e(i,a)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Y_,d),l=_,()=>{i.removeEventListener(Y_,d),l=null}},createHref(_){return t(i,_)},createURL:g,encodeLocation(_){let y=g(_);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:h,go(_){return a.go(_)}};return m}var J_;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(J_||(J_={}));function yM(e,t,n){return n===void 0&&(n="/"),_M(e,t,n,!1)}function _M(e,t,n,r){let i=typeof t=="string"?_s(t):t,s=Ny(i.pathname||"/",n);if(s==null)return null;let a=Fk(e);wM(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=PM(s);o=jM(a[l],u,r)}return o}function Fk(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(Ae(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=kr([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(Ae(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Fk(s.children,t,c,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:kM(u,s.index),routesMeta:c})};return e.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of Dk(s.path))i(s,a,l)}),t}function Dk(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=Dk(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function wM(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:RM(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const xM=/^:[\w-]+$/,bM=3,SM=2,EM=1,NM=10,CM=-2,Z_=e=>e==="*";function kM(e,t){let n=e.split("/"),r=n.length;return n.some(Z_)&&(r+=CM),t&&(r+=SM),n.filter(i=>!Z_(i)).reduce((i,s)=>i+(xM.test(s)?bM:s===""?EM:NM),r)}function RM(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function jM(e,t,n){let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",d=ew({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=ew({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:kr([s,d.pathname]),pathnameBase:OM(kr([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=kr([s,d.pathnameBase]))}return a}function ew(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=AM(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:f,isOptional:h}=c;if(f==="*"){let m=o[d]||"";a=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const g=o[d];return h&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:e}}function AM(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Lk(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function PM(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Lk(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ny(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function TM(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?_s(e):e;return{pathname:n?n.startsWith("/")?n:IM(n,t):t,search:$M(r),hash:qM(i)}}function IM(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function qc(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function MM(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function zk(e,t){let n=MM(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Bk(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=_s(e):(i=La({},e),Ae(!i.pathname||!i.pathname.includes("?"),qc("?","pathname","search",i)),Ae(!i.pathname||!i.pathname.includes("#"),qc("#","pathname","hash",i)),Ae(!i.search||!i.search.includes("#"),qc("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let d=t.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}o=d>=0?t[d]:"/"}let l=TM(i,o),u=a&&a!=="/"&&a.endsWith("/"),c=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const kr=e=>e.join("/").replace(/\/\/+/g,"/"),OM=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),$M=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,qM=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function LM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Uk=["post","put","patch","delete"];new Set(Uk);const FM=["get",...Uk];new Set(FM);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fa(){return Fa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fa.apply(this,arguments)}const Cy=C.createContext(null),DM=C.createContext(null),di=C.createContext(null),Au=C.createContext(null),fi=C.createContext({outlet:null,matches:[],isDataRoute:!1}),Hk=C.createContext(null);function zM(e,t){let{relative:n}=t===void 0?{}:t;no()||Ae(!1);let{basename:r,navigator:i}=C.useContext(di),{hash:s,pathname:a,search:o}=Gk(e,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:kr([r,a])),i.createHref({pathname:l,search:o,hash:s})}function no(){return C.useContext(Au)!=null}function ro(){return no()||Ae(!1),C.useContext(Au).location}function Vk(e){C.useContext(di).static||C.useLayoutEffect(e)}function BM(){let{isDataRoute:e}=C.useContext(fi);return e?tO():UM()}function UM(){no()||Ae(!1);let e=C.useContext(Cy),{basename:t,future:n,navigator:r}=C.useContext(di),{matches:i}=C.useContext(fi),{pathname:s}=ro(),a=JSON.stringify(zk(i,n.v7_relativeSplatPath)),o=C.useRef(!1);return Vk(()=>{o.current=!0}),C.useCallback(function(u,c){if(c===void 0&&(c={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let d=Bk(u,JSON.parse(a),s,c.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:kr([t,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[t,r,a,s,e])}function Gk(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=C.useContext(di),{matches:i}=C.useContext(fi),{pathname:s}=ro(),a=JSON.stringify(zk(i,r.v7_relativeSplatPath));return C.useMemo(()=>Bk(e,JSON.parse(a),s,n==="path"),[e,a,s,n])}function HM(e,t){return VM(e,t)}function VM(e,t,n,r){no()||Ae(!1);let{navigator:i}=C.useContext(di),{matches:s}=C.useContext(fi),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=ro(),c;if(t){var d;let _=typeof t=="string"?_s(t):t;l==="/"||(d=_.pathname)!=null&&d.startsWith(l)||Ae(!1),c=_}else c=u;let f=c.pathname||"/",h=f;if(l!=="/"){let _=l.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(_.length).join("/")}let g=yM(e,{pathname:h}),m=YM(g&&g.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:kr([l,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:kr([l,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n,r);return t&&m?C.createElement(Au.Provider,{value:{location:Fa({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:yr.Pop}},m):m}function GM(){let e=eO(),t=LM(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),n?C.createElement("pre",{style:i},n):null,null)}const WM=C.createElement(GM,null);class KM extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?C.createElement(fi.Provider,{value:this.props.routeContext},C.createElement(Hk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XM(e){let{routeContext:t,match:n,children:r}=e,i=C.useContext(Cy);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(fi.Provider,{value:t},r)}function YM(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=(i=n)==null?void 0:i.errors;if(o!=null){let c=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);c>=0||Ae(!1),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<a.length;c++){let d=a[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:h}=n,g=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||g){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,d,f)=>{let h,g=!1,m=null,_=null;n&&(h=o&&d.route.id?o[d.route.id]:void 0,m=d.route.errorElement||WM,l&&(u<0&&f===0?(g=!0,_=null):u===f&&(g=!0,_=d.route.hydrateFallbackElement||null)));let y=t.concat(a.slice(0,f+1)),v=()=>{let w;return h?w=m:g?w=_:d.route.Component?w=C.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=c,C.createElement(XM,{match:d,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?C.createElement(KM,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var Wk=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Wk||{}),Kl=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Kl||{});function QM(e){let t=C.useContext(Cy);return t||Ae(!1),t}function JM(e){let t=C.useContext(DM);return t||Ae(!1),t}function ZM(e){let t=C.useContext(fi);return t||Ae(!1),t}function Kk(e){let t=ZM(),n=t.matches[t.matches.length-1];return n.route.id||Ae(!1),n.route.id}function eO(){var e;let t=C.useContext(Hk),n=JM(Kl.UseRouteError),r=Kk(Kl.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function tO(){let{router:e}=QM(Wk.UseNavigateStable),t=Kk(Kl.UseNavigateStable),n=C.useRef(!1);return Vk(()=>{n.current=!0}),C.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Fa({fromRouteId:t},s)))},[e,t])}const tw={};function nO(e,t){tw[t]||(tw[t]=!0,console.warn(t))}const nw=(e,t,n)=>nO(e,"⚠️ React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function rO(e,t){e!=null&&e.v7_startTransition||nw("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&!t&&nw("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function or(e){Ae(!1)}function iO(e){let{basename:t="/",children:n=null,location:r,navigationType:i=yr.Pop,navigator:s,static:a=!1,future:o}=e;no()&&Ae(!1);let l=t.replace(/^\/*/,"/"),u=C.useMemo(()=>({basename:l,navigator:s,static:a,future:Fa({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof r=="string"&&(r=_s(r));let{pathname:c="/",search:d="",hash:f="",state:h=null,key:g="default"}=r,m=C.useMemo(()=>{let _=Ny(c,l);return _==null?null:{location:{pathname:_,search:d,hash:f,state:h,key:g},navigationType:i}},[l,c,d,f,h,g,i]);return m==null?null:C.createElement(di.Provider,{value:u},C.createElement(Au.Provider,{children:n,value:m}))}function sO(e){let{children:t,location:n}=e;return HM(Yg(t),n)}new Promise(()=>{});function Yg(e,t){t===void 0&&(t=[]);let n=[];return C.Children.forEach(e,(r,i)=>{if(!C.isValidElement(r))return;let s=[...t,i];if(r.type===C.Fragment){n.push.apply(n,Yg(r.props.children,s));return}r.type!==or&&Ae(!1),!r.props.index||!r.props.children||Ae(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Yg(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qg(){return Qg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qg.apply(this,arguments)}function aO(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function oO(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function lO(e,t){return e.button===0&&(!t||t==="_self")&&!oO(e)}const uO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cO="6";try{window.__reactRouterVersion=cO}catch{}const dO="startTransition",rw=rT[dO];function fO(e){let{basename:t,children:n,future:r,window:i}=e,s=C.useRef();s.current==null&&(s.current=mM({window:i,v5Compat:!0}));let a=s.current,[o,l]=C.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},c=C.useCallback(d=>{u&&rw?rw(()=>l(d)):l(d)},[l,u]);return C.useLayoutEffect(()=>a.listen(c),[a,c]),C.useEffect(()=>rO(r),[r]),C.createElement(iO,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const hO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mO=C.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:c,viewTransition:d}=t,f=aO(t,uO),{basename:h}=C.useContext(di),g,m=!1;if(typeof u=="string"&&pO.test(u)&&(g=u,hO))try{let w=new URL(window.location.href),x=u.startsWith("//")?new URL(w.protocol+u):new URL(u),E=Ny(x.pathname,h);x.origin===w.origin&&E!=null?u=E+x.search+x.hash:m=!0}catch{}let _=zM(u,{relative:i}),y=gO(u,{replace:a,state:o,target:l,preventScrollReset:c,relative:i,viewTransition:d});function v(w){r&&r(w),w.defaultPrevented||y(w)}return C.createElement("a",Qg({},f,{href:g||_,onClick:m||s?r:v,ref:n,target:l}))});var iw;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(iw||(iw={}));var sw;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(sw||(sw={}));function gO(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=t===void 0?{}:t,l=BM(),u=ro(),c=Gk(e,{relative:a});return C.useCallback(d=>{if(lO(d,n)){d.preventDefault();let f=r!==void 0?r:Wl(u)===Wl(c);l(e,{replace:f,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,c,r,i,n,e,s,a,o])}const vO=[{path:"/",label:"General Settings"},{path:"/pattern-elements",label:"Pattern Elements"},{path:"/actors",label:"Actors"},{path:"/environments",label:"Learning Environments"},{path:"/course-flow",label:"Course Flow"},{path:"/preview",label:"Preview"},{path:"/ai-agent",label:"AI Agent"}];function yO(){const e=ro();return p.jsx("nav",{className:"bg-white shadow-md",children:p.jsx("div",{className:"container mx-auto px-4",children:p.jsx("div",{className:"flex space-x-4 overflow-x-auto",children:vO.map(({path:t,label:n})=>p.jsx(mO,{to:t,className:`px-4 py-3 text-sm font-medium whitespace-nowrap ${e.pathname===t?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-blue-600"}`,children:n},t))})})})}const _O={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},aw=e=>{let t;const n=new Set,r=(c,d)=>{const f=typeof c=="function"?c(t):c;if(!Object.is(f,t)){const h=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(g=>g(t,h))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(_O?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,i,l);return l},Xk=e=>e?aw(e):aw;var Yk={exports:{}},Qk={},Jk={exports:{}},Zk={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ds=C;function wO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xO=typeof Object.is=="function"?Object.is:wO,bO=ds.useState,SO=ds.useEffect,EO=ds.useLayoutEffect,NO=ds.useDebugValue;function CO(e,t){var n=t(),r=bO({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return EO(function(){i.value=n,i.getSnapshot=t,Lc(i)&&s({inst:i})},[e,n,t]),SO(function(){return Lc(i)&&s({inst:i}),e(function(){Lc(i)&&s({inst:i})})},[e]),NO(n),n}function Lc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xO(e,n)}catch{return!0}}function kO(e,t){return t()}var RO=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?kO:CO;Zk.useSyncExternalStore=ds.useSyncExternalStore!==void 0?ds.useSyncExternalStore:RO;Jk.exports=Zk;var jO=Jk.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pu=C,AO=jO;function PO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var TO=typeof Object.is=="function"?Object.is:PO,IO=AO.useSyncExternalStore,MO=Pu.useRef,OO=Pu.useEffect,$O=Pu.useMemo,qO=Pu.useDebugValue;Qk.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=MO(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=$O(function(){function l(h){if(!u){if(u=!0,c=h,h=r(h),i!==void 0&&a.hasValue){var g=a.value;if(i(g,h))return d=g}return d=h}if(g=d,TO(c,h))return g;var m=r(h);return i!==void 0&&i(g,m)?g:(c=h,d=m)}var u=!1,c,d,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,r,i]);var o=IO(e,s[0],s[1]);return OO(function(){a.hasValue=!0,a.value=o},[o]),qO(o),o};Yk.exports=Qk;var LO=Yk.exports;const eR=Av(LO),tR={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:FO}=O,{useSyncExternalStoreWithSelector:DO}=eR;let ow=!1;const zO=e=>e;function BO(e,t=zO,n){(tR?"production":void 0)!=="production"&&n&&!ow&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ow=!0);const r=DO(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return FO(r),r}const UO=e=>{(tR?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Xk(e):e,n=(r,i)=>BO(t,r,i);return Object.assign(n,t),n},HO=e=>UO,VO={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function GO(e,t){let n;try{n=e()}catch{return}return{getItem:i=>{var s;const a=l=>l===null?null:JSON.parse(l,void 0),o=(s=n.getItem(i))!=null?s:null;return o instanceof Promise?o.then(a):a(o)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const Da=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return Da(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Da(r)(n)}}}},WO=(e,t)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:_=>_,version:0,merge:(_,y)=>({...y,..._}),...t},a=!1;const o=new Set,l=new Set;let u;try{u=s.getStorage()}catch{}if(!u)return e((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(..._)},r,i);const c=Da(s.serialize),d=()=>{const _=s.partialize({...r()});let y;const v=c({state:_,version:s.version}).then(w=>u.setItem(s.name,w)).catch(w=>{y=w});if(y)throw y;return v},f=i.setState;i.setState=(_,y)=>{f(_,y),d()};const h=e((..._)=>{n(..._),d()},r,i);let g;const m=()=>{var _;if(!u)return;a=!1,o.forEach(v=>v(r()));const y=((_=s.onRehydrateStorage)==null?void 0:_.call(s,r()))||void 0;return Da(u.getItem.bind(u))(s.name).then(v=>{if(v)return s.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==s.version){if(s.migrate)return s.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var w;return g=s.merge(v,(w=r())!=null?w:h),n(g,!0),d()}).then(()=>{y==null||y(g,void 0),a=!0,l.forEach(v=>v(g))}).catch(v=>{y==null||y(void 0,v)})};return i.persist={setOptions:_=>{s={...s,..._},_.getStorage&&(u=_.getStorage())},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>m(),hasHydrated:()=>a,onHydrate:_=>(o.add(_),()=>{o.delete(_)}),onFinishHydration:_=>(l.add(_),()=>{l.delete(_)})},m(),g||h},KO=(e,t)=>(n,r,i)=>{let s={storage:GO(()=>localStorage),partialize:m=>m,version:0,merge:(m,_)=>({..._,...m}),...t},a=!1;const o=new Set,l=new Set;let u=s.storage;if(!u)return e((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...m)},r,i);const c=()=>{const m=s.partialize({...r()});return u.setItem(s.name,{state:m,version:s.version})},d=i.setState;i.setState=(m,_)=>{d(m,_),c()};const f=e((...m)=>{n(...m),c()},r,i);i.getInitialState=()=>f;let h;const g=()=>{var m,_;if(!u)return;a=!1,o.forEach(v=>{var w;return v((w=r())!=null?w:f)});const y=((_=s.onRehydrateStorage)==null?void 0:_.call(s,(m=r())!=null?m:f))||void 0;return Da(u.getItem.bind(u))(s.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==s.version){if(s.migrate)return[!0,s.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var w;const[x,E]=v;if(h=s.merge(E,(w=r())!=null?w:f),n(h,!0),x)return c()}).then(()=>{y==null||y(h,void 0),h=r(),a=!0,l.forEach(v=>v(h))}).catch(v=>{y==null||y(void 0,v)})};return i.persist={setOptions:m=>{s={...s,...m},m.storage&&(u=m.storage)},clearStorage:()=>{u==null||u.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>g(),hasHydrated:()=>a,onHydrate:m=>(o.add(m),()=>{o.delete(m)}),onFinishHydration:m=>(l.add(m),()=>{l.delete(m)})},s.skipHydration||g(),h||f},XO=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((VO?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),WO(e,t)):KO(e,t),YO=XO,Nn=HO()(YO(e=>({metadata:{title:"",description:"",keywords:[],author:"",version:"1.0"},setMetadata:t=>e({metadata:t}),problem:{problem_description:"",learning_goals:[],didactic_keywords:[]},setProblem:t=>e({problem:t}),context:{target_group:"",subject:"",educational_level:"",prerequisites:"",time_frame:""},setContext:t=>e({context:t}),influence_factors:[],setInfluenceFactors:t=>e({influence_factors:t}),solution:{solution_description:"",didactic_approach:"",didactic_template:{learning_sequences:[]}},setSolution:t=>e({solution:t}),consequences:{advantages:[],disadvantages:[]},setConsequences:t=>e({consequences:t}),implementation_notes:[],setImplementationNotes:t=>e({implementation_notes:t}),related_patterns:[],setRelatedPatterns:t=>e({related_patterns:t}),feedback:{comments:[]},setFeedback:t=>e({feedback:t}),sources:[],setSources:t=>e({sources:t}),actors:[],setActors:t=>e({actors:t}),addActor:t=>e(n=>({actors:[...n.actors,t]})),updateActor:(t,n)=>e(r=>({actors:r.actors.map(i=>i.id===t?{...i,...n}:i)})),removeActor:t=>e(n=>({actors:n.actors.filter(r=>r.id!==t)})),environments:[],setEnvironments:t=>e({environments:t}),addEnvironment:t=>e(n=>({environments:[...n.environments,t]})),updateEnvironment:(t,n)=>e(r=>({environments:r.environments.map(i=>i.id===t?{...i,...n}:i)})),removeEnvironment:t=>e(n=>({environments:n.environments.filter(r=>r.id!==t)}))}),{name:"template-store"}));function QO(){const{metadata:e,setMetadata:t}=Nn(),n=r=>{t({...e,keywords:r.split(",").map(i=>i.trim()).filter(i=>i)})};return p.jsxs("div",{className:"space-y-6",children:[p.jsx("h1",{className:"text-2xl font-bold",children:"General Settings"}),p.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),p.jsx("input",{type:"text",value:e.title||"",onChange:r=>t({...e,title:r.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),p.jsx("textarea",{value:e.description||"",onChange:r=>t({...e,description:r.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Keywords (comma-separated)"}),p.jsx("input",{type:"text",value:(e.keywords||[]).join(", "),onChange:r=>n(r.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Author"}),p.jsx("input",{type:"text",value:e.author||"",onChange:r=>t({...e,author:r.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Version"}),p.jsx("input",{type:"text",value:e.version||"1.0",onChange:r=>t({...e,version:r.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})})]})}function JO(){const{problem:e,setProblem:t,influence_factors:n,setInfluenceFactors:r,context:i,setContext:s,solution:a,setSolution:o}=Nn(),l=h=>{t({...e,learning_goals:h.split(`
`).map(g=>g.trim()).filter(g=>g)})},u=h=>{t({...e,didactic_keywords:h.split(",").map(g=>g.trim()).filter(g=>g)})},c=()=>{r([...n,{factor:"",description:""}])},d=h=>{r(n.filter((g,m)=>m!==h))},f=(h,g,m)=>{const _=[...n];_[h]={..._[h],[g]:m},r(_)};return p.jsxs("div",{className:"space-y-6",children:[p.jsx("h1",{className:"text-2xl font-bold",children:"Pattern Elements"}),p.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Problem"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Problem Description"}),p.jsx("textarea",{value:e.problem_description||"",onChange:h=>t({...e,problem_description:h.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Learning Goals (one per line)"}),p.jsx("textarea",{value:(e.learning_goals||[]).join(`
`),onChange:h=>l(h.target.value),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Didactic Keywords (comma-separated)"}),p.jsx("input",{type:"text",value:(e.didactic_keywords||[]).join(", "),onChange:h=>u(h.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]}),p.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Influence Factors"}),p.jsxs("div",{className:"space-y-4",children:[n.map((h,g)=>p.jsxs("div",{className:"flex gap-4 items-start",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("input",{type:"text",value:h.factor,onChange:m=>f(g,"factor",m.target.value),placeholder:"Factor",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),p.jsx("textarea",{value:h.description,onChange:m=>f(g,"description",m.target.value),placeholder:"Description",rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsx("button",{onClick:()=>d(g),className:"mt-1 p-2 text-red-600 hover:text-red-800",children:"Remove"})]},g)),p.jsx("button",{onClick:c,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Add Factor"})]})]}),p.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Context"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Target Group"}),p.jsx("input",{type:"text",value:i.target_group||"",onChange:h=>s({...i,target_group:h.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subject"}),p.jsx("input",{type:"text",value:i.subject||"",onChange:h=>s({...i,subject:h.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Educational Level"}),p.jsx("input",{type:"text",value:i.educational_level||"",onChange:h=>s({...i,educational_level:h.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prerequisites"}),p.jsx("input",{type:"text",value:i.prerequisites||"",onChange:h=>s({...i,prerequisites:h.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Time Frame"}),p.jsx("input",{type:"text",value:i.time_frame||"",onChange:h=>s({...i,time_frame:h.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]}),p.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[p.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Solution"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Solution Description"}),p.jsx("textarea",{value:a.solution_description||"",onChange:h=>o({...a,solution_description:h.target.value}),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Didactic Approach"}),p.jsx("textarea",{value:a.didactic_approach||"",onChange:h=>o({...a,didactic_approach:h.target.value}),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]})]})}function ZO({actor:e,onUpdate:t,onCancel:n,onSave:r}){const[i,s]=C.useState({}),a=(u,c)=>{switch(u){case"name":return c?"":"Name is required";case"age":return c&&(isNaN(c)||c<0)?"Age must be a positive number":"";default:return""}},o=(u,c,d)=>{const f=u.split(",").map(h=>h.trim()).filter(Boolean);t(d?{[d]:{...e[d],[c]:f}}:{[c]:f})},l=(u,c,d)=>{const{value:f}=u.target,h=a(c,f);s(g=>({...g,[c]:h})),t(d?{[d]:{...e[d],[c]:f}}:{[c]:f})};return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),p.jsx("input",{type:"text",value:e.name,onChange:u=>l(u,"name"),className:`w-full p-2 border rounded ${i.name?"border-red-500":""}`}),i.name&&p.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.name})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type"}),p.jsxs("select",{value:e.type,onChange:u=>t({type:u.target.value}),className:"w-full p-2 border rounded",children:[p.jsx("option",{value:"human",children:"Human"}),p.jsx("option",{value:"group",children:"Group"}),p.jsx("option",{value:"ai",children:"AI"})]})]})]}),p.jsxs("div",{className:"border p-4 rounded-lg",children:[p.jsx("h3",{className:"text-lg font-medium mb-4",children:"Demographic Data"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.type==="group"?p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Age Range"}),p.jsx("input",{type:"text",value:e.demographic_data.age_range||"",onChange:u=>l(u,"age_range","demographic_data"),className:"w-full p-2 border rounded",placeholder:"e.g., 14-16"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gender Distribution"}),p.jsx("input",{type:"text",value:e.demographic_data.gender_distribution||"",onChange:u=>l(u,"gender_distribution","demographic_data"),className:"w-full p-2 border rounded",placeholder:"e.g., mixed"})]})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Age"}),p.jsx("input",{type:"number",value:e.demographic_data.age||"",onChange:u=>l(u,"age","demographic_data"),className:`w-full p-2 border rounded ${i.age?"border-red-500":""}`}),i.age&&p.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.age})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gender"}),p.jsx("input",{type:"text",value:e.demographic_data.gender||"",onChange:u=>l(u,"gender","demographic_data"),className:"w-full p-2 border rounded"})]})]}),p.jsxs("div",{className:"col-span-2",children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Ethnic Background"}),p.jsx("input",{type:"text",value:e.demographic_data.ethnic_background,onChange:u=>l(u,"ethnic_background","demographic_data"),className:"w-full p-2 border rounded"})]})]})]}),p.jsxs("div",{className:"border p-4 rounded-lg",children:[p.jsx("h3",{className:"text-lg font-medium mb-4",children:"Education"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Education Level"}),p.jsx("input",{type:"text",value:e.education.education_level,onChange:u=>l(u,"education_level","education"),className:"w-full p-2 border rounded"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Class Level"}),p.jsx("input",{type:"text",value:e.education.class_level,onChange:u=>l(u,"class_level","education"),className:"w-full p-2 border rounded"})]}),p.jsxs("div",{className:"col-span-2",children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Subject Focus"}),p.jsx("input",{type:"text",value:e.education.subject_focus,onChange:u=>l(u,"subject_focus","education"),className:"w-full p-2 border rounded"})]})]})]}),p.jsxs("div",{className:"border p-4 rounded-lg",children:[p.jsx("h3",{className:"text-lg font-medium mb-4",children:"Competencies"}),p.jsxs("div",{className:"space-y-4",children:[["subject","cognitive","methodical","affective","digital"].map(u=>p.jsxs("div",{children:[p.jsxs("label",{className:"block text-sm font-medium mb-1",children:[u.charAt(0).toUpperCase()+u.slice(1)," Competencies"]}),p.jsx("input",{type:"text",value:e.competencies[`${u}_competencies`].join(", "),onChange:c=>o(c.target.value,`${u}_competencies`,"competencies"),className:"w-full p-2 border rounded",placeholder:"Enter comma-separated values"})]},u)),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Languages"}),p.jsx("input",{type:"text",value:e.competencies.language_skills.languages.join(", "),onChange:u=>o(u.target.value,"languages","language_skills"),className:"w-full p-2 border rounded",placeholder:"Enter comma-separated languages"})]})]})]}),p.jsxs("div",{className:"border p-4 rounded-lg",children:[p.jsx("h3",{className:"text-lg font-medium mb-4",children:"Learning Requirements"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Learning Preferences"}),p.jsx("input",{type:"text",value:e.learning_requirements.learning_preferences.join(", "),onChange:u=>o(u.target.value,"learning_preferences","learning_requirements"),className:"w-full p-2 border rounded",placeholder:"Enter comma-separated preferences"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Special Needs"}),p.jsx("input",{type:"text",value:e.learning_requirements.special_needs.join(", "),onChange:u=>o(u.target.value,"special_needs","learning_requirements"),className:"w-full p-2 border rounded",placeholder:"Enter comma-separated needs"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Technical Requirements"}),p.jsx("input",{type:"text",value:e.learning_requirements.technical_requirements.join(", "),onChange:u=>o(u.target.value,"technical_requirements","learning_requirements"),className:"w-full p-2 border rounded",placeholder:"Enter comma-separated requirements"})]})]})]}),p.jsxs("div",{className:"border p-4 rounded-lg",children:[p.jsx("h3",{className:"text-lg font-medium mb-4",children:"Interests and Goals"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Interests"}),p.jsx("input",{type:"text",value:e.interests_and_goals.interests.join(", "),onChange:u=>o(u.target.value,"interests","interests_and_goals"),className:"w-full p-2 border rounded",placeholder:"Enter comma-separated interests"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Goals"}),p.jsx("input",{type:"text",value:e.interests_and_goals.goals.join(", "),onChange:u=>o(u.target.value,"goals","interests_and_goals"),className:"w-full p-2 border rounded",placeholder:"Enter comma-separated goals"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Motivation Type"}),p.jsxs("select",{value:e.interests_and_goals.motivation.type,onChange:u=>t({interests_and_goals:{...e.interests_and_goals,motivation:{...e.interests_and_goals.motivation,type:u.target.value}}}),className:"w-full p-2 border rounded",children:[p.jsx("option",{value:"intrinsic",children:"Intrinsic"}),p.jsx("option",{value:"extrinsic",children:"Extrinsic"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Motivation Level"}),p.jsxs("select",{value:e.interests_and_goals.motivation.level,onChange:u=>t({interests_and_goals:{...e.interests_and_goals,motivation:{...e.interests_and_goals.motivation,level:u.target.value}}}),className:"w-full p-2 border rounded",children:[p.jsx("option",{value:"low",children:"Low"}),p.jsx("option",{value:"medium",children:"Medium"}),p.jsx("option",{value:"high",children:"High"})]})]})]})]})]}),p.jsxs("div",{className:"border p-4 rounded-lg",children:[p.jsx("h3",{className:"text-lg font-medium mb-4",children:"Social Structure"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Group Size"}),p.jsx("input",{type:e.type==="group"?"text":"number",value:e.social_structure.group_size,onChange:u=>t({social_structure:{...e.social_structure,group_size:e.type==="group"?u.target.value:parseInt(u.target.value)}}),className:"w-full p-2 border rounded"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Heterogeneity"}),p.jsx("input",{type:"text",value:e.social_structure.heterogeneity,onChange:u=>t({social_structure:{...e.social_structure,heterogeneity:u.target.value}}),className:"w-full p-2 border rounded"})]})]})]}),p.jsxs("div",{className:"flex justify-end space-x-2",children:[p.jsx("button",{onClick:n,className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200",children:"Cancel"}),p.jsx("button",{onClick:r,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",disabled:Object.keys(i).some(u=>i[u]),children:"Save"})]})]})}function e3({actor:e,onEdit:t,onDelete:n}){return p.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold",children:e.name||"Unnamed Actor"}),p.jsx("p",{className:"text-sm text-gray-500 capitalize",children:e.type}),p.jsxs("div",{className:"mt-2 space-y-2",children:[p.jsxs("p",{className:"text-sm",children:[p.jsx("span",{className:"font-medium",children:"Education:"})," ",e.education.education_level]}),p.jsxs("p",{className:"text-sm",children:[p.jsx("span",{className:"font-medium",children:"Languages:"})," ",e.competencies.language_skills.languages.join(", ")]})]})]}),p.jsxs("div",{className:"space-x-2",children:[p.jsx("button",{onClick:t,className:"px-3 py-1 text-sm bg-blue-100 rounded hover:bg-blue-200",children:"Edit"}),p.jsx("button",{onClick:n,className:"px-3 py-1 text-sm bg-red-100 rounded hover:bg-red-200",children:"Delete"})]})]})})}function t3(){const{actors:e,addActor:t,updateActor:n,removeActor:r}=Nn(),[i,s]=C.useState(null),a=()=>{const o={id:`actor-${Date.now()}`,name:"",type:"human",demographic_data:{age:"",gender:"",ethnic_background:""},education:{education_level:"",class_level:"",subject_focus:""},competencies:{subject_competencies:[],cognitive_competencies:[],methodical_competencies:[],affective_competencies:[],digital_competencies:[],language_skills:{languages:[],proficiency_levels:{}}},social_form:"",learning_requirements:{learning_preferences:[],special_needs:[],technical_requirements:[]},interests_and_goals:{interests:[],goals:[],motivation:{type:"intrinsic",level:"medium"}},social_structure:{group_size:1,heterogeneity:"n/a"}};t(o),s(o.id)};return p.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h1",{className:"text-2xl font-bold",children:"Actors"}),p.jsx("button",{onClick:a,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Add Actor"})]}),p.jsx("div",{className:"space-y-6",children:e.map(o=>p.jsx("div",{children:i===o.id?p.jsx(ZO,{actor:o,onUpdate:l=>n(o.id,l),onCancel:()=>s(null),onSave:()=>s(null)}):p.jsx(e3,{actor:o,onEdit:()=>s(o.id),onDelete:()=>r(o.id)})},o.id))})]})}function ky({filter:e,onChange:t}){const[n,r]=C.useState(""),[i,s]=C.useState(""),a=()=>{n&&i&&(t({...e,[n]:i}),r(""),s(""))},o=l=>{const{[l]:u,...c}=e;t(c)};return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx("input",{type:"text",value:n,onChange:l=>r(l.target.value),placeholder:"Property",className:"p-2 border rounded"}),p.jsx("input",{type:"text",value:i,onChange:l=>s(l.target.value),placeholder:"Value",className:"p-2 border rounded"})]}),p.jsx("button",{onClick:a,className:"w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Add Criteria"}),p.jsx("div",{className:"space-y-2",children:Object.entries(e).map(([l,u])=>p.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[p.jsxs("div",{children:[p.jsxs("span",{className:"font-medium",children:[l,":"]})," ",u]}),p.jsx("button",{onClick:()=>o(l),className:"text-red-500 hover:text-red-600",children:"×"})]},l))})]})}function n3({material:e,onUpdate:t,onDelete:n,isEditing:r=!1}){const[i,s]=C.useState(r),a=o=>{t({...e,...o})};return i?p.jsxs("div",{className:"border rounded-lg p-4 mb-4 bg-white space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),p.jsx("input",{type:"text",value:e.name,onChange:o=>a({name:o.target.value}),className:"w-full p-2 border rounded",autoFocus:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type"}),p.jsx("input",{type:"text",value:e.material_type,onChange:o=>a({material_type:o.target.value}),className:"w-full p-2 border rounded"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Access Link"}),p.jsx("input",{type:"text",value:e.access_link,onChange:o=>a({access_link:o.target.value}),className:"w-full p-2 border rounded"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Source"}),p.jsxs("select",{value:e.source,onChange:o=>a({source:o.target.value}),className:"w-full p-2 border rounded",children:[p.jsx("option",{value:"manual",children:"Manual"}),p.jsx("option",{value:"database",children:"Database"}),p.jsx("option",{value:"filter",children:"Filter"})]})]}),e.source==="database"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Database ID"}),p.jsx("input",{type:"text",value:e.database_id||"",onChange:o=>a({database_id:o.target.value}),className:"w-full p-2 border rounded"})]}),e.source==="filter"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Filter Criteria"}),p.jsx(ky,{filter:e.filter_criteria||{},onChange:o=>a({filter_criteria:o})})]}),p.jsxs("div",{className:"flex justify-end space-x-2",children:[p.jsx("button",{onClick:()=>s(!1),className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200",children:"Cancel"}),p.jsx("button",{onClick:()=>s(!1),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]}):p.jsx("div",{className:"border rounded-lg p-4 mb-4 bg-white",children:p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"font-semibold",children:e.name||"Unnamed Material"}),p.jsx("p",{className:"text-sm text-gray-600",children:e.material_type}),p.jsxs("p",{className:"text-sm text-gray-500",children:["Source: ",e.source]})]}),p.jsxs("div",{className:"space-x-2",children:[p.jsx("button",{onClick:()=>s(!0),className:"px-3 py-1 text-sm bg-blue-100 rounded hover:bg-blue-200",children:"Edit"}),p.jsx("button",{onClick:n,className:"px-3 py-1 text-sm bg-red-100 rounded hover:bg-red-200",children:"Delete"})]})]})})}function r3({tool:e,onUpdate:t,onDelete:n,isEditing:r=!1}){const[i,s]=C.useState(r),a=o=>{t({...e,...o})};return i?p.jsxs("div",{className:"border rounded-lg p-4 mb-4 bg-white space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),p.jsx("input",{type:"text",value:e.name,onChange:o=>a({name:o.target.value}),className:"w-full p-2 border rounded",autoFocus:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type"}),p.jsx("input",{type:"text",value:e.tool_type,onChange:o=>a({tool_type:o.target.value}),className:"w-full p-2 border rounded"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Access Link"}),p.jsx("input",{type:"text",value:e.access_link,onChange:o=>a({access_link:o.target.value}),className:"w-full p-2 border rounded"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Source"}),p.jsxs("select",{value:e.source,onChange:o=>a({source:o.target.value}),className:"w-full p-2 border rounded",children:[p.jsx("option",{value:"manual",children:"Manual"}),p.jsx("option",{value:"database",children:"Database"}),p.jsx("option",{value:"filter",children:"Filter"})]})]}),e.source==="database"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Database ID"}),p.jsx("input",{type:"text",value:e.database_id||"",onChange:o=>a({database_id:o.target.value}),className:"w-full p-2 border rounded"})]}),e.source==="filter"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Filter Criteria"}),p.jsx(ky,{filter:e.filter_criteria||{},onChange:o=>a({filter_criteria:o})})]}),p.jsxs("div",{className:"flex justify-end space-x-2",children:[p.jsx("button",{onClick:()=>s(!1),className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200",children:"Cancel"}),p.jsx("button",{onClick:()=>s(!1),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]}):p.jsx("div",{className:"border rounded-lg p-4 mb-4 bg-white",children:p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"font-semibold",children:e.name||"Unnamed Tool"}),p.jsx("p",{className:"text-sm text-gray-600",children:e.tool_type}),p.jsxs("p",{className:"text-sm text-gray-500",children:["Source: ",e.source]})]}),p.jsxs("div",{className:"space-x-2",children:[p.jsx("button",{onClick:()=>s(!0),className:"px-3 py-1 text-sm bg-blue-100 rounded hover:bg-blue-200",children:"Edit"}),p.jsx("button",{onClick:n,className:"px-3 py-1 text-sm bg-red-100 rounded hover:bg-red-200",children:"Delete"})]})]})})}function i3({service:e,onUpdate:t,onDelete:n,isEditing:r=!1}){const[i,s]=C.useState(r),a=o=>{t({...e,...o})};return i?p.jsxs("div",{className:"border rounded-lg p-4 mb-4 bg-white space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),p.jsx("input",{type:"text",value:e.name,onChange:o=>a({name:o.target.value}),className:"w-full p-2 border rounded",autoFocus:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type"}),p.jsx("input",{type:"text",value:e.service_type,onChange:o=>a({service_type:o.target.value}),className:"w-full p-2 border rounded"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Access Link"}),p.jsx("input",{type:"text",value:e.access_link,onChange:o=>a({access_link:o.target.value}),className:"w-full p-2 border rounded"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Source"}),p.jsxs("select",{value:e.source,onChange:o=>a({source:o.target.value}),className:"w-full p-2 border rounded",children:[p.jsx("option",{value:"manual",children:"Manual"}),p.jsx("option",{value:"database",children:"Database"}),p.jsx("option",{value:"filter",children:"Filter"})]})]}),e.source==="database"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Database ID"}),p.jsx("input",{type:"text",value:e.database_id||"",onChange:o=>a({database_id:o.target.value}),className:"w-full p-2 border rounded"})]}),e.source==="filter"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium mb-1",children:"Filter Criteria"}),p.jsx(ky,{filter:e.filter_criteria||{},onChange:o=>a({filter_criteria:o})})]}),p.jsxs("div",{className:"flex justify-end space-x-2",children:[p.jsx("button",{onClick:()=>s(!1),className:"px-4 py-2 bg-gray-100 rounded hover:bg-gray-200",children:"Cancel"}),p.jsx("button",{onClick:()=>s(!1),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]}):p.jsx("div",{className:"border rounded-lg p-4 mb-4 bg-white",children:p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"font-semibold",children:e.name||"Unnamed Service"}),p.jsx("p",{className:"text-sm text-gray-600",children:e.service_type}),p.jsxs("p",{className:"text-sm text-gray-500",children:["Source: ",e.source]})]}),p.jsxs("div",{className:"space-x-2",children:[p.jsx("button",{onClick:()=>s(!0),className:"px-3 py-1 text-sm bg-blue-100 rounded hover:bg-blue-200",children:"Edit"}),p.jsx("button",{onClick:n,className:"px-3 py-1 text-sm bg-red-100 rounded hover:bg-red-200",children:"Delete"})]})]})})}function s3(){const{environments:e,addEnvironment:t,updateEnvironment:n,removeEnvironment:r}=Nn(),i=()=>{t({id:`env-${Date.now()}`,name:"",description:"",materials:[],tools:[],services:[]})},s=g=>{const m=e.find(_=>_.id===g);if(m){const _={id:`mat-${Date.now()}`,name:"",material_type:"",source:"manual",access_link:"",filter_criteria:{}};n(g,{materials:[...m.materials,{..._,isNew:!0}]})}},a=g=>{const m=e.find(_=>_.id===g);if(m){const _={id:`tool-${Date.now()}`,name:"",tool_type:"",source:"manual",access_link:"",filter_criteria:{}};n(g,{tools:[...m.tools,{..._,isNew:!0}]})}},o=g=>{const m=e.find(_=>_.id===g);if(m){const _={id:`service-${Date.now()}`,name:"",service_type:"",source:"manual",access_link:"",filter_criteria:{}};n(g,{services:[...m.services,{..._,isNew:!0}]})}},l=(g,m,_)=>{const y=e.find(v=>v.id===g);if(y){const v=y.materials.map(w=>w.id===m?{...w,..._,isNew:!1}:w);n(g,{materials:v})}},u=(g,m,_)=>{const y=e.find(v=>v.id===g);if(y){const v=y.tools.map(w=>w.id===m?{...w,..._,isNew:!1}:w);n(g,{tools:v})}},c=(g,m,_)=>{const y=e.find(v=>v.id===g);if(y){const v=y.services.map(w=>w.id===m?{...w,..._,isNew:!1}:w);n(g,{services:v})}},d=(g,m)=>{const _=e.find(y=>y.id===g);_&&n(g,{materials:_.materials.filter(y=>y.id!==m)})},f=(g,m)=>{const _=e.find(y=>y.id===g);_&&n(g,{tools:_.tools.filter(y=>y.id!==m)})},h=(g,m)=>{const _=e.find(y=>y.id===g);_&&n(g,{services:_.services.filter(y=>y.id!==m)})};return p.jsxs("div",{className:"space-y-6",children:[p.jsx("h1",{className:"text-2xl font-bold",children:"Learning Environments"}),e.map(g=>p.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[p.jsxs("div",{className:"flex justify-between items-start mb-4",children:[p.jsxs("div",{className:"flex-1 space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),p.jsx("input",{type:"text",value:g.name,onChange:m=>n(g.id,{name:m.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),p.jsx("textarea",{value:g.description,onChange:m=>n(g.id,{description:m.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),p.jsx("button",{onClick:()=>r(g.id),className:"ml-4 text-red-600 hover:text-red-800",children:"Remove"})]}),p.jsxs("div",{className:"mt-6",children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Materials"}),g.materials.map(m=>p.jsx(n3,{material:m,onUpdate:_=>l(g.id,m.id,_),onDelete:()=>d(g.id,m.id),isEditing:m.isNew},m.id)),p.jsx("button",{onClick:()=>s(g.id),className:"mt-2 px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Add Material"})]}),p.jsxs("div",{className:"mt-6",children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Tools"}),g.tools.map(m=>p.jsx(r3,{tool:m,onUpdate:_=>u(g.id,m.id,_),onDelete:()=>f(g.id,m.id),isEditing:m.isNew},m.id)),p.jsx("button",{onClick:()=>a(g.id),className:"mt-2 px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Add Tool"})]}),p.jsxs("div",{className:"mt-6",children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Services"}),g.services.map(m=>p.jsx(i3,{service:m,onUpdate:_=>c(g.id,m.id,_),onDelete:()=>h(g.id,m.id),isEditing:m.isNew},m.id)),p.jsx("button",{onClick:()=>o(g.id),className:"mt-2 px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Add Service"})]})]},g.id)),p.jsx("button",{onClick:i,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Add Environment"})]})}function a3({role:e,actors:t,environments:n,onUpdate:r,onDelete:i}){var c;const[s,a]=C.useState(!0),o=n.find(d=>{var f;return d.id===((f=e.learning_environment)==null?void 0:f.environment_id)}),l=d=>{r({learning_environment:{environment_id:d,selected_materials:[],selected_tools:[],selected_services:[]}})},u=(d,f)=>{e.learning_environment&&r({learning_environment:{...e.learning_environment,[`selected_${d}`]:f}})};return p.jsx("div",{className:"border-l-2 border-orange-500 pl-4 mb-4",children:p.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[p.jsxs("div",{className:"flex justify-between items-start mb-4",children:[p.jsxs("button",{onClick:()=>a(!s),className:"flex items-center text-lg font-semibold",children:[p.jsx("span",{className:`transform transition-transform ${s?"rotate-90":""}`,children:"▶"}),e.role_name||"Unnamed Role"]}),p.jsx("button",{onClick:i,className:"text-red-500 hover:text-red-700",children:"Remove"})]}),s&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role Name"}),p.jsx("input",{type:"text",value:e.role_name,onChange:d=>r({role_name:d.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Actor"}),p.jsxs("select",{value:e.actor_id,onChange:d=>r({actor_id:d.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[p.jsx("option",{value:"",children:"Select an actor..."}),t.map(d=>p.jsxs("option",{value:d.id,children:[d.name," (",d.type,")"]},d.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Task Description"}),p.jsx("textarea",{value:e.task_description,onChange:d=>r({task_description:d.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Learning Environment"}),p.jsxs("select",{value:((c=e.learning_environment)==null?void 0:c.environment_id)||"",onChange:d=>l(d.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[p.jsx("option",{value:"",children:"Select an environment..."}),n.map(d=>p.jsx("option",{value:d.id,children:d.name},d.id))]})]}),o&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Materials (hold Ctrl/Cmd to select multiple)"}),p.jsx("div",{className:"border rounded-md p-2 max-h-40 overflow-y-auto",children:o.materials.map(d=>{var f,h;return p.jsxs("label",{className:"flex items-center p-1 hover:bg-gray-50",children:[p.jsx("input",{type:"checkbox",checked:((h=(f=e.learning_environment)==null?void 0:f.selected_materials)==null?void 0:h.includes(d.id))||!1,onChange:g=>{var y;const m=((y=e.learning_environment)==null?void 0:y.selected_materials)||[],_=g.target.checked?[...m,d.id]:m.filter(v=>v!==d.id);u("materials",_)},className:"mr-2"}),d.name]},d.id)})})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tools (hold Ctrl/Cmd to select multiple)"}),p.jsx("div",{className:"border rounded-md p-2 max-h-40 overflow-y-auto",children:o.tools.map(d=>{var f,h;return p.jsxs("label",{className:"flex items-center p-1 hover:bg-gray-50",children:[p.jsx("input",{type:"checkbox",checked:((h=(f=e.learning_environment)==null?void 0:f.selected_tools)==null?void 0:h.includes(d.id))||!1,onChange:g=>{var y;const m=((y=e.learning_environment)==null?void 0:y.selected_tools)||[],_=g.target.checked?[...m,d.id]:m.filter(v=>v!==d.id);u("tools",_)},className:"mr-2"}),d.name]},d.id)})})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Services (hold Ctrl/Cmd to select multiple)"}),p.jsx("div",{className:"border rounded-md p-2 max-h-40 overflow-y-auto",children:o.services.map(d=>{var f,h;return p.jsxs("label",{className:"flex items-center p-1 hover:bg-gray-50",children:[p.jsx("input",{type:"checkbox",checked:((h=(f=e.learning_environment)==null?void 0:f.selected_services)==null?void 0:h.includes(d.id))||!1,onChange:g=>{var y;const m=((y=e.learning_environment)==null?void 0:y.selected_services)||[],_=g.target.checked?[...m,d.id]:m.filter(v=>v!==d.id);u("services",_)},className:"mr-2"}),d.name]},d.id)})})]})]})]})]})})}const lw={type:"formative",methods:[],criteria:[]};function o3({activity:e,actors:t,environments:n,onUpdate:r,onDelete:i}){var f;const[s,a]=C.useState(!0),o=()=>{const h={role_name:"",actor_id:"",task_description:"",learning_environment:{environment_id:"",selected_materials:[],selected_tools:[],selected_services:[]}};r({roles:[...e.roles||[],h]})},l=(h,g)=>{const m=[...e.roles||[]];m[h]={...m[h],...g},r({roles:m})},u=h=>{const g=[...e.roles||[]];g.splice(h,1),r({roles:g})},c=h=>{r({assessment:{...e.assessment||lw,...h}})},d=e.assessment||lw;return p.jsx("div",{className:"border-l-2 border-green-500 pl-4 mb-4",children:p.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[p.jsxs("div",{className:"flex justify-between items-start mb-4",children:[p.jsxs("button",{onClick:()=>a(!s),className:"flex items-center text-lg font-semibold",children:[p.jsx("span",{className:`transform transition-transform ${s?"rotate-90":""}`,children:"▶"}),e.name||"Unnamed Activity"]}),p.jsx("button",{onClick:i,className:"text-red-500 hover:text-red-700",children:"Remove"})]}),s&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Activity Name"}),p.jsx("input",{type:"text",value:e.name,onChange:h=>r({name:h.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Duration (minutes)"}),p.jsx("input",{type:"number",value:e.duration,onChange:h=>r({duration:parseInt(h.target.value)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),p.jsx("textarea",{value:e.description,onChange:h=>r({description:h.target.value}),rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Goal"}),p.jsx("textarea",{value:e.goal,onChange:h=>r({goal:h.target.value}),rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prerequisite Activity"}),p.jsx("input",{type:"text",value:e.prerequisite_activity||"",onChange:h=>r({prerequisite_activity:h.target.value||null}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Transition Type"}),p.jsxs("select",{value:e.transition_type,onChange:h=>r({transition_type:h.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[p.jsx("option",{value:"sequential",children:"Sequential"}),p.jsx("option",{value:"parallel",children:"Parallel"}),p.jsx("option",{value:"conditional",children:"Conditional"}),p.jsx("option",{value:"all_completed",children:"All Completed"}),p.jsx("option",{value:"one_of",children:"One Of"})]})]})]}),e.transition_type==="conditional"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Condition Description"}),p.jsx("textarea",{value:e.condition_description||"",onChange:h=>r({condition_description:h.target.value||null}),rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{className:"border-t pt-4",children:[p.jsx("h4",{className:"text-lg font-medium mb-4",children:"Assessment"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),p.jsxs("select",{value:d.type,onChange:h=>c({type:h.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[p.jsx("option",{value:"formative",children:"Formative"}),p.jsx("option",{value:"summative",children:"Summative"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Methods (comma-separated)"}),p.jsx("input",{type:"text",value:d.methods.join(", "),onChange:h=>c({methods:h.target.value.split(",").map(g=>g.trim()).filter(Boolean)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Criteria (comma-separated)"}),p.jsx("input",{type:"text",value:d.criteria.join(", "),onChange:h=>c({criteria:h.target.value.split(",").map(g=>g.trim()).filter(Boolean)}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]}),p.jsxs("div",{className:"border-t pt-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h4",{className:"text-lg font-medium",children:"Roles"}),p.jsx("button",{onClick:o,className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Add Role"})]}),p.jsx("div",{className:"space-y-4",children:(f=e.roles)==null?void 0:f.map((h,g)=>p.jsx(a3,{role:h,actors:t,environments:n,onUpdate:m=>l(g,m),onDelete:()=>u(g)},g))})]})]})]})})}function l3({phase:e,actors:t,environments:n,onUpdate:r,onDelete:i}){var c;const[s,a]=C.useState(!0),o=()=>{var f;const d={activity_id:`A${(((f=e.activities)==null?void 0:f.length)||0)+1}`,name:"",description:"",duration:0,roles:[],goal:"",prerequisite_activity:null,transition_type:"sequential",condition_description:null,next_activity:[],assessment:{type:"formative",methods:[],criteria:[]}};r({activities:[...e.activities||[],d]})},l=(d,f)=>{const h=[...e.activities||[]];h[d]={...h[d],...f},r({activities:h})},u=d=>{const f=[...e.activities||[]];f.splice(d,1),r({activities:f})};return p.jsx("div",{className:"border-l-2 border-blue-500 pl-4 mb-4",children:p.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[p.jsxs("div",{className:"flex justify-between items-start mb-4",children:[p.jsxs("button",{onClick:()=>a(!s),className:"flex items-center text-lg font-semibold",children:[p.jsx("span",{className:`transform transition-transform ${s?"rotate-90":""}`,children:"▶"}),e.phase_name||"Unnamed Phase"]}),p.jsx("button",{onClick:i,className:"text-red-500 hover:text-red-700",children:"Remove"})]}),s&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phase Name"}),p.jsx("input",{type:"text",value:e.phase_name,onChange:d=>r({phase_name:d.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Time Frame"}),p.jsx("input",{type:"text",value:e.time_frame,onChange:d=>r({time_frame:d.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Learning Goal"}),p.jsx("textarea",{value:e.learning_goal,onChange:d=>r({learning_goal:d.target.value}),rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prerequisite Phase"}),p.jsx("input",{type:"text",value:e.prerequisite_phase||"",onChange:d=>r({prerequisite_phase:d.target.value||null}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Next Phase"}),p.jsx("input",{type:"text",value:e.next_phase||"",onChange:d=>r({next_phase:d.target.value||null}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),p.jsxs("div",{className:"border-t pt-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h4",{className:"text-lg font-medium",children:"Activities"}),p.jsx("button",{onClick:o,className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Add Activity"})]}),p.jsx("div",{className:"space-y-4",children:(c=e.activities)==null?void 0:c.map((d,f)=>p.jsx(o3,{activity:d,actors:t,environments:n,onUpdate:h=>l(f,h),onDelete:()=>u(f)},d.activity_id))})]})]})]})})}function u3(){var u,c;const{solution:e,setSolution:t,actors:n,environments:r}=Nn(),i=()=>{const d=e.didactic_template.learning_sequences||[];t({...e,didactic_template:{...e.didactic_template,learning_sequences:[...d,{sequence_id:`LS${d.length+1}`,sequence_name:"",time_frame:"",learning_goal:"",phases:[],prerequisite_learningsequence:null,transition_type:"sequential",condition_description:null,next_learningsequence:[]}]}})},s=(d,f)=>{const h={...e},g=h.didactic_template.learning_sequences[d];Object.assign(g,f),t(h)},a=d=>{const f={...e},h=f.didactic_template.learning_sequences[d];h.phases=h.phases||[],h.phases.push({phase_id:`P${h.phases.length+1}`,phase_name:"",time_frame:"",learning_goal:"",activities:[],prerequisite_phase:null,transition_type:"sequential",condition_description:null,next_phase:null}),t(f)},o=(d,f,h)=>{const g={...e},m=g.didactic_template.learning_sequences[d].phases[f];Object.assign(m,h),t(g)},l=(d,f)=>{const h={...e};h.didactic_template.learning_sequences[d].phases.splice(f,1),t(h)};return p.jsxs("div",{className:"space-y-6",children:[p.jsx("h1",{className:"text-2xl font-bold",children:"Course Flow"}),p.jsx("div",{className:"space-y-6",children:(c=(u=e.didactic_template)==null?void 0:u.learning_sequences)==null?void 0:c.map((d,f)=>{var h;return p.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Sequence Name"}),p.jsx("input",{type:"text",value:d.sequence_name,onChange:g=>s(f,{sequence_name:g.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Time Frame"}),p.jsx("input",{type:"text",value:d.time_frame,onChange:g=>s(f,{time_frame:g.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Learning Goal"}),p.jsx("textarea",{value:d.learning_goal,onChange:g=>s(f,{learning_goal:g.target.value}),rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prerequisite Sequence"}),p.jsxs("select",{value:d.prerequisite_learningsequence||"",onChange:g=>s(f,{prerequisite_learningsequence:g.target.value||null}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[p.jsx("option",{value:"",children:"None"}),e.didactic_template.learning_sequences.filter((g,m)=>m!==f).map(g=>p.jsx("option",{value:g.sequence_id,children:g.sequence_name||g.sequence_id},g.sequence_id))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Transition Type"}),p.jsxs("select",{value:d.transition_type,onChange:g=>s(f,{transition_type:g.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[p.jsx("option",{value:"sequential",children:"Sequential"}),p.jsx("option",{value:"parallel",children:"Parallel"}),p.jsx("option",{value:"conditional",children:"Conditional"}),p.jsx("option",{value:"all_completed",children:"All Completed"}),p.jsx("option",{value:"one_of",children:"One Of"})]})]})]}),d.transition_type==="conditional"&&p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Condition Description"}),p.jsx("textarea",{value:d.condition_description||"",onChange:g=>s(f,{condition_description:g.target.value||null}),rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),p.jsxs("div",{className:"mt-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Phases"}),p.jsx("button",{onClick:()=>a(f),className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Add Phase"})]}),p.jsx("div",{className:"space-y-4",children:(h=d.phases)==null?void 0:h.map((g,m)=>p.jsx(l3,{phase:g,actors:n,environments:r,onUpdate:_=>o(f,m,_),onDelete:()=>l(f,m)},g.phase_id))})]})]})},d.sequence_id)})}),p.jsx("button",{onClick:i,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Add Learning Sequence"})]})}function at(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=at(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const{useDebugValue:c3}=O,{useSyncExternalStoreWithSelector:d3}=eR,f3=e=>e;function nR(e,t=f3,n){const r=d3(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return c3(r),r}const uw=(e,t)=>{const n=Xk(e),r=(i,s=t)=>nR(n,i,s);return Object.assign(r,n),r},h3=(e,t)=>e?uw(e,t):uw;function Je(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var p3={value:()=>{}};function Tu(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new hl(n)}function hl(e){this._=e}function m3(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}hl.prototype=Tu.prototype={constructor:hl,on:function(e,t){var n=this._,r=m3(e+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(e=r[s]).type)&&(i=g3(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(i=(e=r[s]).type)n[i]=cw(n[i],e.name,t);else if(t==null)for(i in n)n[i]=cw(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new hl(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function g3(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function cw(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=p3,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Jg="http://www.w3.org/1999/xhtml";const dw={svg:"http://www.w3.org/2000/svg",xhtml:Jg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Iu(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),dw.hasOwnProperty(t)?{space:dw[t],local:e}:e}function v3(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Jg&&t.documentElement.namespaceURI===Jg?t.createElement(e):t.createElementNS(n,e)}}function y3(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function rR(e){var t=Iu(e);return(t.local?y3:v3)(t)}function _3(){}function Ry(e){return e==null?_3:function(){return this.querySelector(e)}}function w3(e){typeof e!="function"&&(e=Ry(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=new Array(a),l,u,c=0;c<a;++c)(l=s[c])&&(u=e.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),o[c]=u);return new Tt(r,this._parents)}function x3(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function b3(){return[]}function iR(e){return e==null?b3:function(){return this.querySelectorAll(e)}}function S3(e){return function(){return x3(e.apply(this,arguments))}}function E3(e){typeof e=="function"?e=S3(e):e=iR(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var a=t[s],o=a.length,l,u=0;u<o;++u)(l=a[u])&&(r.push(e.call(l,l.__data__,u,a)),i.push(l));return new Tt(r,i)}function sR(e){return function(){return this.matches(e)}}function aR(e){return function(t){return t.matches(e)}}var N3=Array.prototype.find;function C3(e){return function(){return N3.call(this.children,e)}}function k3(){return this.firstElementChild}function R3(e){return this.select(e==null?k3:C3(typeof e=="function"?e:aR(e)))}var j3=Array.prototype.filter;function A3(){return Array.from(this.children)}function P3(e){return function(){return j3.call(this.children,e)}}function T3(e){return this.selectAll(e==null?A3:P3(typeof e=="function"?e:aR(e)))}function I3(e){typeof e!="function"&&(e=sR(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],l,u=0;u<a;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&o.push(l);return new Tt(r,this._parents)}function oR(e){return new Array(e.length)}function M3(){return new Tt(this._enter||this._groups.map(oR),this._parents)}function Xl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Xl.prototype={constructor:Xl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function O3(e){return function(){return e}}function $3(e,t,n,r,i,s){for(var a=0,o,l=t.length,u=s.length;a<u;++a)(o=t[a])?(o.__data__=s[a],r[a]=o):n[a]=new Xl(e,s[a]);for(;a<l;++a)(o=t[a])&&(i[a]=o)}function q3(e,t,n,r,i,s,a){var o,l,u=new Map,c=t.length,d=s.length,f=new Array(c),h;for(o=0;o<c;++o)(l=t[o])&&(f[o]=h=a.call(l,l.__data__,o,t)+"",u.has(h)?i[o]=l:u.set(h,l));for(o=0;o<d;++o)h=a.call(e,s[o],o,s)+"",(l=u.get(h))?(r[o]=l,l.__data__=s[o],u.delete(h)):n[o]=new Xl(e,s[o]);for(o=0;o<c;++o)(l=t[o])&&u.get(f[o])===l&&(i[o]=l)}function L3(e){return e.__data__}function F3(e,t){if(!arguments.length)return Array.from(this,L3);var n=t?q3:$3,r=this._parents,i=this._groups;typeof e!="function"&&(e=O3(e));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var c=r[u],d=i[u],f=d.length,h=D3(e.call(c,c&&c.__data__,u,r)),g=h.length,m=o[u]=new Array(g),_=a[u]=new Array(g),y=l[u]=new Array(f);n(c,d,m,_,y,h,t);for(var v=0,w=0,x,E;v<g;++v)if(x=m[v]){for(v>=w&&(w=v+1);!(E=_[w])&&++w<g;);x._next=E||null}}return a=new Tt(a,r),a._enter=o,a._exit=l,a}function D3(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function z3(){return new Tt(this._exit||this._groups.map(oR),this._parents)}function B3(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function U3(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var u=n[l],c=r[l],d=u.length,f=o[l]=new Array(d),h,g=0;g<d;++g)(h=u[g]||c[g])&&(f[g]=h);for(;l<i;++l)o[l]=n[l];return new Tt(o,this._parents)}function H3(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function V3(e){e||(e=G3);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,l=i[s]=new Array(o),u,c=0;c<o;++c)(u=a[c])&&(l[c]=u);l.sort(t)}return new Tt(i,this._parents).order()}function G3(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function W3(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function K3(){return Array.from(this)}function X3(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function Y3(){let e=0;for(const t of this)++e;return e}function Q3(){return!this.node()}function J3(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&e.call(o,o.__data__,s,i);return this}function Z3(e){return function(){this.removeAttribute(e)}}function e$(e){return function(){this.removeAttributeNS(e.space,e.local)}}function t$(e,t){return function(){this.setAttribute(e,t)}}function n$(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function r$(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function i$(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function s$(e,t){var n=Iu(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?e$:Z3:typeof t=="function"?n.local?i$:r$:n.local?n$:t$)(n,t))}function lR(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function a$(e){return function(){this.style.removeProperty(e)}}function o$(e,t,n){return function(){this.style.setProperty(e,t,n)}}function l$(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function u$(e,t,n){return arguments.length>1?this.each((t==null?a$:typeof t=="function"?l$:o$)(e,t,n??"")):fs(this.node(),e)}function fs(e,t){return e.style.getPropertyValue(t)||lR(e).getComputedStyle(e,null).getPropertyValue(t)}function c$(e){return function(){delete this[e]}}function d$(e,t){return function(){this[e]=t}}function f$(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function h$(e,t){return arguments.length>1?this.each((t==null?c$:typeof t=="function"?f$:d$)(e,t)):this.node()[e]}function uR(e){return e.trim().split(/^|\s+/)}function jy(e){return e.classList||new cR(e)}function cR(e){this._node=e,this._names=uR(e.getAttribute("class")||"")}cR.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function dR(e,t){for(var n=jy(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function fR(e,t){for(var n=jy(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function p$(e){return function(){dR(this,e)}}function m$(e){return function(){fR(this,e)}}function g$(e,t){return function(){(t.apply(this,arguments)?dR:fR)(this,e)}}function v$(e,t){var n=uR(e+"");if(arguments.length<2){for(var r=jy(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?g$:t?p$:m$)(n,t))}function y$(){this.textContent=""}function _$(e){return function(){this.textContent=e}}function w$(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function x$(e){return arguments.length?this.each(e==null?y$:(typeof e=="function"?w$:_$)(e)):this.node().textContent}function b$(){this.innerHTML=""}function S$(e){return function(){this.innerHTML=e}}function E$(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function N$(e){return arguments.length?this.each(e==null?b$:(typeof e=="function"?E$:S$)(e)):this.node().innerHTML}function C$(){this.nextSibling&&this.parentNode.appendChild(this)}function k$(){return this.each(C$)}function R$(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function j$(){return this.each(R$)}function A$(e){var t=typeof e=="function"?e:rR(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function P$(){return null}function T$(e,t){var n=typeof e=="function"?e:rR(e),r=t==null?P$:typeof t=="function"?t:Ry(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function I$(){var e=this.parentNode;e&&e.removeChild(this)}function M$(){return this.each(I$)}function O$(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $$(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function q$(e){return this.select(e?$$:O$)}function L$(e){return arguments.length?this.property("__data__",e):this.node().__data__}function F$(e){return function(t){e.call(this,t,this.__data__)}}function D$(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function z$(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function B$(e,t,n){return function(){var r=this.__on,i,s=F$(t);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function U$(e,t,n){var r=D$(e+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,c;l<u;++l)for(i=0,c=o[l];i<s;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(o=t?B$:z$,i=0;i<s;++i)this.each(o(r[i],t,n));return this}function hR(e,t,n){var r=lR(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function H$(e,t){return function(){return hR(this,e,t)}}function V$(e,t){return function(){return hR(this,e,t.apply(this,arguments))}}function G$(e,t){return this.each((typeof t=="function"?V$:H$)(e,t))}function*W$(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var pR=[null];function Tt(e,t){this._groups=e,this._parents=t}function io(){return new Tt([[document.documentElement]],pR)}function K$(){return this}Tt.prototype=io.prototype={constructor:Tt,select:w3,selectAll:E3,selectChild:R3,selectChildren:T3,filter:I3,data:F3,enter:M3,exit:z3,join:B3,merge:U3,selection:K$,order:H3,sort:V3,call:W3,nodes:K3,node:X3,size:Y3,empty:Q3,each:J3,attr:s$,style:u$,property:h$,classed:v$,text:x$,html:N$,raise:k$,lower:j$,append:A$,insert:T$,remove:M$,clone:q$,datum:L$,on:U$,dispatch:G$,[Symbol.iterator]:W$};function Qt(e){return typeof e=="string"?new Tt([[document.querySelector(e)]],[document.documentElement]):new Tt([[e]],pR)}function X$(e){let t;for(;t=e.sourceEvent;)e=t;return e}function gn(e,t){if(e=X$(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Y$={passive:!1},za={capture:!0,passive:!1};function Fc(e){e.stopImmediatePropagation()}function Yi(e){e.preventDefault(),e.stopImmediatePropagation()}function mR(e){var t=e.document.documentElement,n=Qt(e).on("dragstart.drag",Yi,za);"onselectstart"in t?n.on("selectstart.drag",Yi,za):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function gR(e,t){var n=e.document.documentElement,r=Qt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Yi,za),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const qo=e=>()=>e;function Zg(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:a,y:o,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Zg.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Q$(e){return!e.ctrlKey&&!e.button}function J$(){return this.parentNode}function Z$(e,t){return t??{x:e.x,y:e.y}}function eq(){return navigator.maxTouchPoints||"ontouchstart"in this}function tq(){var e=Q$,t=J$,n=Z$,r=eq,i={},s=Tu("start","drag","end"),a=0,o,l,u,c,d=0;function f(x){x.on("mousedown.drag",h).filter(r).on("touchstart.drag",_).on("touchmove.drag",y,Y$).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(x,E){if(!(c||!e.call(this,x,E))){var S=w(this,t.call(this,x,E),x,E,"mouse");S&&(Qt(x.view).on("mousemove.drag",g,za).on("mouseup.drag",m,za),mR(x.view),Fc(x),u=!1,o=x.clientX,l=x.clientY,S("start",x))}}function g(x){if(Yi(x),!u){var E=x.clientX-o,S=x.clientY-l;u=E*E+S*S>d}i.mouse("drag",x)}function m(x){Qt(x.view).on("mousemove.drag mouseup.drag",null),gR(x.view,u),Yi(x),i.mouse("end",x)}function _(x,E){if(e.call(this,x,E)){var S=x.changedTouches,N=t.call(this,x,E),A=S.length,k,j;for(k=0;k<A;++k)(j=w(this,N,x,E,S[k].identifier,S[k]))&&(Fc(x),j("start",x,S[k]))}}function y(x){var E=x.changedTouches,S=E.length,N,A;for(N=0;N<S;++N)(A=i[E[N].identifier])&&(Yi(x),A("drag",x,E[N]))}function v(x){var E=x.changedTouches,S=E.length,N,A;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),N=0;N<S;++N)(A=i[E[N].identifier])&&(Fc(x),A("end",x,E[N]))}function w(x,E,S,N,A,k){var j=s.copy(),I=gn(k||S,E),z,D,b;if((b=n.call(x,new Zg("beforestart",{sourceEvent:S,target:f,identifier:A,active:a,x:I[0],y:I[1],dx:0,dy:0,dispatch:j}),N))!=null)return z=b.x-I[0]||0,D=b.y-I[1]||0,function P(T,F,M){var R=I,$;switch(T){case"start":i[A]=P,$=a++;break;case"end":delete i[A],--a;case"drag":I=gn(M||F,E),$=a;break}j.call(T,x,new Zg(T,{sourceEvent:F,subject:b,target:f,identifier:A,active:$,x:I[0]+z,y:I[1]+D,dx:I[0]-R[0],dy:I[1]-R[1],dispatch:j}),N)}}return f.filter=function(x){return arguments.length?(e=typeof x=="function"?x:qo(!!x),f):e},f.container=function(x){return arguments.length?(t=typeof x=="function"?x:qo(x),f):t},f.subject=function(x){return arguments.length?(n=typeof x=="function"?x:qo(x),f):n},f.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:qo(!!x),f):r},f.on=function(){var x=s.on.apply(s,arguments);return x===s?f:x},f.clickDistance=function(x){return arguments.length?(d=(x=+x)*x,f):Math.sqrt(d)},f}function Ay(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function vR(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function so(){}var Ba=.7,Yl=1/Ba,Qi="\\s*([+-]?\\d+)\\s*",Ua="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",En="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nq=/^#([0-9a-f]{3,8})$/,rq=new RegExp(`^rgb\\(${Qi},${Qi},${Qi}\\)$`),iq=new RegExp(`^rgb\\(${En},${En},${En}\\)$`),sq=new RegExp(`^rgba\\(${Qi},${Qi},${Qi},${Ua}\\)$`),aq=new RegExp(`^rgba\\(${En},${En},${En},${Ua}\\)$`),oq=new RegExp(`^hsl\\(${Ua},${En},${En}\\)$`),lq=new RegExp(`^hsla\\(${Ua},${En},${En},${Ua}\\)$`),fw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ay(so,Ha,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:hw,formatHex:hw,formatHex8:uq,formatHsl:cq,formatRgb:pw,toString:pw});function hw(){return this.rgb().formatHex()}function uq(){return this.rgb().formatHex8()}function cq(){return yR(this).formatHsl()}function pw(){return this.rgb().formatRgb()}function Ha(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=nq.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?mw(t):n===3?new pt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Lo(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Lo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=rq.exec(e))?new pt(t[1],t[2],t[3],1):(t=iq.exec(e))?new pt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=sq.exec(e))?Lo(t[1],t[2],t[3],t[4]):(t=aq.exec(e))?Lo(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=oq.exec(e))?yw(t[1],t[2]/100,t[3]/100,1):(t=lq.exec(e))?yw(t[1],t[2]/100,t[3]/100,t[4]):fw.hasOwnProperty(e)?mw(fw[e]):e==="transparent"?new pt(NaN,NaN,NaN,0):null}function mw(e){return new pt(e>>16&255,e>>8&255,e&255,1)}function Lo(e,t,n,r){return r<=0&&(e=t=n=NaN),new pt(e,t,n,r)}function dq(e){return e instanceof so||(e=Ha(e)),e?(e=e.rgb(),new pt(e.r,e.g,e.b,e.opacity)):new pt}function ev(e,t,n,r){return arguments.length===1?dq(e):new pt(e,t,n,r??1)}function pt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ay(pt,ev,vR(so,{brighter(e){return e=e==null?Yl:Math.pow(Yl,e),new pt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ba:Math.pow(Ba,e),new pt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new pt(ti(this.r),ti(this.g),ti(this.b),Ql(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gw,formatHex:gw,formatHex8:fq,formatRgb:vw,toString:vw}));function gw(){return`#${Xr(this.r)}${Xr(this.g)}${Xr(this.b)}`}function fq(){return`#${Xr(this.r)}${Xr(this.g)}${Xr(this.b)}${Xr((isNaN(this.opacity)?1:this.opacity)*255)}`}function vw(){const e=Ql(this.opacity);return`${e===1?"rgb(":"rgba("}${ti(this.r)}, ${ti(this.g)}, ${ti(this.b)}${e===1?")":`, ${e})`}`}function Ql(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ti(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Xr(e){return e=ti(e),(e<16?"0":"")+e.toString(16)}function yw(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Jt(e,t,n,r)}function yR(e){if(e instanceof Jt)return new Jt(e.h,e.s,e.l,e.opacity);if(e instanceof so||(e=Ha(e)),!e)return new Jt;if(e instanceof Jt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(t===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-t)/o+2:a=(t-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new Jt(a,o,l,e.opacity)}function hq(e,t,n,r){return arguments.length===1?yR(e):new Jt(e,t,n,r??1)}function Jt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ay(Jt,hq,vR(so,{brighter(e){return e=e==null?Yl:Math.pow(Yl,e),new Jt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ba:Math.pow(Ba,e),new Jt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new pt(Dc(e>=240?e-240:e+120,i,r),Dc(e,i,r),Dc(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Jt(_w(this.h),Fo(this.s),Fo(this.l),Ql(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ql(this.opacity);return`${e===1?"hsl(":"hsla("}${_w(this.h)}, ${Fo(this.s)*100}%, ${Fo(this.l)*100}%${e===1?")":`, ${e})`}`}}));function _w(e){return e=(e||0)%360,e<0?e+360:e}function Fo(e){return Math.max(0,Math.min(1,e||0))}function Dc(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const _R=e=>()=>e;function pq(e,t){return function(n){return e+n*t}}function mq(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function gq(e){return(e=+e)==1?wR:function(t,n){return n-t?mq(t,n,e):_R(isNaN(t)?n:t)}}function wR(e,t){var n=t-e;return n?pq(e,n):_R(isNaN(e)?t:e)}const ww=function e(t){var n=gq(t);function r(i,s){var a=n((i=ev(i)).r,(s=ev(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),u=wR(i.opacity,s.opacity);return function(c){return i.r=a(c),i.g=o(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function cr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var tv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zc=new RegExp(tv.source,"g");function vq(e){return function(){return e}}function yq(e){return function(t){return e(t)+""}}function _q(e,t){var n=tv.lastIndex=zc.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(e=e+"",t=t+"";(r=tv.exec(e))&&(i=zc.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:cr(r,i)})),n=zc.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?yq(l[0].x):vq(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)o[(d=l[c]).i]=d.x(u);return o.join("")})}var xw=180/Math.PI,nv={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xR(e,t,n,r,i,s){var a,o,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*xw,skewX:Math.atan(l)*xw,scaleX:a,scaleY:o}}var Do;function wq(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?nv:xR(t.a,t.b,t.c,t.d,t.e,t.f)}function xq(e){return e==null||(Do||(Do=document.createElementNS("http://www.w3.org/2000/svg","g")),Do.setAttribute("transform",e),!(e=Do.transform.baseVal.consolidate()))?nv:(e=e.matrix,xR(e.a,e.b,e.c,e.d,e.e,e.f))}function bR(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,c,d,f,h,g){if(u!==d||c!==f){var m=h.push("translate(",null,t,null,n);g.push({i:m-4,x:cr(u,d)},{i:m-2,x:cr(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function a(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:cr(u,c)})):c&&d.push(i(d)+"rotate("+c+r)}function o(u,c,d,f){u!==c?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:cr(u,c)}):c&&d.push(i(d)+"skewX("+c+r)}function l(u,c,d,f,h,g){if(u!==d||c!==f){var m=h.push(i(h)+"scale(",null,",",null,")");g.push({i:m-4,x:cr(u,d)},{i:m-2,x:cr(c,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,d,f),a(u.rotate,c.rotate,d,f),o(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var g=-1,m=f.length,_;++g<m;)d[(_=f[g]).i]=_.x(h);return d.join("")}}}var bq=bR(wq,"px, ","px)","deg)"),Sq=bR(xq,", ",")",")"),Eq=1e-12;function bw(e){return((e=Math.exp(e))+1/e)/2}function Nq(e){return((e=Math.exp(e))-1/e)/2}function Cq(e){return((e=Math.exp(2*e))-1)/(e+1)}const kq=function e(t,n,r){function i(s,a){var o=s[0],l=s[1],u=s[2],c=a[0],d=a[1],f=a[2],h=c-o,g=d-l,m=h*h+g*g,_,y;if(m<Eq)y=Math.log(f/u)/t,_=function(N){return[o+N*h,l+N*g,u*Math.exp(t*N*y)]};else{var v=Math.sqrt(m),w=(f*f-u*u+r*m)/(2*u*n*v),x=(f*f-u*u-r*m)/(2*f*n*v),E=Math.log(Math.sqrt(w*w+1)-w),S=Math.log(Math.sqrt(x*x+1)-x);y=(S-E)/t,_=function(N){var A=N*y,k=bw(E),j=u/(n*v)*(k*Cq(t*A+E)-Nq(E));return[o+j*h,l+j*g,u*k/bw(t*A+E)]}}return _.duration=y*1e3*t/Math.SQRT2,_}return i.rho=function(s){var a=Math.max(.001,+s),o=a*a,l=o*o;return e(a,o,l)},i}(Math.SQRT2,2,4);var hs=0,Ws=0,Ls=0,SR=1e3,Jl,Ks,Zl=0,oi=0,Mu=0,Va=typeof performance=="object"&&performance.now?performance:Date,ER=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Py(){return oi||(ER(Rq),oi=Va.now()+Mu)}function Rq(){oi=0}function eu(){this._call=this._time=this._next=null}eu.prototype=NR.prototype={constructor:eu,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Py():+n)+(t==null?0:+t),!this._next&&Ks!==this&&(Ks?Ks._next=this:Jl=this,Ks=this),this._call=e,this._time=n,rv()},stop:function(){this._call&&(this._call=null,this._time=1/0,rv())}};function NR(e,t,n){var r=new eu;return r.restart(e,t,n),r}function jq(){Py(),++hs;for(var e=Jl,t;e;)(t=oi-e._time)>=0&&e._call.call(void 0,t),e=e._next;--hs}function Sw(){oi=(Zl=Va.now())+Mu,hs=Ws=0;try{jq()}finally{hs=0,Pq(),oi=0}}function Aq(){var e=Va.now(),t=e-Zl;t>SR&&(Mu-=t,Zl=e)}function Pq(){for(var e,t=Jl,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Jl=n);Ks=e,rv(r)}function rv(e){if(!hs){Ws&&(Ws=clearTimeout(Ws));var t=e-oi;t>24?(e<1/0&&(Ws=setTimeout(Sw,e-Va.now()-Mu)),Ls&&(Ls=clearInterval(Ls))):(Ls||(Zl=Va.now(),Ls=setInterval(Aq,SR)),hs=1,ER(Sw))}}function Ew(e,t,n){var r=new eu;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Tq=Tu("start","end","cancel","interrupt"),Iq=[],CR=0,Nw=1,iv=2,pl=3,Cw=4,sv=5,ml=6;function Ou(e,t,n,r,i,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Mq(e,n,{name:t,index:r,group:i,on:Tq,tween:Iq,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:CR})}function Ty(e,t){var n=an(e,t);if(n.state>CR)throw new Error("too late; already scheduled");return n}function Cn(e,t){var n=an(e,t);if(n.state>pl)throw new Error("too late; already running");return n}function an(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Mq(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=NR(s,0,n.time);function s(u){n.state=Nw,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,d,f,h;if(n.state!==Nw)return l();for(c in r)if(h=r[c],h.name===n.name){if(h.state===pl)return Ew(a);h.state===Cw?(h.state=ml,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=ml,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Ew(function(){n.state===pl&&(n.state=Cw,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=iv,n.on.call("start",e,e.__data__,n.index,n.group),n.state===iv){for(n.state=pl,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function o(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=sv,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===sv&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=ml,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function gl(e,t){var n=e.__transition,r,i,s=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){s=!1;continue}i=r.state>iv&&r.state<sv,r.state=ml,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}s&&delete e.__transition}}function Oq(e){return this.each(function(){gl(this,e)})}function $q(e,t){var n,r;return function(){var i=Cn(this,e),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function qq(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Cn(this,e),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=o;break}l===u&&i.push(o)}s.tween=i}}function Lq(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=an(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?$q:qq)(n,e,t))}function Iy(e,t,n){var r=e._id;return e.each(function(){var i=Cn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return an(i,r).value[t]}}function kR(e,t){var n;return(typeof t=="number"?cr:t instanceof Ha?ww:(n=Ha(t))?(t=n,ww):_q)(e,t)}function Fq(e){return function(){this.removeAttribute(e)}}function Dq(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zq(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttribute(e);return a===i?null:a===r?s:s=t(r=a,n)}}function Bq(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?s:s=t(r=a,n)}}function Uq(e,t,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o)))}}function Hq(e,t,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o)))}}function Vq(e,t){var n=Iu(e),r=n==="transform"?Sq:kR;return this.attrTween(e,typeof t=="function"?(n.local?Hq:Uq)(n,r,Iy(this,"attr."+e,t)):t==null?(n.local?Dq:Fq)(n):(n.local?Bq:zq)(n,r,t))}function Gq(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Wq(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Kq(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Wq(e,s)),n}return i._value=t,i}function Xq(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Gq(e,s)),n}return i._value=t,i}function Yq(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Iu(e);return this.tween(n,(r.local?Kq:Xq)(r,t))}function Qq(e,t){return function(){Ty(this,e).delay=+t.apply(this,arguments)}}function Jq(e,t){return t=+t,function(){Ty(this,e).delay=t}}function Zq(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Qq:Jq)(t,e)):an(this.node(),t).delay}function eL(e,t){return function(){Cn(this,e).duration=+t.apply(this,arguments)}}function tL(e,t){return t=+t,function(){Cn(this,e).duration=t}}function nL(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?eL:tL)(t,e)):an(this.node(),t).duration}function rL(e,t){if(typeof t!="function")throw new Error;return function(){Cn(this,e).ease=t}}function iL(e){var t=this._id;return arguments.length?this.each(rL(t,e)):an(this.node(),t).ease}function sL(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Cn(this,e).ease=n}}function aL(e){if(typeof e!="function")throw new Error;return this.each(sL(this._id,e))}function oL(e){typeof e!="function"&&(e=sR(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],l,u=0;u<a;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&o.push(l);return new Kn(r,this._parents,this._name,this._id)}function lL(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var l=t[o],u=n[o],c=l.length,d=a[o]=new Array(c),f,h=0;h<c;++h)(f=l[h]||u[h])&&(d[h]=f);for(;o<r;++o)a[o]=t[o];return new Kn(a,this._parents,this._name,this._id)}function uL(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function cL(e,t,n){var r,i,s=uL(t)?Ty:Cn;return function(){var a=s(this,e),o=a.on;o!==r&&(i=(r=o).copy()).on(t,n),a.on=i}}function dL(e,t){var n=this._id;return arguments.length<2?an(this.node(),n).on.on(e):this.each(cL(n,e,t))}function fL(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function hL(){return this.on("end.remove",fL(this._id))}function pL(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ry(e));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],l=o.length,u=s[a]=new Array(l),c,d,f=0;f<l;++f)(c=o[f])&&(d=e.call(c,c.__data__,f,o))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,Ou(u[f],t,n,f,u,an(c,n)));return new Kn(s,this._parents,t,n)}function mL(e){var t=this._name,n=this._id;typeof e!="function"&&(e=iR(e));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var l=r[o],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),h,g=an(c,n),m=0,_=f.length;m<_;++m)(h=f[m])&&Ou(h,t,n,m,f,g);s.push(f),a.push(c)}return new Kn(s,a,t,n)}var gL=io.prototype.constructor;function vL(){return new gL(this._groups,this._parents)}function yL(e,t){var n,r,i;return function(){var s=fs(this,e),a=(this.style.removeProperty(e),fs(this,e));return s===a?null:s===n&&a===r?i:i=t(n=s,r=a)}}function RR(e){return function(){this.style.removeProperty(e)}}function _L(e,t,n){var r,i=n+"",s;return function(){var a=fs(this,e);return a===i?null:a===r?s:s=t(r=a,n)}}function wL(e,t,n){var r,i,s;return function(){var a=fs(this,e),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(e),fs(this,e))),a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o))}}function xL(e,t){var n,r,i,s="style."+t,a="end."+s,o;return function(){var l=Cn(this,e),u=l.on,c=l.value[s]==null?o||(o=RR(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(a,i=c),l.on=r}}function bL(e,t,n){var r=(e+="")=="transform"?bq:kR;return t==null?this.styleTween(e,yL(e,r)).on("end.style."+e,RR(e)):typeof t=="function"?this.styleTween(e,wL(e,r,Iy(this,"style."+e,t))).each(xL(this._id,e)):this.styleTween(e,_L(e,r,t),n).on("end.style."+e,null)}function SL(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function EL(e,t,n){var r,i;function s(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&SL(e,a,n)),r}return s._value=t,s}function NL(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,EL(e,t,n??""))}function CL(e){return function(){this.textContent=e}}function kL(e){return function(){var t=e(this);this.textContent=t??""}}function RL(e){return this.tween("text",typeof e=="function"?kL(Iy(this,"text",e)):CL(e==null?"":e+""))}function jL(e){return function(t){this.textContent=e.call(this,t)}}function AL(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&jL(i)),t}return r._value=e,r}function PL(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,AL(e))}function TL(){for(var e=this._name,t=this._id,n=jR(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,u=0;u<o;++u)if(l=a[u]){var c=an(l,t);Ou(l,e,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Kn(r,this._parents,e,n)}function IL(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--i===0&&s()}};n.each(function(){var u=Cn(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),u.on=t}),i===0&&s()})}var ML=0;function Kn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function jR(){return++ML}var Tn=io.prototype;Kn.prototype={constructor:Kn,select:pL,selectAll:mL,selectChild:Tn.selectChild,selectChildren:Tn.selectChildren,filter:oL,merge:lL,selection:vL,transition:TL,call:Tn.call,nodes:Tn.nodes,node:Tn.node,size:Tn.size,empty:Tn.empty,each:Tn.each,on:dL,attr:Vq,attrTween:Yq,style:bL,styleTween:NL,text:RL,textTween:PL,remove:hL,tween:Lq,delay:Zq,duration:nL,ease:iL,easeVarying:aL,end:IL,[Symbol.iterator]:Tn[Symbol.iterator]};function OL(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var $L={time:null,delay:0,duration:250,ease:OL};function qL(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function LL(e){var t,n;e instanceof Kn?(t=e._id,e=e._name):(t=jR(),(n=$L).time=Py(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,u=0;u<o;++u)(l=a[u])&&Ou(l,e,t,u,a,n||qL(l,t));return new Kn(r,this._parents,e,t)}io.prototype.interrupt=Oq;io.prototype.transition=LL;const zo=e=>()=>e;function FL(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Dn(e,t,n){this.k=e,this.x=t,this.y=n}Dn.prototype={constructor:Dn,scale:function(e){return e===1?this:new Dn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Dn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Rr=new Dn(1,0,0);Dn.prototype;function Bc(e){e.stopImmediatePropagation()}function Fs(e){e.preventDefault(),e.stopImmediatePropagation()}function DL(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function zL(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function kw(){return this.__zoom||Rr}function BL(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function UL(){return navigator.maxTouchPoints||"ontouchstart"in this}function HL(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a))}function VL(){var e=DL,t=zL,n=HL,r=BL,i=UL,s=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],o=250,l=kq,u=Tu("start","zoom","end"),c,d,f,h=500,g=150,m=0,_=10;function y(b){b.property("__zoom",kw).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",j).filter(i).on("touchstart.zoom",I).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(b,P,T,F){var M=b.selection?b.selection():b;M.property("__zoom",kw),b!==M?E(b,P,T,F):M.interrupt().each(function(){S(this,arguments).event(F).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},y.scaleBy=function(b,P,T,F){y.scaleTo(b,function(){var M=this.__zoom.k,R=typeof P=="function"?P.apply(this,arguments):P;return M*R},T,F)},y.scaleTo=function(b,P,T,F){y.transform(b,function(){var M=t.apply(this,arguments),R=this.__zoom,$=T==null?x(M):typeof T=="function"?T.apply(this,arguments):T,q=R.invert($),L=typeof P=="function"?P.apply(this,arguments):P;return n(w(v(R,L),$,q),M,a)},T,F)},y.translateBy=function(b,P,T,F){y.transform(b,function(){return n(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof T=="function"?T.apply(this,arguments):T),t.apply(this,arguments),a)},null,F)},y.translateTo=function(b,P,T,F,M){y.transform(b,function(){var R=t.apply(this,arguments),$=this.__zoom,q=F==null?x(R):typeof F=="function"?F.apply(this,arguments):F;return n(Rr.translate(q[0],q[1]).scale($.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof T=="function"?-T.apply(this,arguments):-T),R,a)},F,M)};function v(b,P){return P=Math.max(s[0],Math.min(s[1],P)),P===b.k?b:new Dn(P,b.x,b.y)}function w(b,P,T){var F=P[0]-T[0]*b.k,M=P[1]-T[1]*b.k;return F===b.x&&M===b.y?b:new Dn(b.k,F,M)}function x(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function E(b,P,T,F){b.on("start.zoom",function(){S(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(F).end()}).tween("zoom",function(){var M=this,R=arguments,$=S(M,R).event(F),q=t.apply(M,R),L=T==null?x(q):typeof T=="function"?T.apply(M,R):T,H=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),U=M.__zoom,V=typeof P=="function"?P.apply(M,R):P,Q=l(U.invert(L).concat(H/U.k),V.invert(L).concat(H/V.k));return function(te){if(te===1)te=V;else{var le=Q(te),ge=H/le[2];te=new Dn(ge,L[0]-le[0]*ge,L[1]-le[1]*ge)}$.zoom(null,te)}})}function S(b,P,T){return!T&&b.__zooming||new N(b,P)}function N(b,P){this.that=b,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(b,P),this.taps=0}N.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,P){return this.mouse&&b!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var P=Qt(this.that).datum();u.call(b,this.that,new FL(b,{sourceEvent:this.sourceEvent,target:y,type:b,transform:this.that.__zoom,dispatch:u}),P)}};function A(b,...P){if(!e.apply(this,arguments))return;var T=S(this,P).event(b),F=this.__zoom,M=Math.max(s[0],Math.min(s[1],F.k*Math.pow(2,r.apply(this,arguments)))),R=gn(b);if(T.wheel)(T.mouse[0][0]!==R[0]||T.mouse[0][1]!==R[1])&&(T.mouse[1]=F.invert(T.mouse[0]=R)),clearTimeout(T.wheel);else{if(F.k===M)return;T.mouse=[R,F.invert(R)],gl(this),T.start()}Fs(b),T.wheel=setTimeout($,g),T.zoom("mouse",n(w(v(F,M),T.mouse[0],T.mouse[1]),T.extent,a));function $(){T.wheel=null,T.end()}}function k(b,...P){if(f||!e.apply(this,arguments))return;var T=b.currentTarget,F=S(this,P,!0).event(b),M=Qt(b.view).on("mousemove.zoom",L,!0).on("mouseup.zoom",H,!0),R=gn(b,T),$=b.clientX,q=b.clientY;mR(b.view),Bc(b),F.mouse=[R,this.__zoom.invert(R)],gl(this),F.start();function L(U){if(Fs(U),!F.moved){var V=U.clientX-$,Q=U.clientY-q;F.moved=V*V+Q*Q>m}F.event(U).zoom("mouse",n(w(F.that.__zoom,F.mouse[0]=gn(U,T),F.mouse[1]),F.extent,a))}function H(U){M.on("mousemove.zoom mouseup.zoom",null),gR(U.view,F.moved),Fs(U),F.event(U).end()}}function j(b,...P){if(e.apply(this,arguments)){var T=this.__zoom,F=gn(b.changedTouches?b.changedTouches[0]:b,this),M=T.invert(F),R=T.k*(b.shiftKey?.5:2),$=n(w(v(T,R),F,M),t.apply(this,P),a);Fs(b),o>0?Qt(this).transition().duration(o).call(E,$,F,b):Qt(this).call(y.transform,$,F,b)}}function I(b,...P){if(e.apply(this,arguments)){var T=b.touches,F=T.length,M=S(this,P,b.changedTouches.length===F).event(b),R,$,q,L;for(Bc(b),$=0;$<F;++$)q=T[$],L=gn(q,this),L=[L,this.__zoom.invert(L),q.identifier],M.touch0?!M.touch1&&M.touch0[2]!==L[2]&&(M.touch1=L,M.taps=0):(M.touch0=L,R=!0,M.taps=1+!!c);c&&(c=clearTimeout(c)),R&&(M.taps<2&&(d=L[0],c=setTimeout(function(){c=null},h)),gl(this),M.start())}}function z(b,...P){if(this.__zooming){var T=S(this,P).event(b),F=b.changedTouches,M=F.length,R,$,q,L;for(Fs(b),R=0;R<M;++R)$=F[R],q=gn($,this),T.touch0&&T.touch0[2]===$.identifier?T.touch0[0]=q:T.touch1&&T.touch1[2]===$.identifier&&(T.touch1[0]=q);if($=T.that.__zoom,T.touch1){var H=T.touch0[0],U=T.touch0[1],V=T.touch1[0],Q=T.touch1[1],te=(te=V[0]-H[0])*te+(te=V[1]-H[1])*te,le=(le=Q[0]-U[0])*le+(le=Q[1]-U[1])*le;$=v($,Math.sqrt(te/le)),q=[(H[0]+V[0])/2,(H[1]+V[1])/2],L=[(U[0]+Q[0])/2,(U[1]+Q[1])/2]}else if(T.touch0)q=T.touch0[0],L=T.touch0[1];else return;T.zoom("touch",n(w($,q,L),T.extent,a))}}function D(b,...P){if(this.__zooming){var T=S(this,P).event(b),F=b.changedTouches,M=F.length,R,$;for(Bc(b),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),R=0;R<M;++R)$=F[R],T.touch0&&T.touch0[2]===$.identifier?delete T.touch0:T.touch1&&T.touch1[2]===$.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&($=gn($,this),Math.hypot(d[0]-$[0],d[1]-$[1])<_)){var q=Qt(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return y.wheelDelta=function(b){return arguments.length?(r=typeof b=="function"?b:zo(+b),y):r},y.filter=function(b){return arguments.length?(e=typeof b=="function"?b:zo(!!b),y):e},y.touchable=function(b){return arguments.length?(i=typeof b=="function"?b:zo(!!b),y):i},y.extent=function(b){return arguments.length?(t=typeof b=="function"?b:zo([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),y):t},y.scaleExtent=function(b){return arguments.length?(s[0]=+b[0],s[1]=+b[1],y):[s[0],s[1]]},y.translateExtent=function(b){return arguments.length?(a[0][0]=+b[0][0],a[1][0]=+b[1][0],a[0][1]=+b[0][1],a[1][1]=+b[1][1],y):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},y.constrain=function(b){return arguments.length?(n=b,y):n},y.duration=function(b){return arguments.length?(o=+b,y):o},y.interpolate=function(b){return arguments.length?(l=b,y):l},y.on=function(){var b=u.on.apply(u,arguments);return b===u?y:b},y.clickDistance=function(b){return arguments.length?(m=(b=+b)*b,y):Math.sqrt(m)},y.tapDistance=function(b){return arguments.length?(_=+b,y):_},y}const $u=C.createContext(null),GL=$u.Provider,Xn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},AR=Xn.error001();function Se(e,t){const n=C.useContext($u);if(n===null)throw new Error(AR);return nR(n,e,t)}const De=()=>{const e=C.useContext($u);if(e===null)throw new Error(AR);return C.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},WL=e=>e.userSelectionActive?"none":"all";function My({position:e,children:t,className:n,style:r,...i}){const s=Se(WL),a=`${e}`.split("-");return O.createElement("div",{className:at(["react-flow__panel",n,...a]),style:{...r,pointerEvents:s},...i},t)}function KL({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:O.createElement(My,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},O.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const XL=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:a=[2,4],labelBgBorderRadius:o=2,children:l,className:u,...c})=>{const d=C.useRef(null),[f,h]=C.useState({x:0,y:0,width:0,height:0}),g=at(["react-flow__edge-textwrapper",u]);return C.useEffect(()=>{if(d.current){const m=d.current.getBBox();h({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),typeof n>"u"||!n?null:O.createElement("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:g,visibility:f.width?"visible":"hidden",...c},i&&O.createElement("rect",{width:f.width+2*a[0],x:-a[0],y:-a[1],height:f.height+2*a[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),O.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:d,style:r},n),l)};var YL=C.memo(XL);const Oy=e=>({width:e.offsetWidth,height:e.offsetHeight}),ps=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),$y=(e={x:0,y:0},t)=>({x:ps(e.x,t[0][0],t[1][0]),y:ps(e.y,t[0][1],t[1][1])}),Rw=(e,t,n)=>e<t?ps(Math.abs(e-t),1,50)/50:e>n?-ps(Math.abs(e-n),1,50)/50:0,PR=(e,t)=>{const n=Rw(e.x,35,t.width-35)*20,r=Rw(e.y,35,t.height-35)*20;return[n,r]},TR=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},QL=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),qy=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),JL=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),jw=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),av=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},ZL=e=>Lt(e.width)&&Lt(e.height)&&Lt(e.x)&&Lt(e.y),Lt=e=>!isNaN(e)&&isFinite(e),Ne=Symbol.for("internals"),IR=["Enter"," ","Escape"],e4=(e,t)=>{},t4=e=>"nativeEvent"in e;function ov(e){var i,s;const t=t4(e)?e.nativeEvent:e,n=((s=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const MR=e=>"clientX"in e,jr=(e,t)=>{var s,a;const n=MR(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,i=n?e.clientY:(a=e.touches)==null?void 0:a[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},tu=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},ao=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:f,interactionWidth:h=20})=>O.createElement(O.Fragment,null,O.createElement("path",{id:e,style:c,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:f}),h&&O.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),i&&Lt(n)&&Lt(r)?O.createElement(YL,{x:n,y:r,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null);ao.displayName="BaseEdge";function Ds(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(s=>s.id===e);i&&n(r,{...i})}}function OR({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,a=Math.abs(r-t)/2,o=r<t?r+a:r-a;return[s,o,i,a]}function $R({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:a,targetControlY:o}){const l=e*.125+i*.375+a*.375+n*.125,u=t*.125+s*.375+o*.375+r*.125,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}var Mr;(function(e){e.Strict="strict",e.Loose="loose"})(Mr||(Mr={}));var Yr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Yr||(Yr={}));var Ga;(function(e){e.Partial="partial",e.Full="full"})(Ga||(Ga={}));var pr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(pr||(pr={}));var nu;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(nu||(nu={}));var Y;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Y||(Y={}));function Aw({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Y.Left||e===Y.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function qR({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:i,targetPosition:s=Y.Top}){const[a,o]=Aw({pos:n,x1:e,y1:t,x2:r,y2:i}),[l,u]=Aw({pos:s,x1:r,y1:i,x2:e,y2:t}),[c,d,f,h]=$R({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:o,targetControlX:l,targetControlY:u});return[`M${e},${t} C${a},${o} ${l},${u} ${r},${i}`,c,d,f,h]}const Ly=C.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Y.Bottom,targetPosition:s=Y.Top,label:a,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:g,interactionWidth:m})=>{const[_,y,v]=qR({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:s});return O.createElement(ao,{path:_,labelX:y,labelY:v,label:a,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:g,interactionWidth:m})});Ly.displayName="SimpleBezierEdge";const Pw={[Y.Left]:{x:-1,y:0},[Y.Right]:{x:1,y:0},[Y.Top]:{x:0,y:-1},[Y.Bottom]:{x:0,y:1}},n4=({source:e,sourcePosition:t=Y.Bottom,target:n})=>t===Y.Left||t===Y.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Tw=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function r4({source:e,sourcePosition:t=Y.Bottom,target:n,targetPosition:r=Y.Top,center:i,offset:s}){const a=Pw[t],o=Pw[r],l={x:e.x+a.x*s,y:e.y+a.y*s},u={x:n.x+o.x*s,y:n.y+o.y*s},c=n4({source:l,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let h=[],g,m;const _={x:0,y:0},y={x:0,y:0},[v,w,x,E]=OR({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*o[d]===-1){g=i.x??v,m=i.y??w;const N=[{x:g,y:l.y},{x:g,y:u.y}],A=[{x:l.x,y:m},{x:u.x,y:m}];a[d]===f?h=d==="x"?N:A:h=d==="x"?A:N}else{const N=[{x:l.x,y:u.y}],A=[{x:u.x,y:l.y}];if(d==="x"?h=a.x===f?A:N:h=a.y===f?N:A,t===r){const D=Math.abs(e[d]-n[d]);if(D<=s){const b=Math.min(s-1,s-D);a[d]===f?_[d]=(l[d]>e[d]?-1:1)*b:y[d]=(u[d]>n[d]?-1:1)*b}}if(t!==r){const D=d==="x"?"y":"x",b=a[d]===o[D],P=l[D]>u[D],T=l[D]<u[D];(a[d]===1&&(!b&&P||b&&T)||a[d]!==1&&(!b&&T||b&&P))&&(h=d==="x"?N:A)}const k={x:l.x+_.x,y:l.y+_.y},j={x:u.x+y.x,y:u.y+y.y},I=Math.max(Math.abs(k.x-h[0].x),Math.abs(j.x-h[0].x)),z=Math.max(Math.abs(k.y-h[0].y),Math.abs(j.y-h[0].y));I>=z?(g=(k.x+j.x)/2,m=h[0].y):(g=h[0].x,m=(k.y+j.y)/2)}return[[e,{x:l.x+_.x,y:l.y+_.y},...h,{x:u.x+y.x,y:u.y+y.y},n],g,m,x,E]}function i4(e,t,n,r){const i=Math.min(Tw(e,t)/2,Tw(t,n)/2,r),{x:s,y:a}=t;if(e.x===s&&s===n.x||e.y===a&&a===n.y)return`L${s} ${a}`;if(e.y===a){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${s+i*u},${a}Q ${s},${a} ${s},${a+i*c}`}const o=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${s},${a+i*l}Q ${s},${a} ${s+i*o},${a}`}function lv({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:i,targetPosition:s=Y.Top,borderRadius:a=5,centerX:o,centerY:l,offset:u=20}){const[c,d,f,h,g]=r4({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:o,y:l},offset:u});return[c.reduce((_,y,v)=>{let w="";return v>0&&v<c.length-1?w=i4(c[v-1],y,c[v+1],a):w=`${v===0?"M":"L"}${y.x} ${y.y}`,_+=w,_},""),d,f,h,g]}const qu=C.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:c,sourcePosition:d=Y.Bottom,targetPosition:f=Y.Top,markerEnd:h,markerStart:g,pathOptions:m,interactionWidth:_})=>{const[y,v,w]=lv({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:f,borderRadius:m==null?void 0:m.borderRadius,offset:m==null?void 0:m.offset});return O.createElement(ao,{path:y,labelX:v,labelY:w,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:h,markerStart:g,interactionWidth:_})});qu.displayName="SmoothStepEdge";const Fy=C.memo(e=>{var t;return O.createElement(qu,{...e,pathOptions:C.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Fy.displayName="StepEdge";function s4({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,a,o]=OR({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,a,o]}const Dy=C.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:f,interactionWidth:h})=>{const[g,m,_]=s4({sourceX:e,sourceY:t,targetX:n,targetY:r});return O.createElement(ao,{path:g,labelX:m,labelY:_,label:i,labelStyle:s,labelShowBg:a,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:f,interactionWidth:h})});Dy.displayName="StraightEdge";function Bo(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Iw({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case Y.Left:return[t-Bo(t-r,s),n];case Y.Right:return[t+Bo(r-t,s),n];case Y.Top:return[t,n-Bo(n-i,s)];case Y.Bottom:return[t,n+Bo(i-n,s)]}}function LR({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:i,targetPosition:s=Y.Top,curvature:a=.25}){const[o,l]=Iw({pos:n,x1:e,y1:t,x2:r,y2:i,c:a}),[u,c]=Iw({pos:s,x1:r,y1:i,x2:e,y2:t,c:a}),[d,f,h,g]=$R({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${e},${t} C${o},${l} ${u},${c} ${r},${i}`,d,f,h,g]}const ru=C.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Y.Bottom,targetPosition:s=Y.Top,label:a,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:g,pathOptions:m,interactionWidth:_})=>{const[y,v,w]=LR({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:s,curvature:m==null?void 0:m.curvature});return O.createElement(ao,{path:y,labelX:v,labelY:w,label:a,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:g,interactionWidth:_})});ru.displayName="BezierEdge";const zy=C.createContext(null),a4=zy.Provider;zy.Consumer;const o4=()=>C.useContext(zy),l4=e=>"id"in e&&"source"in e&&"target"in e,u4=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,uv=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,c4=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),d4=(e,t)=>{if(!e.source||!e.target)return t;let n;return l4(e)?n={...e}:n={...e,id:u4(e)},c4(n,t)?t:t.concat(n)},cv=({x:e,y:t},[n,r,i],s,[a,o])=>{const l={x:(e-n)/i,y:(t-r)/i};return s?{x:a*Math.round(l.x/a),y:o*Math.round(l.y/o)}:l},FR=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),Ji=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},By=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const{x:s,y:a}=Ji(i,t).positionAbsolute;return QL(r,qy({x:s,y:a,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return JL(n)},DR=(e,t,[n,r,i]=[0,0,1],s=!1,a=!1,o=[0,0])=>{const l={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},u=[];return e.forEach(c=>{const{width:d,height:f,selectable:h=!0,hidden:g=!1}=c;if(a&&!h||g)return!1;const{positionAbsolute:m}=Ji(c,o),_={x:m.x,y:m.y,width:d||0,height:f||0},y=av(l,_),v=typeof d>"u"||typeof f>"u"||d===null||f===null,w=s&&y>0,x=(d||0)*(f||0);(v||w||y>=x||c.dragging)&&u.push(c)}),u},zR=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},BR=(e,t,n,r,i,s=.1)=>{const a=t/(e.width*(1+s)),o=n/(e.height*(1+s)),l=Math.min(a,o),u=ps(l,r,i),c=e.x+e.width/2,d=e.y+e.height/2,f=t/2-c*u,h=n/2-d*u;return{x:f,y:h,zoom:u}},Hr=(e,t=0)=>e.transition().duration(t);function Mw(e,t,n,r){return(t[n]||[]).reduce((i,s)=>{var a,o;return`${e.id}-${s.id}-${n}`!==r&&i.push({id:s.id||null,type:n,nodeId:e.id,x:(((a=e.positionAbsolute)==null?void 0:a.x)??0)+s.x+s.width/2,y:(((o=e.positionAbsolute)==null?void 0:o.y)??0)+s.y+s.height/2}),i},[])}function f4(e,t,n,r,i,s){const{x:a,y:o}=jr(e),u=t.elementsFromPoint(a,o).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const m=Uy(void 0,u),_=u.getAttribute("data-handleid"),y=s({nodeId:g,id:_,type:m});if(y){const v=i.find(w=>w.nodeId===g&&w.type===m&&w.id===_);return{handle:{id:_,type:m,nodeId:g,x:(v==null?void 0:v.x)||n.x,y:(v==null?void 0:v.y)||n.y},validHandleResult:y}}}}let c=[],d=1/0;if(i.forEach(g=>{const m=Math.sqrt((g.x-n.x)**2+(g.y-n.y)**2);if(m<=r){const _=s(g);m<=d&&(m<d?c=[{handle:g,validHandleResult:_}]:m===d&&c.push({handle:g,validHandleResult:_}),d=m)}}),!c.length)return{handle:null,validHandleResult:UR()};if(c.length===1)return c[0];const f=c.some(({validHandleResult:g})=>g.isValid),h=c.some(({handle:g})=>g.type==="target");return c.find(({handle:g,validHandleResult:m})=>h?g.type==="target":f?m.isValid:!0)||c[0]}const h4={source:null,target:null,sourceHandle:null,targetHandle:null},UR=()=>({handleDomNode:null,isValid:!1,connection:h4,endHandle:null});function HR(e,t,n,r,i,s,a){const o=i==="target",l=a.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...UR(),handleDomNode:l};if(l){const c=Uy(void 0,l),d=l.getAttribute("data-nodeid"),f=l.getAttribute("data-handleid"),h=l.classList.contains("connectable"),g=l.classList.contains("connectableend"),m={source:o?d:n,sourceHandle:o?f:r,target:o?n:d,targetHandle:o?r:f};u.connection=m,h&&g&&(t===Mr.Strict?o&&c==="source"||!o&&c==="target":d!==n||f!==r)&&(u.endHandle={nodeId:d,handleId:f,type:c},u.isValid=s(m))}return u}function p4({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,s)=>{if(s[Ne]){const{handleBounds:a}=s[Ne];let o=[],l=[];a&&(o=Mw(s,a,"source",`${t}-${n}-${r}`),l=Mw(s,a,"target",`${t}-${n}-${r}`)),i.push(...o,...l)}return i},[])}function Uy(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Uc(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function m4(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function VR({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:s,setState:a,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:u}){const c=TR(e.target),{connectionMode:d,domNode:f,autoPanOnConnect:h,connectionRadius:g,onConnectStart:m,panBy:_,getNodes:y,cancelConnection:v}=s();let w=0,x;const{x:E,y:S}=jr(e),N=c==null?void 0:c.elementFromPoint(E,S),A=Uy(l,N),k=f==null?void 0:f.getBoundingClientRect();if(!k||!A)return;let j,I=jr(e,k),z=!1,D=null,b=!1,P=null;const T=p4({nodes:y(),nodeId:n,handleId:t,handleType:A}),F=()=>{if(!h)return;const[$,q]=PR(I,k);_({x:$,y:q}),w=requestAnimationFrame(F)};a({connectionPosition:I,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:A,connectionStartHandle:{nodeId:n,handleId:t,type:A},connectionEndHandle:null}),m==null||m(e,{nodeId:n,handleId:t,handleType:A});function M($){const{transform:q}=s();I=jr($,k);const{handle:L,validHandleResult:H}=f4($,c,cv(I,q,!1,[1,1]),g,T,U=>HR(U,d,n,t,i?"target":"source",o,c));if(x=L,z||(F(),z=!0),P=H.handleDomNode,D=H.connection,b=H.isValid,a({connectionPosition:x&&b?FR({x:x.x,y:x.y},q):I,connectionStatus:m4(!!x,b),connectionEndHandle:H.endHandle}),!x&&!b&&!P)return Uc(j);D.source!==D.target&&P&&(Uc(j),j=P,P.classList.add("connecting","react-flow__handle-connecting"),P.classList.toggle("valid",b),P.classList.toggle("react-flow__handle-valid",b))}function R($){var q,L;(x||P)&&D&&b&&(r==null||r(D)),(L=(q=s()).onConnectEnd)==null||L.call(q,$),l&&(u==null||u($)),Uc(j),v(),cancelAnimationFrame(w),z=!1,b=!1,D=null,P=null,c.removeEventListener("mousemove",M),c.removeEventListener("mouseup",R),c.removeEventListener("touchmove",M),c.removeEventListener("touchend",R)}c.addEventListener("mousemove",M),c.addEventListener("mouseup",R),c.addEventListener("touchmove",M),c.addEventListener("touchend",R)}const Ow=()=>!0,g4=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),v4=(e,t,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:s,connectionClickStartHandle:a}=r;return{connecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===n}},GR=C.forwardRef(({type:e="source",position:t=Y.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:a,onConnect:o,children:l,className:u,onMouseDown:c,onTouchStart:d,...f},h)=>{var k,j;const g=a||null,m=e==="target",_=De(),y=o4(),{connectOnClick:v,noPanClassName:w}=Se(g4,Je),{connecting:x,clickConnecting:E}=Se(v4(y,g,e),Je);y||(j=(k=_.getState()).onError)==null||j.call(k,"010",Xn.error010());const S=I=>{const{defaultEdgeOptions:z,onConnect:D,hasDefaultEdges:b}=_.getState(),P={...z,...I};if(b){const{edges:T,setEdges:F}=_.getState();F(d4(P,T))}D==null||D(P),o==null||o(P)},N=I=>{if(!y)return;const z=MR(I);i&&(z&&I.button===0||!z)&&VR({event:I,handleId:g,nodeId:y,onConnect:S,isTarget:m,getState:_.getState,setState:_.setState,isValidConnection:n||_.getState().isValidConnection||Ow}),z?c==null||c(I):d==null||d(I)},A=I=>{const{onClickConnectStart:z,onClickConnectEnd:D,connectionClickStartHandle:b,connectionMode:P,isValidConnection:T}=_.getState();if(!y||!b&&!i)return;if(!b){z==null||z(I,{nodeId:y,handleId:g,handleType:e}),_.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const F=TR(I.target),M=n||T||Ow,{connection:R,isValid:$}=HR({nodeId:y,id:g,type:e},P,b.nodeId,b.handleId||null,b.type,M,F);$&&S(R),D==null||D(I),_.setState({connectionClickStartHandle:null})};return O.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:at(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",w,u,{source:!m,target:m,connectable:r,connectablestart:i,connectableend:s,connecting:E,connectionindicator:r&&(i&&!x||s&&x)}]),onMouseDown:N,onTouchStart:N,onClick:v?A:void 0,ref:h,...f},l)});GR.displayName="Handle";var iu=C.memo(GR);const WR=({data:e,isConnectable:t,targetPosition:n=Y.Top,sourcePosition:r=Y.Bottom})=>O.createElement(O.Fragment,null,O.createElement(iu,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,O.createElement(iu,{type:"source",position:r,isConnectable:t}));WR.displayName="DefaultNode";var dv=C.memo(WR);const KR=({data:e,isConnectable:t,sourcePosition:n=Y.Bottom})=>O.createElement(O.Fragment,null,e==null?void 0:e.label,O.createElement(iu,{type:"source",position:n,isConnectable:t}));KR.displayName="InputNode";var XR=C.memo(KR);const YR=({data:e,isConnectable:t,targetPosition:n=Y.Top})=>O.createElement(O.Fragment,null,O.createElement(iu,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);YR.displayName="OutputNode";var QR=C.memo(YR);const Hy=()=>null;Hy.displayName="GroupNode";const y4=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Uo=e=>e.id;function _4(e,t){return Je(e.selectedNodes.map(Uo),t.selectedNodes.map(Uo))&&Je(e.selectedEdges.map(Uo),t.selectedEdges.map(Uo))}const JR=C.memo(({onSelectionChange:e})=>{const t=De(),{selectedNodes:n,selectedEdges:r}=Se(y4,_4);return C.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChange.forEach(s=>s(i))},[n,r,e]),null});JR.displayName="SelectionListener";const w4=e=>!!e.onSelectionChange;function x4({onSelectionChange:e}){const t=Se(w4);return e||t?O.createElement(JR,{onSelectionChange:e}):null}const b4=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function wi(e,t){C.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function ne(e,t,n){C.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const S4=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:s,onConnectEnd:a,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:c,nodesFocusable:d,edgesFocusable:f,edgesUpdatable:h,elevateNodesOnSelect:g,minZoom:m,maxZoom:_,nodeExtent:y,onNodesChange:v,onEdgesChange:w,elementsSelectable:x,connectionMode:E,snapGrid:S,snapToGrid:N,translateExtent:A,connectOnClick:k,defaultEdgeOptions:j,fitView:I,fitViewOptions:z,onNodesDelete:D,onEdgesDelete:b,onNodeDrag:P,onNodeDragStart:T,onNodeDragStop:F,onSelectionDrag:M,onSelectionDragStart:R,onSelectionDragStop:$,noPanClassName:q,nodeOrigin:L,rfId:H,autoPanOnConnect:U,autoPanOnNodeDrag:V,onError:Q,connectionRadius:te,isValidConnection:le,nodeDragThreshold:ge})=>{const{setNodes:fe,setEdges:wt,setDefaultNodesAndEdges:ot,setMinZoom:xt,setMaxZoom:lt,setTranslateExtent:J,setNodeExtent:Ze,reset:X}=Se(b4,Je),W=De();return C.useEffect(()=>{const Re=r==null?void 0:r.map(Rn=>({...Rn,...j}));return ot(n,Re),()=>{X()}},[]),ne("defaultEdgeOptions",j,W.setState),ne("connectionMode",E,W.setState),ne("onConnect",i,W.setState),ne("onConnectStart",s,W.setState),ne("onConnectEnd",a,W.setState),ne("onClickConnectStart",o,W.setState),ne("onClickConnectEnd",l,W.setState),ne("nodesDraggable",u,W.setState),ne("nodesConnectable",c,W.setState),ne("nodesFocusable",d,W.setState),ne("edgesFocusable",f,W.setState),ne("edgesUpdatable",h,W.setState),ne("elementsSelectable",x,W.setState),ne("elevateNodesOnSelect",g,W.setState),ne("snapToGrid",N,W.setState),ne("snapGrid",S,W.setState),ne("onNodesChange",v,W.setState),ne("onEdgesChange",w,W.setState),ne("connectOnClick",k,W.setState),ne("fitViewOnInit",I,W.setState),ne("fitViewOnInitOptions",z,W.setState),ne("onNodesDelete",D,W.setState),ne("onEdgesDelete",b,W.setState),ne("onNodeDrag",P,W.setState),ne("onNodeDragStart",T,W.setState),ne("onNodeDragStop",F,W.setState),ne("onSelectionDrag",M,W.setState),ne("onSelectionDragStart",R,W.setState),ne("onSelectionDragStop",$,W.setState),ne("noPanClassName",q,W.setState),ne("nodeOrigin",L,W.setState),ne("rfId",H,W.setState),ne("autoPanOnConnect",U,W.setState),ne("autoPanOnNodeDrag",V,W.setState),ne("onError",Q,W.setState),ne("connectionRadius",te,W.setState),ne("isValidConnection",le,W.setState),ne("nodeDragThreshold",ge,W.setState),wi(e,fe),wi(t,wt),wi(m,xt),wi(_,lt),wi(A,J),wi(y,Ze),null},$w={display:"none"},E4={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ZR="react-flow__node-desc",e2="react-flow__edge-desc",N4="react-flow__aria-live",C4=e=>e.ariaLiveMessage;function k4({rfId:e}){const t=Se(C4);return O.createElement("div",{id:`${N4}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:E4},t)}function R4({rfId:e,disableKeyboardA11y:t}){return O.createElement(O.Fragment,null,O.createElement("div",{id:`${ZR}-${e}`,style:$w},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),O.createElement("div",{id:`${e2}-${e}`,style:$w},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&O.createElement(k4,{rfId:e}))}var Wa=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=C.useState(!1),i=C.useRef(!1),s=C.useRef(new Set([])),[a,o]=C.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(d=>typeof d=="string").map(d=>d.split("+")),c=u.reduce((d,f)=>d.concat(...f),[]);return[u,c]}return[[],[]]},[e]);return C.useEffect(()=>{const l=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||l;if(e!==null){const c=h=>{if(i.current=h.ctrlKey||h.metaKey||h.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&ov(h))return!1;const m=Lw(h.code,o);s.current.add(h[m]),qw(a,s.current,!1)&&(h.preventDefault(),r(!0))},d=h=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&ov(h))return!1;const m=Lw(h.code,o);qw(a,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(h[m]),h.key==="Meta"&&s.current.clear(),i.current=!1},f=()=>{s.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",c),u==null||u.addEventListener("keyup",d),window.addEventListener("blur",f),()=>{u==null||u.removeEventListener("keydown",c),u==null||u.removeEventListener("keyup",d),window.removeEventListener("blur",f)}}},[e,r]),n};function qw(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function Lw(e,t){return t.includes(e)?"code":"key"}function t2(e,t,n,r){var o,l;const i=e.parentNode||e.parentId;if(!i)return n;const s=t.get(i),a=Ji(s,r);return t2(s,t,{x:(n.x??0)+a.x,y:(n.y??0)+a.y,z:(((o=s[Ne])==null?void 0:o.z)??0)>(n.z??0)?((l=s[Ne])==null?void 0:l.z)??0:n.z??0},r)}function n2(e,t,n){e.forEach(r=>{var s;const i=r.parentNode||r.parentId;if(i&&!e.has(i))throw new Error(`Parent node ${i} not found`);if(i||n!=null&&n[r.id]){const{x:a,y:o,z:l}=t2(r,e,{...r.position,z:((s=r[Ne])==null?void 0:s.z)??0},t);r.positionAbsolute={x:a,y:o},r[Ne].z=l,n!=null&&n[r.id]&&(r[Ne].isParent=!0)}})}function Hc(e,t,n,r){const i=new Map,s={},a=r?1e3:0;return e.forEach(o=>{var h;const l=(Lt(o.zIndex)?o.zIndex:0)+(o.selected?a:0),u=t.get(o.id),c={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},d=o.parentNode||o.parentId;d&&(s[d]=!0);const f=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(c,Ne,{enumerable:!1,value:{handleBounds:f||(h=u==null?void 0:u[Ne])==null?void 0:h.handleBounds,z:l}}),i.set(o.id,c)}),n2(i,n,s),i}function r2(e,t={}){const{getNodes:n,width:r,height:i,minZoom:s,maxZoom:a,d3Zoom:o,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:c,nodeOrigin:d}=e(),f=t.initial&&!u&&c;if(o&&l&&(f||!t.initial)){const g=n().filter(_=>{var v;const y=t.includeHiddenNodes?_.width&&_.height:!_.hidden;return(v=t.nodes)!=null&&v.length?y&&t.nodes.some(w=>w.id===_.id):y}),m=g.every(_=>_.width&&_.height);if(g.length>0&&m){const _=By(g,d),{x:y,y:v,zoom:w}=BR(_,r,i,t.minZoom??s,t.maxZoom??a,t.padding??.1),x=Rr.translate(y,v).scale(w);return typeof t.duration=="number"&&t.duration>0?o.transform(Hr(l,t.duration),x):o.transform(l,x),!0}}return!1}function j4(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Ne]:r[Ne],selected:n.selected})}),new Map(t)}function A4(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function Ho({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:s,onNodesChange:a,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:u}=n();e!=null&&e.length&&(l&&r({nodeInternals:j4(e,i)}),a==null||a(e)),t!=null&&t.length&&(u&&r({edges:A4(t,s)}),o==null||o(t))}const xi=()=>{},P4={zoomIn:xi,zoomOut:xi,zoomTo:xi,getZoom:()=>1,setViewport:xi,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:xi,fitBounds:xi,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},T4=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),I4=()=>{const e=De(),{d3Zoom:t,d3Selection:n}=Se(T4,Je);return C.useMemo(()=>n&&t?{zoomIn:i=>t.scaleBy(Hr(n,i==null?void 0:i.duration),1.2),zoomOut:i=>t.scaleBy(Hr(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,s)=>t.scaleTo(Hr(n,s==null?void 0:s.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,s)=>{const[a,o,l]=e.getState().transform,u=Rr.translate(i.x??a,i.y??o).scale(i.zoom??l);t.transform(Hr(n,s==null?void 0:s.duration),u)},getViewport:()=>{const[i,s,a]=e.getState().transform;return{x:i,y:s,zoom:a}},fitView:i=>r2(e.getState,i),setCenter:(i,s,a)=>{const{width:o,height:l,maxZoom:u}=e.getState(),c=typeof(a==null?void 0:a.zoom)<"u"?a.zoom:u,d=o/2-i*c,f=l/2-s*c,h=Rr.translate(d,f).scale(c);t.transform(Hr(n,a==null?void 0:a.duration),h)},fitBounds:(i,s)=>{const{width:a,height:o,minZoom:l,maxZoom:u}=e.getState(),{x:c,y:d,zoom:f}=BR(i,a,o,l,u,(s==null?void 0:s.padding)??.1),h=Rr.translate(c,d).scale(f);t.transform(Hr(n,s==null?void 0:s.duration),h)},project:i=>{const{transform:s,snapToGrid:a,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),cv(i,s,a,o)},screenToFlowPosition:i=>{const{transform:s,snapToGrid:a,snapGrid:o,domNode:l}=e.getState();if(!l)return i;const{x:u,y:c}=l.getBoundingClientRect(),d={x:i.x-u,y:i.y-c};return cv(d,s,a,o)},flowToScreenPosition:i=>{const{transform:s,domNode:a}=e.getState();if(!a)return i;const{x:o,y:l}=a.getBoundingClientRect(),u=FR(i,s);return{x:u.x+o,y:u.y+l}},viewportInitialized:!0}:P4,[t,n])};function Vy(){const e=I4(),t=De(),n=C.useCallback(()=>t.getState().getNodes().map(m=>({...m})),[]),r=C.useCallback(m=>t.getState().nodeInternals.get(m),[]),i=C.useCallback(()=>{const{edges:m=[]}=t.getState();return m.map(_=>({..._}))},[]),s=C.useCallback(m=>{const{edges:_=[]}=t.getState();return _.find(y=>y.id===m)},[]),a=C.useCallback(m=>{const{getNodes:_,setNodes:y,hasDefaultNodes:v,onNodesChange:w}=t.getState(),x=_(),E=typeof m=="function"?m(x):m;if(v)y(E);else if(w){const S=E.length===0?x.map(N=>({type:"remove",id:N.id})):E.map(N=>({item:N,type:"reset"}));w(S)}},[]),o=C.useCallback(m=>{const{edges:_=[],setEdges:y,hasDefaultEdges:v,onEdgesChange:w}=t.getState(),x=typeof m=="function"?m(_):m;if(v)y(x);else if(w){const E=x.length===0?_.map(S=>({type:"remove",id:S.id})):x.map(S=>({item:S,type:"reset"}));w(E)}},[]),l=C.useCallback(m=>{const _=Array.isArray(m)?m:[m],{getNodes:y,setNodes:v,hasDefaultNodes:w,onNodesChange:x}=t.getState();if(w){const S=[...y(),..._];v(S)}else if(x){const E=_.map(S=>({item:S,type:"add"}));x(E)}},[]),u=C.useCallback(m=>{const _=Array.isArray(m)?m:[m],{edges:y=[],setEdges:v,hasDefaultEdges:w,onEdgesChange:x}=t.getState();if(w)v([...y,..._]);else if(x){const E=_.map(S=>({item:S,type:"add"}));x(E)}},[]),c=C.useCallback(()=>{const{getNodes:m,edges:_=[],transform:y}=t.getState(),[v,w,x]=y;return{nodes:m().map(E=>({...E})),edges:_.map(E=>({...E})),viewport:{x:v,y:w,zoom:x}}},[]),d=C.useCallback(({nodes:m,edges:_})=>{const{nodeInternals:y,getNodes:v,edges:w,hasDefaultNodes:x,hasDefaultEdges:E,onNodesDelete:S,onEdgesDelete:N,onNodesChange:A,onEdgesChange:k}=t.getState(),j=(m||[]).map(P=>P.id),I=(_||[]).map(P=>P.id),z=v().reduce((P,T)=>{const F=T.parentNode||T.parentId,M=!j.includes(T.id)&&F&&P.find($=>$.id===F);return(typeof T.deletable=="boolean"?T.deletable:!0)&&(j.includes(T.id)||M)&&P.push(T),P},[]),D=w.filter(P=>typeof P.deletable=="boolean"?P.deletable:!0),b=D.filter(P=>I.includes(P.id));if(z||b){const P=zR(z,D),T=[...b,...P],F=T.reduce((M,R)=>(M.includes(R.id)||M.push(R.id),M),[]);if((E||x)&&(E&&t.setState({edges:w.filter(M=>!F.includes(M.id))}),x&&(z.forEach(M=>{y.delete(M.id)}),t.setState({nodeInternals:new Map(y)}))),F.length>0&&(N==null||N(T),k&&k(F.map(M=>({id:M,type:"remove"})))),z.length>0&&(S==null||S(z),A)){const M=z.map(R=>({id:R.id,type:"remove"}));A(M)}}},[]),f=C.useCallback(m=>{const _=ZL(m),y=_?null:t.getState().nodeInternals.get(m.id);return!_&&!y?[null,null,_]:[_?m:jw(y),y,_]},[]),h=C.useCallback((m,_=!0,y)=>{const[v,w,x]=f(m);return v?(y||t.getState().getNodes()).filter(E=>{if(!x&&(E.id===w.id||!E.positionAbsolute))return!1;const S=jw(E),N=av(S,v);return _&&N>0||N>=v.width*v.height}):[]},[]),g=C.useCallback((m,_,y=!0)=>{const[v]=f(m);if(!v)return!1;const w=av(v,_);return y&&w>0||w>=v.width*v.height},[]);return C.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:s,setNodes:a,setEdges:o,addNodes:l,addEdges:u,toObject:c,deleteElements:d,getIntersectingNodes:h,isNodeIntersecting:g}),[e,n,r,i,s,a,o,l,u,c,d,h,g])}const M4={actInsideInputWithModifier:!1};var O4=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=De(),{deleteElements:r}=Vy(),i=Wa(e,M4),s=Wa(t);C.useEffect(()=>{if(i){const{edges:a,getNodes:o}=n.getState(),l=o().filter(c=>c.selected),u=a.filter(c=>c.selected);r({nodes:l,edges:u}),n.setState({nodesSelectionActive:!1})}},[i]),C.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function $4(e){const t=De();C.useEffect(()=>{let n;const r=()=>{var s,a;if(!e.current)return;const i=Oy(e.current);(i.height===0||i.width===0)&&((a=(s=t.getState()).onError)==null||a.call(s,"004",Xn.error004())),t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const Gy={position:"absolute",width:"100%",height:"100%",top:0,left:0},q4=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Vo=e=>({x:e.x,y:e.y,zoom:e.k}),bi=(e,t)=>e.target.closest(`.${t}`),Fw=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Dw=e=>{const t=e.ctrlKey&&tu()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},L4=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),F4=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:s=!0,panOnScroll:a=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=Yr.Free,zoomOnDoubleClick:u=!0,elementsSelectable:c,panOnDrag:d=!0,defaultViewport:f,translateExtent:h,minZoom:g,maxZoom:m,zoomActivationKeyCode:_,preventScrolling:y=!0,children:v,noWheelClassName:w,noPanClassName:x})=>{const E=C.useRef(),S=De(),N=C.useRef(!1),A=C.useRef(!1),k=C.useRef(null),j=C.useRef({x:0,y:0,zoom:0}),{d3Zoom:I,d3Selection:z,d3ZoomHandler:D,userSelectionActive:b}=Se(L4,Je),P=Wa(_),T=C.useRef(0),F=C.useRef(!1),M=C.useRef();return $4(k),C.useEffect(()=>{if(k.current){const R=k.current.getBoundingClientRect(),$=VL().scaleExtent([g,m]).translateExtent(h),q=Qt(k.current).call($),L=Rr.translate(f.x,f.y).scale(ps(f.zoom,g,m)),H=[[0,0],[R.width,R.height]],U=$.constrain()(L,H,h);$.transform(q,U),$.wheelDelta(Dw),S.setState({d3Zoom:$,d3Selection:q,d3ZoomHandler:q.on("wheel.zoom"),transform:[U.x,U.y,U.k],domNode:k.current.closest(".react-flow")})}},[]),C.useEffect(()=>{z&&I&&(a&&!P&&!b?z.on("wheel.zoom",R=>{if(bi(R,w))return!1;R.preventDefault(),R.stopImmediatePropagation();const $=z.property("__zoom").k||1;if(R.ctrlKey&&s){const le=gn(R),ge=Dw(R),fe=$*Math.pow(2,ge);I.scaleTo(z,fe,le,R);return}const q=R.deltaMode===1?20:1;let L=l===Yr.Vertical?0:R.deltaX*q,H=l===Yr.Horizontal?0:R.deltaY*q;!tu()&&R.shiftKey&&l!==Yr.Vertical&&(L=R.deltaY*q,H=0),I.translateBy(z,-(L/$)*o,-(H/$)*o,{internal:!0});const U=Vo(z.property("__zoom")),{onViewportChangeStart:V,onViewportChange:Q,onViewportChangeEnd:te}=S.getState();clearTimeout(M.current),F.current||(F.current=!0,t==null||t(R,U),V==null||V(U)),F.current&&(e==null||e(R,U),Q==null||Q(U),M.current=setTimeout(()=>{n==null||n(R,U),te==null||te(U),F.current=!1},150))},{passive:!1}):typeof D<"u"&&z.on("wheel.zoom",function(R,$){if(!y&&R.type==="wheel"&&!R.ctrlKey||bi(R,w))return null;R.preventDefault(),D.call(this,R,$)},{passive:!1}))},[b,a,l,z,I,D,P,s,y,w,t,e,n]),C.useEffect(()=>{I&&I.on("start",R=>{var L,H;if(!R.sourceEvent||R.sourceEvent.internal)return null;T.current=(L=R.sourceEvent)==null?void 0:L.button;const{onViewportChangeStart:$}=S.getState(),q=Vo(R.transform);N.current=!0,j.current=q,((H=R.sourceEvent)==null?void 0:H.type)==="mousedown"&&S.setState({paneDragging:!0}),$==null||$(q),t==null||t(R.sourceEvent,q)})},[I,t]),C.useEffect(()=>{I&&(b&&!N.current?I.on("zoom",null):b||I.on("zoom",R=>{var q;const{onViewportChange:$}=S.getState();if(S.setState({transform:[R.transform.x,R.transform.y,R.transform.k]}),A.current=!!(r&&Fw(d,T.current??0)),(e||$)&&!((q=R.sourceEvent)!=null&&q.internal)){const L=Vo(R.transform);$==null||$(L),e==null||e(R.sourceEvent,L)}}))},[b,I,e,d,r]),C.useEffect(()=>{I&&I.on("end",R=>{if(!R.sourceEvent||R.sourceEvent.internal)return null;const{onViewportChangeEnd:$}=S.getState();if(N.current=!1,S.setState({paneDragging:!1}),r&&Fw(d,T.current??0)&&!A.current&&r(R.sourceEvent),A.current=!1,(n||$)&&q4(j.current,R.transform)){const q=Vo(R.transform);j.current=q,clearTimeout(E.current),E.current=setTimeout(()=>{$==null||$(q),n==null||n(R.sourceEvent,q)},a?150:0)}})},[I,a,d,n,r]),C.useEffect(()=>{I&&I.filter(R=>{const $=P||i,q=s&&R.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&R.button===1&&R.type==="mousedown"&&(bi(R,"react-flow__node")||bi(R,"react-flow__edge")))return!0;if(!d&&!$&&!a&&!u&&!s||b||!u&&R.type==="dblclick"||bi(R,w)&&R.type==="wheel"||bi(R,x)&&(R.type!=="wheel"||a&&R.type==="wheel"&&!P)||!s&&R.ctrlKey&&R.type==="wheel"||!$&&!a&&!q&&R.type==="wheel"||!d&&(R.type==="mousedown"||R.type==="touchstart")||Array.isArray(d)&&!d.includes(R.button)&&R.type==="mousedown")return!1;const L=Array.isArray(d)&&d.includes(R.button)||!R.button||R.button<=1;return(!R.ctrlKey||R.type==="wheel")&&L})},[b,I,i,s,a,u,d,c,P]),O.createElement("div",{className:"react-flow__renderer",ref:k,style:Gy},v)},D4=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function z4(){const{userSelectionActive:e,userSelectionRect:t}=Se(D4,Je);return e&&t?O.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function zw(e,t){const n=t.parentNode||t.parentId,r=e.find(i=>i.id===n);if(r){const i=t.position.x+t.width-r.width,s=t.position.y+t.height-r.height;if(i>0||s>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,i>0&&(r.style.width+=i),s>0&&(r.style.height+=s),t.position.x<0){const a=Math.abs(t.position.x);r.position.x=r.position.x-a,r.style.width+=a,t.position.x=0}if(t.position.y<0){const a=Math.abs(t.position.y);r.position.y=r.position.y-a,r.style.height+=a,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function i2(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const s=e.filter(o=>o.id===i.id);if(s.length===0)return r.push(i),r;const a={...i};for(const o of s)if(o)switch(o.type){case"select":{a.selected=o.selected;break}case"position":{typeof o.position<"u"&&(a.position=o.position),typeof o.positionAbsolute<"u"&&(a.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(a.dragging=o.dragging),a.expandParent&&zw(r,a);break}case"dimensions":{typeof o.dimensions<"u"&&(a.width=o.dimensions.width,a.height=o.dimensions.height),typeof o.updateStyle<"u"&&(a.style={...a.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(a.resizing=o.resizing),a.expandParent&&zw(r,a);break}case"remove":return r}return r.push(a),r},n)}function s2(e,t){return i2(e,t)}function B4(e,t){return i2(e,t)}const dr=(e,t)=>({id:e,type:"select",selected:t});function zi(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(dr(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(dr(r.id,!1))),n},[])}const Vc=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},U4=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),a2=C.memo(({isSelecting:e,selectionMode:t=Ga.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:a,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:c,children:d})=>{const f=C.useRef(null),h=De(),g=C.useRef(0),m=C.useRef(0),_=C.useRef(),{userSelectionActive:y,elementsSelectable:v,dragging:w}=Se(U4,Je),x=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,m.current=0},E=D=>{s==null||s(D),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},S=D=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){D.preventDefault();return}a==null||a(D)},N=o?D=>o(D):void 0,A=D=>{const{resetSelectedElements:b,domNode:P}=h.getState();if(_.current=P==null?void 0:P.getBoundingClientRect(),!v||!e||D.button!==0||D.target!==f.current||!_.current)return;const{x:T,y:F}=jr(D,_.current);b(),h.setState({userSelectionRect:{width:0,height:0,startX:T,startY:F,x:T,y:F}}),r==null||r(D)},k=D=>{const{userSelectionRect:b,nodeInternals:P,edges:T,transform:F,onNodesChange:M,onEdgesChange:R,nodeOrigin:$,getNodes:q}=h.getState();if(!e||!_.current||!b)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const L=jr(D,_.current),H=b.startX??0,U=b.startY??0,V={...b,x:L.x<H?L.x:H,y:L.y<U?L.y:U,width:Math.abs(L.x-H),height:Math.abs(L.y-U)},Q=q(),te=DR(P,V,F,t===Ga.Partial,!0,$),le=zR(te,T).map(fe=>fe.id),ge=te.map(fe=>fe.id);if(g.current!==ge.length){g.current=ge.length;const fe=zi(Q,ge);fe.length&&(M==null||M(fe))}if(m.current!==le.length){m.current=le.length;const fe=zi(T,le);fe.length&&(R==null||R(fe))}h.setState({userSelectionRect:V})},j=D=>{if(D.button!==0)return;const{userSelectionRect:b}=h.getState();!y&&b&&D.target===f.current&&(E==null||E(D)),h.setState({nodesSelectionActive:g.current>0}),x(),i==null||i(D)},I=D=>{y&&(h.setState({nodesSelectionActive:g.current>0}),i==null||i(D)),x()},z=v&&(e||y);return O.createElement("div",{className:at(["react-flow__pane",{dragging:w,selection:e}]),onClick:z?void 0:Vc(E,f),onContextMenu:Vc(S,f),onWheel:Vc(N,f),onMouseEnter:z?void 0:l,onMouseDown:z?A:void 0,onMouseMove:z?k:u,onMouseUp:z?j:void 0,onMouseLeave:z?I:c,ref:f,style:Gy},d,O.createElement(z4,null))});a2.displayName="Pane";function o2(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:o2(r,t):!1}function Bw(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function H4(e,t,n,r){return Array.from(e.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||i.parentId||!o2(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>{var s,a;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=i.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((a=i.positionAbsolute)==null?void 0:a.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}})}function V4(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function l2(e,t,n,r,i=[0,0],s){const a=V4(e,e.extent||r);let o=a;const l=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(l&&e.width&&e.height){const d=n.get(l),{x:f,y:h}=Ji(d,i).positionAbsolute;o=d&&Lt(f)&&Lt(h)&&Lt(d.width)&&Lt(d.height)?[[f+e.width*i[0],h+e.height*i[1]],[f+d.width-e.width+e.width*i[0],h+d.height-e.height+e.height*i[1]]]:o}else s==null||s("005",Xn.error005()),o=a;else if(e.extent&&l&&e.extent!=="parent"){const d=n.get(l),{x:f,y:h}=Ji(d,i).positionAbsolute;o=[[e.extent[0][0]+f,e.extent[0][1]+h],[e.extent[1][0]+f,e.extent[1][1]+h]]}let u={x:0,y:0};if(l){const d=n.get(l);u=Ji(d,i).positionAbsolute}const c=o&&o!=="parent"?$y(t,o):t;return{position:{x:c.x-u.x,y:c.y-u.y},positionAbsolute:c}}function Gc({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const Uw=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const s=Array.from(i),a=t.getBoundingClientRect(),o={x:a.width*r[0],y:a.height*r[1]};return s.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-a.left-o.x)/n,y:(u.top-a.top-o.y)/n,...Oy(l)}})};function zs(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);i&&n(r,{...i})}}function fv({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:a,nodeInternals:o,onError:l}=t.getState(),u=o.get(e);if(!u){l==null||l("012",Xn.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&a)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var c;return(c=r==null?void 0:r.current)==null?void 0:c.blur()})):i([e])}function G4(){const e=De();return C.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:s}=e.getState(),a=n.touches?n.touches[0].clientX:n.clientX,o=n.touches?n.touches[0].clientY:n.clientY,l={x:(a-r[0])/r[2],y:(o-r[1])/r[2]};return{xSnapped:s?i[0]*Math.round(l.x/i[0]):l.x,ySnapped:s?i[1]*Math.round(l.y/i[1]):l.y,...l}},[])}function Wc(e){return(t,n,r)=>e==null?void 0:e(t,r)}function u2({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,selectNodesOnDrag:a}){const o=De(),[l,u]=C.useState(!1),c=C.useRef([]),d=C.useRef({x:null,y:null}),f=C.useRef(0),h=C.useRef(null),g=C.useRef({x:0,y:0}),m=C.useRef(null),_=C.useRef(!1),y=C.useRef(!1),v=C.useRef(!1),w=G4();return C.useEffect(()=>{if(e!=null&&e.current){const x=Qt(e.current),E=({x:A,y:k})=>{const{nodeInternals:j,onNodeDrag:I,onSelectionDrag:z,updateNodePositions:D,nodeExtent:b,snapGrid:P,snapToGrid:T,nodeOrigin:F,onError:M}=o.getState();d.current={x:A,y:k};let R=!1,$={x:0,y:0,x2:0,y2:0};if(c.current.length>1&&b){const L=By(c.current,F);$=qy(L)}if(c.current=c.current.map(L=>{const H={x:A-L.distance.x,y:k-L.distance.y};T&&(H.x=P[0]*Math.round(H.x/P[0]),H.y=P[1]*Math.round(H.y/P[1]));const U=[[b[0][0],b[0][1]],[b[1][0],b[1][1]]];c.current.length>1&&b&&!L.extent&&(U[0][0]=L.positionAbsolute.x-$.x+b[0][0],U[1][0]=L.positionAbsolute.x+(L.width??0)-$.x2+b[1][0],U[0][1]=L.positionAbsolute.y-$.y+b[0][1],U[1][1]=L.positionAbsolute.y+(L.height??0)-$.y2+b[1][1]);const V=l2(L,H,j,U,F,M);return R=R||L.position.x!==V.position.x||L.position.y!==V.position.y,L.position=V.position,L.positionAbsolute=V.positionAbsolute,L}),!R)return;D(c.current,!0,!0),u(!0);const q=i?I:Wc(z);if(q&&m.current){const[L,H]=Gc({nodeId:i,dragItems:c.current,nodeInternals:j});q(m.current,L,H)}},S=()=>{if(!h.current)return;const[A,k]=PR(g.current,h.current);if(A!==0||k!==0){const{transform:j,panBy:I}=o.getState();d.current.x=(d.current.x??0)-A/j[2],d.current.y=(d.current.y??0)-k/j[2],I({x:A,y:k})&&E(d.current)}f.current=requestAnimationFrame(S)},N=A=>{var F;const{nodeInternals:k,multiSelectionActive:j,nodesDraggable:I,unselectNodesAndEdges:z,onNodeDragStart:D,onSelectionDragStart:b}=o.getState();y.current=!0;const P=i?D:Wc(b);(!a||!s)&&!j&&i&&((F=k.get(i))!=null&&F.selected||z()),i&&s&&a&&fv({id:i,store:o,nodeRef:e});const T=w(A);if(d.current=T,c.current=H4(k,I,T,i),P&&c.current){const[M,R]=Gc({nodeId:i,dragItems:c.current,nodeInternals:k});P(A.sourceEvent,M,R)}};if(t)x.on(".drag",null);else{const A=tq().on("start",k=>{const{domNode:j,nodeDragThreshold:I}=o.getState();I===0&&N(k),v.current=!1;const z=w(k);d.current=z,h.current=(j==null?void 0:j.getBoundingClientRect())||null,g.current=jr(k.sourceEvent,h.current)}).on("drag",k=>{var D,b;const j=w(k),{autoPanOnNodeDrag:I,nodeDragThreshold:z}=o.getState();if(k.sourceEvent.type==="touchmove"&&k.sourceEvent.touches.length>1&&(v.current=!0),!v.current){if(!_.current&&y.current&&I&&(_.current=!0,S()),!y.current){const P=j.xSnapped-(((D=d==null?void 0:d.current)==null?void 0:D.x)??0),T=j.ySnapped-(((b=d==null?void 0:d.current)==null?void 0:b.y)??0);Math.sqrt(P*P+T*T)>z&&N(k)}(d.current.x!==j.xSnapped||d.current.y!==j.ySnapped)&&c.current&&y.current&&(m.current=k.sourceEvent,g.current=jr(k.sourceEvent,h.current),E(j))}}).on("end",k=>{if(!(!y.current||v.current)&&(u(!1),_.current=!1,y.current=!1,cancelAnimationFrame(f.current),c.current)){const{updateNodePositions:j,nodeInternals:I,onNodeDragStop:z,onSelectionDragStop:D}=o.getState(),b=i?z:Wc(D);if(j(c.current,!1,!1),b){const[P,T]=Gc({nodeId:i,dragItems:c.current,nodeInternals:I});b(k.sourceEvent,P,T)}}}).filter(k=>{const j=k.target;return!k.button&&(!n||!Bw(j,`.${n}`,e))&&(!r||Bw(j,r,e))});return x.call(A),()=>{x.on(".drag",null)}}}},[e,t,n,r,s,o,i,a,w]),l}function c2(){const e=De();return C.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:s,getNodes:a,snapToGrid:o,snapGrid:l,onError:u,nodesDraggable:c}=e.getState(),d=a().filter(v=>v.selected&&(v.draggable||c&&typeof v.draggable>"u")),f=o?l[0]:5,h=o?l[1]:5,g=n.isShiftPressed?4:1,m=n.x*f*g,_=n.y*h*g,y=d.map(v=>{if(v.positionAbsolute){const w={x:v.positionAbsolute.x+m,y:v.positionAbsolute.y+_};o&&(w.x=l[0]*Math.round(w.x/l[0]),w.y=l[1]*Math.round(w.y/l[1]));const{positionAbsolute:x,position:E}=l2(v,w,r,i,void 0,u);v.position=E,v.positionAbsolute=x}return v});s(y,!0,!1)},[])}const Zi={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Bs=e=>{const t=({id:n,type:r,data:i,xPos:s,yPos:a,xPosOrigin:o,yPosOrigin:l,selected:u,onClick:c,onMouseEnter:d,onMouseMove:f,onMouseLeave:h,onContextMenu:g,onDoubleClick:m,style:_,className:y,isDraggable:v,isSelectable:w,isConnectable:x,isFocusable:E,selectNodesOnDrag:S,sourcePosition:N,targetPosition:A,hidden:k,resizeObserver:j,dragHandle:I,zIndex:z,isParent:D,noDragClassName:b,noPanClassName:P,initialized:T,disableKeyboardA11y:F,ariaLabel:M,rfId:R,hasHandleBounds:$})=>{const q=De(),L=C.useRef(null),H=C.useRef(null),U=C.useRef(N),V=C.useRef(A),Q=C.useRef(r),te=w||v||c||d||f||h,le=c2(),ge=zs(n,q.getState,d),fe=zs(n,q.getState,f),wt=zs(n,q.getState,h),ot=zs(n,q.getState,g),xt=zs(n,q.getState,m),lt=X=>{const{nodeDragThreshold:W}=q.getState();if(w&&(!S||!v||W>0)&&fv({id:n,store:q,nodeRef:L}),c){const Re=q.getState().nodeInternals.get(n);Re&&c(X,{...Re})}},J=X=>{if(!ov(X)&&!F)if(IR.includes(X.key)&&w){const W=X.key==="Escape";fv({id:n,store:q,unselect:W,nodeRef:L})}else v&&u&&Object.prototype.hasOwnProperty.call(Zi,X.key)&&(q.setState({ariaLiveMessage:`Moved selected node ${X.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~a}`}),le({x:Zi[X.key].x,y:Zi[X.key].y,isShiftPressed:X.shiftKey}))};C.useEffect(()=>()=>{H.current&&(j==null||j.unobserve(H.current),H.current=null)},[]),C.useEffect(()=>{if(L.current&&!k){const X=L.current;(!T||!$||H.current!==X)&&(H.current&&(j==null||j.unobserve(H.current)),j==null||j.observe(X),H.current=X)}},[k,T,$]),C.useEffect(()=>{const X=Q.current!==r,W=U.current!==N,Re=V.current!==A;L.current&&(X||W||Re)&&(X&&(Q.current=r),W&&(U.current=N),Re&&(V.current=A),q.getState().updateNodeDimensions([{id:n,nodeElement:L.current,forceUpdate:!0}]))},[n,r,N,A]);const Ze=u2({nodeRef:L,disabled:k||!v,noDragClassName:b,handleSelector:I,nodeId:n,isSelectable:w,selectNodesOnDrag:S});return k?null:O.createElement("div",{className:at(["react-flow__node",`react-flow__node-${r}`,{[P]:v},y,{selected:u,selectable:w,parent:D,dragging:Ze}]),ref:L,style:{zIndex:z,transform:`translate(${o}px,${l}px)`,pointerEvents:te?"all":"none",visibility:T?"visible":"hidden",..._},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ge,onMouseMove:fe,onMouseLeave:wt,onContextMenu:ot,onClick:lt,onDoubleClick:xt,onKeyDown:E?J:void 0,tabIndex:E?0:void 0,role:E?"button":void 0,"aria-describedby":F?void 0:`${ZR}-${R}`,"aria-label":M},O.createElement(a4,{value:n},O.createElement(e,{id:n,data:i,type:r,xPos:s,yPos:a,selected:u,isConnectable:x,sourcePosition:N,targetPosition:A,dragging:Ze,dragHandle:I,zIndex:z})))};return t.displayName="NodeWrapper",C.memo(t)};const W4=e=>{const t=e.getNodes().filter(n=>n.selected);return{...By(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function K4({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=De(),{width:i,height:s,x:a,y:o,transformString:l,userSelectionActive:u}=Se(W4,Je),c=c2(),d=C.useRef(null);if(C.useEffect(()=>{var g;n||(g=d.current)==null||g.focus({preventScroll:!0})},[n]),u2({nodeRef:d}),u||!i||!s)return null;const f=e?g=>{const m=r.getState().getNodes().filter(_=>_.selected);e(g,m)}:void 0,h=g=>{Object.prototype.hasOwnProperty.call(Zi,g.key)&&c({x:Zi[g.key].x,y:Zi[g.key].y,isShiftPressed:g.shiftKey})};return O.createElement("div",{className:at(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},O.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:i,height:s,top:o,left:a}}))}var X4=C.memo(K4);const Y4=e=>e.nodesSelectionActive,d2=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:a,deleteKeyCode:o,onMove:l,onMoveStart:u,onMoveEnd:c,selectionKeyCode:d,selectionOnDrag:f,selectionMode:h,onSelectionStart:g,onSelectionEnd:m,multiSelectionKeyCode:_,panActivationKeyCode:y,zoomActivationKeyCode:v,elementsSelectable:w,zoomOnScroll:x,zoomOnPinch:E,panOnScroll:S,panOnScrollSpeed:N,panOnScrollMode:A,zoomOnDoubleClick:k,panOnDrag:j,defaultViewport:I,translateExtent:z,minZoom:D,maxZoom:b,preventScrolling:P,onSelectionContextMenu:T,noWheelClassName:F,noPanClassName:M,disableKeyboardA11y:R})=>{const $=Se(Y4),q=Wa(d),L=Wa(y),H=L||j,U=L||S,V=q||f&&H!==!0;return O4({deleteKeyCode:o,multiSelectionKeyCode:_}),O.createElement(F4,{onMove:l,onMoveStart:u,onMoveEnd:c,onPaneContextMenu:s,elementsSelectable:w,zoomOnScroll:x,zoomOnPinch:E,panOnScroll:U,panOnScrollSpeed:N,panOnScrollMode:A,zoomOnDoubleClick:k,panOnDrag:!q&&H,defaultViewport:I,translateExtent:z,minZoom:D,maxZoom:b,zoomActivationKeyCode:v,preventScrolling:P,noWheelClassName:F,noPanClassName:M},O.createElement(a2,{onSelectionStart:g,onSelectionEnd:m,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:a,panOnDrag:H,isSelecting:!!V,selectionMode:h},e,$&&O.createElement(X4,{onSelectionContextMenu:T,noPanClassName:M,disableKeyboardA11y:R})))};d2.displayName="FlowRenderer";var Q4=C.memo(d2);function J4(e){return Se(C.useCallback(n=>e?DR(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function Z4(e){const t={input:Bs(e.input||XR),default:Bs(e.default||dv),output:Bs(e.output||QR),group:Bs(e.group||Hy)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,s)=>(i[s]=Bs(e[s]||dv),i),n);return{...t,...r}}const eF=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},tF=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),f2=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:s,onError:a}=Se(tF,Je),o=J4(e.onlyRenderVisibleElements),l=C.useRef(),u=C.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const c=new ResizeObserver(d=>{const f=d.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));s(f)});return l.current=c,c},[]);return C.useEffect(()=>()=>{var c;(c=l==null?void 0:l.current)==null||c.disconnect()},[]),O.createElement("div",{className:"react-flow__nodes",style:Gy},o.map(c=>{var E,S,N;let d=c.type||"default";e.nodeTypes[d]||(a==null||a("003",Xn.error003(d)),d="default");const f=e.nodeTypes[d]||e.nodeTypes.default,h=!!(c.draggable||t&&typeof c.draggable>"u"),g=!!(c.selectable||i&&typeof c.selectable>"u"),m=!!(c.connectable||n&&typeof c.connectable>"u"),_=!!(c.focusable||r&&typeof c.focusable>"u"),y=e.nodeExtent?$y(c.positionAbsolute,e.nodeExtent):c.positionAbsolute,v=(y==null?void 0:y.x)??0,w=(y==null?void 0:y.y)??0,x=eF({x:v,y:w,width:c.width??0,height:c.height??0,origin:e.nodeOrigin});return O.createElement(f,{key:c.id,id:c.id,className:c.className,style:c.style,type:d,data:c.data,sourcePosition:c.sourcePosition||Y.Bottom,targetPosition:c.targetPosition||Y.Top,hidden:c.hidden,xPos:v,yPos:w,xPosOrigin:x.x,yPosOrigin:x.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!c.selected,isDraggable:h,isSelectable:g,isConnectable:m,isFocusable:_,resizeObserver:u,dragHandle:c.dragHandle,zIndex:((E=c[Ne])==null?void 0:E.z)??0,isParent:!!((S=c[Ne])!=null&&S.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!c.width&&!!c.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:c.ariaLabel,hasHandleBounds:!!((N=c[Ne])!=null&&N.handleBounds)})}))};f2.displayName="NodeRenderer";var nF=C.memo(f2);const rF=(e,t,n)=>n===Y.Left?e-t:n===Y.Right?e+t:e,iF=(e,t,n)=>n===Y.Top?e-t:n===Y.Bottom?e+t:e,Hw="react-flow__edgeupdater",Vw=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:a,type:o})=>O.createElement("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:a,className:at([Hw,`${Hw}-${o}`]),cx:rF(t,r,e),cy:iF(n,r,e),r,stroke:"transparent",fill:"transparent"}),sF=()=>!0;var Si=e=>{const t=({id:n,className:r,type:i,data:s,onClick:a,onEdgeDoubleClick:o,selected:l,animated:u,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m,style:_,source:y,target:v,sourceX:w,sourceY:x,targetX:E,targetY:S,sourcePosition:N,targetPosition:A,elementsSelectable:k,hidden:j,sourceHandleId:I,targetHandleId:z,onContextMenu:D,onMouseEnter:b,onMouseMove:P,onMouseLeave:T,reconnectRadius:F,onReconnect:M,onReconnectStart:R,onReconnectEnd:$,markerEnd:q,markerStart:L,rfId:H,ariaLabel:U,isFocusable:V,isReconnectable:Q,pathOptions:te,interactionWidth:le,disableKeyboardA11y:ge})=>{const fe=C.useRef(null),[wt,ot]=C.useState(!1),[xt,lt]=C.useState(!1),J=De(),Ze=C.useMemo(()=>`url('#${uv(L,H)}')`,[L,H]),X=C.useMemo(()=>`url('#${uv(q,H)}')`,[q,H]);if(j)return null;const W=$e=>{var fn;const{edges:ct,addSelectedEdges:Ge,unselectNodesAndEdges:tt,multiSelectionActive:Dr}=J.getState(),Pn=ct.find(Rs=>Rs.id===n);Pn&&(k&&(J.setState({nodesSelectionActive:!1}),Pn.selected&&Dr?(tt({nodes:[],edges:[Pn]}),(fn=fe.current)==null||fn.blur()):Ge([n])),a&&a($e,Pn))},Re=Ds(n,J.getState,o),Rn=Ds(n,J.getState,D),cn=Ds(n,J.getState,b),et=Ds(n,J.getState,P),Ce=Ds(n,J.getState,T),ut=($e,ct)=>{if($e.button!==0)return;const{edges:Ge,isValidConnection:tt}=J.getState(),Dr=ct?v:y,Pn=(ct?z:I)||null,fn=ct?"target":"source",Rs=tt||sF,lc=ct,js=Ge.find(zr=>zr.id===n);lt(!0),R==null||R($e,js,fn);const uc=zr=>{lt(!1),$==null||$(zr,js,fn)};VR({event:$e,handleId:Pn,nodeId:Dr,onConnect:zr=>M==null?void 0:M(js,zr),isTarget:lc,getState:J.getState,setState:J.setState,isValidConnection:Rs,edgeUpdaterType:fn,onReconnectEnd:uc})},Ht=$e=>ut($e,!0),jn=$e=>ut($e,!1),dn=()=>ot(!0),bt=()=>ot(!1),An=!k&&!a,er=$e=>{var ct;if(!ge&&IR.includes($e.key)&&k){const{unselectNodesAndEdges:Ge,addSelectedEdges:tt,edges:Dr}=J.getState();$e.key==="Escape"?((ct=fe.current)==null||ct.blur(),Ge({edges:[Dr.find(fn=>fn.id===n)]})):tt([n])}};return O.createElement("g",{className:at(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:l,animated:u,inactive:An,updating:wt}]),onClick:W,onDoubleClick:Re,onContextMenu:Rn,onMouseEnter:cn,onMouseMove:et,onMouseLeave:Ce,onKeyDown:V?er:void 0,tabIndex:V?0:void 0,role:V?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":U===null?void 0:U||`Edge from ${y} to ${v}`,"aria-describedby":V?`${e2}-${H}`:void 0,ref:fe},!xt&&O.createElement(e,{id:n,source:y,target:v,selected:l,animated:u,label:c,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:m,data:s,style:_,sourceX:w,sourceY:x,targetX:E,targetY:S,sourcePosition:N,targetPosition:A,sourceHandleId:I,targetHandleId:z,markerStart:Ze,markerEnd:X,pathOptions:te,interactionWidth:le}),Q&&O.createElement(O.Fragment,null,(Q==="source"||Q===!0)&&O.createElement(Vw,{position:N,centerX:w,centerY:x,radius:F,onMouseDown:Ht,onMouseEnter:dn,onMouseOut:bt,type:"source"}),(Q==="target"||Q===!0)&&O.createElement(Vw,{position:A,centerX:E,centerY:S,radius:F,onMouseDown:jn,onMouseEnter:dn,onMouseOut:bt,type:"target"})))};return t.displayName="EdgeWrapper",C.memo(t)};function aF(e){const t={default:Si(e.default||ru),straight:Si(e.bezier||Dy),step:Si(e.step||Fy),smoothstep:Si(e.step||qu),simplebezier:Si(e.simplebezier||Ly)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,s)=>(i[s]=Si(e[s]||ru),i),n);return{...t,...r}}function Gw(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,i=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,a=(n==null?void 0:n.height)||t.height;switch(e){case Y.Top:return{x:r+s/2,y:i};case Y.Right:return{x:r+s,y:i+a/2};case Y.Bottom:return{x:r+s/2,y:i+a};case Y.Left:return{x:r,y:i+a/2}}}function Ww(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const oF=(e,t,n,r,i,s)=>{const a=Gw(n,e,t),o=Gw(s,r,i);return{sourceX:a.x,sourceY:a.y,targetX:o.x,targetY:o.y}};function lF({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:s,width:a,height:o,transform:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=qy({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:a/l[2],height:o/l[2]}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*f)>0}function Kw(e){var r,i,s,a,o;const t=((r=e==null?void 0:e[Ne])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)||0,y:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const uF=[{level:0,isMaxLevel:!0,edges:[]}];function cF(e,t,n=!1){let r=-1;const i=e.reduce((a,o)=>{var c,d;const l=Lt(o.zIndex);let u=l?o.zIndex:0;if(n){const f=t.get(o.target),h=t.get(o.source),g=o.selected||(f==null?void 0:f.selected)||(h==null?void 0:h.selected),m=Math.max(((c=h==null?void 0:h[Ne])==null?void 0:c.z)||0,((d=f==null?void 0:f[Ne])==null?void 0:d.z)||0,1e3);u=(l?o.zIndex:0)+(g?m:0)}return a[u]?a[u].push(o):a[u]=[o],r=u>r?u:r,a},{}),s=Object.entries(i).map(([a,o])=>{const l=+a;return{edges:o,level:l,isMaxLevel:l===r}});return s.length===0?uF:s}function dF(e,t,n){const r=Se(C.useCallback(i=>e?i.edges.filter(s=>{const a=t.get(s.source),o=t.get(s.target);return(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&lF({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:o.width,targetHeight:o.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return cF(r,t,n)}const fF=({color:e="none",strokeWidth:t=1})=>O.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),hF=({color:e="none",strokeWidth:t=1})=>O.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Xw={[nu.Arrow]:fF,[nu.ArrowClosed]:hF};function pF(e){const t=De();return C.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(Xw,e)?Xw[e]:((s=(i=t.getState()).onError)==null||s.call(i,"009",Xn.error009(e)),null)},[e])}const mF=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:a,orient:o="auto-start-reverse"})=>{const l=pF(t);return l?O.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0"},O.createElement(l,{color:n,strokeWidth:a})):null},gF=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,s)=>([s.markerStart,s.markerEnd].forEach(a=>{if(a&&typeof a=="object"){const o=uv(a,t);r.includes(o)||(i.push({id:o,color:a.color||e,...a}),r.push(o))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))},h2=({defaultColor:e,rfId:t})=>{const n=Se(C.useCallback(gF({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((s,a)=>s.id!==i[a].id)));return O.createElement("defs",null,n.map(r=>O.createElement(mF,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};h2.displayName="MarkerDefinitions";var vF=C.memo(h2);const yF=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),p2=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:s,onEdgeContextMenu:a,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:c,onEdgeDoubleClick:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:g,reconnectRadius:m,children:_,disableKeyboardA11y:y})=>{const{edgesFocusable:v,edgesUpdatable:w,elementsSelectable:x,width:E,height:S,connectionMode:N,nodeInternals:A,onError:k}=Se(yF,Je),j=dF(t,A,n);return E?O.createElement(O.Fragment,null,j.map(({level:I,edges:z,isMaxLevel:D})=>O.createElement("svg",{key:I,style:{zIndex:I},width:E,height:S,className:"react-flow__edges react-flow__container"},D&&O.createElement(vF,{defaultColor:e,rfId:r}),O.createElement("g",null,z.map(b=>{const[P,T,F]=Kw(A.get(b.source)),[M,R,$]=Kw(A.get(b.target));if(!F||!$)return null;let q=b.type||"default";i[q]||(k==null||k("011",Xn.error011(q)),q="default");const L=i[q]||i.default,H=N===Mr.Strict?R.target:(R.target??[]).concat(R.source??[]),U=Ww(T.source,b.sourceHandle),V=Ww(H,b.targetHandle),Q=(U==null?void 0:U.position)||Y.Bottom,te=(V==null?void 0:V.position)||Y.Top,le=!!(b.focusable||v&&typeof b.focusable>"u"),ge=b.reconnectable||b.updatable,fe=typeof f<"u"&&(ge||w&&typeof ge>"u");if(!U||!V)return k==null||k("008",Xn.error008(U,b)),null;const{sourceX:wt,sourceY:ot,targetX:xt,targetY:lt}=oF(P,U,Q,M,V,te);return O.createElement(L,{key:b.id,id:b.id,className:at([b.className,s]),type:q,data:b.data,selected:!!b.selected,animated:!!b.animated,hidden:!!b.hidden,label:b.label,labelStyle:b.labelStyle,labelShowBg:b.labelShowBg,labelBgStyle:b.labelBgStyle,labelBgPadding:b.labelBgPadding,labelBgBorderRadius:b.labelBgBorderRadius,style:b.style,source:b.source,target:b.target,sourceHandleId:b.sourceHandle,targetHandleId:b.targetHandle,markerEnd:b.markerEnd,markerStart:b.markerStart,sourceX:wt,sourceY:ot,targetX:xt,targetY:lt,sourcePosition:Q,targetPosition:te,elementsSelectable:x,onContextMenu:a,onMouseEnter:o,onMouseMove:l,onMouseLeave:u,onClick:c,onEdgeDoubleClick:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:g,reconnectRadius:m,rfId:r,ariaLabel:b.ariaLabel,isFocusable:le,isReconnectable:fe,pathOptions:"pathOptions"in b?b.pathOptions:void 0,interactionWidth:b.interactionWidth,disableKeyboardA11y:y})})))),_):null};p2.displayName="EdgeRenderer";var _F=C.memo(p2);const wF=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function xF({children:e}){const t=Se(wF);return O.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function bF(e){const t=Vy(),n=C.useRef(!1);C.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const SF={[Y.Left]:Y.Right,[Y.Right]:Y.Left,[Y.Top]:Y.Bottom,[Y.Bottom]:Y.Top},m2=({nodeId:e,handleType:t,style:n,type:r=pr.Bezier,CustomComponent:i,connectionStatus:s})=>{var S,N,A;const{fromNode:a,handleId:o,toX:l,toY:u,connectionMode:c}=Se(C.useCallback(k=>({fromNode:k.nodeInternals.get(e),handleId:k.connectionHandleId,toX:(k.connectionPosition.x-k.transform[0])/k.transform[2],toY:(k.connectionPosition.y-k.transform[1])/k.transform[2],connectionMode:k.connectionMode}),[e]),Je),d=(S=a==null?void 0:a[Ne])==null?void 0:S.handleBounds;let f=d==null?void 0:d[t];if(c===Mr.Loose&&(f=f||(d==null?void 0:d[t==="source"?"target":"source"])),!a||!f)return null;const h=o?f.find(k=>k.id===o):f[0],g=h?h.x+h.width/2:(a.width??0)/2,m=h?h.y+h.height/2:a.height??0,_=(((N=a.positionAbsolute)==null?void 0:N.x)??0)+g,y=(((A=a.positionAbsolute)==null?void 0:A.y)??0)+m,v=h==null?void 0:h.position,w=v?SF[v]:null;if(!v||!w)return null;if(i)return O.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:a,fromHandle:h,fromX:_,fromY:y,toX:l,toY:u,fromPosition:v,toPosition:w,connectionStatus:s});let x="";const E={sourceX:_,sourceY:y,sourcePosition:v,targetX:l,targetY:u,targetPosition:w};return r===pr.Bezier?[x]=LR(E):r===pr.Step?[x]=lv({...E,borderRadius:0}):r===pr.SmoothStep?[x]=lv(E):r===pr.SimpleBezier?[x]=qR(E):x=`M${_},${y} ${l},${u}`,O.createElement("path",{d:x,fill:"none",className:"react-flow__connection-path",style:n})};m2.displayName="ConnectionLine";const EF=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function NF({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:s,nodesConnectable:a,width:o,height:l,connectionStatus:u}=Se(EF,Je);return!(i&&s&&o&&a)?null:O.createElement("svg",{style:e,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},O.createElement("g",{className:at(["react-flow__connection",u])},O.createElement(m2,{nodeId:i,handleType:s,style:t,type:n,CustomComponent:r,connectionStatus:u})))}function Yw(e,t){return C.useRef(null),De(),C.useMemo(()=>t(e),[e])}const g2=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:s,onNodeClick:a,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,onSelectionContextMenu:g,onSelectionStart:m,onSelectionEnd:_,connectionLineType:y,connectionLineStyle:v,connectionLineComponent:w,connectionLineContainerStyle:x,selectionKeyCode:E,selectionOnDrag:S,selectionMode:N,multiSelectionKeyCode:A,panActivationKeyCode:k,zoomActivationKeyCode:j,deleteKeyCode:I,onlyRenderVisibleElements:z,elementsSelectable:D,selectNodesOnDrag:b,defaultViewport:P,translateExtent:T,minZoom:F,maxZoom:M,preventScrolling:R,defaultMarkerColor:$,zoomOnScroll:q,zoomOnPinch:L,panOnScroll:H,panOnScrollSpeed:U,panOnScrollMode:V,zoomOnDoubleClick:Q,panOnDrag:te,onPaneClick:le,onPaneMouseEnter:ge,onPaneMouseMove:fe,onPaneMouseLeave:wt,onPaneScroll:ot,onPaneContextMenu:xt,onEdgeContextMenu:lt,onEdgeMouseEnter:J,onEdgeMouseMove:Ze,onEdgeMouseLeave:X,onReconnect:W,onReconnectStart:Re,onReconnectEnd:Rn,reconnectRadius:cn,noDragClassName:et,noWheelClassName:Ce,noPanClassName:ut,elevateEdgesOnSelect:Ht,disableKeyboardA11y:jn,nodeOrigin:dn,nodeExtent:bt,rfId:An})=>{const er=Yw(e,Z4),$e=Yw(t,aF);return bF(s),O.createElement(Q4,{onPaneClick:le,onPaneMouseEnter:ge,onPaneMouseMove:fe,onPaneMouseLeave:wt,onPaneContextMenu:xt,onPaneScroll:ot,deleteKeyCode:I,selectionKeyCode:E,selectionOnDrag:S,selectionMode:N,onSelectionStart:m,onSelectionEnd:_,multiSelectionKeyCode:A,panActivationKeyCode:k,zoomActivationKeyCode:j,elementsSelectable:D,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:q,zoomOnPinch:L,zoomOnDoubleClick:Q,panOnScroll:H,panOnScrollSpeed:U,panOnScrollMode:V,panOnDrag:te,defaultViewport:P,translateExtent:T,minZoom:F,maxZoom:M,onSelectionContextMenu:g,preventScrolling:R,noDragClassName:et,noWheelClassName:Ce,noPanClassName:ut,disableKeyboardA11y:jn},O.createElement(xF,null,O.createElement(_F,{edgeTypes:$e,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:z,onEdgeContextMenu:lt,onEdgeMouseEnter:J,onEdgeMouseMove:Ze,onEdgeMouseLeave:X,onReconnect:W,onReconnectStart:Re,onReconnectEnd:Rn,reconnectRadius:cn,defaultMarkerColor:$,noPanClassName:ut,elevateEdgesOnSelect:!!Ht,disableKeyboardA11y:jn,rfId:An},O.createElement(NF,{style:v,type:y,component:w,containerStyle:x})),O.createElement("div",{className:"react-flow__edgelabel-renderer"}),O.createElement(nF,{nodeTypes:er,onNodeClick:a,onNodeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,selectNodesOnDrag:b,onlyRenderVisibleElements:z,noPanClassName:ut,noDragClassName:et,disableKeyboardA11y:jn,nodeOrigin:dn,nodeExtent:bt,rfId:An})))};g2.displayName="GraphView";var CF=C.memo(g2);const hv=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nr={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:hv,nodeExtent:hv,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Mr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:e4,isValidConnection:void 0},kF=()=>h3((e,t)=>({...nr,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:s}=t();e({nodeInternals:Hc(n,r,i,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",s=typeof r<"u",a=i?Hc(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:a,edges:s?r:[],hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:s,fitViewOnInitDone:a,fitViewOnInitOptions:o,domNode:l,nodeOrigin:u}=t(),c=l==null?void 0:l.querySelector(".react-flow__viewport");if(!c)return;const d=window.getComputedStyle(c),{m22:f}=new window.DOMMatrixReadOnly(d.transform),h=n.reduce((m,_)=>{const y=i.get(_.id);if(y!=null&&y.hidden)i.set(y.id,{...y,[Ne]:{...y[Ne],handleBounds:void 0}});else if(y){const v=Oy(_.nodeElement);!!(v.width&&v.height&&(y.width!==v.width||y.height!==v.height||_.forceUpdate))&&(i.set(y.id,{...y,[Ne]:{...y[Ne],handleBounds:{source:Uw(".source",_.nodeElement,f,u),target:Uw(".target",_.nodeElement,f,u)}},...v}),m.push({id:y.id,type:"dimensions",dimensions:v}))}return m},[]);n2(i,u);const g=a||s&&!a&&r2(t,{initial:!0,...o});e({nodeInternals:new Map(i),fitViewOnInitDone:g}),(h==null?void 0:h.length)>0&&(r==null||r(h))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:s}=t(),a=n.map(o=>{const l={id:o.id,type:"position",dragging:i};return r&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});s(a)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:s,nodeOrigin:a,getNodes:o,elevateNodesOnSelect:l}=t();if(n!=null&&n.length){if(s){const u=s2(n,o()),c=Hc(u,i,a,l);e({nodeInternals:c})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=t();let a,o=null;r?a=n.map(l=>dr(l,!0)):(a=zi(s(),n),o=zi(i,[])),Ho({changedNodes:a,changedEdges:o,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=t();let a,o=null;r?a=n.map(l=>dr(l,!0)):(a=zi(i,n),o=zi(s(),[])),Ho({changedNodes:o,changedEdges:a,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:s}=t(),a=n||s(),o=r||i,l=a.map(c=>(c.selected=!1,dr(c.id,!1))),u=o.map(c=>dr(c.id,!1));Ho({changedNodes:l,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r==null||r.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r==null||r.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),s=r().filter(o=>o.selected).map(o=>dr(o.id,!1)),a=n.filter(o=>o.selected).map(o=>dr(o.id,!1));Ho({changedNodes:s,changedEdges:a,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=$y(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:s,d3Zoom:a,d3Selection:o,translateExtent:l}=t();if(!a||!o||!n.x&&!n.y)return!1;const u=Rr.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),c=[[0,0],[i,s]],d=a==null?void 0:a.constrain()(u,c,l);return a.transform(o,d),r[0]!==d.x||r[1]!==d.y||r[2]!==d.k},cancelConnection:()=>e({connectionNodeId:nr.connectionNodeId,connectionHandleId:nr.connectionHandleId,connectionHandleType:nr.connectionHandleType,connectionStatus:nr.connectionStatus,connectionStartHandle:nr.connectionStartHandle,connectionEndHandle:nr.connectionEndHandle}),reset:()=>e({...nr})}),Object.is),v2=({children:e})=>{const t=C.useRef(null);return t.current||(t.current=kF()),O.createElement(GL,{value:t.current},e)};v2.displayName="ReactFlowProvider";const y2=({children:e})=>C.useContext($u)?O.createElement(O.Fragment,null,e):O.createElement(v2,null,e);y2.displayName="ReactFlowWrapper";const RF={input:XR,default:dv,output:QR,group:Hy},jF={default:ru,straight:Dy,step:Fy,smoothstep:qu,simplebezier:Ly},AF=[0,0],PF=[15,15],TF={x:0,y:0,zoom:1},IF={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},_2=C.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s=RF,edgeTypes:a=jF,onNodeClick:o,onEdgeClick:l,onInit:u,onMove:c,onMoveStart:d,onMoveEnd:f,onConnect:h,onConnectStart:g,onConnectEnd:m,onClickConnectStart:_,onClickConnectEnd:y,onNodeMouseEnter:v,onNodeMouseMove:w,onNodeMouseLeave:x,onNodeContextMenu:E,onNodeDoubleClick:S,onNodeDragStart:N,onNodeDrag:A,onNodeDragStop:k,onNodesDelete:j,onEdgesDelete:I,onSelectionChange:z,onSelectionDragStart:D,onSelectionDrag:b,onSelectionDragStop:P,onSelectionContextMenu:T,onSelectionStart:F,onSelectionEnd:M,connectionMode:R=Mr.Strict,connectionLineType:$=pr.Bezier,connectionLineStyle:q,connectionLineComponent:L,connectionLineContainerStyle:H,deleteKeyCode:U="Backspace",selectionKeyCode:V="Shift",selectionOnDrag:Q=!1,selectionMode:te=Ga.Full,panActivationKeyCode:le="Space",multiSelectionKeyCode:ge=tu()?"Meta":"Control",zoomActivationKeyCode:fe=tu()?"Meta":"Control",snapToGrid:wt=!1,snapGrid:ot=PF,onlyRenderVisibleElements:xt=!1,selectNodesOnDrag:lt=!0,nodesDraggable:J,nodesConnectable:Ze,nodesFocusable:X,nodeOrigin:W=AF,edgesFocusable:Re,edgesUpdatable:Rn,elementsSelectable:cn,defaultViewport:et=TF,minZoom:Ce=.5,maxZoom:ut=2,translateExtent:Ht=hv,preventScrolling:jn=!0,nodeExtent:dn,defaultMarkerColor:bt="#b1b1b7",zoomOnScroll:An=!0,zoomOnPinch:er=!0,panOnScroll:$e=!1,panOnScrollSpeed:ct=.5,panOnScrollMode:Ge=Yr.Free,zoomOnDoubleClick:tt=!0,panOnDrag:Dr=!0,onPaneClick:Pn,onPaneMouseEnter:fn,onPaneMouseMove:Rs,onPaneMouseLeave:lc,onPaneScroll:js,onPaneContextMenu:uc,children:q0,onEdgeContextMenu:zr,onEdgeDoubleClick:lP,onEdgeMouseEnter:uP,onEdgeMouseMove:cP,onEdgeMouseLeave:dP,onEdgeUpdate:fP,onEdgeUpdateStart:hP,onEdgeUpdateEnd:pP,onReconnect:mP,onReconnectStart:gP,onReconnectEnd:vP,reconnectRadius:yP=10,edgeUpdaterRadius:_P=10,onNodesChange:wP,onEdgesChange:xP,noDragClassName:bP="nodrag",noWheelClassName:SP="nowheel",noPanClassName:L0="nopan",fitView:EP=!1,fitViewOptions:NP,connectOnClick:CP=!0,attributionPosition:kP,proOptions:RP,defaultEdgeOptions:jP,elevateNodesOnSelect:AP=!0,elevateEdgesOnSelect:PP=!1,disableKeyboardA11y:F0=!1,autoPanOnConnect:TP=!0,autoPanOnNodeDrag:IP=!0,connectionRadius:MP=20,isValidConnection:OP,onError:$P,style:qP,id:D0,nodeDragThreshold:LP,...FP},DP)=>{const cc=D0||"1";return O.createElement("div",{...FP,style:{...qP,...IF},ref:DP,className:at(["react-flow",i]),"data-testid":"rf__wrapper",id:D0},O.createElement(y2,null,O.createElement(CF,{onInit:u,onMove:c,onMoveStart:d,onMoveEnd:f,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:v,onNodeMouseMove:w,onNodeMouseLeave:x,onNodeContextMenu:E,onNodeDoubleClick:S,nodeTypes:s,edgeTypes:a,connectionLineType:$,connectionLineStyle:q,connectionLineComponent:L,connectionLineContainerStyle:H,selectionKeyCode:V,selectionOnDrag:Q,selectionMode:te,deleteKeyCode:U,multiSelectionKeyCode:ge,panActivationKeyCode:le,zoomActivationKeyCode:fe,onlyRenderVisibleElements:xt,selectNodesOnDrag:lt,defaultViewport:et,translateExtent:Ht,minZoom:Ce,maxZoom:ut,preventScrolling:jn,zoomOnScroll:An,zoomOnPinch:er,zoomOnDoubleClick:tt,panOnScroll:$e,panOnScrollSpeed:ct,panOnScrollMode:Ge,panOnDrag:Dr,onPaneClick:Pn,onPaneMouseEnter:fn,onPaneMouseMove:Rs,onPaneMouseLeave:lc,onPaneScroll:js,onPaneContextMenu:uc,onSelectionContextMenu:T,onSelectionStart:F,onSelectionEnd:M,onEdgeContextMenu:zr,onEdgeDoubleClick:lP,onEdgeMouseEnter:uP,onEdgeMouseMove:cP,onEdgeMouseLeave:dP,onReconnect:mP??fP,onReconnectStart:gP??hP,onReconnectEnd:vP??pP,reconnectRadius:yP??_P,defaultMarkerColor:bt,noDragClassName:bP,noWheelClassName:SP,noPanClassName:L0,elevateEdgesOnSelect:PP,rfId:cc,disableKeyboardA11y:F0,nodeOrigin:W,nodeExtent:dn}),O.createElement(S4,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:g,onConnectEnd:m,onClickConnectStart:_,onClickConnectEnd:y,nodesDraggable:J,nodesConnectable:Ze,nodesFocusable:X,edgesFocusable:Re,edgesUpdatable:Rn,elementsSelectable:cn,elevateNodesOnSelect:AP,minZoom:Ce,maxZoom:ut,nodeExtent:dn,onNodesChange:wP,onEdgesChange:xP,snapToGrid:wt,snapGrid:ot,connectionMode:R,translateExtent:Ht,connectOnClick:CP,defaultEdgeOptions:jP,fitView:EP,fitViewOptions:NP,onNodesDelete:j,onEdgesDelete:I,onNodeDragStart:N,onNodeDrag:A,onNodeDragStop:k,onSelectionDrag:b,onSelectionDragStart:D,onSelectionDragStop:P,noPanClassName:L0,nodeOrigin:W,rfId:cc,autoPanOnConnect:TP,autoPanOnNodeDrag:IP,onError:$P,connectionRadius:MP,isValidConnection:OP,nodeDragThreshold:LP}),O.createElement(x4,{onSelectionChange:z}),q0,O.createElement(KL,{proOptions:RP,position:kP}),O.createElement(R4,{rfId:cc,disableKeyboardA11y:F0})))});_2.displayName="ReactFlow";function w2(e){return t=>{const[n,r]=C.useState(t),i=C.useCallback(s=>r(a=>e(s,a)),[]);return[n,r,i]}}const MF=w2(s2),OF=w2(B4);function $F(){return O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},O.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function qF(){return O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},O.createElement("path",{d:"M0 0h32v4.2H0z"}))}function LF(){return O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},O.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function FF(){return O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},O.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function DF(){return O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},O.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Xs=({children:e,className:t,...n})=>O.createElement("button",{type:"button",className:at(["react-flow__controls-button",t]),...n},e);Xs.displayName="ControlButton";const zF=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),x2=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:a,onFitView:o,onInteractiveChange:l,className:u,children:c,position:d="bottom-left"})=>{const f=De(),[h,g]=C.useState(!1),{isInteractive:m,minZoomReached:_,maxZoomReached:y}=Se(zF,Je),{zoomIn:v,zoomOut:w,fitView:x}=Vy();if(C.useEffect(()=>{g(!0)},[]),!h)return null;const E=()=>{v(),s==null||s()},S=()=>{w(),a==null||a()},N=()=>{x(i),o==null||o()},A=()=>{f.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),l==null||l(!m)};return O.createElement(My,{className:at(["react-flow__controls",u]),position:d,style:e,"data-testid":"rf__controls"},t&&O.createElement(O.Fragment,null,O.createElement(Xs,{onClick:E,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},O.createElement($F,null)),O.createElement(Xs,{onClick:S,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:_},O.createElement(qF,null))),n&&O.createElement(Xs,{className:"react-flow__controls-fitview",onClick:N,title:"fit view","aria-label":"fit view"},O.createElement(LF,null)),r&&O.createElement(Xs,{className:"react-flow__controls-interactive",onClick:A,title:"toggle interactivity","aria-label":"toggle interactivity"},m?O.createElement(DF,null):O.createElement(FF,null)),c)};x2.displayName="Controls";var BF=C.memo(x2),rn;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(rn||(rn={}));function UF({color:e,dimensions:t,lineWidth:n}){return O.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function HF({color:e,radius:t}){return O.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const VF={[rn.Dots]:"#91919a",[rn.Lines]:"#eee",[rn.Cross]:"#e2e2e2"},GF={[rn.Dots]:1,[rn.Lines]:1,[rn.Cross]:6},WF=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function b2({id:e,variant:t=rn.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=2,color:a,style:o,className:l}){const u=C.useRef(null),{transform:c,patternId:d}=Se(WF,Je),f=a||VF[t],h=r||GF[t],g=t===rn.Dots,m=t===rn.Cross,_=Array.isArray(n)?n:[n,n],y=[_[0]*c[2]||1,_[1]*c[2]||1],v=h*c[2],w=m?[v,v]:y,x=g?[v/s,v/s]:[w[0]/s,w[1]/s];return O.createElement("svg",{className:at(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},O.createElement("pattern",{id:d+e,x:c[0]%y[0],y:c[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${x[0]},-${x[1]})`},g?O.createElement(HF,{color:f,radius:v/s}):O.createElement(UF,{dimensions:w,color:f,lineWidth:i})),O.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`}))}b2.displayName="Background";var KF=C.memo(b2);function Wy(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Kc,Qw;function XF(){if(Qw)return Kc;Qw=1;function e(){this.__data__=[],this.size=0}return Kc=e,Kc}var Xc,Jw;function ws(){if(Jw)return Xc;Jw=1;function e(t,n){return t===n||t!==t&&n!==n}return Xc=e,Xc}var Yc,Zw;function Lu(){if(Zw)return Yc;Zw=1;var e=ws();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return Yc=t,Yc}var Qc,ex;function YF(){if(ex)return Qc;ex=1;var e=Lu(),t=Array.prototype,n=t.splice;function r(i){var s=this.__data__,a=e(s,i);if(a<0)return!1;var o=s.length-1;return a==o?s.pop():n.call(s,a,1),--this.size,!0}return Qc=r,Qc}var Jc,tx;function QF(){if(tx)return Jc;tx=1;var e=Lu();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return Jc=t,Jc}var Zc,nx;function JF(){if(nx)return Zc;nx=1;var e=Lu();function t(n){return e(this.__data__,n)>-1}return Zc=t,Zc}var ed,rx;function ZF(){if(rx)return ed;rx=1;var e=Lu();function t(n,r){var i=this.__data__,s=e(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return ed=t,ed}var td,ix;function Fu(){if(ix)return td;ix=1;var e=XF(),t=YF(),n=QF(),r=JF(),i=ZF();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var u=a[o];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,td=s,td}var nd,sx;function eD(){if(sx)return nd;sx=1;var e=Fu();function t(){this.__data__=new e,this.size=0}return nd=t,nd}var rd,ax;function tD(){if(ax)return rd;ax=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return rd=e,rd}var id,ox;function nD(){if(ox)return id;ox=1;function e(t){return this.__data__.get(t)}return id=e,id}var sd,lx;function rD(){if(lx)return sd;lx=1;function e(t){return this.__data__.has(t)}return sd=e,sd}var ad,ux;function S2(){if(ux)return ad;ux=1;var e=typeof _o=="object"&&_o&&_o.Object===Object&&_o;return ad=e,ad}var od,cx;function on(){if(cx)return od;cx=1;var e=S2(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return od=n,od}var ld,dx;function xs(){if(dx)return ld;dx=1;var e=on(),t=e.Symbol;return ld=t,ld}var ud,fx;function iD(){if(fx)return ud;fx=1;var e=xs(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function s(a){var o=n.call(a,i),l=a[i];try{a[i]=void 0;var u=!0}catch{}var c=r.call(a);return u&&(o?a[i]=l:delete a[i]),c}return ud=s,ud}var cd,hx;function sD(){if(hx)return cd;hx=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return cd=n,cd}var dd,px;function hi(){if(px)return dd;px=1;var e=xs(),t=iD(),n=sD(),r="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function a(o){return o==null?o===void 0?i:r:s&&s in Object(o)?t(o):n(o)}return dd=a,dd}var fd,mx;function Bt(){if(mx)return fd;mx=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return fd=e,fd}var hd,gx;function oo(){if(gx)return hd;gx=1;var e=hi(),t=Bt(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function a(o){if(!t(o))return!1;var l=e(o);return l==r||l==i||l==n||l==s}return hd=a,hd}var pd,vx;function aD(){if(vx)return pd;vx=1;var e=on(),t=e["__core-js_shared__"];return pd=t,pd}var md,yx;function oD(){if(yx)return md;yx=1;var e=aD(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return md=n,md}var gd,_x;function E2(){if(_x)return gd;_x=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return gd=n,gd}var vd,wx;function lD(){if(wx)return vd;wx=1;var e=oo(),t=oD(),n=Bt(),r=E2(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=Function.prototype,o=Object.prototype,l=a.toString,u=o.hasOwnProperty,c=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!n(f)||t(f))return!1;var h=e(f)?c:s;return h.test(r(f))}return vd=d,vd}var yd,xx;function uD(){if(xx)return yd;xx=1;function e(t,n){return t==null?void 0:t[n]}return yd=e,yd}var _d,bx;function pi(){if(bx)return _d;bx=1;var e=lD(),t=uD();function n(r,i){var s=t(r,i);return e(s)?s:void 0}return _d=n,_d}var wd,Sx;function Ky(){if(Sx)return wd;Sx=1;var e=pi(),t=on(),n=e(t,"Map");return wd=n,wd}var xd,Ex;function Du(){if(Ex)return xd;Ex=1;var e=pi(),t=e(Object,"create");return xd=t,xd}var bd,Nx;function cD(){if(Nx)return bd;Nx=1;var e=Du();function t(){this.__data__=e?e(null):{},this.size=0}return bd=t,bd}var Sd,Cx;function dD(){if(Cx)return Sd;Cx=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Sd=e,Sd}var Ed,kx;function fD(){if(kx)return Ed;kx=1;var e=Du(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var a=this.__data__;if(e){var o=a[s];return o===t?void 0:o}return r.call(a,s)?a[s]:void 0}return Ed=i,Ed}var Nd,Rx;function hD(){if(Rx)return Nd;Rx=1;var e=Du(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var s=this.__data__;return e?s[i]!==void 0:n.call(s,i)}return Nd=r,Nd}var Cd,jx;function pD(){if(jx)return Cd;jx=1;var e=Du(),t="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=e&&i===void 0?t:i,this}return Cd=n,Cd}var kd,Ax;function mD(){if(Ax)return kd;Ax=1;var e=cD(),t=dD(),n=fD(),r=hD(),i=pD();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var u=a[o];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,kd=s,kd}var Rd,Px;function gD(){if(Px)return Rd;Px=1;var e=mD(),t=Fu(),n=Ky();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Rd=r,Rd}var jd,Tx;function vD(){if(Tx)return jd;Tx=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return jd=e,jd}var Ad,Ix;function zu(){if(Ix)return Ad;Ix=1;var e=vD();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Ad=t,Ad}var Pd,Mx;function yD(){if(Mx)return Pd;Mx=1;var e=zu();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Pd=t,Pd}var Td,Ox;function _D(){if(Ox)return Td;Ox=1;var e=zu();function t(n){return e(this,n).get(n)}return Td=t,Td}var Id,$x;function wD(){if($x)return Id;$x=1;var e=zu();function t(n){return e(this,n).has(n)}return Id=t,Id}var Md,qx;function xD(){if(qx)return Md;qx=1;var e=zu();function t(n,r){var i=e(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return Md=t,Md}var Od,Lx;function Xy(){if(Lx)return Od;Lx=1;var e=gD(),t=yD(),n=_D(),r=wD(),i=xD();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var u=a[o];this.set(u[0],u[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Od=s,Od}var $d,Fx;function bD(){if(Fx)return $d;Fx=1;var e=Fu(),t=Ky(),n=Xy(),r=200;function i(s,a){var o=this.__data__;if(o instanceof e){var l=o.__data__;if(!t||l.length<r-1)return l.push([s,a]),this.size=++o.size,this;o=this.__data__=new n(l)}return o.set(s,a),this.size=o.size,this}return $d=i,$d}var qd,Dx;function Bu(){if(Dx)return qd;Dx=1;var e=Fu(),t=eD(),n=tD(),r=nD(),i=rD(),s=bD();function a(o){var l=this.__data__=new e(o);this.size=l.size}return a.prototype.clear=t,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,qd=a,qd}var Ld,zx;function Yy(){if(zx)return Ld;zx=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Ld=e,Ld}var Fd,Bx;function N2(){if(Bx)return Fd;Bx=1;var e=pi(),t=function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}}();return Fd=t,Fd}var Dd,Ux;function Uu(){if(Ux)return Dd;Ux=1;var e=N2();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Dd=t,Dd}var zd,Hx;function Hu(){if(Hx)return zd;Hx=1;var e=Uu(),t=ws(),n=Object.prototype,r=n.hasOwnProperty;function i(s,a,o){var l=s[a];(!(r.call(s,a)&&t(l,o))||o===void 0&&!(a in s))&&e(s,a,o)}return zd=i,zd}var Bd,Vx;function lo(){if(Vx)return Bd;Vx=1;var e=Hu(),t=Uu();function n(r,i,s,a){var o=!s;s||(s={});for(var l=-1,u=i.length;++l<u;){var c=i[l],d=a?a(s[c],r[c],c,s,r):void 0;d===void 0&&(d=r[c]),o?t(s,c,d):e(s,c,d)}return s}return Bd=n,Bd}var Ud,Gx;function SD(){if(Gx)return Ud;Gx=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return Ud=e,Ud}var Hd,Wx;function kn(){if(Wx)return Hd;Wx=1;function e(t){return t!=null&&typeof t=="object"}return Hd=e,Hd}var Vd,Kx;function ED(){if(Kx)return Vd;Kx=1;var e=hi(),t=kn(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return Vd=r,Vd}var Gd,Xx;function uo(){if(Xx)return Gd;Xx=1;var e=ED(),t=kn(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=e(function(){return arguments}())?e:function(a){return t(a)&&r.call(a,"callee")&&!i.call(a,"callee")};return Gd=s,Gd}var Wd,Yx;function Pe(){if(Yx)return Wd;Yx=1;var e=Array.isArray;return Wd=e,Wd}var Ys={exports:{}},Kd,Qx;function ND(){if(Qx)return Kd;Qx=1;function e(){return!1}return Kd=e,Kd}Ys.exports;var Jx;function bs(){return Jx||(Jx=1,function(e,t){var n=on(),r=ND(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,a=s&&s.exports===i,o=a?n.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||r;e.exports=u}(Ys,Ys.exports)),Ys.exports}var Xd,Zx;function Vu(){if(Zx)return Xd;Zx=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return Xd=n,Xd}var Yd,e1;function Qy(){if(e1)return Yd;e1=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Yd=t,Yd}var Qd,t1;function CD(){if(t1)return Qd;t1=1;var e=hi(),t=Qy(),n=kn(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",a="[object Date]",o="[object Error]",l="[object Function]",u="[object Map]",c="[object Number]",d="[object Object]",f="[object RegExp]",h="[object Set]",g="[object String]",m="[object WeakMap]",_="[object ArrayBuffer]",y="[object DataView]",v="[object Float32Array]",w="[object Float64Array]",x="[object Int8Array]",E="[object Int16Array]",S="[object Int32Array]",N="[object Uint8Array]",A="[object Uint8ClampedArray]",k="[object Uint16Array]",j="[object Uint32Array]",I={};I[v]=I[w]=I[x]=I[E]=I[S]=I[N]=I[A]=I[k]=I[j]=!0,I[r]=I[i]=I[_]=I[s]=I[y]=I[a]=I[o]=I[l]=I[u]=I[c]=I[d]=I[f]=I[h]=I[g]=I[m]=!1;function z(D){return n(D)&&t(D.length)&&!!I[e(D)]}return Qd=z,Qd}var Jd,n1;function Gu(){if(n1)return Jd;n1=1;function e(t){return function(n){return t(n)}}return Jd=e,Jd}var Qs={exports:{}};Qs.exports;var r1;function Jy(){return r1||(r1=1,function(e,t){var n=S2(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,a=s&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();e.exports=o}(Qs,Qs.exports)),Qs.exports}var Zd,i1;function co(){if(i1)return Zd;i1=1;var e=CD(),t=Gu(),n=Jy(),r=n&&n.isTypedArray,i=r?t(r):e;return Zd=i,Zd}var ef,s1;function C2(){if(s1)return ef;s1=1;var e=SD(),t=uo(),n=Pe(),r=bs(),i=Vu(),s=co(),a=Object.prototype,o=a.hasOwnProperty;function l(u,c){var d=n(u),f=!d&&t(u),h=!d&&!f&&r(u),g=!d&&!f&&!h&&s(u),m=d||f||h||g,_=m?e(u.length,String):[],y=_.length;for(var v in u)(c||o.call(u,v))&&!(m&&(v=="length"||h&&(v=="offset"||v=="parent")||g&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||i(v,y)))&&_.push(v);return _}return ef=l,ef}var tf,a1;function Wu(){if(a1)return tf;a1=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return tf=t,tf}var nf,o1;function k2(){if(o1)return nf;o1=1;function e(t,n){return function(r){return t(n(r))}}return nf=e,nf}var rf,l1;function kD(){if(l1)return rf;l1=1;var e=k2(),t=e(Object.keys,Object);return rf=t,rf}var sf,u1;function Zy(){if(u1)return sf;u1=1;var e=Wu(),t=kD(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!e(s))return t(s);var a=[];for(var o in Object(s))r.call(s,o)&&o!="constructor"&&a.push(o);return a}return sf=i,sf}var af,c1;function Jn(){if(c1)return af;c1=1;var e=oo(),t=Qy();function n(r){return r!=null&&t(r.length)&&!e(r)}return af=n,af}var of,d1;function Fr(){if(d1)return of;d1=1;var e=C2(),t=Zy(),n=Jn();function r(i){return n(i)?e(i):t(i)}return of=r,of}var lf,f1;function RD(){if(f1)return lf;f1=1;var e=lo(),t=Fr();function n(r,i){return r&&e(i,t(i),r)}return lf=n,lf}var uf,h1;function jD(){if(h1)return uf;h1=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return uf=e,uf}var cf,p1;function AD(){if(p1)return cf;p1=1;var e=Bt(),t=Wu(),n=jD(),r=Object.prototype,i=r.hasOwnProperty;function s(a){if(!e(a))return n(a);var o=t(a),l=[];for(var u in a)u=="constructor"&&(o||!i.call(a,u))||l.push(u);return l}return cf=s,cf}var df,m1;function mi(){if(m1)return df;m1=1;var e=C2(),t=AD(),n=Jn();function r(i){return n(i)?e(i,!0):t(i)}return df=r,df}var ff,g1;function PD(){if(g1)return ff;g1=1;var e=lo(),t=mi();function n(r,i){return r&&e(i,t(i),r)}return ff=n,ff}var Js={exports:{}};Js.exports;var v1;function R2(){return v1||(v1=1,function(e,t){var n=on(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,a=s?n.Buffer:void 0,o=a?a.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var d=u.length,f=o?o(d):new u.constructor(d);return u.copy(f),f}e.exports=l}(Js,Js.exports)),Js.exports}var hf,y1;function j2(){if(y1)return hf;y1=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return hf=e,hf}var pf,_1;function A2(){if(_1)return pf;_1=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=0,a=[];++r<i;){var o=t[r];n(o,r,t)&&(a[s++]=o)}return a}return pf=e,pf}var mf,w1;function P2(){if(w1)return mf;w1=1;function e(){return[]}return mf=e,mf}var gf,x1;function e0(){if(x1)return gf;x1=1;var e=A2(),t=P2(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(a){return a==null?[]:(a=Object(a),e(i(a),function(o){return r.call(a,o)}))}:t;return gf=s,gf}var vf,b1;function TD(){if(b1)return vf;b1=1;var e=lo(),t=e0();function n(r,i){return e(r,t(r),i)}return vf=n,vf}var yf,S1;function t0(){if(S1)return yf;S1=1;function e(t,n){for(var r=-1,i=n.length,s=t.length;++r<i;)t[s+r]=n[r];return t}return yf=e,yf}var _f,E1;function Ku(){if(E1)return _f;E1=1;var e=k2(),t=e(Object.getPrototypeOf,Object);return _f=t,_f}var wf,N1;function T2(){if(N1)return wf;N1=1;var e=t0(),t=Ku(),n=e0(),r=P2(),i=Object.getOwnPropertySymbols,s=i?function(a){for(var o=[];a;)e(o,n(a)),a=t(a);return o}:r;return wf=s,wf}var xf,C1;function ID(){if(C1)return xf;C1=1;var e=lo(),t=T2();function n(r,i){return e(r,t(r),i)}return xf=n,xf}var bf,k1;function I2(){if(k1)return bf;k1=1;var e=t0(),t=Pe();function n(r,i,s){var a=i(r);return t(r)?a:e(a,s(r))}return bf=n,bf}var Sf,R1;function M2(){if(R1)return Sf;R1=1;var e=I2(),t=e0(),n=Fr();function r(i){return e(i,n,t)}return Sf=r,Sf}var Ef,j1;function MD(){if(j1)return Ef;j1=1;var e=I2(),t=T2(),n=mi();function r(i){return e(i,n,t)}return Ef=r,Ef}var Nf,A1;function OD(){if(A1)return Nf;A1=1;var e=pi(),t=on(),n=e(t,"DataView");return Nf=n,Nf}var Cf,P1;function $D(){if(P1)return Cf;P1=1;var e=pi(),t=on(),n=e(t,"Promise");return Cf=n,Cf}var kf,T1;function O2(){if(T1)return kf;T1=1;var e=pi(),t=on(),n=e(t,"Set");return kf=n,kf}var Rf,I1;function qD(){if(I1)return Rf;I1=1;var e=pi(),t=on(),n=e(t,"WeakMap");return Rf=n,Rf}var jf,M1;function Ss(){if(M1)return jf;M1=1;var e=OD(),t=Ky(),n=$D(),r=O2(),i=qD(),s=hi(),a=E2(),o="[object Map]",l="[object Object]",u="[object Promise]",c="[object Set]",d="[object WeakMap]",f="[object DataView]",h=a(e),g=a(t),m=a(n),_=a(r),y=a(i),v=s;return(e&&v(new e(new ArrayBuffer(1)))!=f||t&&v(new t)!=o||n&&v(n.resolve())!=u||r&&v(new r)!=c||i&&v(new i)!=d)&&(v=function(w){var x=s(w),E=x==l?w.constructor:void 0,S=E?a(E):"";if(S)switch(S){case h:return f;case g:return o;case m:return u;case _:return c;case y:return d}return x}),jf=v,jf}var Af,O1;function LD(){if(O1)return Af;O1=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return Af=n,Af}var Pf,$1;function $2(){if($1)return Pf;$1=1;var e=on(),t=e.Uint8Array;return Pf=t,Pf}var Tf,q1;function n0(){if(q1)return Tf;q1=1;var e=$2();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return Tf=t,Tf}var If,L1;function FD(){if(L1)return If;L1=1;var e=n0();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return If=t,If}var Mf,F1;function DD(){if(F1)return Mf;F1=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return Mf=t,Mf}var Of,D1;function zD(){if(D1)return Of;D1=1;var e=xs(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Of=r,Of}var $f,z1;function q2(){if(z1)return $f;z1=1;var e=n0();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return $f=t,$f}var qf,B1;function BD(){if(B1)return qf;B1=1;var e=n0(),t=FD(),n=DD(),r=zD(),i=q2(),s="[object Boolean]",a="[object Date]",o="[object Map]",l="[object Number]",u="[object RegExp]",c="[object Set]",d="[object String]",f="[object Symbol]",h="[object ArrayBuffer]",g="[object DataView]",m="[object Float32Array]",_="[object Float64Array]",y="[object Int8Array]",v="[object Int16Array]",w="[object Int32Array]",x="[object Uint8Array]",E="[object Uint8ClampedArray]",S="[object Uint16Array]",N="[object Uint32Array]";function A(k,j,I){var z=k.constructor;switch(j){case h:return e(k);case s:case a:return new z(+k);case g:return t(k,I);case m:case _:case y:case v:case w:case x:case E:case S:case N:return i(k,I);case o:return new z;case l:case d:return new z(k);case u:return n(k);case c:return new z;case f:return r(k)}}return qf=A,qf}var Lf,U1;function L2(){if(U1)return Lf;U1=1;var e=Bt(),t=Object.create,n=function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}}();return Lf=n,Lf}var Ff,H1;function F2(){if(H1)return Ff;H1=1;var e=L2(),t=Ku(),n=Wu();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Ff=r,Ff}var Df,V1;function UD(){if(V1)return Df;V1=1;var e=Ss(),t=kn(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return Df=r,Df}var zf,G1;function HD(){if(G1)return zf;G1=1;var e=UD(),t=Gu(),n=Jy(),r=n&&n.isMap,i=r?t(r):e;return zf=i,zf}var Bf,W1;function VD(){if(W1)return Bf;W1=1;var e=Ss(),t=kn(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return Bf=r,Bf}var Uf,K1;function GD(){if(K1)return Uf;K1=1;var e=VD(),t=Gu(),n=Jy(),r=n&&n.isSet,i=r?t(r):e;return Uf=i,Uf}var Hf,X1;function D2(){if(X1)return Hf;X1=1;var e=Bu(),t=Yy(),n=Hu(),r=RD(),i=PD(),s=R2(),a=j2(),o=TD(),l=ID(),u=M2(),c=MD(),d=Ss(),f=LD(),h=BD(),g=F2(),m=Pe(),_=bs(),y=HD(),v=Bt(),w=GD(),x=Fr(),E=mi(),S=1,N=2,A=4,k="[object Arguments]",j="[object Array]",I="[object Boolean]",z="[object Date]",D="[object Error]",b="[object Function]",P="[object GeneratorFunction]",T="[object Map]",F="[object Number]",M="[object Object]",R="[object RegExp]",$="[object Set]",q="[object String]",L="[object Symbol]",H="[object WeakMap]",U="[object ArrayBuffer]",V="[object DataView]",Q="[object Float32Array]",te="[object Float64Array]",le="[object Int8Array]",ge="[object Int16Array]",fe="[object Int32Array]",wt="[object Uint8Array]",ot="[object Uint8ClampedArray]",xt="[object Uint16Array]",lt="[object Uint32Array]",J={};J[k]=J[j]=J[U]=J[V]=J[I]=J[z]=J[Q]=J[te]=J[le]=J[ge]=J[fe]=J[T]=J[F]=J[M]=J[R]=J[$]=J[q]=J[L]=J[wt]=J[ot]=J[xt]=J[lt]=!0,J[D]=J[b]=J[H]=!1;function Ze(X,W,Re,Rn,cn,et){var Ce,ut=W&S,Ht=W&N,jn=W&A;if(Re&&(Ce=cn?Re(X,Rn,cn,et):Re(X)),Ce!==void 0)return Ce;if(!v(X))return X;var dn=m(X);if(dn){if(Ce=f(X),!ut)return a(X,Ce)}else{var bt=d(X),An=bt==b||bt==P;if(_(X))return s(X,ut);if(bt==M||bt==k||An&&!cn){if(Ce=Ht||An?{}:g(X),!ut)return Ht?l(X,i(Ce,X)):o(X,r(Ce,X))}else{if(!J[bt])return cn?X:{};Ce=h(X,bt,ut)}}et||(et=new e);var er=et.get(X);if(er)return er;et.set(X,Ce),w(X)?X.forEach(function(Ge){Ce.add(Ze(Ge,W,Re,Ge,X,et))}):y(X)&&X.forEach(function(Ge,tt){Ce.set(tt,Ze(Ge,W,Re,tt,X,et))});var $e=jn?Ht?c:u:Ht?E:x,ct=dn?void 0:$e(X);return t(ct||X,function(Ge,tt){ct&&(tt=Ge,Ge=X[tt]),n(Ce,tt,Ze(Ge,W,Re,tt,X,et))}),Ce}return Hf=Ze,Hf}var Vf,Y1;function WD(){if(Y1)return Vf;Y1=1;var e=D2(),t=4;function n(r){return e(r,t)}return Vf=n,Vf}var Gf,Q1;function r0(){if(Q1)return Gf;Q1=1;function e(t){return function(){return t}}return Gf=e,Gf}var Wf,J1;function KD(){if(J1)return Wf;J1=1;function e(t){return function(n,r,i){for(var s=-1,a=Object(n),o=i(n),l=o.length;l--;){var u=o[t?l:++s];if(r(a[u],u,a)===!1)break}return n}}return Wf=e,Wf}var Kf,Z1;function i0(){if(Z1)return Kf;Z1=1;var e=KD(),t=e();return Kf=t,Kf}var Xf,eb;function s0(){if(eb)return Xf;eb=1;var e=i0(),t=Fr();function n(r,i){return r&&e(r,i,t)}return Xf=n,Xf}var Yf,tb;function XD(){if(tb)return Yf;tb=1;var e=Jn();function t(n,r){return function(i,s){if(i==null)return i;if(!e(i))return n(i,s);for(var a=i.length,o=r?a:-1,l=Object(i);(r?o--:++o<a)&&s(l[o],o,l)!==!1;);return i}}return Yf=t,Yf}var Qf,nb;function Xu(){if(nb)return Qf;nb=1;var e=s0(),t=XD(),n=t(e);return Qf=n,Qf}var Jf,rb;function gi(){if(rb)return Jf;rb=1;function e(t){return t}return Jf=e,Jf}var Zf,ib;function z2(){if(ib)return Zf;ib=1;var e=gi();function t(n){return typeof n=="function"?n:e}return Zf=t,Zf}var eh,sb;function B2(){if(sb)return eh;sb=1;var e=Yy(),t=Xu(),n=z2(),r=Pe();function i(s,a){var o=r(s)?e:t;return o(s,n(a))}return eh=i,eh}var th,ab;function U2(){return ab||(ab=1,th=B2()),th}var nh,ob;function YD(){if(ob)return nh;ob=1;var e=Xu();function t(n,r){var i=[];return e(n,function(s,a,o){r(s,a,o)&&i.push(s)}),i}return nh=t,nh}var rh,lb;function QD(){if(lb)return rh;lb=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return rh=t,rh}var ih,ub;function JD(){if(ub)return ih;ub=1;function e(t){return this.__data__.has(t)}return ih=e,ih}var sh,cb;function H2(){if(cb)return sh;cb=1;var e=Xy(),t=QD(),n=JD();function r(i){var s=-1,a=i==null?0:i.length;for(this.__data__=new e;++s<a;)this.add(i[s])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,sh=r,sh}var ah,db;function ZD(){if(db)return ah;db=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return ah=e,ah}var oh,fb;function V2(){if(fb)return oh;fb=1;function e(t,n){return t.has(n)}return oh=e,oh}var lh,hb;function G2(){if(hb)return lh;hb=1;var e=H2(),t=ZD(),n=V2(),r=1,i=2;function s(a,o,l,u,c,d){var f=l&r,h=a.length,g=o.length;if(h!=g&&!(f&&g>h))return!1;var m=d.get(a),_=d.get(o);if(m&&_)return m==o&&_==a;var y=-1,v=!0,w=l&i?new e:void 0;for(d.set(a,o),d.set(o,a);++y<h;){var x=a[y],E=o[y];if(u)var S=f?u(E,x,y,o,a,d):u(x,E,y,a,o,d);if(S!==void 0){if(S)continue;v=!1;break}if(w){if(!t(o,function(N,A){if(!n(w,A)&&(x===N||c(x,N,l,u,d)))return w.push(A)})){v=!1;break}}else if(!(x===E||c(x,E,l,u,d))){v=!1;break}}return d.delete(a),d.delete(o),v}return lh=s,lh}var uh,pb;function e5(){if(pb)return uh;pb=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,s){r[++n]=[s,i]}),r}return uh=e,uh}var ch,mb;function a0(){if(mb)return ch;mb=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return ch=e,ch}var dh,gb;function t5(){if(gb)return dh;gb=1;var e=xs(),t=$2(),n=ws(),r=G2(),i=e5(),s=a0(),a=1,o=2,l="[object Boolean]",u="[object Date]",c="[object Error]",d="[object Map]",f="[object Number]",h="[object RegExp]",g="[object Set]",m="[object String]",_="[object Symbol]",y="[object ArrayBuffer]",v="[object DataView]",w=e?e.prototype:void 0,x=w?w.valueOf:void 0;function E(S,N,A,k,j,I,z){switch(A){case v:if(S.byteLength!=N.byteLength||S.byteOffset!=N.byteOffset)return!1;S=S.buffer,N=N.buffer;case y:return!(S.byteLength!=N.byteLength||!I(new t(S),new t(N)));case l:case u:case f:return n(+S,+N);case c:return S.name==N.name&&S.message==N.message;case h:case m:return S==N+"";case d:var D=i;case g:var b=k&a;if(D||(D=s),S.size!=N.size&&!b)return!1;var P=z.get(S);if(P)return P==N;k|=o,z.set(S,N);var T=r(D(S),D(N),k,j,I,z);return z.delete(S),T;case _:if(x)return x.call(S)==x.call(N)}return!1}return dh=E,dh}var fh,vb;function n5(){if(vb)return fh;vb=1;var e=M2(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,a,o,l,u,c){var d=o&t,f=e(s),h=f.length,g=e(a),m=g.length;if(h!=m&&!d)return!1;for(var _=h;_--;){var y=f[_];if(!(d?y in a:r.call(a,y)))return!1}var v=c.get(s),w=c.get(a);if(v&&w)return v==a&&w==s;var x=!0;c.set(s,a),c.set(a,s);for(var E=d;++_<h;){y=f[_];var S=s[y],N=a[y];if(l)var A=d?l(N,S,y,a,s,c):l(S,N,y,s,a,c);if(!(A===void 0?S===N||u(S,N,o,l,c):A)){x=!1;break}E||(E=y=="constructor")}if(x&&!E){var k=s.constructor,j=a.constructor;k!=j&&"constructor"in s&&"constructor"in a&&!(typeof k=="function"&&k instanceof k&&typeof j=="function"&&j instanceof j)&&(x=!1)}return c.delete(s),c.delete(a),x}return fh=i,fh}var hh,yb;function r5(){if(yb)return hh;yb=1;var e=Bu(),t=G2(),n=t5(),r=n5(),i=Ss(),s=Pe(),a=bs(),o=co(),l=1,u="[object Arguments]",c="[object Array]",d="[object Object]",f=Object.prototype,h=f.hasOwnProperty;function g(m,_,y,v,w,x){var E=s(m),S=s(_),N=E?c:i(m),A=S?c:i(_);N=N==u?d:N,A=A==u?d:A;var k=N==d,j=A==d,I=N==A;if(I&&a(m)){if(!a(_))return!1;E=!0,k=!1}if(I&&!k)return x||(x=new e),E||o(m)?t(m,_,y,v,w,x):n(m,_,N,y,v,w,x);if(!(y&l)){var z=k&&h.call(m,"__wrapped__"),D=j&&h.call(_,"__wrapped__");if(z||D){var b=z?m.value():m,P=D?_.value():_;return x||(x=new e),w(b,P,y,v,x)}}return I?(x||(x=new e),r(m,_,y,v,w,x)):!1}return hh=g,hh}var ph,_b;function W2(){if(_b)return ph;_b=1;var e=r5(),t=kn();function n(r,i,s,a,o){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,s,a,n,o)}return ph=n,ph}var mh,wb;function i5(){if(wb)return mh;wb=1;var e=Bu(),t=W2(),n=1,r=2;function i(s,a,o,l){var u=o.length,c=u,d=!l;if(s==null)return!c;for(s=Object(s);u--;){var f=o[u];if(d&&f[2]?f[1]!==s[f[0]]:!(f[0]in s))return!1}for(;++u<c;){f=o[u];var h=f[0],g=s[h],m=f[1];if(d&&f[2]){if(g===void 0&&!(h in s))return!1}else{var _=new e;if(l)var y=l(g,m,h,s,a,_);if(!(y===void 0?t(m,g,n|r,l,_):y))return!1}}return!0}return mh=i,mh}var gh,xb;function K2(){if(xb)return gh;xb=1;var e=Bt();function t(n){return n===n&&!e(n)}return gh=t,gh}var vh,bb;function s5(){if(bb)return vh;bb=1;var e=K2(),t=Fr();function n(r){for(var i=t(r),s=i.length;s--;){var a=i[s],o=r[a];i[s]=[a,o,e(o)]}return i}return vh=n,vh}var yh,Sb;function X2(){if(Sb)return yh;Sb=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return yh=e,yh}var _h,Eb;function a5(){if(Eb)return _h;Eb=1;var e=i5(),t=s5(),n=X2();function r(i){var s=t(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(a){return a===i||e(a,i,s)}}return _h=r,_h}var wh,Nb;function Es(){if(Nb)return wh;Nb=1;var e=hi(),t=kn(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return wh=r,wh}var xh,Cb;function o0(){if(Cb)return xh;Cb=1;var e=Pe(),t=Es(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,a){if(e(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||t(s)?!0:r.test(s)||!n.test(s)||a!=null&&s in Object(a)}return xh=i,xh}var bh,kb;function o5(){if(kb)return bh;kb=1;var e=Xy(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var a=arguments,o=i?i.apply(this,a):a[0],l=s.cache;if(l.has(o))return l.get(o);var u=r.apply(this,a);return s.cache=l.set(o,u)||l,u};return s.cache=new(n.Cache||e),s}return n.Cache=e,bh=n,bh}var Sh,Rb;function l5(){if(Rb)return Sh;Rb=1;var e=o5(),t=500;function n(r){var i=e(r,function(a){return s.size===t&&s.clear(),a}),s=i.cache;return i}return Sh=n,Sh}var Eh,jb;function u5(){if(jb)return Eh;jb=1;var e=l5(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(a,o,l,u){s.push(l?u.replace(n,"$1"):o||a)}),s});return Eh=r,Eh}var Nh,Ab;function Yu(){if(Ab)return Nh;Ab=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=Array(i);++r<i;)s[r]=n(t[r],r,t);return s}return Nh=e,Nh}var Ch,Pb;function c5(){if(Pb)return Ch;Pb=1;var e=xs(),t=Yu(),n=Pe(),r=Es(),i=1/0,s=e?e.prototype:void 0,a=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return t(l,o)+"";if(r(l))return a?a.call(l):"";var u=l+"";return u=="0"&&1/l==-i?"-0":u}return Ch=o,Ch}var kh,Tb;function Y2(){if(Tb)return kh;Tb=1;var e=c5();function t(n){return n==null?"":e(n)}return kh=t,kh}var Rh,Ib;function Qu(){if(Ib)return Rh;Ib=1;var e=Pe(),t=o0(),n=u5(),r=Y2();function i(s,a){return e(s)?s:t(s,a)?[s]:n(r(s))}return Rh=i,Rh}var jh,Mb;function fo(){if(Mb)return jh;Mb=1;var e=Es(),t=1/0;function n(r){if(typeof r=="string"||e(r))return r;var i=r+"";return i=="0"&&1/r==-t?"-0":i}return jh=n,jh}var Ah,Ob;function Ju(){if(Ob)return Ah;Ob=1;var e=Qu(),t=fo();function n(r,i){i=e(i,r);for(var s=0,a=i.length;r!=null&&s<a;)r=r[t(i[s++])];return s&&s==a?r:void 0}return Ah=n,Ah}var Ph,$b;function d5(){if($b)return Ph;$b=1;var e=Ju();function t(n,r,i){var s=n==null?void 0:e(n,r);return s===void 0?i:s}return Ph=t,Ph}var Th,qb;function f5(){if(qb)return Th;qb=1;function e(t,n){return t!=null&&n in Object(t)}return Th=e,Th}var Ih,Lb;function Q2(){if(Lb)return Ih;Lb=1;var e=Qu(),t=uo(),n=Pe(),r=Vu(),i=Qy(),s=fo();function a(o,l,u){l=e(l,o);for(var c=-1,d=l.length,f=!1;++c<d;){var h=s(l[c]);if(!(f=o!=null&&u(o,h)))break;o=o[h]}return f||++c!=d?f:(d=o==null?0:o.length,!!d&&i(d)&&r(h,d)&&(n(o)||t(o)))}return Ih=a,Ih}var Mh,Fb;function J2(){if(Fb)return Mh;Fb=1;var e=f5(),t=Q2();function n(r,i){return r!=null&&t(r,i,e)}return Mh=n,Mh}var Oh,Db;function h5(){if(Db)return Oh;Db=1;var e=W2(),t=d5(),n=J2(),r=o0(),i=K2(),s=X2(),a=fo(),o=1,l=2;function u(c,d){return r(c)&&i(d)?s(a(c),d):function(f){var h=t(f,c);return h===void 0&&h===d?n(f,c):e(d,h,o|l)}}return Oh=u,Oh}var $h,zb;function Z2(){if(zb)return $h;zb=1;function e(t){return function(n){return n==null?void 0:n[t]}}return $h=e,$h}var qh,Bb;function p5(){if(Bb)return qh;Bb=1;var e=Ju();function t(n){return function(r){return e(r,n)}}return qh=t,qh}var Lh,Ub;function m5(){if(Ub)return Lh;Ub=1;var e=Z2(),t=p5(),n=o0(),r=fo();function i(s){return n(s)?e(r(s)):t(s)}return Lh=i,Lh}var Fh,Hb;function Zn(){if(Hb)return Fh;Hb=1;var e=a5(),t=h5(),n=gi(),r=Pe(),i=m5();function s(a){return typeof a=="function"?a:a==null?n:typeof a=="object"?r(a)?t(a[0],a[1]):e(a):i(a)}return Fh=s,Fh}var Dh,Vb;function ej(){if(Vb)return Dh;Vb=1;var e=A2(),t=YD(),n=Zn(),r=Pe();function i(s,a){var o=r(s)?e:t;return o(s,n(a,3))}return Dh=i,Dh}var zh,Gb;function g5(){if(Gb)return zh;Gb=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return zh=n,zh}var Bh,Wb;function tj(){if(Wb)return Bh;Wb=1;var e=g5(),t=Q2();function n(r,i){return r!=null&&t(r,i,e)}return Bh=n,Bh}var Uh,Kb;function v5(){if(Kb)return Uh;Kb=1;var e=Zy(),t=Ss(),n=uo(),r=Pe(),i=Jn(),s=bs(),a=Wu(),o=co(),l="[object Map]",u="[object Set]",c=Object.prototype,d=c.hasOwnProperty;function f(h){if(h==null)return!0;if(i(h)&&(r(h)||typeof h=="string"||typeof h.splice=="function"||s(h)||o(h)||n(h)))return!h.length;var g=t(h);if(g==l||g==u)return!h.size;if(a(h))return!e(h).length;for(var m in h)if(d.call(h,m))return!1;return!0}return Uh=f,Uh}var Hh,Xb;function nj(){if(Xb)return Hh;Xb=1;function e(t){return t===void 0}return Hh=e,Hh}var Vh,Yb;function rj(){if(Yb)return Vh;Yb=1;var e=Xu(),t=Jn();function n(r,i){var s=-1,a=t(r)?Array(r.length):[];return e(r,function(o,l,u){a[++s]=i(o,l,u)}),a}return Vh=n,Vh}var Gh,Qb;function ij(){if(Qb)return Gh;Qb=1;var e=Yu(),t=Zn(),n=rj(),r=Pe();function i(s,a){var o=r(s)?e:n;return o(s,t(a,3))}return Gh=i,Gh}var Wh,Jb;function y5(){if(Jb)return Wh;Jb=1;function e(t,n,r,i){var s=-1,a=t==null?0:t.length;for(i&&a&&(r=t[++s]);++s<a;)r=n(r,t[s],s,t);return r}return Wh=e,Wh}var Kh,Zb;function _5(){if(Zb)return Kh;Zb=1;function e(t,n,r,i,s){return s(t,function(a,o,l){r=i?(i=!1,a):n(r,a,o,l)}),r}return Kh=e,Kh}var Xh,eS;function sj(){if(eS)return Xh;eS=1;var e=y5(),t=Xu(),n=Zn(),r=_5(),i=Pe();function s(a,o,l){var u=i(a)?e:r,c=arguments.length<3;return u(a,n(o,4),l,c,t)}return Xh=s,Xh}var Yh,tS;function w5(){if(tS)return Yh;tS=1;var e=hi(),t=Pe(),n=kn(),r="[object String]";function i(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==r}return Yh=i,Yh}var Qh,nS;function x5(){if(nS)return Qh;nS=1;var e=Z2(),t=e("length");return Qh=t,Qh}var Jh,rS;function b5(){if(rS)return Jh;rS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",a="\\u200d",o=RegExp("["+a+e+i+s+"]");function l(u){return o.test(u)}return Jh=l,Jh}var Zh,iS;function S5(){if(iS)return Zh;iS=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",a="["+e+"]",o="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+l+")",c="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",g=u+"?",m="["+s+"]?",_="(?:"+h+"(?:"+[c,d,f].join("|")+")"+m+g+")*",y=m+g+_,v="(?:"+[c+o+"?",o,d,f,a].join("|")+")",w=RegExp(l+"(?="+l+")|"+v+y,"g");function x(E){for(var S=w.lastIndex=0;w.test(E);)++S;return S}return Zh=x,Zh}var ep,sS;function E5(){if(sS)return ep;sS=1;var e=x5(),t=b5(),n=S5();function r(i){return t(i)?n(i):e(i)}return ep=r,ep}var tp,aS;function N5(){if(aS)return tp;aS=1;var e=Zy(),t=Ss(),n=Jn(),r=w5(),i=E5(),s="[object Map]",a="[object Set]";function o(l){if(l==null)return 0;if(n(l))return r(l)?i(l):l.length;var u=t(l);return u==s||u==a?l.size:e(l).length}return tp=o,tp}var np,oS;function C5(){if(oS)return np;oS=1;var e=Yy(),t=L2(),n=s0(),r=Zn(),i=Ku(),s=Pe(),a=bs(),o=oo(),l=Bt(),u=co();function c(d,f,h){var g=s(d),m=g||a(d)||u(d);if(f=r(f,4),h==null){var _=d&&d.constructor;m?h=g?new _:[]:l(d)?h=o(_)?t(i(d)):{}:h={}}return(m?e:n)(d,function(y,v,w){return f(h,y,v,w)}),h}return np=c,np}var rp,lS;function k5(){if(lS)return rp;lS=1;var e=xs(),t=uo(),n=Pe(),r=e?e.isConcatSpreadable:void 0;function i(s){return n(s)||t(s)||!!(r&&s&&s[r])}return rp=i,rp}var ip,uS;function l0(){if(uS)return ip;uS=1;var e=t0(),t=k5();function n(r,i,s,a,o){var l=-1,u=r.length;for(s||(s=t),o||(o=[]);++l<u;){var c=r[l];i>0&&s(c)?i>1?n(c,i-1,s,a,o):e(o,c):a||(o[o.length]=c)}return o}return ip=n,ip}var sp,cS;function R5(){if(cS)return sp;cS=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return sp=e,sp}var ap,dS;function aj(){if(dS)return ap;dS=1;var e=R5(),t=Math.max;function n(r,i,s){return i=t(i===void 0?r.length-1:i,0),function(){for(var a=arguments,o=-1,l=t(a.length-i,0),u=Array(l);++o<l;)u[o]=a[i+o];o=-1;for(var c=Array(i+1);++o<i;)c[o]=a[o];return c[i]=s(u),e(r,this,c)}}return ap=n,ap}var op,fS;function j5(){if(fS)return op;fS=1;var e=r0(),t=N2(),n=gi(),r=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return op=r,op}var lp,hS;function A5(){if(hS)return lp;hS=1;var e=800,t=16,n=Date.now;function r(i){var s=0,a=0;return function(){var o=n(),l=t-(o-a);if(a=o,l>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return lp=r,lp}var up,pS;function oj(){if(pS)return up;pS=1;var e=j5(),t=A5(),n=t(e);return up=n,up}var cp,mS;function Zu(){if(mS)return cp;mS=1;var e=gi(),t=aj(),n=oj();function r(i,s){return n(t(i,s,e),i+"")}return cp=r,cp}var dp,gS;function lj(){if(gS)return dp;gS=1;function e(t,n,r,i){for(var s=t.length,a=r+(i?1:-1);i?a--:++a<s;)if(n(t[a],a,t))return a;return-1}return dp=e,dp}var fp,vS;function P5(){if(vS)return fp;vS=1;function e(t){return t!==t}return fp=e,fp}var hp,yS;function T5(){if(yS)return hp;yS=1;function e(t,n,r){for(var i=r-1,s=t.length;++i<s;)if(t[i]===n)return i;return-1}return hp=e,hp}var pp,_S;function I5(){if(_S)return pp;_S=1;var e=lj(),t=P5(),n=T5();function r(i,s,a){return s===s?n(i,s,a):e(i,t,a)}return pp=r,pp}var mp,wS;function M5(){if(wS)return mp;wS=1;var e=I5();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return mp=t,mp}var gp,xS;function O5(){if(xS)return gp;xS=1;function e(t,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;)if(r(n,t[i]))return!0;return!1}return gp=e,gp}var vp,bS;function $5(){if(bS)return vp;bS=1;function e(){}return vp=e,vp}var yp,SS;function q5(){if(SS)return yp;SS=1;var e=O2(),t=$5(),n=a0(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(s){return new e(s)}:t;return yp=i,yp}var _p,ES;function L5(){if(ES)return _p;ES=1;var e=H2(),t=M5(),n=O5(),r=V2(),i=q5(),s=a0(),a=200;function o(l,u,c){var d=-1,f=t,h=l.length,g=!0,m=[],_=m;if(c)g=!1,f=n;else if(h>=a){var y=u?null:i(l);if(y)return s(y);g=!1,f=r,_=new e}else _=u?[]:m;e:for(;++d<h;){var v=l[d],w=u?u(v):v;if(v=c||v!==0?v:0,g&&w===w){for(var x=_.length;x--;)if(_[x]===w)continue e;u&&_.push(w),m.push(v)}else f(_,w,c)||(_!==m&&_.push(w),m.push(v))}return m}return _p=o,_p}var wp,NS;function uj(){if(NS)return wp;NS=1;var e=Jn(),t=kn();function n(r){return t(r)&&e(r)}return wp=n,wp}var xp,CS;function F5(){if(CS)return xp;CS=1;var e=l0(),t=Zu(),n=L5(),r=uj(),i=t(function(s){return n(e(s,1,r,!0))});return xp=i,xp}var bp,kS;function D5(){if(kS)return bp;kS=1;var e=Yu();function t(n,r){return e(r,function(i){return n[i]})}return bp=t,bp}var Sp,RS;function cj(){if(RS)return Sp;RS=1;var e=D5(),t=Fr();function n(r){return r==null?[]:e(r,t(r))}return Sp=n,Sp}var Ep,jS;function Ut(){if(jS)return Ep;jS=1;var e;if(typeof Wy=="function")try{e={clone:WD(),constant:r0(),each:U2(),filter:ej(),has:tj(),isArray:Pe(),isEmpty:v5(),isFunction:oo(),isUndefined:nj(),keys:Fr(),map:ij(),reduce:sj(),size:N5(),transform:C5(),union:F5(),values:cj()}}catch{}return e||(e=window._),Ep=e,Ep}var Np,AS;function u0(){if(AS)return Np;AS=1;var e=Ut();Np=i;var t="\0",n="\0",r="";function i(c){this._isDirected=e.has(c,"directed")?c.directed:!0,this._isMultigraph=e.has(c,"multigraph")?c.multigraph:!1,this._isCompound=e.has(c,"compound")?c.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(c){return this._label=c,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultNodeLabelFn=c,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._in[d])})},i.prototype.sinks=function(){var c=this;return e.filter(this.nodes(),function(d){return e.isEmpty(c._out[d])})},i.prototype.setNodes=function(c,d){var f=arguments,h=this;return e.each(c,function(g){f.length>1?h.setNode(g,d):h.setNode(g)}),this},i.prototype.setNode=function(c,d){return e.has(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=d),this):(this._nodes[c]=arguments.length>1?d:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=n,this._children[c]={},this._children[n][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)},i.prototype.node=function(c){return this._nodes[c]},i.prototype.hasNode=function(c){return e.has(this._nodes,c)},i.prototype.removeNode=function(c){var d=this;if(e.has(this._nodes,c)){var f=function(h){d.removeEdge(d._edgeObjs[h])};delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],e.each(this.children(c),function(h){d.setParent(h)}),delete this._children[c]),e.each(e.keys(this._in[c]),f),delete this._in[c],delete this._preds[c],e.each(e.keys(this._out[c]),f),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this},i.prototype.setParent=function(c,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(d))d=n;else{d+="";for(var f=d;!e.isUndefined(f);f=this.parent(f))if(f===c)throw new Error("Setting "+d+" as parent of "+c+" would create a cycle");this.setNode(d)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=d,this._children[d][c]=!0,this},i.prototype._removeFromParentsChildList=function(c){delete this._children[this._parent[c]][c]},i.prototype.parent=function(c){if(this._isCompound){var d=this._parent[c];if(d!==n)return d}},i.prototype.children=function(c){if(e.isUndefined(c)&&(c=n),this._isCompound){var d=this._children[c];if(d)return e.keys(d)}else{if(c===n)return this.nodes();if(this.hasNode(c))return[]}},i.prototype.predecessors=function(c){var d=this._preds[c];if(d)return e.keys(d)},i.prototype.successors=function(c){var d=this._sucs[c];if(d)return e.keys(d)},i.prototype.neighbors=function(c){var d=this.predecessors(c);if(d)return e.union(d,this.successors(c))},i.prototype.isLeaf=function(c){var d;return this.isDirected()?d=this.successors(c):d=this.neighbors(c),d.length===0},i.prototype.filterNodes=function(c){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;e.each(this._nodes,function(m,_){c(_)&&d.setNode(_,m)}),e.each(this._edgeObjs,function(m){d.hasNode(m.v)&&d.hasNode(m.w)&&d.setEdge(m,f.edge(m))});var h={};function g(m){var _=f.parent(m);return _===void 0||d.hasNode(_)?(h[m]=_,_):_ in h?h[_]:g(_)}return this._isCompound&&e.each(d.nodes(),function(m){d.setParent(m,g(m))}),d},i.prototype.setDefaultEdgeLabel=function(c){return e.isFunction(c)||(c=e.constant(c)),this._defaultEdgeLabelFn=c,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(c,d){var f=this,h=arguments;return e.reduce(c,function(g,m){return h.length>1?f.setEdge(g,m,d):f.setEdge(g,m),m}),this},i.prototype.setEdge=function(){var c,d,f,h,g=!1,m=arguments[0];typeof m=="object"&&m!==null&&"v"in m?(c=m.v,d=m.w,f=m.name,arguments.length===2&&(h=arguments[1],g=!0)):(c=m,d=arguments[1],f=arguments[3],arguments.length>2&&(h=arguments[2],g=!0)),c=""+c,d=""+d,e.isUndefined(f)||(f=""+f);var _=o(this._isDirected,c,d,f);if(e.has(this._edgeLabels,_))return g&&(this._edgeLabels[_]=h),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(d),this._edgeLabels[_]=g?h:this._defaultEdgeLabelFn(c,d,f);var y=l(this._isDirected,c,d,f);return c=y.v,d=y.w,Object.freeze(y),this._edgeObjs[_]=y,s(this._preds[d],c),s(this._sucs[c],d),this._in[d][_]=y,this._out[c][_]=y,this._edgeCount++,this},i.prototype.edge=function(c,d,f){var h=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,f);return this._edgeLabels[h]},i.prototype.hasEdge=function(c,d,f){var h=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,f);return e.has(this._edgeLabels,h)},i.prototype.removeEdge=function(c,d,f){var h=arguments.length===1?u(this._isDirected,arguments[0]):o(this._isDirected,c,d,f),g=this._edgeObjs[h];return g&&(c=g.v,d=g.w,delete this._edgeLabels[h],delete this._edgeObjs[h],a(this._preds[d],c),a(this._sucs[c],d),delete this._in[d][h],delete this._out[c][h],this._edgeCount--),this},i.prototype.inEdges=function(c,d){var f=this._in[c];if(f){var h=e.values(f);return d?e.filter(h,function(g){return g.v===d}):h}},i.prototype.outEdges=function(c,d){var f=this._out[c];if(f){var h=e.values(f);return d?e.filter(h,function(g){return g.w===d}):h}},i.prototype.nodeEdges=function(c,d){var f=this.inEdges(c,d);if(f)return f.concat(this.outEdges(c,d))};function s(c,d){c[d]?c[d]++:c[d]=1}function a(c,d){--c[d]||delete c[d]}function o(c,d,f,h){var g=""+d,m=""+f;if(!c&&g>m){var _=g;g=m,m=_}return g+r+m+r+(e.isUndefined(h)?t:h)}function l(c,d,f,h){var g=""+d,m=""+f;if(!c&&g>m){var _=g;g=m,m=_}var y={v:g,w:m};return h&&(y.name=h),y}function u(c,d){return o(c,d.v,d.w,d.name)}return Np}var Cp,PS;function z5(){return PS||(PS=1,Cp="2.1.8"),Cp}var kp,TS;function B5(){return TS||(TS=1,kp={Graph:u0(),version:z5()}),kp}var Rp,IS;function U5(){if(IS)return Rp;IS=1;var e=Ut(),t=u0();Rp={write:n,read:s};function n(a){var o={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:r(a),edges:i(a)};return e.isUndefined(a.graph())||(o.value=e.clone(a.graph())),o}function r(a){return e.map(a.nodes(),function(o){var l=a.node(o),u=a.parent(o),c={v:o};return e.isUndefined(l)||(c.value=l),e.isUndefined(u)||(c.parent=u),c})}function i(a){return e.map(a.edges(),function(o){var l=a.edge(o),u={v:o.v,w:o.w};return e.isUndefined(o.name)||(u.name=o.name),e.isUndefined(l)||(u.value=l),u})}function s(a){var o=new t(a.options).setGraph(a.value);return e.each(a.nodes,function(l){o.setNode(l.v,l.value),l.parent&&o.setParent(l.v,l.parent)}),e.each(a.edges,function(l){o.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),o}return Rp}var jp,MS;function H5(){if(MS)return jp;MS=1;var e=Ut();jp=t;function t(n){var r={},i=[],s;function a(o){e.has(r,o)||(r[o]=!0,s.push(o),e.each(n.successors(o),a),e.each(n.predecessors(o),a))}return e.each(n.nodes(),function(o){s=[],a(o),s.length&&i.push(s)}),i}return jp}var Ap,OS;function dj(){if(OS)return Ap;OS=1;var e=Ut();Ap=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var s=this._arr,a=s.length;return i[n]=a,s.push({key:n,priority:r}),this._decrease(a),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,s=i+1,a=n;i<r.length&&(a=r[i].priority<r[a].priority?i:a,s<r.length&&(a=r[s].priority<r[a].priority?s:a),a!==n&&(this._swap(n,a),this._heapify(a)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s},t.prototype._swap=function(n,r){var i=this._arr,s=this._keyIndices,a=i[n],o=i[r];i[n]=o,i[r]=a,s[o.key]=n,s[a.key]=r},Ap}var Pp,$S;function fj(){if($S)return Pp;$S=1;var e=Ut(),t=dj();Pp=r;var n=e.constant(1);function r(s,a,o,l){return i(s,String(a),o||n,l||function(u){return s.outEdges(u)})}function i(s,a,o,l){var u={},c=new t,d,f,h=function(g){var m=g.v!==d?g.v:g.w,_=u[m],y=o(g),v=f.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+y);v<_.distance&&(_.distance=v,_.predecessor=d,c.decrease(m,v))};for(s.nodes().forEach(function(g){var m=g===a?0:Number.POSITIVE_INFINITY;u[g]={distance:m},c.add(g,m)});c.size()>0&&(d=c.removeMin(),f=u[d],f.distance!==Number.POSITIVE_INFINITY);)l(d).forEach(h);return u}return Pp}var Tp,qS;function V5(){if(qS)return Tp;qS=1;var e=fj(),t=Ut();Tp=n;function n(r,i,s){return t.transform(r.nodes(),function(a,o){a[o]=e(r,o,i,s)},{})}return Tp}var Ip,LS;function hj(){if(LS)return Ip;LS=1;var e=Ut();Ip=t;function t(n){var r=0,i=[],s={},a=[];function o(l){var u=s[l]={onStack:!0,lowlink:r,index:r++};if(i.push(l),n.successors(l).forEach(function(f){e.has(s,f)?s[f].onStack&&(u.lowlink=Math.min(u.lowlink,s[f].index)):(o(f),u.lowlink=Math.min(u.lowlink,s[f].lowlink))}),u.lowlink===u.index){var c=[],d;do d=i.pop(),s[d].onStack=!1,c.push(d);while(l!==d);a.push(c)}}return n.nodes().forEach(function(l){e.has(s,l)||o(l)}),a}return Ip}var Mp,FS;function G5(){if(FS)return Mp;FS=1;var e=Ut(),t=hj();Mp=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Mp}var Op,DS;function W5(){if(DS)return Op;DS=1;var e=Ut();Op=n;var t=e.constant(1);function n(i,s,a){return r(i,s||t,a||function(o){return i.outEdges(o)})}function r(i,s,a){var o={},l=i.nodes();return l.forEach(function(u){o[u]={},o[u][u]={distance:0},l.forEach(function(c){u!==c&&(o[u][c]={distance:Number.POSITIVE_INFINITY})}),a(u).forEach(function(c){var d=c.v===u?c.w:c.v,f=s(c);o[u][d]={distance:f,predecessor:u}})}),l.forEach(function(u){var c=o[u];l.forEach(function(d){var f=o[d];l.forEach(function(h){var g=f[u],m=c[h],_=f[h],y=g.distance+m.distance;y<_.distance&&(_.distance=y,_.predecessor=m.predecessor)})})}),o}return Op}var $p,zS;function pj(){if(zS)return $p;zS=1;var e=Ut();$p=t,t.CycleException=n;function t(r){var i={},s={},a=[];function o(l){if(e.has(s,l))throw new n;e.has(i,l)||(s[l]=!0,i[l]=!0,e.each(r.predecessors(l),o),delete s[l],a.push(l))}if(e.each(r.sinks(),o),e.size(i)!==r.nodeCount())throw new n;return a}function n(){}return n.prototype=new Error,$p}var qp,BS;function K5(){if(BS)return qp;BS=1;var e=pj();qp=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return qp}var Lp,US;function mj(){if(US)return Lp;US=1;var e=Ut();Lp=t;function t(r,i,s){e.isArray(i)||(i=[i]);var a=(r.isDirected()?r.successors:r.neighbors).bind(r),o=[],l={};return e.each(i,function(u){if(!r.hasNode(u))throw new Error("Graph does not have node: "+u);n(r,u,s==="post",l,a,o)}),o}function n(r,i,s,a,o,l){e.has(a,i)||(a[i]=!0,s||l.push(i),e.each(o(i),function(u){n(r,u,s,a,o,l)}),s&&l.push(i))}return Lp}var Fp,HS;function X5(){if(HS)return Fp;HS=1;var e=mj();Fp=t;function t(n,r){return e(n,r,"post")}return Fp}var Dp,VS;function Y5(){if(VS)return Dp;VS=1;var e=mj();Dp=t;function t(n,r){return e(n,r,"pre")}return Dp}var zp,GS;function Q5(){if(GS)return zp;GS=1;var e=Ut(),t=u0(),n=dj();zp=r;function r(i,s){var a=new t,o={},l=new n,u;function c(f){var h=f.v===u?f.w:f.v,g=l.priority(h);if(g!==void 0){var m=s(f);m<g&&(o[h]=u,l.decrease(h,m))}}if(i.nodeCount()===0)return a;e.each(i.nodes(),function(f){l.add(f,Number.POSITIVE_INFINITY),a.setNode(f)}),l.decrease(i.nodes()[0],0);for(var d=!1;l.size()>0;){if(u=l.removeMin(),e.has(o,u))a.setEdge(u,o[u]);else{if(d)throw new Error("Input graph is not connected: "+i);d=!0}i.nodeEdges(u).forEach(c)}return a}return zp}var Bp,WS;function J5(){return WS||(WS=1,Bp={components:H5(),dijkstra:fj(),dijkstraAll:V5(),findCycles:G5(),floydWarshall:W5(),isAcyclic:K5(),postorder:X5(),preorder:Y5(),prim:Q5(),tarjan:hj(),topsort:pj()}),Bp}var Up,KS;function Z5(){if(KS)return Up;KS=1;var e=B5();return Up={Graph:e.Graph,json:U5(),alg:J5(),version:e.version},Up}var su;if(typeof Wy=="function")try{su=Z5()}catch{}su||(su=window.graphlib);var ln=su,Hp,XS;function ez(){if(XS)return Hp;XS=1;var e=D2(),t=1,n=4;function r(i){return e(i,t|n)}return Hp=r,Hp}var Vp,YS;function ec(){if(YS)return Vp;YS=1;var e=ws(),t=Jn(),n=Vu(),r=Bt();function i(s,a,o){if(!r(o))return!1;var l=typeof a;return(l=="number"?t(o)&&n(a,o.length):l=="string"&&a in o)?e(o[a],s):!1}return Vp=i,Vp}var Gp,QS;function tz(){if(QS)return Gp;QS=1;var e=Zu(),t=ws(),n=ec(),r=mi(),i=Object.prototype,s=i.hasOwnProperty,a=e(function(o,l){o=Object(o);var u=-1,c=l.length,d=c>2?l[2]:void 0;for(d&&n(l[0],l[1],d)&&(c=1);++u<c;)for(var f=l[u],h=r(f),g=-1,m=h.length;++g<m;){var _=h[g],y=o[_];(y===void 0||t(y,i[_])&&!s.call(o,_))&&(o[_]=f[_])}return o});return Gp=a,Gp}var Wp,JS;function nz(){if(JS)return Wp;JS=1;var e=Zn(),t=Jn(),n=Fr();function r(i){return function(s,a,o){var l=Object(s);if(!t(s)){var u=e(a,3);s=n(s),a=function(d){return u(l[d],d,l)}}var c=i(s,a,o);return c>-1?l[u?s[c]:c]:void 0}}return Wp=r,Wp}var Kp,ZS;function rz(){if(ZS)return Kp;ZS=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Kp=t,Kp}var Xp,eE;function iz(){if(eE)return Xp;eE=1;var e=rz(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Xp=n,Xp}var Yp,tE;function sz(){if(tE)return Yp;tE=1;var e=iz(),t=Bt(),n=Es(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return r;if(t(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=t(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=e(u);var d=s.test(u);return d||a.test(u)?o(u.slice(2),d?2:8):i.test(u)?r:+u}return Yp=l,Yp}var Qp,nE;function gj(){if(nE)return Qp;nE=1;var e=sz(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var s=i<0?-1:1;return s*n}return i===i?i:0}return Qp=r,Qp}var Jp,rE;function az(){if(rE)return Jp;rE=1;var e=gj();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return Jp=t,Jp}var Zp,iE;function oz(){if(iE)return Zp;iE=1;var e=lj(),t=Zn(),n=az(),r=Math.max;function i(s,a,o){var l=s==null?0:s.length;if(!l)return-1;var u=o==null?0:n(o);return u<0&&(u=r(l+u,0)),e(s,t(a,3),u)}return Zp=i,Zp}var em,sE;function lz(){if(sE)return em;sE=1;var e=nz(),t=oz(),n=e(t);return em=n,em}var tm,aE;function vj(){if(aE)return tm;aE=1;var e=l0();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return tm=t,tm}var nm,oE;function uz(){if(oE)return nm;oE=1;var e=i0(),t=z2(),n=mi();function r(i,s){return i==null?i:e(i,t(s),n)}return nm=r,nm}var rm,lE;function cz(){if(lE)return rm;lE=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return rm=e,rm}var im,uE;function dz(){if(uE)return im;uE=1;var e=Uu(),t=s0(),n=Zn();function r(i,s){var a={};return s=n(s,3),t(i,function(o,l,u){e(a,l,s(o,l,u))}),a}return im=r,im}var sm,cE;function c0(){if(cE)return sm;cE=1;var e=Es();function t(n,r,i){for(var s=-1,a=n.length;++s<a;){var o=n[s],l=r(o);if(l!=null&&(u===void 0?l===l&&!e(l):i(l,u)))var u=l,c=o}return c}return sm=t,sm}var am,dE;function fz(){if(dE)return am;dE=1;function e(t,n){return t>n}return am=e,am}var om,fE;function hz(){if(fE)return om;fE=1;var e=c0(),t=fz(),n=gi();function r(i){return i&&i.length?e(i,n,t):void 0}return om=r,om}var lm,hE;function yj(){if(hE)return lm;hE=1;var e=Uu(),t=ws();function n(r,i,s){(s!==void 0&&!t(r[i],s)||s===void 0&&!(i in r))&&e(r,i,s)}return lm=n,lm}var um,pE;function pz(){if(pE)return um;pE=1;var e=hi(),t=Ku(),n=kn(),r="[object Object]",i=Function.prototype,s=Object.prototype,a=i.toString,o=s.hasOwnProperty,l=a.call(Object);function u(c){if(!n(c)||e(c)!=r)return!1;var d=t(c);if(d===null)return!0;var f=o.call(d,"constructor")&&d.constructor;return typeof f=="function"&&f instanceof f&&a.call(f)==l}return um=u,um}var cm,mE;function _j(){if(mE)return cm;mE=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return cm=e,cm}var dm,gE;function mz(){if(gE)return dm;gE=1;var e=lo(),t=mi();function n(r){return e(r,t(r))}return dm=n,dm}var fm,vE;function gz(){if(vE)return fm;vE=1;var e=yj(),t=R2(),n=q2(),r=j2(),i=F2(),s=uo(),a=Pe(),o=uj(),l=bs(),u=oo(),c=Bt(),d=pz(),f=co(),h=_j(),g=mz();function m(_,y,v,w,x,E,S){var N=h(_,v),A=h(y,v),k=S.get(A);if(k){e(_,v,k);return}var j=E?E(N,A,v+"",_,y,S):void 0,I=j===void 0;if(I){var z=a(A),D=!z&&l(A),b=!z&&!D&&f(A);j=A,z||D||b?a(N)?j=N:o(N)?j=r(N):D?(I=!1,j=t(A,!0)):b?(I=!1,j=n(A,!0)):j=[]:d(A)||s(A)?(j=N,s(N)?j=g(N):(!c(N)||u(N))&&(j=i(A))):I=!1}I&&(S.set(A,j),x(j,A,w,E,S),S.delete(A)),e(_,v,j)}return fm=m,fm}var hm,yE;function vz(){if(yE)return hm;yE=1;var e=Bu(),t=yj(),n=i0(),r=gz(),i=Bt(),s=mi(),a=_j();function o(l,u,c,d,f){l!==u&&n(u,function(h,g){if(f||(f=new e),i(h))r(l,u,g,c,o,d,f);else{var m=d?d(a(l,g),h,g+"",l,u,f):void 0;m===void 0&&(m=h),t(l,g,m)}},s)}return hm=o,hm}var pm,_E;function yz(){if(_E)return pm;_E=1;var e=Zu(),t=ec();function n(r){return e(function(i,s){var a=-1,o=s.length,l=o>1?s[o-1]:void 0,u=o>2?s[2]:void 0;for(l=r.length>3&&typeof l=="function"?(o--,l):void 0,u&&t(s[0],s[1],u)&&(l=o<3?void 0:l,o=1),i=Object(i);++a<o;){var c=s[a];c&&r(i,c,a,l)}return i})}return pm=n,pm}var mm,wE;function _z(){if(wE)return mm;wE=1;var e=vz(),t=yz(),n=t(function(r,i,s){e(r,i,s)});return mm=n,mm}var gm,xE;function wj(){if(xE)return gm;xE=1;function e(t,n){return t<n}return gm=e,gm}var vm,bE;function wz(){if(bE)return vm;bE=1;var e=c0(),t=wj(),n=gi();function r(i){return i&&i.length?e(i,n,t):void 0}return vm=r,vm}var ym,SE;function xz(){if(SE)return ym;SE=1;var e=c0(),t=Zn(),n=wj();function r(i,s){return i&&i.length?e(i,t(s,2),n):void 0}return ym=r,ym}var _m,EE;function bz(){if(EE)return _m;EE=1;var e=on(),t=function(){return e.Date.now()};return _m=t,_m}var wm,NE;function Sz(){if(NE)return wm;NE=1;var e=Hu(),t=Qu(),n=Vu(),r=Bt(),i=fo();function s(a,o,l,u){if(!r(a))return a;o=t(o,a);for(var c=-1,d=o.length,f=d-1,h=a;h!=null&&++c<d;){var g=i(o[c]),m=l;if(g==="__proto__"||g==="constructor"||g==="prototype")return a;if(c!=f){var _=h[g];m=u?u(_,g,h):void 0,m===void 0&&(m=r(_)?_:n(o[c+1])?[]:{})}e(h,g,m),h=h[g]}return a}return wm=s,wm}var xm,CE;function Ez(){if(CE)return xm;CE=1;var e=Ju(),t=Sz(),n=Qu();function r(i,s,a){for(var o=-1,l=s.length,u={};++o<l;){var c=s[o],d=e(i,c);a(d,c)&&t(u,n(c,i),d)}return u}return xm=r,xm}var bm,kE;function Nz(){if(kE)return bm;kE=1;var e=Ez(),t=J2();function n(r,i){return e(r,i,function(s,a){return t(r,a)})}return bm=n,bm}var Sm,RE;function Cz(){if(RE)return Sm;RE=1;var e=vj(),t=aj(),n=oj();function r(i){return n(t(i,void 0,e),i+"")}return Sm=r,Sm}var Em,jE;function kz(){if(jE)return Em;jE=1;var e=Nz(),t=Cz(),n=t(function(r,i){return r==null?{}:e(r,i)});return Em=n,Em}var Nm,AE;function Rz(){if(AE)return Nm;AE=1;var e=Math.ceil,t=Math.max;function n(r,i,s,a){for(var o=-1,l=t(e((i-r)/(s||1)),0),u=Array(l);l--;)u[a?l:++o]=r,r+=s;return u}return Nm=n,Nm}var Cm,PE;function jz(){if(PE)return Cm;PE=1;var e=Rz(),t=ec(),n=gj();function r(i){return function(s,a,o){return o&&typeof o!="number"&&t(s,a,o)&&(a=o=void 0),s=n(s),a===void 0?(a=s,s=0):a=n(a),o=o===void 0?s<a?1:-1:n(o),e(s,a,o,i)}}return Cm=r,Cm}var km,TE;function Az(){if(TE)return km;TE=1;var e=jz(),t=e();return km=t,km}var Rm,IE;function Pz(){if(IE)return Rm;IE=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Rm=e,Rm}var jm,ME;function Tz(){if(ME)return jm;ME=1;var e=Es();function t(n,r){if(n!==r){var i=n!==void 0,s=n===null,a=n===n,o=e(n),l=r!==void 0,u=r===null,c=r===r,d=e(r);if(!u&&!d&&!o&&n>r||o&&l&&c&&!u&&!d||s&&l&&c||!i&&c||!a)return 1;if(!s&&!o&&!d&&n<r||d&&i&&a&&!s&&!o||u&&i&&a||!l&&a||!c)return-1}return 0}return jm=t,jm}var Am,OE;function Iz(){if(OE)return Am;OE=1;var e=Tz();function t(n,r,i){for(var s=-1,a=n.criteria,o=r.criteria,l=a.length,u=i.length;++s<l;){var c=e(a[s],o[s]);if(c){if(s>=u)return c;var d=i[s];return c*(d=="desc"?-1:1)}}return n.index-r.index}return Am=t,Am}var Pm,$E;function Mz(){if($E)return Pm;$E=1;var e=Yu(),t=Ju(),n=Zn(),r=rj(),i=Pz(),s=Gu(),a=Iz(),o=gi(),l=Pe();function u(c,d,f){d.length?d=e(d,function(m){return l(m)?function(_){return t(_,m.length===1?m[0]:m)}:m}):d=[o];var h=-1;d=e(d,s(n));var g=r(c,function(m,_,y){var v=e(d,function(w){return w(m)});return{criteria:v,index:++h,value:m}});return i(g,function(m,_){return a(m,_,f)})}return Pm=u,Pm}var Tm,qE;function Oz(){if(qE)return Tm;qE=1;var e=l0(),t=Mz(),n=Zu(),r=ec(),i=n(function(s,a){if(s==null)return[];var o=a.length;return o>1&&r(s,a[0],a[1])?a=[]:o>2&&r(a[0],a[1],a[2])&&(a=[a[0]]),t(s,e(a,1),[])});return Tm=i,Tm}var Im,LE;function $z(){if(LE)return Im;LE=1;var e=Y2(),t=0;function n(r){var i=++t;return e(r)+i}return Im=n,Im}var Mm,FE;function qz(){if(FE)return Mm;FE=1;function e(t,n,r){for(var i=-1,s=t.length,a=n.length,o={};++i<s;){var l=i<a?n[i]:void 0;r(o,t[i],l)}return o}return Mm=e,Mm}var Om,DE;function Lz(){if(DE)return Om;DE=1;var e=Hu(),t=qz();function n(r,i){return t(r||[],i||[],e)}return Om=n,Om}var au;if(typeof Wy=="function")try{au={cloneDeep:ez(),constant:r0(),defaults:tz(),each:U2(),filter:ej(),find:lz(),flatten:vj(),forEach:B2(),forIn:uz(),has:tj(),isUndefined:nj(),last:cz(),map:ij(),mapValues:dz(),max:hz(),merge:_z(),min:wz(),minBy:xz(),now:bz(),pick:kz(),range:Az(),reduce:sj(),sortBy:Oz(),uniqueId:$z(),values:cj(),zipObject:Lz()}}catch{}au||(au=window._);var ye=au,Fz=tc;function tc(){var e={};e._next=e._prev=e,this._sentinel=e}tc.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return xj(t),t};tc.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&xj(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t};tc.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,Dz)),n=n._prev;return"["+e.join(", ")+"]"};function xj(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function Dz(e,t){if(e!=="_next"&&e!=="_prev")return t}var zn=ye,zz=ln.Graph,Bz=Fz,Uz=Vz,Hz=zn.constant(1);function Vz(e,t){if(e.nodeCount()<=1)return[];var n=Wz(e,t||Hz),r=Gz(n.graph,n.buckets,n.zeroIdx);return zn.flatten(zn.map(r,function(i){return e.outEdges(i.v,i.w)}),!0)}function Gz(e,t,n){for(var r=[],i=t[t.length-1],s=t[0],a;e.nodeCount();){for(;a=s.dequeue();)$m(e,t,n,a);for(;a=i.dequeue();)$m(e,t,n,a);if(e.nodeCount()){for(var o=t.length-2;o>0;--o)if(a=t[o].dequeue(),a){r=r.concat($m(e,t,n,a,!0));break}}}return r}function $m(e,t,n,r,i){var s=i?[]:void 0;return zn.forEach(e.inEdges(r.v),function(a){var o=e.edge(a),l=e.node(a.v);i&&s.push({v:a.v,w:a.w}),l.out-=o,pv(t,n,l)}),zn.forEach(e.outEdges(r.v),function(a){var o=e.edge(a),l=a.w,u=e.node(l);u.in-=o,pv(t,n,u)}),e.removeNode(r.v),s}function Wz(e,t){var n=new zz,r=0,i=0;zn.forEach(e.nodes(),function(o){n.setNode(o,{v:o,in:0,out:0})}),zn.forEach(e.edges(),function(o){var l=n.edge(o.v,o.w)||0,u=t(o),c=l+u;n.setEdge(o.v,o.w,c),i=Math.max(i,n.node(o.v).out+=u),r=Math.max(r,n.node(o.w).in+=u)});var s=zn.range(i+r+3).map(function(){return new Bz}),a=r+1;return zn.forEach(n.nodes(),function(o){pv(s,a,n.node(o))}),{graph:n,buckets:s,zeroIdx:a}}function pv(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var Qr=ye,Kz=Uz,Xz={run:Yz,undo:Jz};function Yz(e){var t=e.graph().acyclicer==="greedy"?Kz(e,n(e)):Qz(e);Qr.forEach(t,function(r){var i=e.edge(r);e.removeEdge(r),i.forwardName=r.name,i.reversed=!0,e.setEdge(r.w,r.v,i,Qr.uniqueId("rev"))});function n(r){return function(i){return r.edge(i).weight}}}function Qz(e){var t=[],n={},r={};function i(s){Qr.has(r,s)||(r[s]=!0,n[s]=!0,Qr.forEach(e.outEdges(s),function(a){Qr.has(n,a.w)?t.push(a):i(a.w)}),delete n[s])}return Qr.forEach(e.nodes(),i),t}function Jz(e){Qr.forEach(e.edges(),function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}var oe=ye,bj=ln.Graph,yt={addDummyNode:Sj,simplify:Zz,asNonCompoundGraph:eB,successorWeights:tB,predecessorWeights:nB,intersectRect:rB,buildLayerMatrix:iB,normalizeRanks:sB,removeEmptyRanks:aB,addBorderNode:oB,maxRank:Ej,partition:lB,time:uB,notime:cB};function Sj(e,t,n,r){var i;do i=oe.uniqueId(r);while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function Zz(e){var t=new bj().setGraph(e.graph());return oe.forEach(e.nodes(),function(n){t.setNode(n,e.node(n))}),oe.forEach(e.edges(),function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),t}function eB(e){var t=new bj({multigraph:e.isMultigraph()}).setGraph(e.graph());return oe.forEach(e.nodes(),function(n){e.children(n).length||t.setNode(n,e.node(n))}),oe.forEach(e.edges(),function(n){t.setEdge(n,e.edge(n))}),t}function tB(e){var t=oe.map(e.nodes(),function(n){var r={};return oe.forEach(e.outEdges(n),function(i){r[i.w]=(r[i.w]||0)+e.edge(i).weight}),r});return oe.zipObject(e.nodes(),t)}function nB(e){var t=oe.map(e.nodes(),function(n){var r={};return oe.forEach(e.inEdges(n),function(i){r[i.v]=(r[i.v]||0)+e.edge(i).weight}),r});return oe.zipObject(e.nodes(),t)}function rB(e,t){var n=e.x,r=e.y,i=t.x-n,s=t.y-r,a=e.width/2,o=e.height/2;if(!i&&!s)throw new Error("Not possible to find intersection inside of the rectangle");var l,u;return Math.abs(s)*a>Math.abs(i)*o?(s<0&&(o=-o),l=o*i/s,u=o):(i<0&&(a=-a),l=a,u=a*s/i),{x:n+l,y:r+u}}function iB(e){var t=oe.map(oe.range(Ej(e)+1),function(){return[]});return oe.forEach(e.nodes(),function(n){var r=e.node(n),i=r.rank;oe.isUndefined(i)||(t[i][r.order]=n)}),t}function sB(e){var t=oe.min(oe.map(e.nodes(),function(n){return e.node(n).rank}));oe.forEach(e.nodes(),function(n){var r=e.node(n);oe.has(r,"rank")&&(r.rank-=t)})}function aB(e){var t=oe.min(oe.map(e.nodes(),function(s){return e.node(s).rank})),n=[];oe.forEach(e.nodes(),function(s){var a=e.node(s).rank-t;n[a]||(n[a]=[]),n[a].push(s)});var r=0,i=e.graph().nodeRankFactor;oe.forEach(n,function(s,a){oe.isUndefined(s)&&a%i!==0?--r:r&&oe.forEach(s,function(o){e.node(o).rank+=r})})}function oB(e,t,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),Sj(e,"border",i,t)}function Ej(e){return oe.max(oe.map(e.nodes(),function(t){var n=e.node(t).rank;if(!oe.isUndefined(n))return n}))}function lB(e,t){var n={lhs:[],rhs:[]};return oe.forEach(e,function(r){t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function uB(e,t){var n=oe.now();try{return t()}finally{console.log(e+" time: "+(oe.now()-n)+"ms")}}function cB(e,t){return t()}var Nj=ye,dB=yt,fB={run:hB,undo:mB};function hB(e){e.graph().dummyChains=[],Nj.forEach(e.edges(),function(t){pB(e,t)})}function pB(e,t){var n=t.v,r=e.node(n).rank,i=t.w,s=e.node(i).rank,a=t.name,o=e.edge(t),l=o.labelRank;if(s!==r+1){e.removeEdge(t);var u,c,d;for(d=0,++r;r<s;++d,++r)o.points=[],c={width:0,height:0,edgeLabel:o,edgeObj:t,rank:r},u=dB.addDummyNode(e,"edge",c,"_d"),r===l&&(c.width=o.width,c.height=o.height,c.dummy="edge-label",c.labelpos=o.labelpos),e.setEdge(n,u,{weight:o.weight},a),d===0&&e.graph().dummyChains.push(u),n=u;e.setEdge(n,i,{weight:o.weight},a)}}function mB(e){Nj.forEach(e.graph().dummyChains,function(t){var n=e.node(t),r=n.edgeLabel,i;for(e.setEdge(n.edgeObj,r);n.dummy;)i=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=i,n=e.node(t)})}var Go=ye,nc={longestPath:gB,slack:vB};function gB(e){var t={};function n(r){var i=e.node(r);if(Go.has(t,r))return i.rank;t[r]=!0;var s=Go.min(Go.map(e.outEdges(r),function(a){return n(a.w)-e.edge(a).minlen}));return(s===Number.POSITIVE_INFINITY||s===void 0||s===null)&&(s=0),i.rank=s}Go.forEach(e.sources(),n)}function vB(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var ou=ye,yB=ln.Graph,lu=nc.slack,Cj=_B;function _B(e){var t=new yB({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var i,s;wB(t,e)<r;)i=xB(t,e),s=t.hasNode(i.v)?lu(e,i):-lu(e,i),bB(t,e,s);return t}function wB(e,t){function n(r){ou.forEach(t.nodeEdges(r),function(i){var s=i.v,a=r===s?i.w:s;!e.hasNode(a)&&!lu(t,i)&&(e.setNode(a,{}),e.setEdge(r,a,{}),n(a))})}return ou.forEach(e.nodes(),n),e.nodeCount()}function xB(e,t){return ou.minBy(t.edges(),function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return lu(t,n)})}function bB(e,t,n){ou.forEach(e.nodes(),function(r){t.node(r).rank+=n})}var Yn=ye,SB=Cj,EB=nc.slack,NB=nc.longestPath,CB=ln.alg.preorder,kB=ln.alg.postorder,RB=yt.simplify,jB=vi;vi.initLowLimValues=f0;vi.initCutValues=d0;vi.calcCutValue=kj;vi.leaveEdge=jj;vi.enterEdge=Aj;vi.exchangeEdges=Pj;function vi(e){e=RB(e),NB(e);var t=SB(e);f0(t),d0(t,e);for(var n,r;n=jj(t);)r=Aj(t,e,n),Pj(t,e,n,r)}function d0(e,t){var n=kB(e,e.nodes());n=n.slice(0,n.length-1),Yn.forEach(n,function(r){AB(e,t,r)})}function AB(e,t,n){var r=e.node(n),i=r.parent;e.edge(n,i).cutvalue=kj(e,t,n)}function kj(e,t,n){var r=e.node(n),i=r.parent,s=!0,a=t.edge(n,i),o=0;return a||(s=!1,a=t.edge(i,n)),o=a.weight,Yn.forEach(t.nodeEdges(n),function(l){var u=l.v===n,c=u?l.w:l.v;if(c!==i){var d=u===s,f=t.edge(l).weight;if(o+=d?f:-f,TB(e,n,c)){var h=e.edge(n,c).cutvalue;o+=d?-h:h}}}),o}function f0(e,t){arguments.length<2&&(t=e.nodes()[0]),Rj(e,{},1,t)}function Rj(e,t,n,r,i){var s=n,a=e.node(r);return t[r]=!0,Yn.forEach(e.neighbors(r),function(o){Yn.has(t,o)||(n=Rj(e,t,n,o,r))}),a.low=s,a.lim=n++,i?a.parent=i:delete a.parent,n}function jj(e){return Yn.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function Aj(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var s=e.node(r),a=e.node(i),o=s,l=!1;s.lim>a.lim&&(o=a,l=!0);var u=Yn.filter(t.edges(),function(c){return l===zE(e,e.node(c.v),o)&&l!==zE(e,e.node(c.w),o)});return Yn.minBy(u,function(c){return EB(t,c)})}function Pj(e,t,n,r){var i=n.v,s=n.w;e.removeEdge(i,s),e.setEdge(r.v,r.w,{}),f0(e),d0(e,t),PB(e,t)}function PB(e,t){var n=Yn.find(e.nodes(),function(i){return!t.node(i).parent}),r=CB(e,n);r=r.slice(1),Yn.forEach(r,function(i){var s=e.node(i).parent,a=t.edge(i,s),o=!1;a||(a=t.edge(s,i),o=!0),t.node(i).rank=t.node(s).rank+(o?a.minlen:-a.minlen)})}function TB(e,t,n){return e.hasEdge(t,n)}function zE(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var IB=nc,Tj=IB.longestPath,MB=Cj,OB=jB,$B=qB;function qB(e){switch(e.graph().ranker){case"network-simplex":BE(e);break;case"tight-tree":FB(e);break;case"longest-path":LB(e);break;default:BE(e)}}var LB=Tj;function FB(e){Tj(e),MB(e)}function BE(e){OB(e)}var mv=ye,DB=zB;function zB(e){var t=UB(e);mv.forEach(e.graph().dummyChains,function(n){for(var r=e.node(n),i=r.edgeObj,s=BB(e,t,i.v,i.w),a=s.path,o=s.lca,l=0,u=a[l],c=!0;n!==i.w;){if(r=e.node(n),c){for(;(u=a[l])!==o&&e.node(u).maxRank<r.rank;)l++;u===o&&(c=!1)}if(!c){for(;l<a.length-1&&e.node(u=a[l+1]).minRank<=r.rank;)l++;u=a[l]}e.setParent(n,u),n=e.successors(n)[0]}})}function BB(e,t,n,r){var i=[],s=[],a=Math.min(t[n].low,t[r].low),o=Math.max(t[n].lim,t[r].lim),l,u;l=n;do l=e.parent(l),i.push(l);while(l&&(t[l].low>a||o>t[l].lim));for(u=l,l=r;(l=e.parent(l))!==u;)s.push(l);return{path:i.concat(s.reverse()),lca:u}}function UB(e){var t={},n=0;function r(i){var s=n;mv.forEach(e.children(i),r),t[i]={low:s,lim:n++}}return mv.forEach(e.children(),r),t}var Bn=ye,gv=yt,HB={run:VB,cleanup:KB};function VB(e){var t=gv.addDummyNode(e,"root",{},"_root"),n=GB(e),r=Bn.max(Bn.values(n))-1,i=2*r+1;e.graph().nestingRoot=t,Bn.forEach(e.edges(),function(a){e.edge(a).minlen*=i});var s=WB(e)+1;Bn.forEach(e.children(),function(a){Ij(e,t,i,s,r,n,a)}),e.graph().nodeRankFactor=i}function Ij(e,t,n,r,i,s,a){var o=e.children(a);if(!o.length){a!==t&&e.setEdge(t,a,{weight:0,minlen:n});return}var l=gv.addBorderNode(e,"_bt"),u=gv.addBorderNode(e,"_bb"),c=e.node(a);e.setParent(l,a),c.borderTop=l,e.setParent(u,a),c.borderBottom=u,Bn.forEach(o,function(d){Ij(e,t,n,r,i,s,d);var f=e.node(d),h=f.borderTop?f.borderTop:d,g=f.borderBottom?f.borderBottom:d,m=f.borderTop?r:2*r,_=h!==g?1:i-s[a]+1;e.setEdge(l,h,{weight:m,minlen:_,nestingEdge:!0}),e.setEdge(g,u,{weight:m,minlen:_,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,l,{weight:0,minlen:i+s[a]})}function GB(e){var t={};function n(r,i){var s=e.children(r);s&&s.length&&Bn.forEach(s,function(a){n(a,i+1)}),t[r]=i}return Bn.forEach(e.children(),function(r){n(r,1)}),t}function WB(e){return Bn.reduce(e.edges(),function(t,n){return t+e.edge(n).weight},0)}function KB(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,Bn.forEach(e.edges(),function(n){var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}var qm=ye,XB=yt,YB=QB;function QB(e){function t(n){var r=e.children(n),i=e.node(n);if(r.length&&qm.forEach(r,t),qm.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var s=i.minRank,a=i.maxRank+1;s<a;++s)UE(e,"borderLeft","_bl",n,i,s),UE(e,"borderRight","_br",n,i,s)}}qm.forEach(e.children(),t)}function UE(e,t,n,r,i,s){var a={width:0,height:0,rank:s,borderType:t},o=i[t][s-1],l=XB.addDummyNode(e,"border",a,n);i[t][s]=l,e.setParent(l,r),o&&e.setEdge(o,l,{weight:1})}var wn=ye,JB={adjust:ZB,undo:e6};function ZB(e){var t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Mj(e)}function e6(e){var t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&t6(e),(t==="lr"||t==="rl")&&(n6(e),Mj(e))}function Mj(e){wn.forEach(e.nodes(),function(t){HE(e.node(t))}),wn.forEach(e.edges(),function(t){HE(e.edge(t))})}function HE(e){var t=e.width;e.width=e.height,e.height=t}function t6(e){wn.forEach(e.nodes(),function(t){Lm(e.node(t))}),wn.forEach(e.edges(),function(t){var n=e.edge(t);wn.forEach(n.points,Lm),wn.has(n,"y")&&Lm(n)})}function Lm(e){e.y=-e.y}function n6(e){wn.forEach(e.nodes(),function(t){Fm(e.node(t))}),wn.forEach(e.edges(),function(t){var n=e.edge(t);wn.forEach(n.points,Fm),wn.has(n,"x")&&Fm(n)})}function Fm(e){var t=e.x;e.x=e.y,e.y=t}var In=ye,r6=i6;function i6(e){var t={},n=In.filter(e.nodes(),function(o){return!e.children(o).length}),r=In.max(In.map(n,function(o){return e.node(o).rank})),i=In.map(In.range(r+1),function(){return[]});function s(o){if(!In.has(t,o)){t[o]=!0;var l=e.node(o);i[l.rank].push(o),In.forEach(e.successors(o),s)}}var a=In.sortBy(n,function(o){return e.node(o).rank});return In.forEach(a,s),i}var rr=ye,s6=a6;function a6(e,t){for(var n=0,r=1;r<t.length;++r)n+=o6(e,t[r-1],t[r]);return n}function o6(e,t,n){for(var r=rr.zipObject(n,rr.map(n,function(u,c){return c})),i=rr.flatten(rr.map(t,function(u){return rr.sortBy(rr.map(e.outEdges(u),function(c){return{pos:r[c.w],weight:e.edge(c).weight}}),"pos")}),!0),s=1;s<n.length;)s<<=1;var a=2*s-1;s-=1;var o=rr.map(new Array(a),function(){return 0}),l=0;return rr.forEach(i.forEach(function(u){var c=u.pos+s;o[c]+=u.weight;for(var d=0;c>0;)c%2&&(d+=o[c+1]),c=c-1>>1,o[c]+=u.weight;l+=u.weight*d})),l}var VE=ye,l6=u6;function u6(e,t){return VE.map(t,function(n){var r=e.inEdges(n);if(r.length){var i=VE.reduce(r,function(s,a){var o=e.edge(a),l=e.node(a.v);return{sum:s.sum+o.weight*l.order,weight:s.weight+o.weight}},{sum:0,weight:0});return{v:n,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:n}})}var kt=ye,c6=d6;function d6(e,t){var n={};kt.forEach(e,function(i,s){var a=n[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:s};kt.isUndefined(i.barycenter)||(a.barycenter=i.barycenter,a.weight=i.weight)}),kt.forEach(t.edges(),function(i){var s=n[i.v],a=n[i.w];!kt.isUndefined(s)&&!kt.isUndefined(a)&&(a.indegree++,s.out.push(n[i.w]))});var r=kt.filter(n,function(i){return!i.indegree});return f6(r)}function f6(e){var t=[];function n(s){return function(a){a.merged||(kt.isUndefined(a.barycenter)||kt.isUndefined(s.barycenter)||a.barycenter>=s.barycenter)&&h6(s,a)}}function r(s){return function(a){a.in.push(s),--a.indegree===0&&e.push(a)}}for(;e.length;){var i=e.pop();t.push(i),kt.forEach(i.in.reverse(),n(i)),kt.forEach(i.out,r(i))}return kt.map(kt.filter(t,function(s){return!s.merged}),function(s){return kt.pick(s,["vs","i","barycenter","weight"])})}function h6(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}var Zs=ye,p6=yt,m6=g6;function g6(e,t){var n=p6.partition(e,function(c){return Zs.has(c,"barycenter")}),r=n.lhs,i=Zs.sortBy(n.rhs,function(c){return-c.i}),s=[],a=0,o=0,l=0;r.sort(v6(!!t)),l=GE(s,i,l),Zs.forEach(r,function(c){l+=c.vs.length,s.push(c.vs),a+=c.barycenter*c.weight,o+=c.weight,l=GE(s,i,l)});var u={vs:Zs.flatten(s,!0)};return o&&(u.barycenter=a/o,u.weight=o),u}function GE(e,t,n){for(var r;t.length&&(r=Zs.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}function v6(e){return function(t,n){return t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}}var mr=ye,y6=l6,_6=c6,w6=m6,x6=Oj;function Oj(e,t,n,r){var i=e.children(t),s=e.node(t),a=s?s.borderLeft:void 0,o=s?s.borderRight:void 0,l={};a&&(i=mr.filter(i,function(g){return g!==a&&g!==o}));var u=y6(e,i);mr.forEach(u,function(g){if(e.children(g.v).length){var m=Oj(e,g.v,n,r);l[g.v]=m,mr.has(m,"barycenter")&&S6(g,m)}});var c=_6(u,n);b6(c,l);var d=w6(c,r);if(a&&(d.vs=mr.flatten([a,d.vs,o],!0),e.predecessors(a).length)){var f=e.node(e.predecessors(a)[0]),h=e.node(e.predecessors(o)[0]);mr.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+h.order)/(d.weight+2),d.weight+=2}return d}function b6(e,t){mr.forEach(e,function(n){n.vs=mr.flatten(n.vs.map(function(r){return t[r]?t[r].vs:r}),!0)})}function S6(e,t){mr.isUndefined(e.barycenter)?(e.barycenter=t.barycenter,e.weight=t.weight):(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight)}var ea=ye,E6=ln.Graph,N6=C6;function C6(e,t,n){var r=k6(e),i=new E6({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(s){return e.node(s)});return ea.forEach(e.nodes(),function(s){var a=e.node(s),o=e.parent(s);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(i.setNode(s),i.setParent(s,o||r),ea.forEach(e[n](s),function(l){var u=l.v===s?l.w:l.v,c=i.edge(u,s),d=ea.isUndefined(c)?0:c.weight;i.setEdge(u,s,{weight:e.edge(l).weight+d})}),ea.has(a,"minRank")&&i.setNode(s,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))}),i}function k6(e){for(var t;e.hasNode(t=ea.uniqueId("_root")););return t}var R6=ye,j6=A6;function A6(e,t,n){var r={},i;R6.forEach(n,function(s){for(var a=e.parent(s),o,l;a;){if(o=e.parent(a),o?(l=r[o],r[o]=a):(l=i,i=a),l&&l!==a){t.setEdge(l,a);return}a=o}})}var Ar=ye,P6=r6,T6=s6,I6=x6,M6=N6,O6=j6,$6=ln.Graph,WE=yt,q6=L6;function L6(e){var t=WE.maxRank(e),n=KE(e,Ar.range(1,t+1),"inEdges"),r=KE(e,Ar.range(t-1,-1,-1),"outEdges"),i=P6(e);XE(e,i);for(var s=Number.POSITIVE_INFINITY,a,o=0,l=0;l<4;++o,++l){F6(o%2?n:r,o%4>=2),i=WE.buildLayerMatrix(e);var u=T6(e,i);u<s&&(l=0,a=Ar.cloneDeep(i),s=u)}XE(e,a)}function KE(e,t,n){return Ar.map(t,function(r){return M6(e,r,n)})}function F6(e,t){var n=new $6;Ar.forEach(e,function(r){var i=r.graph().root,s=I6(r,i,n,t);Ar.forEach(s.vs,function(a,o){r.node(a).order=o}),O6(r,n,s.vs)})}function XE(e,t){Ar.forEach(t,function(n){Ar.forEach(n,function(r,i){e.node(r).order=i})})}var Z=ye,D6=ln.Graph,z6=yt,B6={positionX:V6,findType1Conflicts:$j,findType2Conflicts:qj,addConflict:h0,hasConflict:Lj,verticalAlignment:Fj,horizontalCompaction:Dj,alignCoordinates:Bj,findSmallestWidthAlignment:zj,balance:Uj};function $j(e,t){var n={};function r(i,s){var a=0,o=0,l=i.length,u=Z.last(s);return Z.forEach(s,function(c,d){var f=U6(e,c),h=f?e.node(f).order:l;(f||c===u)&&(Z.forEach(s.slice(o,d+1),function(g){Z.forEach(e.predecessors(g),function(m){var _=e.node(m),y=_.order;(y<a||h<y)&&!(_.dummy&&e.node(g).dummy)&&h0(n,m,g)})}),o=d+1,a=h)}),s}return Z.reduce(t,r),n}function qj(e,t){var n={};function r(s,a,o,l,u){var c;Z.forEach(Z.range(a,o),function(d){c=s[d],e.node(c).dummy&&Z.forEach(e.predecessors(c),function(f){var h=e.node(f);h.dummy&&(h.order<l||h.order>u)&&h0(n,f,c)})})}function i(s,a){var o=-1,l,u=0;return Z.forEach(a,function(c,d){if(e.node(c).dummy==="border"){var f=e.predecessors(c);f.length&&(l=e.node(f[0]).order,r(a,u,d,o,l),u=d,o=l)}r(a,u,a.length,l,s.length)}),a}return Z.reduce(t,i),n}function U6(e,t){if(e.node(t).dummy)return Z.find(e.predecessors(t),function(n){return e.node(n).dummy})}function h0(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function Lj(e,t,n){if(t>n){var r=t;t=n,n=r}return Z.has(e[t],n)}function Fj(e,t,n,r){var i={},s={},a={};return Z.forEach(t,function(o){Z.forEach(o,function(l,u){i[l]=l,s[l]=l,a[l]=u})}),Z.forEach(t,function(o){var l=-1;Z.forEach(o,function(u){var c=r(u);if(c.length){c=Z.sortBy(c,function(m){return a[m]});for(var d=(c.length-1)/2,f=Math.floor(d),h=Math.ceil(d);f<=h;++f){var g=c[f];s[u]===u&&l<a[g]&&!Lj(n,u,g)&&(s[g]=u,s[u]=i[u]=i[g],l=a[g])}}})}),{root:i,align:s}}function Dj(e,t,n,r,i){var s={},a=H6(e,t,n,i),o=i?"borderLeft":"borderRight";function l(d,f){for(var h=a.nodes(),g=h.pop(),m={};g;)m[g]?d(g):(m[g]=!0,h.push(g),h=h.concat(f(g))),g=h.pop()}function u(d){s[d]=a.inEdges(d).reduce(function(f,h){return Math.max(f,s[h.v]+a.edge(h))},0)}function c(d){var f=a.outEdges(d).reduce(function(g,m){return Math.min(g,s[m.w]-a.edge(m))},Number.POSITIVE_INFINITY),h=e.node(d);f!==Number.POSITIVE_INFINITY&&h.borderType!==o&&(s[d]=Math.max(s[d],f))}return l(u,a.predecessors.bind(a)),l(c,a.successors.bind(a)),Z.forEach(r,function(d){s[d]=s[n[d]]}),s}function H6(e,t,n,r){var i=new D6,s=e.graph(),a=G6(s.nodesep,s.edgesep,r);return Z.forEach(t,function(o){var l;Z.forEach(o,function(u){var c=n[u];if(i.setNode(c),l){var d=n[l],f=i.edge(d,c);i.setEdge(d,c,Math.max(a(e,u,l),f||0))}l=u})}),i}function zj(e,t){return Z.minBy(Z.values(t),function(n){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return Z.forIn(n,function(s,a){var o=W6(e,a)/2;r=Math.max(s+o,r),i=Math.min(s-o,i)}),r-i})}function Bj(e,t){var n=Z.values(t),r=Z.min(n),i=Z.max(n);Z.forEach(["u","d"],function(s){Z.forEach(["l","r"],function(a){var o=s+a,l=e[o],u;if(l!==t){var c=Z.values(l);u=a==="l"?r-Z.min(c):i-Z.max(c),u&&(e[o]=Z.mapValues(l,function(d){return d+u}))}})})}function Uj(e,t){return Z.mapValues(e.ul,function(n,r){if(t)return e[t.toLowerCase()][r];var i=Z.sortBy(Z.map(e,r));return(i[1]+i[2])/2})}function V6(e){var t=z6.buildLayerMatrix(e),n=Z.merge($j(e,t),qj(e,t)),r={},i;Z.forEach(["u","d"],function(a){i=a==="u"?t:Z.values(t).reverse(),Z.forEach(["l","r"],function(o){o==="r"&&(i=Z.map(i,function(d){return Z.values(d).reverse()}));var l=(a==="u"?e.predecessors:e.successors).bind(e),u=Fj(e,i,n,l),c=Dj(e,i,u.root,u.align,o==="r");o==="r"&&(c=Z.mapValues(c,function(d){return-d})),r[a+o]=c})});var s=zj(e,r);return Bj(r,s),Uj(r,e.graph().align)}function G6(e,t,n){return function(r,i,s){var a=r.node(i),o=r.node(s),l=0,u;if(l+=a.width/2,Z.has(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":u=-a.width/2;break;case"r":u=a.width/2;break}if(u&&(l+=n?u:-u),u=0,l+=(a.dummy?t:e)/2,l+=(o.dummy?t:e)/2,l+=o.width/2,Z.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":u=o.width/2;break;case"r":u=-o.width/2;break}return u&&(l+=n?u:-u),u=0,l}}function W6(e,t){return e.node(t).width}var ta=ye,Hj=yt,K6=B6.positionX,X6=Y6;function Y6(e){e=Hj.asNonCompoundGraph(e),Q6(e),ta.forEach(K6(e),function(t,n){e.node(n).x=t})}function Q6(e){var t=Hj.buildLayerMatrix(e),n=e.graph().ranksep,r=0;ta.forEach(t,function(i){var s=ta.max(ta.map(i,function(a){return e.node(a).height}));ta.forEach(i,function(a){e.node(a).y=r+s/2}),r+=s+n})}var ee=ye,YE=Xz,QE=fB,J6=$B,Z6=yt.normalizeRanks,e8=DB,t8=yt.removeEmptyRanks,JE=HB,n8=YB,ZE=JB,r8=q6,i8=X6,Or=yt,s8=ln.Graph,a8=o8;function o8(e,t){var n=t&&t.debugTiming?Or.time:Or.notime;n("layout",function(){var r=n("  buildLayoutGraph",function(){return y8(e)});n("  runLayout",function(){l8(r,n)}),n("  updateInputGraph",function(){u8(e,r)})})}function l8(e,t){t("    makeSpaceForEdgeLabels",function(){_8(e)}),t("    removeSelfEdges",function(){R8(e)}),t("    acyclic",function(){YE.run(e)}),t("    nestingGraph.run",function(){JE.run(e)}),t("    rank",function(){J6(Or.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){w8(e)}),t("    removeEmptyRanks",function(){t8(e)}),t("    nestingGraph.cleanup",function(){JE.cleanup(e)}),t("    normalizeRanks",function(){Z6(e)}),t("    assignRankMinMax",function(){x8(e)}),t("    removeEdgeLabelProxies",function(){b8(e)}),t("    normalize.run",function(){QE.run(e)}),t("    parentDummyChains",function(){e8(e)}),t("    addBorderSegments",function(){n8(e)}),t("    order",function(){r8(e)}),t("    insertSelfEdges",function(){j8(e)}),t("    adjustCoordinateSystem",function(){ZE.adjust(e)}),t("    position",function(){i8(e)}),t("    positionSelfEdges",function(){A8(e)}),t("    removeBorderNodes",function(){k8(e)}),t("    normalize.undo",function(){QE.undo(e)}),t("    fixupEdgeLabelCoords",function(){N8(e)}),t("    undoCoordinateSystem",function(){ZE.undo(e)}),t("    translateGraph",function(){S8(e)}),t("    assignNodeIntersects",function(){E8(e)}),t("    reversePoints",function(){C8(e)}),t("    acyclic.undo",function(){YE.undo(e)})}function u8(e,t){ee.forEach(e.nodes(),function(n){var r=e.node(n),i=t.node(n);r&&(r.x=i.x,r.y=i.y,t.children(n).length&&(r.width=i.width,r.height=i.height))}),ee.forEach(e.edges(),function(n){var r=e.edge(n),i=t.edge(n);r.points=i.points,ee.has(i,"x")&&(r.x=i.x,r.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var c8=["nodesep","edgesep","ranksep","marginx","marginy"],d8={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},f8=["acyclicer","ranker","rankdir","align"],h8=["width","height"],p8={width:0,height:0},m8=["minlen","weight","width","height","labeloffset"],g8={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},v8=["labelpos"];function y8(e){var t=new s8({multigraph:!0,compound:!0}),n=zm(e.graph());return t.setGraph(ee.merge({},d8,Dm(n,c8),ee.pick(n,f8))),ee.forEach(e.nodes(),function(r){var i=zm(e.node(r));t.setNode(r,ee.defaults(Dm(i,h8),p8)),t.setParent(r,e.parent(r))}),ee.forEach(e.edges(),function(r){var i=zm(e.edge(r));t.setEdge(r,ee.merge({},g8,Dm(i,m8),ee.pick(i,v8)))}),t}function _8(e){var t=e.graph();t.ranksep/=2,ee.forEach(e.edges(),function(n){var r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function w8(e){ee.forEach(e.edges(),function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i=e.node(t.w),s={rank:(i.rank-r.rank)/2+r.rank,e:t};Or.addDummyNode(e,"edge-proxy",s,"_ep")}})}function x8(e){var t=0;ee.forEach(e.nodes(),function(n){var r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=ee.max(t,r.maxRank))}),e.graph().maxRank=t}function b8(e){ee.forEach(e.nodes(),function(t){var n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function S8(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,s=e.graph(),a=s.marginx||0,o=s.marginy||0;function l(u){var c=u.x,d=u.y,f=u.width,h=u.height;t=Math.min(t,c-f/2),n=Math.max(n,c+f/2),r=Math.min(r,d-h/2),i=Math.max(i,d+h/2)}ee.forEach(e.nodes(),function(u){l(e.node(u))}),ee.forEach(e.edges(),function(u){var c=e.edge(u);ee.has(c,"x")&&l(c)}),t-=a,r-=o,ee.forEach(e.nodes(),function(u){var c=e.node(u);c.x-=t,c.y-=r}),ee.forEach(e.edges(),function(u){var c=e.edge(u);ee.forEach(c.points,function(d){d.x-=t,d.y-=r}),ee.has(c,"x")&&(c.x-=t),ee.has(c,"y")&&(c.y-=r)}),s.width=n-t+a,s.height=i-r+o}function E8(e){ee.forEach(e.edges(),function(t){var n=e.edge(t),r=e.node(t.v),i=e.node(t.w),s,a;n.points?(s=n.points[0],a=n.points[n.points.length-1]):(n.points=[],s=i,a=r),n.points.unshift(Or.intersectRect(r,s)),n.points.push(Or.intersectRect(i,a))})}function N8(e){ee.forEach(e.edges(),function(t){var n=e.edge(t);if(ee.has(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function C8(e){ee.forEach(e.edges(),function(t){var n=e.edge(t);n.reversed&&n.points.reverse()})}function k8(e){ee.forEach(e.nodes(),function(t){if(e.children(t).length){var n=e.node(t),r=e.node(n.borderTop),i=e.node(n.borderBottom),s=e.node(ee.last(n.borderLeft)),a=e.node(ee.last(n.borderRight));n.width=Math.abs(a.x-s.x),n.height=Math.abs(i.y-r.y),n.x=s.x+n.width/2,n.y=r.y+n.height/2}}),ee.forEach(e.nodes(),function(t){e.node(t).dummy==="border"&&e.removeNode(t)})}function R8(e){ee.forEach(e.edges(),function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function j8(e){var t=Or.buildLayerMatrix(e);ee.forEach(t,function(n){var r=0;ee.forEach(n,function(i,s){var a=e.node(i);a.order=s+r,ee.forEach(a.selfEdges,function(o){Or.addDummyNode(e,"selfedge",{width:o.label.width,height:o.label.height,rank:a.rank,order:s+ ++r,e:o.e,label:o.label},"_se")}),delete a.selfEdges})})}function A8(e){ee.forEach(e.nodes(),function(t){var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),i=r.x+r.width/2,s=r.y,a=n.x-i,o=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*a/3,y:s-o},{x:i+5*a/6,y:s-o},{x:i+a,y:s},{x:i+5*a/6,y:s+o},{x:i+2*a/3,y:s+o}],n.label.x=n.x,n.label.y=n.y}})}function Dm(e,t){return ee.mapValues(ee.pick(e,t),Number)}function zm(e){var t={};return ee.forEach(e,function(n,r){t[r.toLowerCase()]=n}),t}var Wo=ye,P8=yt,T8=ln.Graph,I8={debugOrdering:M8};function M8(e){var t=P8.buildLayerMatrix(e),n=new T8({compound:!0,multigraph:!0}).setGraph({});return Wo.forEach(e.nodes(),function(r){n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),Wo.forEach(e.edges(),function(r){n.setEdge(r.v,r.w,{},r.name)}),Wo.forEach(t,function(r,i){var s="layer"+i;n.setNode(s,{rank:"same"}),Wo.reduce(r,function(a,o){return n.setEdge(a,o,{style:"invis"}),o})}),n}var O8="0.8.5",$8={graphlib:ln,layout:a8,debug:I8,util:{time:yt.time,notime:yt.notime},version:O8};const eN=Av($8),ir=300,sr=150,q8=300,L8=200;function Ei(e){return O.createElement("div",{className:"p-2"},e)}function Bm(e){var a,o,l,u;const t=[],n=[],r=new eN.graphlib.Graph;if(r.setDefaultEdgeLabel(()=>({})),r.setGraph({rankdir:"TB",ranksep:q8,nodesep:L8,rankAlignment:"UL"}),(a=e.solution)!=null&&a.solution_description){const c="solution";t.push({id:c,data:{label:Ei([O.createElement("div",{className:"font-bold",key:"title"},"Solution"),O.createElement("div",{className:"text-sm",key:"desc"},e.solution.solution_description)])},position:{x:0,y:0},className:"bg-gray-100 border-2 border-gray-500 rounded-md"}),r.setNode(c,{width:ir,height:sr,rank:0})}if((o=e.solution)!=null&&o.didactic_approach){const c="didactic_approach";t.push({id:c,data:{label:Ei([O.createElement("div",{className:"font-bold",key:"title"},"Didactic Approach"),O.createElement("div",{className:"text-sm",key:"desc"},e.solution.didactic_approach)])},position:{x:0,y:0},className:"bg-gray-100 border-2 border-gray-500 rounded-md"}),r.setNode(c,{width:ir,height:sr,rank:0})}const i=((u=(l=e.solution)==null?void 0:l.didactic_template)==null?void 0:u.learning_sequences)||[];return i.forEach((c,d)=>{var g,m;const f=`sequence-${c.sequence_id}`;t.push({id:f,data:{label:Ei([O.createElement("div",{className:"font-bold",key:"title"},c.sequence_name||c.sequence_id),O.createElement("div",{className:"text-sm",key:"time"},`Time: ${c.time_frame}`),O.createElement("div",{className:"text-sm",key:"goal"},`Goal: ${c.learning_goal}`),O.createElement("div",{className:"text-sm",key:"transition"},`Transition: ${c.transition_type}`)])},position:{x:0,y:0},className:"bg-blue-100 border-2 border-blue-500 rounded-md"}),r.setNode(f,{width:ir,height:sr,rank:1}),(g=e.solution)!=null&&g.solution_description&&n.push({id:`edge-solution-${f}`,source:"solution",target:f,style:{strokeDasharray:"5,5"},label:"contains"}),(m=e.solution)!=null&&m.didactic_approach&&n.push({id:`edge-approach-${f}`,source:"didactic_approach",target:f,style:{strokeDasharray:"5,5"},label:"implements"});const h=c.phases||[];h.forEach((_,y)=>{const v=`phase-${_.phase_id}`;if(t.push({id:v,data:{label:Ei([O.createElement("div",{className:"font-bold",key:"title"},_.phase_name||_.phase_id),O.createElement("div",{className:"text-sm",key:"time"},`Time: ${_.time_frame}`),O.createElement("div",{className:"text-sm",key:"goal"},`Goal: ${_.learning_goal}`)])},position:{x:0,y:0},className:"bg-green-100 border-2 border-green-500 rounded-md"}),r.setNode(v,{width:ir,height:sr,rank:2,column:d}),n.push({id:`edge-${f}-${v}`,source:f,target:v,style:{strokeDasharray:"5,5"},label:"contains"}),y>0){const x=`phase-${h[y-1].phase_id}`;n.push({id:`flow-${x}-${v}`,source:x,target:v,animated:!0,style:{stroke:"#FF8C00"},label:`Step ${y+1}`,labelStyle:{fill:"#FF8C00",fontWeight:"bold"}})}const w=_.activities||[];w.forEach((x,E)=>{var A;const S=`activity-${x.activity_id}`;if(t.push({id:S,data:{label:Ei([O.createElement("div",{className:"font-bold",key:"title"},x.name||x.activity_id),O.createElement("div",{className:"text-sm",key:"duration"},`Duration: ${x.duration} min`),O.createElement("div",{className:"text-sm",key:"desc"},x.description),O.createElement("div",{className:"text-sm",key:"goal"},`Goal: ${x.goal}`),O.createElement("div",{className:"text-sm",key:"assessment"},`Assessment: ${((A=x.assessment)==null?void 0:A.type)||"N/A"}`)])},position:{x:0,y:0},className:"bg-yellow-100 border-2 border-yellow-500 rounded-md"}),r.setNode(S,{width:ir,height:sr,rank:3,column:d*2+y}),n.push({id:`edge-${v}-${S}`,source:v,target:S,style:{strokeDasharray:"5,5"},label:"contains"}),E>0){const k=`activity-${w[E-1].activity_id}`;n.push({id:`flow-${k}-${S}`,source:k,target:S,animated:!0,style:{stroke:"#FF8C00"},label:`Step ${E+1}`,labelStyle:{fill:"#FF8C00",fontWeight:"bold"}})}const N=x.roles||[];N.forEach((k,j)=>{var M,R,$,q,L,H;const I=`role-${x.activity_id}-${k.role_name}`,z=e.actors.find(U=>U.id===k.actor_id),D=e.environments.find(U=>{var V;return U.id===((V=k.learning_environment)==null?void 0:V.environment_id)}),b=((R=(M=k.learning_environment)==null?void 0:M.selected_materials)==null?void 0:R.map(U=>{const V=D==null?void 0:D.materials.find(Q=>Q.id===U);return V==null?void 0:V.name}).filter(Boolean))||[],P=((q=($=k.learning_environment)==null?void 0:$.selected_tools)==null?void 0:q.map(U=>{const V=D==null?void 0:D.tools.find(Q=>Q.id===U);return V==null?void 0:V.name}).filter(Boolean))||[],T=((H=(L=k.learning_environment)==null?void 0:L.selected_services)==null?void 0:H.map(U=>{const V=D==null?void 0:D.services.find(Q=>Q.id===U);return V==null?void 0:V.name}).filter(Boolean))||[],F=[O.createElement("div",{className:"font-bold",key:"title"},`${(z==null?void 0:z.name)||"Unknown Actor"} (als ${k.role_name})`)];if(k.task_description&&F.push(O.createElement("div",{className:"text-sm",key:"task"},`Task: ${k.task_description}`)),D&&F.push(O.createElement("div",{className:"text-sm",key:"env"},`Environment: ${D.name}`)),b.length>0&&F.push(O.createElement("div",{className:"text-sm",key:"materials"},`Materials: ${b.join(", ")}`)),P.length>0&&F.push(O.createElement("div",{className:"text-sm",key:"tools"},`Tools: ${P.join(", ")}`)),T.length>0&&F.push(O.createElement("div",{className:"text-sm",key:"services"},`Services: ${T.join(", ")}`)),t.push({id:I,data:{label:Ei(F)},position:{x:0,y:0},className:"bg-orange-100 border-2 border-orange-500 rounded-md"}),r.setNode(I,{width:ir,height:sr*1.5,rank:4,column:j}),n.push({id:`edge-${S}-${I}`,source:S,target:I,style:{strokeDasharray:"5,5"},label:"performs"}),j>0){const U=`role-${x.activity_id}-${N[j-1].role_name}`;n.push({id:`parallel-${U}-${I}`,source:U,target:I,animated:!0,style:{stroke:"#9333ea"},label:"parallel",labelStyle:{fill:"#9333ea",fontWeight:"bold"}})}})})})}),i.forEach((c,d)=>{d>0&&n.push({id:`flow-sequence-${i[d-1].sequence_id}-${c.sequence_id}`,source:`sequence-${i[d-1].sequence_id}`,target:`sequence-${c.sequence_id}`,animated:!0,style:{stroke:"#FF8C00"},label:`Sequence ${d+1}`,labelStyle:{fill:"#FF8C00",fontWeight:"bold"}})}),t.forEach(c=>{r.setNode(c.id,{width:ir,height:sr})}),n.forEach(c=>{r.setEdge(c.source,c.target)}),eN.layout(r),{nodes:t.map(c=>{const d=r.node(c.id);return{...c,position:{x:d.x-ir/2,y:d.y-sr/2}}}),edges:n}}const F8=()=>p.jsx(My,{position:"top-left",className:"bg-white p-2 rounded shadow",children:p.jsxs("div",{className:"space-y-2 text-sm",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 bg-gray-100 border-2 border-gray-500"}),p.jsx("span",{children:"Solution"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 bg-blue-100 border-2 border-blue-500"}),p.jsx("span",{children:"Learning Sequences"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 bg-green-100 border-2 border-green-500"}),p.jsx("span",{children:"Phases"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 bg-yellow-100 border-2 border-yellow-500"}),p.jsx("span",{children:"Activities"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 bg-orange-100 border-2 border-orange-500"}),p.jsx("span",{children:"Roles"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 bg-pink-100 border-2 border-pink-500"}),p.jsx("span",{children:"Actors"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 bg-purple-100 border-2 border-purple-500"}),p.jsx("span",{children:"Learning Environments"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 bg-red-100 border-2 border-red-500"}),p.jsx("span",{children:"Materials"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 bg-indigo-100 border-2 border-indigo-500"}),p.jsx("span",{children:"Tools"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 bg-teal-100 border-2 border-teal-500"}),p.jsx("span",{children:"Services"})]}),p.jsxs("div",{className:"mt-4 space-y-1",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-8 h-0 border-t-2 border-solid"}),p.jsx("span",{children:"Contains/Implements"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-8 h-0 border-t-2 border-dashed"}),p.jsx("span",{children:"References"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-8 h-0 border-t-2 border-orange-500"}),p.jsx("span",{children:"Sequential Flow"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-8 h-0 border-t-2 border-purple-500"}),p.jsx("span",{children:"Parallel Execution"})]})]})]})}),D8=()=>{var c,d,f;const e=Nn(),{nodes:t,edges:n}=Bm(e),[r,i,s]=MF(t),[a,o,l]=OF(n);C.useEffect(()=>{const{nodes:h,edges:g}=Bm(e);i(h),o(g)},[e,i,o]);const u=C.useCallback(()=>{const{nodes:h,edges:g}=Bm(e);i(h),o(g)},[e,i,o]);return(f=(d=(c=e.solution)==null?void 0:c.didactic_template)==null?void 0:d.learning_sequences)!=null&&f.length?p.jsx("div",{className:"h-[800px] border rounded-lg overflow-hidden bg-white",children:p.jsxs(_2,{nodes:r,edges:a,onNodesChange:s,onEdgesChange:l,onInit:u,connectionMode:Mr.Loose,minZoom:.1,maxZoom:1.5,fitView:!0,children:[p.jsx(KF,{}),p.jsx(BF,{}),p.jsx(F8,{})]})}):p.jsx("div",{className:"h-[800px] border rounded-lg bg-white flex items-center justify-center",children:p.jsx("p",{className:"text-gray-500",children:"No learning sequences available to display."})})};function z8(){var s,a;const e=Nn(),t=((a=(s=e.solution)==null?void 0:s.didactic_template)==null?void 0:a.learning_sequences)||[],n=e.actors||[];if(!t.length)return p.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:p.jsx("p",{className:"text-gray-500",children:"No learning sequences available."})});const r=o=>{const l=e.environments.find(u=>u.id===o);return(l==null?void 0:l.name)||"Unknown Environment"},i=(o,l=[],u)=>{const c=e.environments.find(d=>d.id===o);return c?l.map(d=>{const f=c[u].find(h=>h.id===d);return(f==null?void 0:f.name)||""}).filter(Boolean):[]};return p.jsx("div",{className:"bg-white p-6 rounded-lg shadow overflow-x-auto",children:p.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[p.jsx("thead",{className:"bg-gray-50",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activity Details"}),n.map(o=>p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:o.name||"Unnamed Actor"},o.id))]})}),p.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(o=>{var l;return p.jsxs(O.Fragment,{children:[p.jsx("tr",{className:"bg-blue-50",children:p.jsxs("td",{colSpan:n.length+1,className:"px-6 py-4 font-medium",children:[o.sequence_name||o.sequence_id," (",o.time_frame||"No time frame",")"]})}),(l=o.phases)==null?void 0:l.map(u=>{var c;return p.jsxs(O.Fragment,{children:[p.jsx("tr",{className:"bg-green-50",children:p.jsxs("td",{colSpan:n.length+1,className:"px-6 py-4 pl-8 font-medium",children:[u.phase_name||u.phase_id," (",u.time_frame||"No time frame",")"]})}),(c=u.activities)==null?void 0:c.map(d=>{var h;const f={};return(h=d.roles)==null||h.forEach(g=>{f[g.actor_id]||(f[g.actor_id]=[]);const m=g.learning_environment;m&&f[g.actor_id].push({role:g,environmentName:r(m.environment_id),materials:i(m.environment_id,m.selected_materials,"materials"),tools:i(m.environment_id,m.selected_tools,"tools"),services:i(m.environment_id,m.selected_services,"services")})}),p.jsxs("tr",{className:"hover:bg-gray-50",children:[p.jsxs("td",{className:"px-6 py-4 pl-12",children:[p.jsx("div",{className:"font-medium",children:d.name||d.activity_id}),p.jsx("div",{className:"text-sm text-gray-500",children:d.description}),p.jsxs("div",{className:"text-sm text-gray-500",children:["Duration: ",d.duration," min"]})]}),n.map(g=>{var m;return p.jsx("td",{className:"px-6 py-4",children:(m=f[g.id])==null?void 0:m.map((_,y)=>p.jsxs("div",{className:"mb-4",children:[p.jsx("div",{className:"font-medium",children:_.role.role_name||"Unnamed Role"}),p.jsx("div",{className:"text-sm text-gray-500",children:_.role.task_description}),p.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:["Environment: ",_.environmentName]}),_.materials.length>0&&p.jsxs("div",{className:"text-sm text-gray-600",children:["Materials: ",_.materials.join(", ")]}),_.tools.length>0&&p.jsxs("div",{className:"text-sm text-gray-600",children:["Tools: ",_.tools.join(", ")]}),_.services.length>0&&p.jsxs("div",{className:"text-sm text-gray-600",children:["Services: ",_.services.join(", ")]})]},`${_.role.role_name}-${y}`))},g.id)})]},d.activity_id)})]},u.phase_id)})]},o.sequence_id)})})]})})}function B8(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tN(Object(n),!0).forEach(function(r){B8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U8(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function H8(e,t){if(e==null)return{};var n=U8(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function V8(e,t){return G8(e)||W8(e,t)||K8(e,t)||X8()}function G8(e){if(Array.isArray(e))return e}function W8(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,i=!1,s=void 0;try{for(var a=e[Symbol.iterator](),o;!(r=(o=a.next()).done)&&(n.push(o.value),!(t&&n.length===t));r=!0);}catch(l){i=!0,s=l}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw s}}return n}}function K8(e,t){if(e){if(typeof e=="string")return rN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rN(e,t)}}function rN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y8(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iN(Object(n),!0).forEach(function(r){Y8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iN(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Q8(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduceRight(function(i,s){return s(i)},r)}}function na(e){return function t(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.length>=e.length?e.apply(this,i):function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return t.apply(n,[].concat(i,o))}}}function uu(e){return{}.toString.call(e).includes("Object")}function J8(e){return!Object.keys(e).length}function Ka(e){return typeof e=="function"}function Z8(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function eU(e,t){return uu(t)||Pr("changeType"),Object.keys(t).some(function(n){return!Z8(e,n)})&&Pr("changeField"),t}function tU(e){Ka(e)||Pr("selectorType")}function nU(e){Ka(e)||uu(e)||Pr("handlerType"),uu(e)&&Object.values(e).some(function(t){return!Ka(t)})&&Pr("handlersType")}function rU(e){e||Pr("initialIsRequired"),uu(e)||Pr("initialType"),J8(e)&&Pr("initialContent")}function iU(e,t){throw new Error(e[t]||e.default)}var sU={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Pr=na(iU)(sU),Ko={changes:eU,selector:tU,handler:nU,initial:rU};function aU(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ko.initial(e),Ko.handler(t);var n={current:e},r=na(uU)(n,t),i=na(lU)(n),s=na(Ko.changes)(e),a=na(oU)(n);function o(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(c){return c};return Ko.selector(u),u(n.current)}function l(u){Q8(r,i,s,a)(u)}return[o,l]}function oU(e,t){return Ka(t)?t(e.current):t}function lU(e,t){return e.current=sN(sN({},e.current),t),t}function uU(e,t,n){return Ka(t)?t(e.current):Object.keys(n).forEach(function(r){var i;return(i=t[r])===null||i===void 0?void 0:i.call(t,e.current[r])}),n}var cU={create:aU},dU={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function fU(e){return function t(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.length>=e.length?e.apply(this,i):function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return t.apply(n,[].concat(i,o))}}}function hU(e){return{}.toString.call(e).includes("Object")}function pU(e){return e||aN("configIsRequired"),hU(e)||aN("configType"),e.urls?(mU(),{paths:{vs:e.urls.monacoBase}}):e}function mU(){console.warn(Vj.deprecation)}function gU(e,t){throw new Error(e[t]||e.default)}var Vj={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},aN=fU(gU)(Vj),vU={config:pU},yU=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(i){return n.reduceRight(function(s,a){return a(s)},i)}};function Gj(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],Gj(e[n],t[n]))}),nN(nN({},e),t)}var _U={type:"cancelation",msg:"operation is manually canceled"};function Um(e){var t=!1,n=new Promise(function(r,i){e.then(function(s){return t?i(_U):r(s)}),e.catch(i)});return n.cancel=function(){return t=!0},n}var wU=cU.create({config:dU,isInitialized:!1,resolve:null,reject:null,monaco:null}),Wj=V8(wU,2),ho=Wj[0],rc=Wj[1];function xU(e){var t=vU.config(e),n=t.monaco,r=H8(t,["monaco"]);rc(function(i){return{config:Gj(i.config,r),monaco:n}})}function bU(){var e=ho(function(t){var n=t.monaco,r=t.isInitialized,i=t.resolve;return{monaco:n,isInitialized:r,resolve:i}});if(!e.isInitialized){if(rc({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),Um(Hm);if(window.monaco&&window.monaco.editor)return Kj(window.monaco),e.resolve(window.monaco),Um(Hm);yU(SU,NU)(CU)}return Um(Hm)}function SU(e){return document.body.appendChild(e)}function EU(e){var t=document.createElement("script");return e&&(t.src=e),t}function NU(e){var t=ho(function(r){var i=r.config,s=r.reject;return{config:i,reject:s}}),n=EU("".concat(t.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=t.reject,n}function CU(){var e=ho(function(n){var r=n.config,i=n.resolve,s=n.reject;return{config:r,resolve:i,reject:s}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(n){Kj(n),e.resolve(n)},function(n){e.reject(n)})}function Kj(e){ho().monaco||rc({monaco:e})}function kU(){return ho(function(e){var t=e.monaco;return t})}var Hm=new Promise(function(e,t){return rc({resolve:e,reject:t})}),Xj={config:xU,init:bU,__getMonacoInstance:kU},RU={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Vm=RU,jU={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},AU=jU;function PU({children:e}){return O.createElement("div",{style:AU.container},e)}var TU=PU,IU=TU;function MU({width:e,height:t,isEditorReady:n,loading:r,_ref:i,className:s,wrapperProps:a}){return O.createElement("section",{style:{...Vm.wrapper,width:e,height:t},...a},!n&&O.createElement(IU,null,r),O.createElement("div",{ref:i,style:{...Vm.fullWidth,...!n&&Vm.hide},className:s}))}var OU=MU,Yj=C.memo(OU);function $U(e){C.useEffect(e,[])}var Qj=$U;function qU(e,t,n=!0){let r=C.useRef(!0);C.useEffect(r.current||!n?()=>{r.current=!1}:e,t)}var Rt=qU;function ya(){}function Bi(e,t,n,r){return LU(e,r)||FU(e,t,n,r)}function LU(e,t){return e.editor.getModel(Jj(e,t))}function FU(e,t,n,r){return e.editor.createModel(t,n,r?Jj(e,r):void 0)}function Jj(e,t){return e.Uri.parse(t)}function DU({original:e,modified:t,language:n,originalLanguage:r,modifiedLanguage:i,originalModelPath:s,modifiedModelPath:a,keepCurrentOriginalModel:o=!1,keepCurrentModifiedModel:l=!1,theme:u="light",loading:c="Loading...",options:d={},height:f="100%",width:h="100%",className:g,wrapperProps:m={},beforeMount:_=ya,onMount:y=ya}){let[v,w]=C.useState(!1),[x,E]=C.useState(!0),S=C.useRef(null),N=C.useRef(null),A=C.useRef(null),k=C.useRef(y),j=C.useRef(_),I=C.useRef(!1);Qj(()=>{let P=Xj.init();return P.then(T=>(N.current=T)&&E(!1)).catch(T=>(T==null?void 0:T.type)!=="cancelation"&&console.error("Monaco initialization: error:",T)),()=>S.current?b():P.cancel()}),Rt(()=>{if(S.current&&N.current){let P=S.current.getOriginalEditor(),T=Bi(N.current,e||"",r||n||"text",s||"");T!==P.getModel()&&P.setModel(T)}},[s],v),Rt(()=>{if(S.current&&N.current){let P=S.current.getModifiedEditor(),T=Bi(N.current,t||"",i||n||"text",a||"");T!==P.getModel()&&P.setModel(T)}},[a],v),Rt(()=>{let P=S.current.getModifiedEditor();P.getOption(N.current.editor.EditorOption.readOnly)?P.setValue(t||""):t!==P.getValue()&&(P.executeEdits("",[{range:P.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),P.pushUndoStop())},[t],v),Rt(()=>{var P,T;(T=(P=S.current)==null?void 0:P.getModel())==null||T.original.setValue(e||"")},[e],v),Rt(()=>{let{original:P,modified:T}=S.current.getModel();N.current.editor.setModelLanguage(P,r||n||"text"),N.current.editor.setModelLanguage(T,i||n||"text")},[n,r,i],v),Rt(()=>{var P;(P=N.current)==null||P.editor.setTheme(u)},[u],v),Rt(()=>{var P;(P=S.current)==null||P.updateOptions(d)},[d],v);let z=C.useCallback(()=>{var F;if(!N.current)return;j.current(N.current);let P=Bi(N.current,e||"",r||n||"text",s||""),T=Bi(N.current,t||"",i||n||"text",a||"");(F=S.current)==null||F.setModel({original:P,modified:T})},[n,t,i,e,r,s,a]),D=C.useCallback(()=>{var P;!I.current&&A.current&&(S.current=N.current.editor.createDiffEditor(A.current,{automaticLayout:!0,...d}),z(),(P=N.current)==null||P.editor.setTheme(u),w(!0),I.current=!0)},[d,u,z]);C.useEffect(()=>{v&&k.current(S.current,N.current)},[v]),C.useEffect(()=>{!x&&!v&&D()},[x,v,D]);function b(){var T,F,M,R;let P=(T=S.current)==null?void 0:T.getModel();o||((F=P==null?void 0:P.original)==null||F.dispose()),l||((M=P==null?void 0:P.modified)==null||M.dispose()),(R=S.current)==null||R.dispose()}return O.createElement(Yj,{width:h,height:f,isEditorReady:v,loading:c,_ref:A,className:g,wrapperProps:m})}var zU=DU;C.memo(zU);function BU(e){let t=C.useRef();return C.useEffect(()=>{t.current=e},[e]),t.current}var UU=BU,Xo=new Map;function HU({defaultValue:e,defaultLanguage:t,defaultPath:n,value:r,language:i,path:s,theme:a="light",line:o,loading:l="Loading...",options:u={},overrideServices:c={},saveViewState:d=!0,keepCurrentModel:f=!1,width:h="100%",height:g="100%",className:m,wrapperProps:_={},beforeMount:y=ya,onMount:v=ya,onChange:w,onValidate:x=ya}){let[E,S]=C.useState(!1),[N,A]=C.useState(!0),k=C.useRef(null),j=C.useRef(null),I=C.useRef(null),z=C.useRef(v),D=C.useRef(y),b=C.useRef(),P=C.useRef(r),T=UU(s),F=C.useRef(!1),M=C.useRef(!1);Qj(()=>{let q=Xj.init();return q.then(L=>(k.current=L)&&A(!1)).catch(L=>(L==null?void 0:L.type)!=="cancelation"&&console.error("Monaco initialization: error:",L)),()=>j.current?$():q.cancel()}),Rt(()=>{var L,H,U,V;let q=Bi(k.current,e||r||"",t||i||"",s||n||"");q!==((L=j.current)==null?void 0:L.getModel())&&(d&&Xo.set(T,(H=j.current)==null?void 0:H.saveViewState()),(U=j.current)==null||U.setModel(q),d&&((V=j.current)==null||V.restoreViewState(Xo.get(s))))},[s],E),Rt(()=>{var q;(q=j.current)==null||q.updateOptions(u)},[u],E),Rt(()=>{!j.current||r===void 0||(j.current.getOption(k.current.editor.EditorOption.readOnly)?j.current.setValue(r):r!==j.current.getValue()&&(M.current=!0,j.current.executeEdits("",[{range:j.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),j.current.pushUndoStop(),M.current=!1))},[r],E),Rt(()=>{var L,H;let q=(L=j.current)==null?void 0:L.getModel();q&&i&&((H=k.current)==null||H.editor.setModelLanguage(q,i))},[i],E),Rt(()=>{var q;o!==void 0&&((q=j.current)==null||q.revealLine(o))},[o],E),Rt(()=>{var q;(q=k.current)==null||q.editor.setTheme(a)},[a],E);let R=C.useCallback(()=>{var q;if(!(!I.current||!k.current)&&!F.current){D.current(k.current);let L=s||n,H=Bi(k.current,r||e||"",t||i||"",L||"");j.current=(q=k.current)==null?void 0:q.editor.create(I.current,{model:H,automaticLayout:!0,...u},c),d&&j.current.restoreViewState(Xo.get(L)),k.current.editor.setTheme(a),o!==void 0&&j.current.revealLine(o),S(!0),F.current=!0}},[e,t,n,r,i,s,u,c,d,a,o]);C.useEffect(()=>{E&&z.current(j.current,k.current)},[E]),C.useEffect(()=>{!N&&!E&&R()},[N,E,R]),P.current=r,C.useEffect(()=>{var q,L;E&&w&&((q=b.current)==null||q.dispose(),b.current=(L=j.current)==null?void 0:L.onDidChangeModelContent(H=>{M.current||w(j.current.getValue(),H)}))},[E,w]),C.useEffect(()=>{if(E){let q=k.current.editor.onDidChangeMarkers(L=>{var U;let H=(U=j.current.getModel())==null?void 0:U.uri;if(H&&L.find(V=>V.path===H.path)){let V=k.current.editor.getModelMarkers({resource:H});x==null||x(V)}});return()=>{q==null||q.dispose()}}return()=>{}},[E,x]);function $(){var q,L;(q=b.current)==null||q.dispose(),f?d&&Xo.set(s,j.current.saveViewState()):(L=j.current.getModel())==null||L.dispose(),j.current.dispose()}return O.createElement(Yj,{width:h,height:g,isEditorReady:E,loading:l,_ref:I,className:m,wrapperProps:_})}var VU=HU,GU=C.memo(VU);function Zj({value:e,onChange:t}){const[n,r]=C.useState(!1);return p.jsx("div",{className:"h-[500px] border rounded-md",children:p.jsx(GU,{height:"100%",defaultLanguage:"json",value:e,onChange:i=>t(i||""),theme:"vs-dark",options:{minimap:{enabled:!1},fontSize:14,wordWrap:"on",formatOnPaste:!0,formatOnType:!0},onMount:()=>r(!0)})})}const WU=()=>{const e=Nn(),t={metadata:e.metadata,problem:e.problem,context:e.context,influence_factors:e.influence_factors,solution:e.solution,consequences:e.consequences,implementation_notes:e.implementation_notes,related_patterns:e.related_patterns,feedback:e.feedback,sources:e.sources,actors:e.actors,environments:e.environments};return p.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[p.jsx("h2",{className:"text-xl font-bold mb-4",children:"Raw Data"}),p.jsx("div",{className:"h-[500px] border rounded-lg overflow-hidden",children:p.jsx(Zj,{value:JSON.stringify(t,null,2),onChange:()=>{}})})]})};function KU(){return p.jsxs("div",{className:"space-y-6",children:[p.jsx("h1",{className:"text-2xl font-bold",children:"Preview"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h2",{className:"text-xl font-semibold",children:"Graph View"}),p.jsx(D8,{})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h2",{className:"text-xl font-semibold",children:"Table View"}),p.jsx(z8,{})]}),p.jsx(WU,{})]})}const vv="RFC3986",yv={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},XU="RFC1738",YU=Array.isArray,pn=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),Gm=1024,QU=(e,t,n,r,i)=>{if(e.length===0)return e;let s=e;if(typeof e=="symbol"?s=Symbol.prototype.toString.call(e):typeof e!="string"&&(s=String(e)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let a="";for(let o=0;o<s.length;o+=Gm){const l=s.length>=Gm?s.slice(o,o+Gm):s,u=[];for(let c=0;c<l.length;++c){let d=l.charCodeAt(c);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===XU&&(d===40||d===41)){u[u.length]=l.charAt(c);continue}if(d<128){u[u.length]=pn[d];continue}if(d<2048){u[u.length]=pn[192|d>>6]+pn[128|d&63];continue}if(d<55296||d>=57344){u[u.length]=pn[224|d>>12]+pn[128|d>>6&63]+pn[128|d&63];continue}c+=1,d=65536+((d&1023)<<10|l.charCodeAt(c)&1023),u[u.length]=pn[240|d>>18]+pn[128|d>>12&63]+pn[128|d>>6&63]+pn[128|d&63]}a+=u.join("")}return a};function JU(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function oN(e,t){if(YU(e)){const n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}const ZU=Object.prototype.hasOwnProperty,eA={brackets(e){return String(e)+"[]"},comma:"comma",indices(e,t){return String(e)+"["+t+"]"},repeat(e){return String(e)}},vn=Array.isArray,eH=Array.prototype.push,tA=function(e,t){eH.apply(e,vn(t)?t:[t])},tH=Date.prototype.toISOString,Ie={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:QU,encodeValuesOnly:!1,format:vv,formatter:yv[vv],indices:!1,serializeDate(e){return tH.call(e)},skipNulls:!1,strictNullHandling:!1};function nH(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"}const Wm={};function nA(e,t,n,r,i,s,a,o,l,u,c,d,f,h,g,m,_,y){let v=e,w=y,x=0,E=!1;for(;(w=w.get(Wm))!==void 0&&!E;){const j=w.get(e);if(x+=1,typeof j<"u"){if(j===x)throw new RangeError("Cyclic object value");E=!0}typeof w.get(Wm)>"u"&&(x=0)}if(typeof u=="function"?v=u(t,v):v instanceof Date?v=f==null?void 0:f(v):n==="comma"&&vn(v)&&(v=oN(v,function(j){return j instanceof Date?f==null?void 0:f(j):j})),v===null){if(s)return l&&!m?l(t,Ie.encoder,_,"key",h):t;v=""}if(nH(v)||JU(v)){if(l){const j=m?t:l(t,Ie.encoder,_,"key",h);return[(g==null?void 0:g(j))+"="+(g==null?void 0:g(l(v,Ie.encoder,_,"value",h)))]}return[(g==null?void 0:g(t))+"="+(g==null?void 0:g(String(v)))]}const S=[];if(typeof v>"u")return S;let N;if(n==="comma"&&vn(v))m&&l&&(v=oN(v,l)),N=[{value:v.length>0?v.join(",")||null:void 0}];else if(vn(u))N=u;else{const j=Object.keys(v);N=c?j.sort(c):j}const A=o?String(t).replace(/\./g,"%2E"):String(t),k=r&&vn(v)&&v.length===1?A+"[]":A;if(i&&vn(v)&&v.length===0)return k+"[]";for(let j=0;j<N.length;++j){const I=N[j],z=typeof I=="object"&&typeof I.value<"u"?I.value:v[I];if(a&&z===null)continue;const D=d&&o?I.replace(/\./g,"%2E"):I,b=vn(v)?typeof n=="function"?n(k,D):k:k+(d?"."+D:"["+D+"]");y.set(e,x);const P=new WeakMap;P.set(Wm,y),tA(S,nA(z,b,n,r,i,s,a,o,n==="comma"&&m&&vn(v)?null:l,u,c,d,f,h,g,m,_,P))}return S}function rH(e=Ie){if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");const t=e.charset||Ie.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=vv;if(typeof e.format<"u"){if(!ZU.call(yv,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const r=yv[n];let i=Ie.filter;(typeof e.filter=="function"||vn(e.filter))&&(i=e.filter);let s;if(e.arrayFormat&&e.arrayFormat in eA?s=e.arrayFormat:"indices"in e?s=e.indices?"indices":"repeat":s=Ie.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=typeof e.allowDots>"u"?e.encodeDotInKeys?!0:Ie.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Ie.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Ie.allowEmptyArrays,arrayFormat:s,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ie.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Ie.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Ie.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Ie.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Ie.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Ie.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Ie.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Ie.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ie.strictNullHandling}}function iH(e,t={}){let n=e;const r=rH(t);let i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):vn(r.filter)&&(s=r.filter,i=s);const a=[];if(typeof n!="object"||n===null)return"";const o=eA[r.arrayFormat],l=o==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const u=new WeakMap;for(let f=0;f<i.length;++f){const h=i[f];r.skipNulls&&n[h]===null||tA(a,nA(n[h],h,o,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}const c=a.join(r.delimiter);let d=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),c.length>0?d+c:""}const ki="4.71.1";let lN=!1,_a,rA,iA,_v,sA,aA,oA,lA,uA;function sH(e,t={auto:!1}){if(lN)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(_a)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${_a}'\``);lN=t.auto,_a=e.kind,rA=e.fetch,iA=e.FormData,_v=e.File,sA=e.ReadableStream,aA=e.getMultipartRequestOptions,oA=e.getDefaultAgent,lA=e.fileFromPath,uA=e.isFsReadStream}class aH{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function oH({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,i,s;try{n=fetch,r=Request,i=Response,s=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${t}`)}return{kind:"web",fetch:n,Request:r,Response:i,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(a,o)=>({...o,body:new aH(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:a=>!1}}_a||sH(oH(),{auto:!0});class ie extends Error{}class Ve extends ie{constructor(t,n,r,i){super(`${Ve.makeMessage(t,n,r)}`),this.status=t,this.headers=i,this.request_id=i==null?void 0:i["x-request-id"];const s=n;this.error=s,this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(t,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&i?`${t} ${i}`:t?`${t} status code (no body)`:i||"(no status code or body)"}static generate(t,n,r,i){if(!t)return new ic({message:r,cause:xv(n)});const s=n==null?void 0:n.error;return t===400?new cA(t,s,r,i):t===401?new dA(t,s,r,i):t===403?new fA(t,s,r,i):t===404?new hA(t,s,r,i):t===409?new pA(t,s,r,i):t===422?new mA(t,s,r,i):t===429?new gA(t,s,r,i):t>=500?new vA(t,s,r,i):new Ve(t,s,r,i)}}class Zt extends Ve{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0),this.status=void 0}}class ic extends Ve{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),this.status=void 0,n&&(this.cause=n)}}class p0 extends ic{constructor({message:t}={}){super({message:t??"Request timed out."})}}class cA extends Ve{constructor(){super(...arguments),this.status=400}}class dA extends Ve{constructor(){super(...arguments),this.status=401}}class fA extends Ve{constructor(){super(...arguments),this.status=403}}class hA extends Ve{constructor(){super(...arguments),this.status=404}}class pA extends Ve{constructor(){super(...arguments),this.status=409}}class mA extends Ve{constructor(){super(...arguments),this.status=422}}class gA extends Ve{constructor(){super(...arguments),this.status=429}}class vA extends Ve{}class yA extends ie{constructor(){super("Could not parse response content as the length limit was reached")}}class _A extends ie{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class li{constructor(){this.buffer=[],this.trailingCR=!1}decode(t){let n=this.decodeText(t);if(this.trailingCR&&(n="\r"+n,this.trailingCR=!1),n.endsWith("\r")&&(this.trailingCR=!0,n=n.slice(0,-1)),!n)return[];const r=li.NEWLINE_CHARS.has(n[n.length-1]||"");let i=n.split(li.NEWLINE_REGEXP);return r&&i.pop(),i.length===1&&!r?(this.buffer.push(i[0]),[]):(this.buffer.length>0&&(i=[this.buffer.join("")+i[0],...i.slice(1)],this.buffer=[]),r||(this.buffer=[i.pop()||""]),i)}decodeText(t){if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new ie(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new ie(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new ie("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const t=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,t}}li.NEWLINE_CHARS=new Set([`
`,"\r"]);li.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class xn{constructor(t,n){this.iterator=t,this.controller=n}static fromSSEResponse(t,n){let r=!1;async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let s=!1;try{for await(const a of lH(t,n))if(!s){if(a.data.startsWith("[DONE]")){s=!0;continue}if(a.event===null){let o;try{o=JSON.parse(a.data)}catch(l){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),l}if(o&&o.error)throw new Ve(void 0,o.error,void 0,void 0);yield o}else{let o;try{o=JSON.parse(a.data)}catch(l){throw console.error("Could not parse message into JSON:",a.data),console.error("From chunk:",a.raw),l}if(a.event=="error")throw new Ve(void 0,o.error,o.message,void 0);yield{event:a.event,data:o}}}s=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{s||n.abort()}}return new xn(i,n)}static fromReadableStream(t,n){let r=!1;async function*i(){const a=new li,o=wA(t);for await(const l of o)for(const u of a.decode(l))yield u;for(const l of a.flush())yield l}async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const o of i())a||o&&(yield JSON.parse(o));a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||n.abort()}}return new xn(s,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const a=r.next();t.push(a),n.push(a)}return s.shift()}});return[new xn(()=>i(t),this.controller),new xn(()=>i(n),this.controller)]}toReadableStream(){const t=this;let n;const r=new TextEncoder;return new sA({async start(){n=t[Symbol.asyncIterator]()},async pull(i){try{const{value:s,done:a}=await n.next();if(a)return i.close();const o=r.encode(JSON.stringify(s)+`
`);i.enqueue(o)}catch(s){i.error(s)}},async cancel(){var i;await((i=n.return)==null?void 0:i.call(n))}})}}async function*lH(e,t){if(!e.body)throw t.abort(),new ie("Attempted to iterate over a response with no body");const n=new dH,r=new li,i=wA(e.body);for await(const s of uH(i))for(const a of r.decode(s)){const o=n.decode(a);o&&(yield o)}for(const s of r.flush()){const a=n.decode(s);a&&(yield a)}}async function*uH(e){let t=new Uint8Array;for await(const n of e){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let i=new Uint8Array(t.length+r.length);i.set(t),i.set(r,t.length),t=i;let s;for(;(s=cH(t))!==-1;)yield t.slice(0,s),t=t.slice(s)}t.length>0&&(yield t)}function cH(e){for(let r=0;r<e.length-2;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}class dH{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,i]=fH(t,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function fH(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}function wA(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const xA=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function",bA=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&sc(e),sc=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",hH=e=>bA(e)||xA(e)||uA(e);async function SA(e,t,n){var i;if(e=await e,bA(e))return e;if(xA(e)){const s=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const a=sc(s)?[await s.arrayBuffer()]:[s];return new _v(a,t,n)}const r=await pH(e);if(t||(t=gH(e)??"unknown_file"),!(n!=null&&n.type)){const s=(i=r[0])==null?void 0:i.type;typeof s=="string"&&(n={...n,type:s})}return new _v(r,t,n)}async function pH(e){var n;let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(sc(e))t.push(await e.arrayBuffer());else if(vH(e))for await(const r of e)t.push(r);else throw new Error(`Unexpected data type: ${typeof e}; constructor: ${(n=e==null?void 0:e.constructor)==null?void 0:n.name}; props: ${mH(e)}`);return t}function mH(e){return`[${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}function gH(e){var t;return Km(e.name)||Km(e.filename)||((t=Km(e.path))==null?void 0:t.split(/[\\/]/).pop())}const Km=e=>{if(typeof e=="string")return e;if(typeof Buffer<"u"&&e instanceof Buffer)return String(e)},vH=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",uN=e=>e&&typeof e=="object"&&e.body&&e[Symbol.toStringTag]==="MultipartBody",ms=async e=>{const t=await yH(e.body);return aA(t,e)},yH=async e=>{const t=new iA;return await Promise.all(Object.entries(e||{}).map(([n,r])=>wv(t,n,r))),t},wv=async(e,t,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")e.append(t,String(n));else if(hH(n)){const r=await SA(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>wv(e,t+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,i])=>wv(e,`${t}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var es={},_H=function(e,t,n,r,i){if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n},wH=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Yo;async function EA(e){const{response:t}=e;if(e.options.stream)return ts("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):xn.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const n=t.headers.get("content-type");if((n==null?void 0:n.includes("application/json"))||(n==null?void 0:n.includes("application/vnd.api+json"))){const s=await t.json();return ts("response",t.status,t.url,t.headers,s),NA(s,t)}const i=await t.text();return ts("response",t.status,t.url,t.headers,i),i}function NA(e,t){return!e||typeof e!="object"||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}class ac extends Promise{constructor(t,n=EA){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=n}_thenUnwrap(t){return new ac(this.responsePromise,async n=>NA(t(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class xH{constructor({baseURL:t,maxRetries:n=2,timeout:r=6e5,httpAgent:i,fetch:s}){this.baseURL=t,this.maxRetries=Xm("maxRetries",n),this.timeout=Xm("timeout",r),this.httpAgent=i,this.fetch=s??rA}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...kH(),...this.authHeaders(t)}}validateHeaders(t,n){}defaultIdempotencyKey(){return`stainless-node-retry-${PH()}`}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(async i=>{const s=i&&sc(i==null?void 0:i.body)?new DataView(await i.body.arrayBuffer()):(i==null?void 0:i.body)instanceof DataView?i.body:(i==null?void 0:i.body)instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i==null?void 0:i.body)?new DataView(i.body.buffer):i==null?void 0:i.body;return{method:t,path:n,...i,body:s}}))}getAPIList(t,n,r){return this.requestAPIList(n,{method:"get",path:t,...r})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}else if(ArrayBuffer.isView(t))return t.byteLength.toString();return null}buildRequest(t,{retryCount:n=0}={}){var m;const{method:r,path:i,query:s,headers:a={}}=t,o=ArrayBuffer.isView(t.body)||t.__binaryRequest&&typeof t.body=="string"?t.body:uN(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,l=this.calculateContentLength(o),u=this.buildURL(i,s);"timeout"in t&&Xm("timeout",t.timeout);const c=t.timeout??this.timeout,d=t.httpAgent??this.httpAgent??oA(u),f=c+1e3;typeof((m=d==null?void 0:d.options)==null?void 0:m.timeout)=="number"&&f>(d.options.timeout??0)&&(d.options.timeout=f),this.idempotencyHeader&&r!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=t.idempotencyKey);const h=this.buildHeaders({options:t,headers:a,contentLength:l,retryCount:n});return{req:{method:r,...o&&{body:o},headers:h,...d&&{agent:d},signal:t.signal??null},url:u,timeout:c}}buildHeaders({options:t,headers:n,contentLength:r,retryCount:i}){const s={};r&&(s["content-length"]=r);const a=this.defaultHeaders(t);return hN(s,a),hN(s,n),uN(t.body)&&_a!=="node"&&delete s["content-type"],pN(a,"x-stainless-retry-count")===void 0&&pN(n,"x-stainless-retry-count")===void 0&&(s["x-stainless-retry-count"]=String(i)),this.validateHeaders(s,n),s}async prepareOptions(t){}async prepareRequest(t,{url:n,options:r}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(n=>[...n])):{...t}:{}}makeStatusError(t,n,r,i){return Ve.generate(t,n,r,i)}request(t,n=null){return new ac(this.makeRequest(t,n))}async makeRequest(t,n){var d,f;const r=await t,i=r.maxRetries??this.maxRetries;n==null&&(n=i),await this.prepareOptions(r);const{req:s,url:a,timeout:o}=this.buildRequest(r,{retryCount:i-n});if(await this.prepareRequest(s,{url:a,options:r}),ts("request",a,r,s.headers),(d=r.signal)!=null&&d.aborted)throw new Zt;const l=new AbortController,u=await this.fetchWithTimeout(a,s,o,l).catch(xv);if(u instanceof Error){if((f=r.signal)!=null&&f.aborted)throw new Zt;if(n)return this.retryRequest(r,n);throw u.name==="AbortError"?new p0:new ic({cause:u})}const c=SH(u.headers);if(!u.ok){if(n&&this.shouldRetry(u)){const v=`retrying, ${n} attempts remaining`;return ts(`response (error; ${v})`,u.status,a,c),this.retryRequest(r,n,c)}const h=await u.text().catch(v=>xv(v).message),g=RH(h),m=g?void 0:h;throw ts(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,u.status,a,c,m),this.makeStatusError(u.status,g,m,c)}return{response:u,options:r,controller:l}}requestAPIList(t,n){const r=this.makeRequest(n,null);return new bH(this,r,t)}buildURL(t,n){const r=AH(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),i=this.defaultQuery();return kA(i)||(n={...i,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(t){return Object.entries(t).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new ie(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,n,r,i){const{signal:s,...a}=n||{};s&&s.addEventListener("abort",()=>i.abort());const o=setTimeout(()=>i.abort(),r);return this.getRequestClient().fetch.call(void 0,t,{signal:i.signal,...a}).finally(()=>{clearTimeout(o)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r){let i;const s=r==null?void 0:r["retry-after-ms"];if(s){const o=parseFloat(s);Number.isNaN(o)||(i=o)}const a=r==null?void 0:r["retry-after"];if(a&&!i){const o=parseFloat(a);Number.isNaN(o)?i=Date.parse(a)-Date.now():i=o*1e3}if(!(i&&0<=i&&i<60*1e3)){const o=t.maxRetries??this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(n,o)}return await po(i),this.makeRequest(t,n-1)}calculateDefaultRetryTimeoutMillis(t,n){const s=n-t,a=Math.min(.5*Math.pow(2,s),8),o=1-Math.random()*.25;return a*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${ki}`}}class CA{constructor(t,n,r,i){Yo.set(this,void 0),_H(this,Yo,t),this.options=i,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new ie("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in t&&typeof n.query=="object")n.query={...n.query,...t.params};else if("url"in t){const r=[...Object.entries(n.query||{}),...t.url.searchParams.entries()];for(const[i,s]of r)t.url.searchParams.set(i,s);n.query=void 0,n.path=t.url.toString()}return await wH(this,Yo,"f").requestAPIList(this.constructor,n)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(Yo=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const n of t.getPaginatedItems())yield n}}class bH extends ac{constructor(t,n,r){super(n,async i=>new r(t,i.response,await EA(i),i.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const n of t)yield n}}const SH=e=>new Proxy(Object.fromEntries(e.entries()),{get(t,n){const r=n.toString();return t[r.toLowerCase()]||t[r]}}),EH={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},_t=e=>typeof e=="object"&&e!==null&&!kA(e)&&Object.keys(e).every(t=>RA(EH,t)),NH=()=>{var t;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ki,"X-Stainless-OS":dN(Deno.build.os),"X-Stainless-Arch":cN(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ki,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ki,"X-Stainless-OS":dN(process.platform),"X-Stainless-Arch":cN(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=CH();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ki,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ki,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function CH(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,a=r[3]||0;return{browser:t,version:`${i}.${s}.${a}`}}}return null}const cN=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",dN=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let fN;const kH=()=>fN??(fN=NH()),RH=e=>{try{return JSON.parse(e)}catch{return}},jH=new RegExp("^(?:[a-z]+:)?//","i"),AH=e=>jH.test(e),po=e=>new Promise(t=>setTimeout(t,e)),Xm=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new ie(`${e} must be an integer`);if(t<0)throw new ie(`${e} must be a positive integer`);return t},xv=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},Qo=e=>{var t,n,r,i;if(typeof process<"u")return((t=es==null?void 0:es[e])==null?void 0:t.trim())??void 0;if(typeof Deno<"u")return(i=(r=(n=Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,e))==null?void 0:i.trim()};function kA(e){if(!e)return!0;for(const t in e)return!1;return!0}function RA(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function hN(e,t){for(const n in t){if(!RA(t,n))continue;const r=n.toLowerCase();if(!r)continue;const i=t[n];i===null?delete e[r]:i!==void 0&&(e[r]=i)}}function ts(e,...t){typeof process<"u"&&(es==null?void 0:es.DEBUG)==="true"&&console.log(`OpenAI:DEBUG:${e}`,...t)}const PH=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),TH=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",IH=e=>typeof(e==null?void 0:e.get)=="function",pN=(e,t)=>{var r;const n=t.toLowerCase();if(IH(e)){const i=((r=t[0])==null?void 0:r.toUpperCase())+t.substring(1).replace(/([^\w])(\w)/g,(s,a,o)=>a+o.toUpperCase());for(const s of[t,n,t.toUpperCase(),i]){const a=e.get(s);if(a)return a}}for(const[i,s]of Object.entries(e))if(i.toLowerCase()===n)return Array.isArray(s)?(s.length<=1||console.warn(`Received ${s.length} entries for the ${t} header, using the first entry.`),s[0]):s};function Ym(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}class MH extends CA{constructor(t,n,r,i){super(t,n,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class un extends CA{constructor(t,n,r,i){super(t,n,r,i),this.data=r.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const n=Object.fromEntries(t.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var r;const t=this.getPaginatedItems();if(!t.length)return null;const n=(r=t[t.length-1])==null?void 0:r.id;return n?{params:{after:n}}:null}}class ce{constructor(t){this._client=t}}let jA=class extends ce{create(t,n){return this._client.post("/chat/completions",{body:t,...n,stream:t.stream??!1})}},m0=class extends ce{constructor(){super(...arguments),this.completions=new jA(this._client)}};m0.Completions=jA;class AA extends ce{create(t,n){return this._client.post("/audio/speech",{body:t,...n,__binaryResponse:!0})}}class PA extends ce{create(t,n){return this._client.post("/audio/transcriptions",ms({body:t,...n}))}}class TA extends ce{create(t,n){return this._client.post("/audio/translations",ms({body:t,...n}))}}class mo extends ce{constructor(){super(...arguments),this.transcriptions=new PA(this._client),this.translations=new TA(this._client),this.speech=new AA(this._client)}}mo.Transcriptions=PA;mo.Translations=TA;mo.Speech=AA;class g0 extends ce{create(t,n){return this._client.post("/batches",{body:t,...n})}retrieve(t,n){return this._client.get(`/batches/${t}`,n)}list(t={},n){return _t(t)?this.list({},t):this._client.getAPIList("/batches",v0,{query:t,...n})}cancel(t,n){return this._client.post(`/batches/${t}/cancel`,n)}}class v0 extends un{}g0.BatchesPage=v0;class y0 extends ce{create(t,n){return this._client.post("/assistants",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/assistants/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/assistants/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(t={},n){return _t(t)?this.list({},t):this._client.getAPIList("/assistants",_0,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(t,n){return this._client.delete(`/assistants/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class _0 extends un{}y0.AssistantsPage=_0;function mN(e){return typeof e.parse=="function"}const ns=e=>(e==null?void 0:e.role)==="assistant",IA=e=>(e==null?void 0:e.role)==="function",MA=e=>(e==null?void 0:e.role)==="tool";var Gt=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},_e=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},bv,vl,yl,ra,ia,_l,sa,On,aa,cu,du,Ri,OA;class $A{constructor(){bv.add(this),this.controller=new AbortController,vl.set(this,void 0),yl.set(this,()=>{}),ra.set(this,()=>{}),ia.set(this,void 0),_l.set(this,()=>{}),sa.set(this,()=>{}),On.set(this,{}),aa.set(this,!1),cu.set(this,!1),du.set(this,!1),Ri.set(this,!1),Gt(this,vl,new Promise((t,n)=>{Gt(this,yl,t,"f"),Gt(this,ra,n,"f")}),"f"),Gt(this,ia,new Promise((t,n)=>{Gt(this,_l,t,"f"),Gt(this,sa,n,"f")}),"f"),_e(this,vl,"f").catch(()=>{}),_e(this,ia,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},_e(this,bv,"m",OA).bind(this))},0)}_connected(){this.ended||(_e(this,yl,"f").call(this),this._emit("connect"))}get ended(){return _e(this,aa,"f")}get errored(){return _e(this,cu,"f")}get aborted(){return _e(this,du,"f")}abort(){this.controller.abort()}on(t,n){return(_e(this,On,"f")[t]||(_e(this,On,"f")[t]=[])).push({listener:n}),this}off(t,n){const r=_e(this,On,"f")[t];if(!r)return this;const i=r.findIndex(s=>s.listener===n);return i>=0&&r.splice(i,1),this}once(t,n){return(_e(this,On,"f")[t]||(_e(this,On,"f")[t]=[])).push({listener:n,once:!0}),this}emitted(t){return new Promise((n,r)=>{Gt(this,Ri,!0,"f"),t!=="error"&&this.once("error",r),this.once(t,n)})}async done(){Gt(this,Ri,!0,"f"),await _e(this,ia,"f")}_emit(t,...n){if(_e(this,aa,"f"))return;t==="end"&&(Gt(this,aa,!0,"f"),_e(this,_l,"f").call(this));const r=_e(this,On,"f")[t];if(r&&(_e(this,On,"f")[t]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...n))),t==="abort"){const i=n[0];!_e(this,Ri,"f")&&!(r!=null&&r.length)&&Promise.reject(i),_e(this,ra,"f").call(this,i),_e(this,sa,"f").call(this,i),this._emit("end");return}if(t==="error"){const i=n[0];!_e(this,Ri,"f")&&!(r!=null&&r.length)&&Promise.reject(i),_e(this,ra,"f").call(this,i),_e(this,sa,"f").call(this,i),this._emit("end")}}_emitFinal(){}}vl=new WeakMap,yl=new WeakMap,ra=new WeakMap,ia=new WeakMap,_l=new WeakMap,sa=new WeakMap,On=new WeakMap,aa=new WeakMap,cu=new WeakMap,du=new WeakMap,Ri=new WeakMap,bv=new WeakSet,OA=function(t){if(Gt(this,cu,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new Zt),t instanceof Zt)return Gt(this,du,!0,"f"),this._emit("abort",t);if(t instanceof ie)return this._emit("error",t);if(t instanceof Error){const n=new ie(t.message);return n.cause=t,this._emit("error",n)}return this._emit("error",new ie(String(t)))};function qA(e){return(e==null?void 0:e.$brand)==="auto-parseable-response-format"}function go(e){return(e==null?void 0:e.$brand)==="auto-parseable-tool"}function OH(e,t){return!t||!LA(t)?{...e,choices:e.choices.map(n=>({...n,message:{...n.message,parsed:null,tool_calls:n.message.tool_calls??[]}}))}:w0(e,t)}function w0(e,t){const n=e.choices.map(r=>{var i;if(r.finish_reason==="length")throw new yA;if(r.finish_reason==="content_filter")throw new _A;return{...r,message:{...r.message,tool_calls:((i=r.message.tool_calls)==null?void 0:i.map(s=>qH(t,s)))??[],parsed:r.message.content&&!r.message.refusal?$H(t,r.message.content):null}}});return{...e,choices:n}}function $H(e,t){var n,r;return((n=e.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=e.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function qH(e,t){var r;const n=(r=e.tools)==null?void 0:r.find(i=>{var s;return((s=i.function)==null?void 0:s.name)===t.function.name});return{...t,function:{...t.function,parsed_arguments:go(n)?n.$parseRaw(t.function.arguments):n!=null&&n.function.strict?JSON.parse(t.function.arguments):null}}}function LH(e,t){var r;if(!e)return!1;const n=(r=e.tools)==null?void 0:r.find(i=>{var s;return((s=i.function)==null?void 0:s.name)===t.function.name});return go(n)||(n==null?void 0:n.function.strict)||!1}function LA(e){var t;return qA(e.response_format)?!0:((t=e.tools)==null?void 0:t.some(n=>go(n)||n.type==="function"&&n.function.strict===!0))??!1}function FH(e){for(const t of e??[]){if(t.type!=="function")throw new ie(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(t.function.strict!==!0)throw new ie(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var dt=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Xe,Sv,fu,Ev,Nv,Cv,FA,kv;const gN=10;class DA extends $A{constructor(){super(...arguments),Xe.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(t){var r;this._chatCompletions.push(t),this._emit("chatCompletion",t);const n=(r=t.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),t}_addMessage(t,n=!0){if("content"in t||(t.content=null),this.messages.push(t),n){if(this._emit("message",t),(IA(t)||MA(t))&&t.content)this._emit("functionCallResult",t.content);else if(ns(t)&&t.function_call)this._emit("functionCall",t.function_call);else if(ns(t)&&t.tool_calls)for(const r of t.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new ie("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),dt(this,Xe,"m",Sv).call(this)}async finalMessage(){return await this.done(),dt(this,Xe,"m",fu).call(this)}async finalFunctionCall(){return await this.done(),dt(this,Xe,"m",Ev).call(this)}async finalFunctionCallResult(){return await this.done(),dt(this,Xe,"m",Nv).call(this)}async totalUsage(){return await this.done(),dt(this,Xe,"m",Cv).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const n=dt(this,Xe,"m",fu).call(this);n&&this._emit("finalMessage",n);const r=dt(this,Xe,"m",Sv).call(this);r&&this._emit("finalContent",r);const i=dt(this,Xe,"m",Ev).call(this);i&&this._emit("finalFunctionCall",i);const s=dt(this,Xe,"m",Nv).call(this);s!=null&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",dt(this,Xe,"m",Cv).call(this))}async _createChatCompletion(t,n,r){const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),dt(this,Xe,"m",FA).call(this,n);const s=await t.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(w0(s,n))}async _runChatCompletion(t,n,r){for(const i of n.messages)this._addMessage(i,!1);return await this._createChatCompletion(t,n,r)}async _runFunctions(t,n,r){var f;const i="function",{function_call:s="auto",stream:a,...o}=n,l=typeof s!="string"&&(s==null?void 0:s.name),{maxChatCompletions:u=gN}=r||{},c={};for(const h of n.functions)c[h.name||h.function.name]=h;const d=n.functions.map(h=>({name:h.name||h.function.name,parameters:h.parameters,description:h.description}));for(const h of n.messages)this._addMessage(h,!1);for(let h=0;h<u;++h){const m=(f=(await this._createChatCompletion(t,{...o,function_call:s,functions:d,messages:[...this.messages]},r)).choices[0])==null?void 0:f.message;if(!m)throw new ie("missing message in ChatCompletion response");if(!m.function_call)return;const{name:_,arguments:y}=m.function_call,v=c[_];if(v){if(l&&l!==_){const S=`Invalid function_call: ${JSON.stringify(_)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,name:_,content:S});continue}}else{const S=`Invalid function_call: ${JSON.stringify(_)}. Available options are: ${d.map(N=>JSON.stringify(N.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:_,content:S});continue}let w;try{w=mN(v)?await v.parse(y):y}catch(S){this._addMessage({role:i,name:_,content:S instanceof Error?S.message:String(S)});continue}const x=await v.function(w,this),E=dt(this,Xe,"m",kv).call(this,x);if(this._addMessage({role:i,name:_,content:E}),l)return}}async _runTools(t,n,r){var h,g,m;const i="tool",{tool_choice:s="auto",stream:a,...o}=n,l=typeof s!="string"&&((h=s==null?void 0:s.function)==null?void 0:h.name),{maxChatCompletions:u=gN}=r||{},c=n.tools.map(_=>{if(go(_)){if(!_.$callback)throw new ie("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:_.$callback,name:_.function.name,description:_.function.description||"",parameters:_.function.parameters,parse:_.$parseRaw,strict:!0}}}return _}),d={};for(const _ of c)_.type==="function"&&(d[_.function.name||_.function.function.name]=_.function);const f="tools"in n?c.map(_=>_.type==="function"?{type:"function",function:{name:_.function.name||_.function.function.name,parameters:_.function.parameters,description:_.function.description,strict:_.function.strict}}:_):void 0;for(const _ of n.messages)this._addMessage(_,!1);for(let _=0;_<u;++_){const v=(g=(await this._createChatCompletion(t,{...o,tool_choice:s,tools:f,messages:[...this.messages]},r)).choices[0])==null?void 0:g.message;if(!v)throw new ie("missing message in ChatCompletion response");if(!((m=v.tool_calls)!=null&&m.length))return;for(const w of v.tool_calls){if(w.type!=="function")continue;const x=w.id,{name:E,arguments:S}=w.function,N=d[E];if(N){if(l&&l!==E){const I=`Invalid tool_call: ${JSON.stringify(E)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:x,content:I});continue}}else{const I=`Invalid tool_call: ${JSON.stringify(E)}. Available options are: ${Object.keys(d).map(z=>JSON.stringify(z)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:x,content:I});continue}let A;try{A=mN(N)?await N.parse(S):S}catch(I){const z=I instanceof Error?I.message:String(I);this._addMessage({role:i,tool_call_id:x,content:z});continue}const k=await N.function(A,this),j=dt(this,Xe,"m",kv).call(this,k);if(this._addMessage({role:i,tool_call_id:x,content:j}),l)return}}}}Xe=new WeakSet,Sv=function(){return dt(this,Xe,"m",fu).call(this).content??null},fu=function(){let t=this.messages.length;for(;t-- >0;){const n=this.messages[t];if(ns(n)){const{function_call:r,...i}=n,s={...i,content:n.content??null,refusal:n.refusal??null};return r&&(s.function_call=r),s}}throw new ie("stream ended without producing a ChatCompletionMessage with role=assistant")},Ev=function(){var t,n;for(let r=this.messages.length-1;r>=0;r--){const i=this.messages[r];if(ns(i)&&(i!=null&&i.function_call))return i.function_call;if(ns(i)&&((t=i==null?void 0:i.tool_calls)!=null&&t.length))return(n=i.tool_calls.at(-1))==null?void 0:n.function}},Nv=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(IA(n)&&n.content!=null||MA(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var i;return r.role==="assistant"&&((i=r.tool_calls)==null?void 0:i.some(s=>s.type==="function"&&s.id===n.tool_call_id))}))return n.content}},Cv=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(t.completion_tokens+=n.completion_tokens,t.prompt_tokens+=n.prompt_tokens,t.total_tokens+=n.total_tokens);return t},FA=function(t){if(t.n!=null&&t.n>1)throw new ie("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},kv=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class Xa extends DA{static runFunctions(t,n,r){const i=new Xa,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(t,n,s)),i}static runTools(t,n,r){const i=new Xa,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(t,n,s)),i}_addMessage(t,n=!0){super._addMessage(t,n),ns(t)&&t.content&&this._emit("content",t.content)}}const zA=1,BA=2,UA=4,HA=8,VA=16,GA=32,WA=64,KA=128,XA=256,YA=KA|XA,QA=VA|GA|YA|WA,JA=zA|BA|QA,ZA=UA|HA,DH=JA|ZA,qe={STR:zA,NUM:BA,ARR:UA,OBJ:HA,NULL:VA,BOOL:GA,NAN:WA,INFINITY:KA,MINUS_INFINITY:XA,INF:YA,SPECIAL:QA,ATOM:JA,COLLECTION:ZA,ALL:DH};class zH extends Error{}class BH extends Error{}function UH(e,t=qe.ALL){if(typeof e!="string")throw new TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw new Error(`${e} is empty`);return HH(e.trim(),t)}const HH=(e,t)=>{const n=e.length;let r=0;const i=f=>{throw new zH(`${f} at position ${r}`)},s=f=>{throw new BH(`${f} at position ${r}`)},a=()=>(d(),r>=n&&i("Unexpected end of input"),e[r]==='"'?o():e[r]==="{"?l():e[r]==="["?u():e.substring(r,r+4)==="null"||qe.NULL&t&&n-r<4&&"null".startsWith(e.substring(r))?(r+=4,null):e.substring(r,r+4)==="true"||qe.BOOL&t&&n-r<4&&"true".startsWith(e.substring(r))?(r+=4,!0):e.substring(r,r+5)==="false"||qe.BOOL&t&&n-r<5&&"false".startsWith(e.substring(r))?(r+=5,!1):e.substring(r,r+8)==="Infinity"||qe.INFINITY&t&&n-r<8&&"Infinity".startsWith(e.substring(r))?(r+=8,1/0):e.substring(r,r+9)==="-Infinity"||qe.MINUS_INFINITY&t&&1<n-r&&n-r<9&&"-Infinity".startsWith(e.substring(r))?(r+=9,-1/0):e.substring(r,r+3)==="NaN"||qe.NAN&t&&n-r<3&&"NaN".startsWith(e.substring(r))?(r+=3,NaN):c()),o=()=>{const f=r;let h=!1;for(r++;r<n&&(e[r]!=='"'||h&&e[r-1]==="\\");)h=e[r]==="\\"?!h:!1,r++;if(e.charAt(r)=='"')try{return JSON.parse(e.substring(f,++r-Number(h)))}catch(g){s(String(g))}else if(qe.STR&t)try{return JSON.parse(e.substring(f,r-Number(h))+'"')}catch{return JSON.parse(e.substring(f,e.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{r++,d();const f={};try{for(;e[r]!=="}";){if(d(),r>=n&&qe.OBJ&t)return f;const h=o();d(),r++;try{const g=a();Object.defineProperty(f,h,{value:g,writable:!0,enumerable:!0,configurable:!0})}catch(g){if(qe.OBJ&t)return f;throw g}d(),e[r]===","&&r++}}catch{if(qe.OBJ&t)return f;i("Expected '}' at end of object")}return r++,f},u=()=>{r++;const f=[];try{for(;e[r]!=="]";)f.push(a()),d(),e[r]===","&&r++}catch{if(qe.ARR&t)return f;i("Expected ']' at end of array")}return r++,f},c=()=>{if(r===0){e==="-"&&qe.NUM&t&&i("Not sure what '-' is");try{return JSON.parse(e)}catch(h){if(qe.NUM&t)try{return e[e.length-1]==="."?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch{}s(String(h))}}const f=r;for(e[r]==="-"&&r++;e[r]&&!",]}".includes(e[r]);)r++;r==n&&!(qe.NUM&t)&&i("Unterminated number literal");try{return JSON.parse(e.substring(f,r))}catch{e.substring(f,r)==="-"&&qe.NUM&t&&i("Not sure what '-' is");try{return JSON.parse(e.substring(f,e.lastIndexOf("e")))}catch(g){s(String(g))}}},d=()=>{for(;r<n&&` 
\r	`.includes(e[r]);)r++};return a()},vN=e=>UH(e,qe.ALL^qe.NUM);var Ni=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},de=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},Te,Mn,Ci,ar,Qm,Jo,Jm,Zm,eg,Zo,tg,yN;class Ya extends DA{constructor(t){super(),Te.add(this),Mn.set(this,void 0),Ci.set(this,void 0),ar.set(this,void 0),Ni(this,Mn,t,"f"),Ni(this,Ci,[],"f")}get currentChatCompletionSnapshot(){return de(this,ar,"f")}static fromReadableStream(t){const n=new Ya(null);return n._run(()=>n._fromReadableStream(t)),n}static createChatCompletion(t,n,r){const i=new Ya(n);return i._run(()=>i._runChatCompletion(t,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(t,n,r){var a;super._createChatCompletion;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),de(this,Te,"m",Qm).call(this);const s=await t.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const o of s)de(this,Te,"m",Jm).call(this,o);if((a=s.controller.signal)!=null&&a.aborted)throw new Zt;return this._addChatCompletion(de(this,Te,"m",Zo).call(this))}async _fromReadableStream(t,n){var a;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),de(this,Te,"m",Qm).call(this),this._connected();const i=xn.fromReadableStream(t,this.controller);let s;for await(const o of i)s&&s!==o.id&&this._addChatCompletion(de(this,Te,"m",Zo).call(this)),de(this,Te,"m",Jm).call(this,o),s=o.id;if((a=i.controller.signal)!=null&&a.aborted)throw new Zt;return this._addChatCompletion(de(this,Te,"m",Zo).call(this))}[(Mn=new WeakMap,Ci=new WeakMap,ar=new WeakMap,Te=new WeakSet,Qm=function(){this.ended||Ni(this,ar,void 0,"f")},Jo=function(n){let r=de(this,Ci,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},de(this,Ci,"f")[n.index]=r,r)},Jm=function(n){var i,s,a,o,l,u,c,d,f,h,g,m,_,y,v;if(this.ended)return;const r=de(this,Te,"m",yN).call(this,n);this._emit("chunk",n,r);for(const w of n.choices){const x=r.choices[w.index];w.delta.content!=null&&((i=x.message)==null?void 0:i.role)==="assistant"&&((s=x.message)!=null&&s.content)&&(this._emit("content",w.delta.content,x.message.content),this._emit("content.delta",{delta:w.delta.content,snapshot:x.message.content,parsed:x.message.parsed})),w.delta.refusal!=null&&((a=x.message)==null?void 0:a.role)==="assistant"&&((o=x.message)!=null&&o.refusal)&&this._emit("refusal.delta",{delta:w.delta.refusal,snapshot:x.message.refusal}),((l=w.logprobs)==null?void 0:l.content)!=null&&((u=x.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(c=w.logprobs)==null?void 0:c.content,snapshot:((d=x.logprobs)==null?void 0:d.content)??[]}),((f=w.logprobs)==null?void 0:f.refusal)!=null&&((h=x.message)==null?void 0:h.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(g=w.logprobs)==null?void 0:g.refusal,snapshot:((m=x.logprobs)==null?void 0:m.refusal)??[]});const E=de(this,Te,"m",Jo).call(this,x);x.finish_reason&&(de(this,Te,"m",eg).call(this,x),E.current_tool_call_index!=null&&de(this,Te,"m",Zm).call(this,x,E.current_tool_call_index));for(const S of w.delta.tool_calls??[])E.current_tool_call_index!==S.index&&(de(this,Te,"m",eg).call(this,x),E.current_tool_call_index!=null&&de(this,Te,"m",Zm).call(this,x,E.current_tool_call_index)),E.current_tool_call_index=S.index;for(const S of w.delta.tool_calls??[]){const N=(_=x.message.tool_calls)==null?void 0:_[S.index];N!=null&&N.type&&((N==null?void 0:N.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(y=N.function)==null?void 0:y.name,index:S.index,arguments:N.function.arguments,parsed_arguments:N.function.parsed_arguments,arguments_delta:((v=S.function)==null?void 0:v.arguments)??""}):(N==null||N.type,void 0))}}},Zm=function(n,r){var a,o,l;if(de(this,Te,"m",Jo).call(this,n).done_tool_calls.has(r))return;const s=(a=n.message.tool_calls)==null?void 0:a[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const u=(l=(o=de(this,Mn,"f"))==null?void 0:o.tools)==null?void 0:l.find(c=>c.type==="function"&&c.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:go(u)?u.$parseRaw(s.function.arguments):u!=null&&u.function.strict?JSON.parse(s.function.arguments):null})}else s.type},eg=function(n){var i,s;const r=de(this,Te,"m",Jo).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const a=de(this,Te,"m",tg).call(this);this._emit("content.done",{content:n.message.content,parsed:a?a.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(i=n.logprobs)!=null&&i.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(s=n.logprobs)!=null&&s.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Zo=function(){if(this.ended)throw new ie("stream has ended, this shouldn't happen");const n=de(this,ar,"f");if(!n)throw new ie("request ended without sending any chunks");return Ni(this,ar,void 0,"f"),Ni(this,Ci,[],"f"),VH(n,de(this,Mn,"f"))},tg=function(){var r;const n=(r=de(this,Mn,"f"))==null?void 0:r.response_format;return qA(n)?n:null},yN=function(n){var r,i,s,a;let o=de(this,ar,"f");const{choices:l,...u}=n;o?Object.assign(o,u):o=Ni(this,ar,{...u,choices:[]},"f");for(const{delta:c,finish_reason:d,index:f,logprobs:h=null,...g}of n.choices){let m=o.choices[f];if(m||(m=o.choices[f]={finish_reason:d,index:f,message:{},logprobs:h,...g}),h)if(!m.logprobs)m.logprobs=Object.assign({},h);else{const{content:S,refusal:N,...A}=h;Object.assign(m.logprobs,A),S&&((r=m.logprobs).content??(r.content=[]),m.logprobs.content.push(...S)),N&&((i=m.logprobs).refusal??(i.refusal=[]),m.logprobs.refusal.push(...N))}if(d&&(m.finish_reason=d,de(this,Mn,"f")&&LA(de(this,Mn,"f")))){if(d==="length")throw new yA;if(d==="content_filter")throw new _A}if(Object.assign(m,g),!c)continue;const{content:_,refusal:y,function_call:v,role:w,tool_calls:x,...E}=c;if(Object.assign(m.message,E),y&&(m.message.refusal=(m.message.refusal||"")+y),w&&(m.message.role=w),v&&(m.message.function_call?(v.name&&(m.message.function_call.name=v.name),v.arguments&&((s=m.message.function_call).arguments??(s.arguments=""),m.message.function_call.arguments+=v.arguments)):m.message.function_call=v),_&&(m.message.content=(m.message.content||"")+_,!m.message.refusal&&de(this,Te,"m",tg).call(this)&&(m.message.parsed=vN(m.message.content))),x){m.message.tool_calls||(m.message.tool_calls=[]);for(const{index:S,id:N,type:A,function:k,...j}of x){const I=(a=m.message.tool_calls)[S]??(a[S]={});Object.assign(I,j),N&&(I.id=N),A&&(I.type=A),k&&(I.function??(I.function={name:k.name??"",arguments:""})),k!=null&&k.name&&(I.function.name=k.name),k!=null&&k.arguments&&(I.function.arguments+=k.arguments,LH(de(this,Mn,"f"),I)&&(I.function.parsed_arguments=vN(I.function.arguments)))}}}return o},Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("chunk",i=>{const s=n.shift();s?s.resolve(i):t.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,a)=>n.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new xn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function VH(e,t){const{id:n,choices:r,created:i,model:s,system_fingerprint:a,...o}=e,l={...o,id:n,choices:r.map(({message:u,finish_reason:c,index:d,logprobs:f,...h})=>{if(!c)throw new ie(`missing finish_reason for choice ${d}`);const{content:g=null,function_call:m,tool_calls:_,...y}=u,v=u.role;if(!v)throw new ie(`missing role for choice ${d}`);if(m){const{arguments:w,name:x}=m;if(w==null)throw new ie(`missing function_call.arguments for choice ${d}`);if(!x)throw new ie(`missing function_call.name for choice ${d}`);return{...h,message:{content:g,function_call:{arguments:w,name:x},role:v,refusal:u.refusal??null},finish_reason:c,index:d,logprobs:f}}return _?{...h,index:d,finish_reason:c,logprobs:f,message:{...y,role:v,content:g,refusal:u.refusal??null,tool_calls:_.map((w,x)=>{const{function:E,type:S,id:N,...A}=w,{arguments:k,name:j,...I}=E||{};if(N==null)throw new ie(`missing choices[${d}].tool_calls[${x}].id
${el(e)}`);if(S==null)throw new ie(`missing choices[${d}].tool_calls[${x}].type
${el(e)}`);if(j==null)throw new ie(`missing choices[${d}].tool_calls[${x}].function.name
${el(e)}`);if(k==null)throw new ie(`missing choices[${d}].tool_calls[${x}].function.arguments
${el(e)}`);return{...A,id:N,type:S,function:{...I,name:j,arguments:k}}})}}:{...h,message:{...y,content:g,role:v,refusal:u.refusal??null},finish_reason:c,index:d,logprobs:f}}),created:i,model:s,object:"chat.completion",...a?{system_fingerprint:a}:{}};return OH(l,t)}function el(e){return JSON.stringify(e)}class rs extends Ya{static fromReadableStream(t){const n=new rs(null);return n._run(()=>n._fromReadableStream(t)),n}static runFunctions(t,n,r){const i=new rs(null),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(t,n,s)),i}static runTools(t,n,r){const i=new rs(n),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(t,n,s)),i}}let eP=class extends ce{parse(t,n){return FH(t.tools),this._client.chat.completions.create(t,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>w0(r,t))}runFunctions(t,n){return t.stream?rs.runFunctions(this._client,t,n):Xa.runFunctions(this._client,t,n)}runTools(t,n){return t.stream?rs.runTools(this._client,t,n):Xa.runTools(this._client,t,n)}stream(t,n){return Ya.createChatCompletion(this._client,t,n)}};class Rv extends ce{constructor(){super(...arguments),this.completions=new eP(this._client)}}(function(e){e.Completions=eP})(Rv||(Rv={}));var K=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},St=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Be,jv,yn,wl,Kt,Jr,Ui,Vr,hu,Nt,xl,bl,wa,oa,la,_N,wN,xN,bN,SN,EN,NN;class en extends $A{constructor(){super(...arguments),Be.add(this),jv.set(this,[]),yn.set(this,{}),wl.set(this,{}),Kt.set(this,void 0),Jr.set(this,void 0),Ui.set(this,void 0),Vr.set(this,void 0),hu.set(this,void 0),Nt.set(this,void 0),xl.set(this,void 0),bl.set(this,void 0),wa.set(this,void 0)}[(jv=new WeakMap,yn=new WeakMap,wl=new WeakMap,Kt=new WeakMap,Jr=new WeakMap,Ui=new WeakMap,Vr=new WeakMap,hu=new WeakMap,Nt=new WeakMap,xl=new WeakMap,bl=new WeakMap,wa=new WeakMap,Be=new WeakSet,Symbol.asyncIterator)](){const t=[],n=[];let r=!1;return this.on("event",i=>{const s=n.shift();s?s.resolve(i):t.push(i)}),this.on("end",()=>{r=!0;for(const i of n)i.resolve(void 0);n.length=0}),this.on("abort",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),this.on("error",i=>{r=!0;for(const s of n)s.reject(i);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,a)=>n.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const n=new en;return n._run(()=>n._fromReadableStream(t)),n}async _fromReadableStream(t,n){var s;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=xn.fromReadableStream(t,this.controller);for await(const a of i)K(this,Be,"m",oa).call(this,a);if((s=i.controller.signal)!=null&&s.aborted)throw new Zt;return this._addRun(K(this,Be,"m",la).call(this))}toReadableStream(){return new xn(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,n,r,i,s){const a=new en;return a._run(()=>a._runToolAssistantStream(t,n,r,i,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createToolAssistantStream(t,n,r,i,s){var u;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...i,stream:!0},l=await t.submitToolOutputs(n,r,o,{...s,signal:this.controller.signal});this._connected();for await(const c of l)K(this,Be,"m",oa).call(this,c);if((u=l.controller.signal)!=null&&u.aborted)throw new Zt;return this._addRun(K(this,Be,"m",la).call(this))}static createThreadAssistantStream(t,n,r){const i=new en;return i._run(()=>i._threadAssistantStream(t,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(t,n,r,i){const s=new en;return s._run(()=>s._runAssistantStream(t,n,r,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return K(this,xl,"f")}currentRun(){return K(this,bl,"f")}currentMessageSnapshot(){return K(this,Kt,"f")}currentRunStepSnapshot(){return K(this,wa,"f")}async finalRunSteps(){return await this.done(),Object.values(K(this,yn,"f"))}async finalMessages(){return await this.done(),Object.values(K(this,wl,"f"))}async finalRun(){if(await this.done(),!K(this,Jr,"f"))throw Error("Final run was not received.");return K(this,Jr,"f")}async _createThreadAssistantStream(t,n,r){var o;const i=r==null?void 0:r.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...n,stream:!0},a=await t.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const l of a)K(this,Be,"m",oa).call(this,l);if((o=a.controller.signal)!=null&&o.aborted)throw new Zt;return this._addRun(K(this,Be,"m",la).call(this))}async _createAssistantStream(t,n,r,i){var l;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},o=await t.create(n,a,{...i,signal:this.controller.signal});this._connected();for await(const u of o)K(this,Be,"m",oa).call(this,u);if((l=o.controller.signal)!=null&&l.aborted)throw new Zt;return this._addRun(K(this,Be,"m",la).call(this))}static accumulateDelta(t,n){for(const[r,i]of Object.entries(n)){if(!t.hasOwnProperty(r)){t[r]=i;continue}let s=t[r];if(s==null){t[r]=i;continue}if(r==="index"||r==="type"){t[r]=i;continue}if(typeof s=="string"&&typeof i=="string")s+=i;else if(typeof s=="number"&&typeof i=="number")s+=i;else if(Ym(s)&&Ym(i))s=this.accumulateDelta(s,i);else if(Array.isArray(s)&&Array.isArray(i)){if(s.every(a=>typeof a=="string"||typeof a=="number")){s.push(...i);continue}for(const a of i){if(!Ym(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);const o=a.index;if(o==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const l=s[o];l==null?s.push(a):s[o]=this.accumulateDelta(l,a)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${s}`);t[r]=s}return t}_addRun(t){return t}async _threadAssistantStream(t,n,r){return await this._createThreadAssistantStream(n,t,r)}async _runAssistantStream(t,n,r,i){return await this._createAssistantStream(n,t,r,i)}async _runToolAssistantStream(t,n,r,i,s){return await this._createToolAssistantStream(r,t,n,i,s)}}oa=function(t){if(!this.ended)switch(St(this,xl,t,"f"),K(this,Be,"m",xN).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":K(this,Be,"m",NN).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":K(this,Be,"m",wN).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":K(this,Be,"m",_N).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},la=function(){if(this.ended)throw new ie("stream has ended, this shouldn't happen");if(!K(this,Jr,"f"))throw Error("Final run has not been received");return K(this,Jr,"f")},_N=function(t){const[n,r]=K(this,Be,"m",SN).call(this,t,K(this,Kt,"f"));St(this,Kt,n,"f"),K(this,wl,"f")[n.id]=n;for(const i of r){const s=n.content[i.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,n),t.data.delta.content)for(const i of t.data.delta.content){if(i.type=="text"&&i.text){let s=i.text,a=n.content[i.index];if(a&&a.type=="text")this._emit("textDelta",s,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=K(this,Ui,"f")){if(K(this,Vr,"f"))switch(K(this,Vr,"f").type){case"text":this._emit("textDone",K(this,Vr,"f").text,K(this,Kt,"f"));break;case"image_file":this._emit("imageFileDone",K(this,Vr,"f").image_file,K(this,Kt,"f"));break}St(this,Ui,i.index,"f")}St(this,Vr,n.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(K(this,Ui,"f")!==void 0){const i=t.data.content[K(this,Ui,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,K(this,Kt,"f"));break;case"text":this._emit("textDone",i.text,K(this,Kt,"f"));break}}K(this,Kt,"f")&&this._emit("messageDone",t.data),St(this,Kt,void 0,"f")}},wN=function(t){const n=K(this,Be,"m",bN).call(this,t);switch(St(this,wa,n,"f"),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const r=t.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==K(this,hu,"f")?this._emit("toolCallDelta",s,n.step_details.tool_calls[s.index]):(K(this,Nt,"f")&&this._emit("toolCallDone",K(this,Nt,"f")),St(this,hu,s.index,"f"),St(this,Nt,n.step_details.tool_calls[s.index],"f"),K(this,Nt,"f")&&this._emit("toolCallCreated",K(this,Nt,"f")));this._emit("runStepDelta",t.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":St(this,wa,void 0,"f"),t.data.step_details.type=="tool_calls"&&K(this,Nt,"f")&&(this._emit("toolCallDone",K(this,Nt,"f")),St(this,Nt,void 0,"f")),this._emit("runStepDone",t.data,n);break}},xN=function(t){K(this,jv,"f").push(t),this._emit("event",t)},bN=function(t){switch(t.event){case"thread.run.step.created":return K(this,yn,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let n=K(this,yn,"f")[t.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=t.data;if(r.delta){const i=en.accumulateDelta(n,r.delta);K(this,yn,"f")[t.data.id]=i}return K(this,yn,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":K(this,yn,"f")[t.data.id]=t.data;break}if(K(this,yn,"f")[t.data.id])return K(this,yn,"f")[t.data.id];throw new Error("No snapshot available")},SN=function(t,n){let r=[];switch(t.event){case"thread.message.created":return[t.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=t.data;if(i.delta.content)for(const s of i.delta.content)if(s.index in n.content){let a=n.content[s.index];n.content[s.index]=K(this,Be,"m",EN).call(this,s,a)}else n.content[s.index]=s,r.push(s);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},EN=function(t,n){return en.accumulateDelta(n,t)},NN=function(t){switch(St(this,bl,t.data,"f"),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":St(this,Jr,t.data,"f"),K(this,Nt,"f")&&(this._emit("toolCallDone",K(this,Nt,"f")),St(this,Nt,void 0,"f"));break}};class x0 extends ce{create(t,n,r){return this._client.post(`/threads/${t}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/threads/${t}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(t,n,r,i){return this._client.post(`/threads/${t}/messages/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(t,n={},r){return _t(n)?this.list(t,{},n):this._client.getAPIList(`/threads/${t}/messages`,b0,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n,r){return this._client.delete(`/threads/${t}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class b0 extends un{}x0.MessagesPage=b0;class S0 extends ce{retrieve(t,n,r,i={},s){return _t(i)?this.retrieve(t,n,r,{},i):this._client.get(`/threads/${t}/runs/${n}/steps/${r}`,{query:i,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(t,n,r={},i){return _t(r)?this.list(t,n,{},r):this._client.getAPIList(`/threads/${t}/runs/${n}/steps`,E0,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}}class E0 extends un{}S0.RunStepsPage=E0;class vo extends ce{constructor(){super(...arguments),this.steps=new S0(this._client)}create(t,n,r){const{include:i,...s}=n;return this._client.post(`/threads/${t}/runs`,{query:{include:i},body:s,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}retrieve(t,n,r){return this._client.get(`/threads/${t}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(t,n,r,i){return this._client.post(`/threads/${t}/runs/${n}`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(t,n={},r){return _t(n)?this.list(t,{},n):this._client.getAPIList(`/threads/${t}/runs`,N0,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(t,n,r){return this._client.post(`/threads/${t}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const i=await this.create(t,n,r);return await this.poll(t,i.id,r)}createAndStream(t,n,r){return en.createAssistantStream(t,this._client.beta.threads.runs,n,r)}async poll(t,n,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:s,response:a}=await this.retrieve(t,n,{...r,headers:{...r==null?void 0:r.headers,...i}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await po(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(t,n,r){return en.createAssistantStream(t,this._client.beta.threads.runs,n,r)}submitToolOutputs(t,n,r,i){return this._client.post(`/threads/${t}/runs/${n}/submit_tool_outputs`,{body:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(t,n,r,i){const s=await this.submitToolOutputs(t,n,r,i);return await this.poll(t,s.id,i)}submitToolOutputsStream(t,n,r,i){return en.createToolAssistantStream(t,n,this._client.beta.threads.runs,r,i)}}class N0 extends un{}vo.RunsPage=N0;vo.Steps=S0;vo.RunStepsPage=E0;class Ns extends ce{constructor(){super(...arguments),this.runs=new vo(this._client),this.messages=new x0(this._client)}create(t={},n){return _t(t)?this.create({},t):this._client.post("/threads",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/threads/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/threads/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n){return this._client.delete(`/threads/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}createAndRun(t,n){return this._client.post("/threads/runs",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:t.stream??!1})}async createAndRunPoll(t,n){const r=await this.createAndRun(t,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(t,n){return en.createThreadAssistantStream(t,this._client.beta.threads,n)}}Ns.Runs=vo;Ns.RunsPage=N0;Ns.Messages=x0;Ns.MessagesPage=b0;const GH=async e=>{const t=await Promise.allSettled(e),n=t.filter(i=>i.status==="rejected");if(n.length){for(const i of n)console.error(i.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of t)i.status==="fulfilled"&&r.push(i.value);return r};let C0=class extends ce{create(t,n,r){return this._client.post(`/vector_stores/${t}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/vector_stores/${t}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(t,n={},r){return _t(n)?this.list(t,{},n):this._client.getAPIList(`/vector_stores/${t}/files`,oc,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,n,r){return this._client.delete(`/vector_stores/${t}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const i=await this.create(t,n,r);return await this.poll(t,i.id,r)}async poll(t,n,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const s=await this.retrieve(t,n,{...r,headers:i}).withResponse(),a=s.data;switch(a.status){case"in_progress":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=s.response.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await po(o);break;case"failed":case"completed":return a}}}async upload(t,n,r){const i=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(t,{file_id:i.id},r)}async uploadAndPoll(t,n,r){const i=await this.upload(t,n,r);return await this.poll(t,i.id,r)}};class oc extends un{}C0.VectorStoreFilesPage=oc;class tP extends ce{create(t,n,r){return this._client.post(`/vector_stores/${t}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,n,r){return this._client.get(`/vector_stores/${t}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(t,n,r){return this._client.post(`/vector_stores/${t}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(t,n,r){const i=await this.create(t,n);return await this.poll(t,i.id,r)}listFiles(t,n,r={},i){return _t(r)?this.listFiles(t,n,{},r):this._client.getAPIList(`/vector_stores/${t}/file_batches/${n}/files`,oc,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async poll(t,n,r){const i={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:s,response:a}=await this.retrieve(t,n,{...r,headers:i}).withResponse();switch(s.status){case"in_progress":let o=5e3;if(r!=null&&r.pollIntervalMs)o=r.pollIntervalMs;else{const l=a.headers.get("openai-poll-after-ms");if(l){const u=parseInt(l);isNaN(u)||(o=u)}}await po(o);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(t,{files:n,fileIds:r=[]},i){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=(i==null?void 0:i.maxConcurrency)??5,a=Math.min(s,n.length),o=this._client,l=n.values(),u=[...r];async function c(f){for(let h of f){const g=await o.files.create({file:h,purpose:"assistants"},i);u.push(g.id)}}const d=Array(a).fill(l).map(c);return await GH(d),await this.createAndPoll(t,{file_ids:u})}}class Cs extends ce{constructor(){super(...arguments),this.files=new C0(this._client),this.fileBatches=new tP(this._client)}create(t,n){return this._client.post("/vector_stores",{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(t,n){return this._client.get(`/vector_stores/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(t,n,r){return this._client.post(`/vector_stores/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(t={},n){return _t(t)?this.list({},t):this._client.getAPIList("/vector_stores",k0,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(t,n){return this._client.delete(`/vector_stores/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class k0 extends un{}Cs.VectorStoresPage=k0;Cs.Files=C0;Cs.VectorStoreFilesPage=oc;Cs.FileBatches=tP;class yi extends ce{constructor(){super(...arguments),this.vectorStores=new Cs(this._client),this.chat=new Rv(this._client),this.assistants=new y0(this._client),this.threads=new Ns(this._client)}}yi.VectorStores=Cs;yi.VectorStoresPage=k0;yi.Assistants=y0;yi.AssistantsPage=_0;yi.Threads=Ns;class nP extends ce{create(t,n){return this._client.post("/completions",{body:t,...n,stream:t.stream??!1})}}class rP extends ce{create(t,n){return this._client.post("/embeddings",{body:t,...n})}}class R0 extends ce{create(t,n){return this._client.post("/files",ms({body:t,...n}))}retrieve(t,n){return this._client.get(`/files/${t}`,n)}list(t={},n){return _t(t)?this.list({},t):this._client.getAPIList("/files",j0,{query:t,...n})}del(t,n){return this._client.delete(`/files/${t}`,n)}content(t,n){return this._client.get(`/files/${t}/content`,{...n,__binaryResponse:!0})}retrieveContent(t,n){return this._client.get(`/files/${t}/content`,{...n,headers:{Accept:"application/json",...n==null?void 0:n.headers}})}async waitForProcessing(t,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const i=new Set(["processed","error","deleted"]),s=Date.now();let a=await this.retrieve(t);for(;!a.status||!i.has(a.status);)if(await po(n),a=await this.retrieve(t),Date.now()-s>r)throw new p0({message:`Giving up on waiting for file ${t} to finish processing after ${r} milliseconds.`});return a}}class j0 extends un{}R0.FileObjectsPage=j0;class A0 extends ce{list(t,n={},r){return _t(n)?this.list(t,{},n):this._client.getAPIList(`/fine_tuning/jobs/${t}/checkpoints`,P0,{query:n,...r})}}class P0 extends un{}A0.FineTuningJobCheckpointsPage=P0;class ks extends ce{constructor(){super(...arguments),this.checkpoints=new A0(this._client)}create(t,n){return this._client.post("/fine_tuning/jobs",{body:t,...n})}retrieve(t,n){return this._client.get(`/fine_tuning/jobs/${t}`,n)}list(t={},n){return _t(t)?this.list({},t):this._client.getAPIList("/fine_tuning/jobs",T0,{query:t,...n})}cancel(t,n){return this._client.post(`/fine_tuning/jobs/${t}/cancel`,n)}listEvents(t,n={},r){return _t(n)?this.listEvents(t,{},n):this._client.getAPIList(`/fine_tuning/jobs/${t}/events`,I0,{query:n,...r})}}class T0 extends un{}class I0 extends un{}ks.FineTuningJobsPage=T0;ks.FineTuningJobEventsPage=I0;ks.Checkpoints=A0;ks.FineTuningJobCheckpointsPage=P0;class yo extends ce{constructor(){super(...arguments),this.jobs=new ks(this._client)}}yo.Jobs=ks;yo.FineTuningJobsPage=T0;yo.FineTuningJobEventsPage=I0;class iP extends ce{createVariation(t,n){return this._client.post("/images/variations",ms({body:t,...n}))}edit(t,n){return this._client.post("/images/edits",ms({body:t,...n}))}generate(t,n){return this._client.post("/images/generations",{body:t,...n})}}class M0 extends ce{retrieve(t,n){return this._client.get(`/models/${t}`,n)}list(t){return this._client.getAPIList("/models",O0,t)}del(t,n){return this._client.delete(`/models/${t}`,n)}}class O0 extends MH{}M0.ModelsPage=O0;class sP extends ce{create(t,n){return this._client.post("/moderations",{body:t,...n})}}class aP extends ce{create(t,n,r){return this._client.post(`/uploads/${t}/parts`,ms({body:n,...r}))}}class $0 extends ce{constructor(){super(...arguments),this.parts=new aP(this._client)}create(t,n){return this._client.post("/uploads",{body:t,...n})}cancel(t,n){return this._client.post(`/uploads/${t}/cancel`,n)}complete(t,n,r){return this._client.post(`/uploads/${t}/complete`,{body:n,...r})}}$0.Parts=aP;var oP;class se extends xH{constructor({baseURL:t=Qo("OPENAI_BASE_URL"),apiKey:n=Qo("OPENAI_API_KEY"),organization:r=Qo("OPENAI_ORG_ID")??null,project:i=Qo("OPENAI_PROJECT_ID")??null,...s}={}){if(n===void 0)throw new ie("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const a={apiKey:n,organization:r,project:i,...s,baseURL:t||"https://api.openai.com/v1"};if(!a.dangerouslyAllowBrowser&&TH())throw new ie(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:a.baseURL,timeout:a.timeout??6e5,httpAgent:a.httpAgent,maxRetries:a.maxRetries,fetch:a.fetch}),this.completions=new nP(this),this.chat=new m0(this),this.embeddings=new rP(this),this.files=new R0(this),this.images=new iP(this),this.audio=new mo(this),this.moderations=new sP(this),this.models=new M0(this),this.fineTuning=new yo(this),this.beta=new yi(this),this.batches=new g0(this),this.uploads=new $0(this),this._options=a,this.apiKey=n,this.organization=r,this.project=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(t){return iH(t,{arrayFormat:"brackets"})}}oP=se;se.OpenAI=oP;se.DEFAULT_TIMEOUT=6e5;se.OpenAIError=ie;se.APIError=Ve;se.APIConnectionError=ic;se.APIConnectionTimeoutError=p0;se.APIUserAbortError=Zt;se.NotFoundError=hA;se.ConflictError=pA;se.RateLimitError=gA;se.BadRequestError=cA;se.AuthenticationError=dA;se.InternalServerError=vA;se.PermissionDeniedError=fA;se.UnprocessableEntityError=mA;se.toFile=SA;se.fileFromPath=lA;se.Completions=nP;se.Chat=m0;se.Embeddings=rP;se.Files=R0;se.FileObjectsPage=j0;se.Images=iP;se.Audio=mo;se.Moderations=sP;se.Models=M0;se.ModelsPage=O0;se.FineTuning=yo;se.Beta=yi;se.Batches=g0;se.BatchesPage=v0;se.Uploads=$0;const WH=[{id:"Lehrer1",name:"Lehrerin Frau Müller",type:"human",demographic_data:{age:35,gender:"weiblich",ethnic_background:"Deutsch"},education:{education_level:"Master",class_level:"Keine spezifische Klassenstufe",subject_focus:"Mathematik"},competencies:{subject_competencies:["Mathematikdidaktik","Differenzierung","Sprachförderung"],cognitive_competencies:["Kritisches Denken","Problemlösung"],methodical_competencies:["Projektmanagement","Differenzierte Lehrmethoden"],affective_competencies:["Empathie","Geduld"],digital_competencies:["Digitale Lehrtools","Lernplattformen"],language_skills:{languages:["Deutsch","Englisch"],proficiency_levels:{Deutsch:"Muttersprache",Englisch:"B2"}}},social_form:"Lehrkraft",learning_requirements:{learning_preferences:["Visuell","Interaktiv"],special_needs:[],technical_requirements:["Laptop","Dokumentenkamera"]},interests_and_goals:{interests:["Mathematikdidaktik","Inklusive Bildung"],goals:["Erfolgreiche Vermittlung","Individuelle Förderung"],motivation:{type:"intrinsic",level:"high"}},social_structure:{group_size:1,heterogeneity:"n/a"}},{id:"Gruppe1",name:"Schüler Hauptgruppe",type:"group",demographic_data:{age_range:"13-14",gender_distribution:"gemischt",ethnic_background:"Gemischt"},education:{education_level:"7. Klasse",class_level:"Mittelstufe",subject_focus:"Mathematik"},competencies:{subject_competencies:["Grundrechenarten","Mathematisches Denken"],cognitive_competencies:["Logisches Denken"],methodical_competencies:["Gruppenarbeit"],affective_competencies:["Teamfähigkeit"],digital_competencies:["Grundlegende PC-Kenntnisse"],language_skills:{languages:["Deutsch"],proficiency_levels:{Deutsch:"Muttersprache"}}},social_form:"Klassenverband",learning_requirements:{learning_preferences:["Praktisch","Visuell"],special_needs:[],technical_requirements:["Taschenrechner"]},interests_and_goals:{interests:["Mathematik","Gruppenarbeit"],goals:["Verständnis der Addition"],motivation:{type:"mixed",level:"medium"}},social_structure:{group_size:15,heterogeneity:"mittel"}},{id:"Gruppe2",name:"Schüler Sprachfördergruppe",type:"group",demographic_data:{age_range:"13-14",gender_distribution:"gemischt",ethnic_background:"Gemischt"},education:{education_level:"7. Klasse",class_level:"Mittelstufe",subject_focus:"Mathematik"},competencies:{subject_competencies:["Grundrechenarten"],cognitive_competencies:["Logisches Denken"],methodical_competencies:["Gruppenarbeit"],affective_competencies:["Teamfähigkeit"],digital_competencies:["Grundlegende PC-Kenntnisse"],language_skills:{languages:["Deutsch"],proficiency_levels:{Deutsch:"A2-B1"}}},social_form:"Fördergruppe",learning_requirements:{learning_preferences:["Visuell","Praktisch"],special_needs:["Sprachförderung"],technical_requirements:["Tablet","Übersetzungs-App"]},interests_and_goals:{interests:["Mathematik","Sprachen"],goals:["Verständnis der Addition","Sprachverbesserung"],motivation:{type:"intrinsic",level:"high"}},social_structure:{group_size:5,heterogeneity:"hoch"}}],KH=[{id:"Env1",name:"Mathematik-Klassenraum",description:"Klassenraum mit digitaler und analoger Ausstattung für Mathematikunterricht",materials:[{id:"Mat1",name:"Arbeitsblätter Addition",material_type:"Arbeitsblatt",access_link:"materials/addition_standard.pdf",source:"manual"},{id:"Mat2",name:"Visualisierungskarten",material_type:"Bildkarten",access_link:"materials/visual_cards.pdf",source:"manual"},{id:"Mat3",name:"Mehrsprachiges Mathe-Glossar",material_type:"Glossar",access_link:"materials/math_glossary.pdf",source:"manual"}],tools:[{id:"Tool1",name:"Dokumentenkamera",tool_type:"Hardware",access_link:"",source:"manual"},{id:"Tool2",name:"Taschenrechner",tool_type:"Hardware",access_link:"",source:"manual"},{id:"Tool3",name:"Mathematik-App",tool_type:"Software",access_link:"apps/math_trainer",source:"manual"}],services:[{id:"Service1",name:"Sprachunterstützung",service_type:"Förderung",access_link:"",source:"manual"},{id:"Service2",name:"Mathematische Förderung",service_type:"Förderung",access_link:"",source:"manual"}]}],Et={metadata:{title:"Addition mit Sprachförderung",description:"Eine inklusive Mathematikstunde zur Addition mit besonderer Berücksichtigung von Sprachförderung",keywords:["Mathematik","Addition","Sprachförderung","Inklusion"],author:"Lehrerin Frau Müller",version:"1.0"},problem:{problem_description:"Einführung in die Addition unter Berücksichtigung unterschiedlicher Sprachniveaus",learning_goals:["Verständnis der Addition","Mathematische Fachsprache","Sprachkompetenz"],didactic_keywords:["Differenzierung","Sprachsensibel","Visuell"]},context:{target_group:"7. Klasse mit Sprachförderbedarf",subject:"Mathematik",educational_level:"Sekundarstufe I",prerequisites:"Grundlegendes Zahlenverständnis",time_frame:"45 Minuten"},influence_factors:[{factor:"Sprachniveau",description:"Unterschiedliche Deutschkenntnisse der Lernenden"},{factor:"Vorwissen",description:"Heterogenes mathematisches Vorwissen"}],solution:{solution_description:"Differenzierter Unterricht mit visueller Unterstützung",didactic_approach:"Sprachsensibler Mathematikunterricht",didactic_template:{learning_sequences:[{sequence_id:"LS1",sequence_name:"Einführung in die Addition",time_frame:"30 Minuten",learning_goal:"Grundlegendes Verständnis der Addition",phases:[{phase_id:"P1",phase_name:"Aktivierung",time_frame:"10 Minuten",learning_goal:"Vorwissen aktivieren",activities:[{activity_id:"A1",name:"Zahlenspiel",description:"Spielerische Einführung mit visuellen Elementen",duration:10,roles:[{role_name:"Moderator",actor_id:"Lehrer1",task_description:"Leitet das Zahlenspiel und stellt gezielte Fragen",learning_environment:{environment_id:"Env1",selected_materials:["Mat1","Mat2","Mat3"],selected_tools:["Tool1"],selected_services:["Service1"]}},{role_name:"Teilnehmer Hauptgruppe",actor_id:"Gruppe1",task_description:"Aktive Teilnahme am Zahlenspiel",learning_environment:{environment_id:"Env1",selected_materials:["Mat1","Mat2"],selected_tools:["Tool2"],selected_services:[]}},{role_name:"Teilnehmer Sprachförderung",actor_id:"Gruppe2",task_description:"Teilnahme am Zahlenspiel mit sprachlicher Unterstützung",learning_environment:{environment_id:"Env1",selected_materials:["Mat2","Mat3"],selected_tools:["Tool2","Tool3"],selected_services:["Service1"]}}],goal:"Spielerisches Aufwärmen und Aktivierung des Vorwissens",prerequisite_activity:null,transition_type:"sequential",condition_description:null,next_activity:["A2"],assessment:{type:"formative",methods:["Beobachtung"],criteria:["Aktive Teilnahme","Grundverständnis"]}}],prerequisite_phase:null,transition_type:"sequential",condition_description:null,next_phase:"P2"},{phase_id:"P2",phase_name:"Erarbeitung",time_frame:"20 Minuten",learning_goal:"Verständnis der Additionsregeln",activities:[{activity_id:"A2",name:"Regelentdeckung",description:"Entdeckung der Additionsregeln anhand von Beispielen",duration:20,roles:[{role_name:"Anleiter",actor_id:"Lehrer1",task_description:"Begleitet den Entdeckungsprozess und unterstützt bei sprachlichen Herausforderungen",learning_environment:{environment_id:"Env1",selected_materials:["Mat1","Mat2","Mat3"],selected_tools:["Tool1"],selected_services:["Service1"]}},{role_name:"Lerngruppe Standard",actor_id:"Gruppe1",task_description:"Erarbeitet die Regeln in Partnerarbeit",learning_environment:{environment_id:"Env1",selected_materials:["Mat1","Mat2"],selected_tools:["Tool2"],selected_services:[]}},{role_name:"Lerngruppe Sprachförderung",actor_id:"Gruppe2",task_description:"Erarbeitet die Regeln mit sprachlicher Unterstützung und visualisierten Beispielen",learning_environment:{environment_id:"Env1",selected_materials:["Mat2","Mat3"],selected_tools:["Tool2","Tool3"],selected_services:["Service1","Service2"]}}],goal:"Selbstständige Erarbeitung der Additionsregeln",prerequisite_activity:"A1",transition_type:"sequential",condition_description:null,next_activity:["A3"],assessment:{type:"formative",methods:["Peer-Feedback","Selbstreflexion"],criteria:["Regelverständnis","Zusammenarbeit"]}}],prerequisite_phase:"P1",transition_type:"sequential",condition_description:null,next_phase:"P3"},{phase_id:"P3",phase_name:"Sicherung",time_frame:"15 Minuten",learning_goal:"Festigung der Additionsregeln",activities:[{activity_id:"A3",name:"Präsentation und Diskussion",description:"Vorstellen der entdeckten Regeln und gemeinsame Diskussion",duration:15,roles:[{role_name:"Moderator",actor_id:"Lehrer1",task_description:"Moderiert die Diskussion und fasst Ergebnisse zusammen",learning_environment:{environment_id:"Env1",selected_materials:["Mat1","Mat2","Mat3"],selected_tools:["Tool1"],selected_services:["Service1"]}},{role_name:"Präsentierende Hauptgruppe",actor_id:"Gruppe1",task_description:"Stellt eigene Erkenntnisse vor",learning_environment:{environment_id:"Env1",selected_materials:["Mat1","Mat2"],selected_tools:["Tool1"],selected_services:[]}},{role_name:"Präsentierende Sprachfördergruppe",actor_id:"Gruppe2",task_description:"Stellt Erkenntnisse mit visueller Unterstützung vor",learning_environment:{environment_id:"Env1",selected_materials:["Mat2","Mat3"],selected_tools:["Tool1","Tool3"],selected_services:["Service1"]}}],goal:"Gemeinsames Verständnis der Additionsregeln",prerequisite_activity:"A2",transition_type:"sequential",condition_description:null,next_activity:[],assessment:{type:"summative",methods:["Präsentation","Diskussionsbeteiligung"],criteria:["Verständnis","Kommunikationsfähigkeit"]}}],prerequisite_phase:"P2",transition_type:"sequential",condition_description:null,next_phase:null}],prerequisite_learningsequence:null,transition_type:"sequential",condition_description:null,next_learningsequence:[]}]}},consequences:{advantages:["Differenzierte Förderung","Sprachsensible Gestaltung","Visuelle Unterstützung"],disadvantages:["Hoher Vorbereitungsaufwand","Komplexe Materialerstellung"]},implementation_notes:[{note_id:"N1",description:"Materialien mehrsprachig vorbereiten"},{note_id:"N2",description:"Visualisierungen für alle Konzepte erstellen"}],related_patterns:["Sprachsensibler Fachunterricht","Differenzierte Gruppenarbeit"],feedback:{comments:[]},sources:[{source_id:"S1",title:"Sprachsensibler Mathematikunterricht",author:"Meyer, M.",year:2023,publisher:"Bildungsverlag",url:"https://example.com/math-language"}],actors:WH,environments:KH};async function XH(e,t,n,r){const i=new se({apiKey:r,dangerouslyAllowBrowser:!0}),s=`
Please help complete or modify this template based on the user's instructions.

Current template:
${JSON.stringify(e,null,2)}

Example template for reference:
${JSON.stringify(Et,null,2)}

Additional hints for sequencing:
- Sequential: fixed order of elements
- Parallel: simultaneous execution of activities
- Conditional: transitions based on conditions
- Branching: selection between different paths
- Looping: repetition of an activity based on feedback
- Optional activities: voluntary choice between activities

User instructions:
${t}

Please return the modified template as a JSON object.
`,o=(await i.chat.completions.create({model:n,messages:[{role:"system",content:"You are a helpful assistant."},{role:"user",content:s}],temperature:.7,response_format:{type:"json_object"}})).choices[0].message.content;if(!o)throw new Error("No response from OpenAI");return JSON.parse(o)}const YH=[{id:"gpt-4o-mini",name:"GPT-4O Mini"},{id:"gpt-4o",name:"GPT-4O"},{id:"gpt-4-1106-preview",name:"GPT-4 Turbo"},{id:"gpt-4",name:"GPT-4"}];function QH(){const e=Nn(),[t,n]=C.useState(""),[r,i]=C.useState("gpt-4o"),[s,a]=C.useState(""),[o,l]=C.useState(!1),[u,c]=C.useState(null),[d,f]=C.useState(!1),h={metadata:e.metadata,problem:e.problem,context:e.context,influence_factors:e.influence_factors,solution:e.solution,consequences:e.consequences,implementation_notes:e.implementation_notes,related_patterns:e.related_patterns,feedback:e.feedback,sources:e.sources,actors:e.actors,environments:e.environments},g=async()=>{if(!t){c("Please enter your OpenAI API key");return}if(!s){c("Please enter your instructions");return}l(!0),c(null),f(!1);try{const m=await XH(h,s,r,t);e.setMetadata(m.metadata),e.setProblem(m.problem),e.setContext(m.context),e.setInfluenceFactors(m.influence_factors),e.setSolution(m.solution),e.setConsequences(m.consequences),e.setImplementationNotes(m.implementation_notes),e.setRelatedPatterns(m.related_patterns),e.setFeedback(m.feedback),e.setSources(m.sources),e.setActors(m.actors),e.setEnvironments(m.environments),f(!0),a("")}catch(m){c(m instanceof Error?m.message:"An error occurred")}finally{l(!1)}};return p.jsxs("div",{className:"space-y-6",children:[p.jsx("h1",{className:"text-2xl font-bold",children:"AI Agent"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"OpenAI API Key"}),p.jsx("input",{type:"password",value:t,onChange:m=>n(m.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"sk-..."})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"AI Model"}),p.jsx("select",{value:r,onChange:m=>i(m.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:YH.map(m=>p.jsx("option",{value:m.id,children:m.name},m.id))})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Template"}),p.jsx("div",{className:"h-[40vh] border rounded-lg overflow-hidden bg-gray-50",children:p.jsx(Zj,{value:JSON.stringify(h,null,2),onChange:()=>{}})})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instructions for AI"}),p.jsx("textarea",{value:s,onChange:m=>a(m.target.value),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Enter your instructions for modifying the template..."})]}),u&&p.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-3 rounded relative",children:p.jsx("span",{className:"block sm:inline",children:u})}),d&&p.jsx("div",{className:"bg-green-50 border border-green-400 text-green-700 px-4 py-3 rounded relative",children:p.jsx("span",{className:"block sm:inline",children:"Template successfully updated!"})}),p.jsx("div",{className:"flex justify-end",children:p.jsx("button",{onClick:g,disabled:o,className:`px-4 py-2 rounded text-white ${o?"bg-blue-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"}`,children:o?"Processing...":"Process with AI"})})]})}function JH(){const e=Nn(),t=()=>{const s={metadata:e.metadata,problem:e.problem,context:e.context,influence_factors:e.influence_factors,solution:e.solution,consequences:e.consequences,implementation_notes:e.implementation_notes,related_patterns:e.related_patterns,feedback:e.feedback,sources:e.sources,actors:e.actors,environments:e.environments},a=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),o=URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download="template.json",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)},n=s=>{var l;const a=(l=s.target.files)==null?void 0:l[0];if(!a)return;const o=new FileReader;o.onload=u=>{var c;try{const d=(c=u.target)==null?void 0:c.result,f=JSON.parse(d);f.metadata&&e.setMetadata(f.metadata),f.problem&&e.setProblem(f.problem),f.context&&e.setContext(f.context),f.influence_factors&&e.setInfluenceFactors(f.influence_factors),f.solution&&e.setSolution(f.solution),f.consequences&&e.setConsequences(f.consequences),f.implementation_notes&&e.setImplementationNotes(f.implementation_notes),f.related_patterns&&e.setRelatedPatterns(f.related_patterns),f.feedback&&e.setFeedback(f.feedback),f.sources&&e.setSources(f.sources),f.actors&&e.setActors(f.actors),f.environments&&e.setEnvironments(f.environments)}catch(d){console.error("Error loading template:",d),alert("Error loading template file")}},o.readAsText(a)},r=()=>{e.setMetadata(Et.metadata),e.setProblem(Et.problem),e.setContext(Et.context),e.setInfluenceFactors(Et.influence_factors),e.setSolution(Et.solution),e.setConsequences(Et.consequences),e.setImplementationNotes(Et.implementation_notes),e.setRelatedPatterns(Et.related_patterns),e.setFeedback(Et.feedback),e.setSources(Et.sources),e.setActors(Et.actors),e.setEnvironments(Et.environments)},i=()=>{e.setMetadata({title:"",description:"",keywords:[],author:"",version:"1.0"}),e.setProblem({problem_description:"",learning_goals:[],didactic_keywords:[]}),e.setContext({target_group:"",subject:"",educational_level:"",prerequisites:"",time_frame:""}),e.setInfluenceFactors([]),e.setSolution({solution_description:"",didactic_approach:"",didactic_template:{learning_sequences:[]}}),e.setConsequences({advantages:[],disadvantages:[]}),e.setImplementationNotes([]),e.setRelatedPatterns([]),e.setFeedback({comments:[]}),e.setSources([]),e.setActors([]),e.setEnvironments([])};return p.jsxs("div",{className:"flex justify-end space-x-4",children:[p.jsx("button",{onClick:t,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",children:"Template speichern"}),p.jsxs("label",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 cursor-pointer",children:["Template laden",p.jsx("input",{type:"file",accept:".json",onChange:n,className:"hidden"})]}),p.jsx("button",{onClick:r,className:"px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600",children:"Beispiel laden"}),p.jsx("button",{onClick:i,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Alles löschen"})]})}function ZH(){return p.jsx(fO,{children:p.jsxs("div",{className:"min-h-screen bg-gray-50",children:[p.jsx(yO,{}),p.jsxs("div",{className:"container mx-auto py-6 px-4",children:[p.jsx(JH,{}),p.jsx("div",{className:"mt-6",children:p.jsxs(sO,{children:[p.jsx(or,{path:"/",element:p.jsx(QO,{})}),p.jsx(or,{path:"/pattern-elements",element:p.jsx(JO,{})}),p.jsx(or,{path:"/actors",element:p.jsx(t3,{})}),p.jsx(or,{path:"/environments",element:p.jsx(s3,{})}),p.jsx(or,{path:"/course-flow",element:p.jsx(u3,{})}),p.jsx(or,{path:"/preview",element:p.jsx(KU,{})}),p.jsx(or,{path:"/ai-agent",element:p.jsx(QH,{})})]})})]})]})})}ng.createRoot(document.getElementById("root")).render(p.jsx(O.StrictMode,{children:p.jsx(ZH,{})}));
